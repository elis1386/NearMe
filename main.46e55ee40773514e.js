(self.webpackChunknearMe=self.webpackChunknearMe||[]).push([[179],{2011:(mt,be,V)=>{"use strict";V.d(be,{Dh:()=>re,GT:()=>oe,cc:()=>Te,hO:()=>Ue,on:()=>G,pX:()=>ie,xv:()=>pe});var d=V(4650),$=V(9260),k=V(2122);mt=V.hmd(mt);const te=["ngOnDestroy"],ie=(De,Ce,Oe,Me={})=>new Proxy(De,{get:(ke,Se)=>Oe.runOutsideAngular(()=>{var He;if(De[Se])return!(null===(He=Me?.spy)||void 0===He)&&He.get&&Me.spy.get(Se,De[Se]),De[Se];if(te.indexOf(Se)>-1)return()=>{};const X=Ce.toPromise().then(de=>{const ve=de&&de[Se];return"function"==typeof ve?ve.bind(de):ve&&ve.then?ve.then(Ke=>Oe.run(()=>Ke)):Oe.run(()=>ve)});return new Proxy(()=>{},{get:(de,ve)=>X[ve],apply:(de,ve,Ke)=>X.then($e=>{var Rt;const tt=$e&&$e(...Ke);return!(null===(Rt=Me?.spy)||void 0===Rt)&&Rt.apply&&Me.spy.apply(Se,Ke,tt),tt})})})}),oe=(De,Ce)=>{Ce.forEach(Oe=>{Object.getOwnPropertyNames(Oe.prototype||Oe).forEach(Me=>{Object.defineProperty(De.prototype,Me,Object.getOwnPropertyDescriptor(Oe.prototype||Oe,Me))})})};class ue{constructor(Ce){return Ce}}const re=new d.InjectionToken("angularfire2.app.options"),pe=new d.InjectionToken("angularfire2.app.name");function G(De,Ce,Oe){const ke="object"==typeof Oe&&Oe||{};ke.name=ke.name||"string"==typeof Oe&&Oe||"[DEFAULT]";const He=$.Z.apps.filter(X=>X&&X.name===ke.name)[0]||Ce.runOutsideAngular(()=>$.Z.initializeApp(De,ke));try{JSON.stringify(De)!==JSON.stringify(He.options)&&q("error",`${He.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(He)}const q=(De,...Ce)=>{(0,d.isDevMode)()&&typeof console<"u"&&console[De](...Ce)},Q={provide:ue,useFactory:G,deps:[re,d.NgZone,[new d.Optional,pe]]};let Ue=(()=>{class De{constructor(Oe){$.Z.registerVersion("angularfire",k.q4.full,"core"),$.Z.registerVersion("angularfire",k.q4.full,"app-compat"),$.Z.registerVersion("angular",d.VERSION.full,Oe.toString())}static initializeApp(Oe,Me){return{ngModule:De,providers:[{provide:re,useValue:Oe},{provide:pe,useValue:Me}]}}}return De.\u0275fac=function(Oe){return new(Oe||De)(d.\u0275\u0275inject(d.PLATFORM_ID))},De.\u0275mod=d.\u0275\u0275defineNgModule({type:De}),De.\u0275inj=d.\u0275\u0275defineInjector({providers:[Q]}),De})();function Te(De,Ce,Oe,Me,ke){const[,Se,He]=globalThis.\u0275AngularfireInstanceCache.find(X=>X[0]===De)||[];if(Se)return function qe(De,Ce){try{return De.toString()===Ce.toString()}catch{return De===Ce}}(ke,He)||(ye("error",`${Ce} was already initialized on the ${Oe} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:ke,was:He})),Se;{const X=Me();return globalThis.\u0275AngularfireInstanceCache.push([De,X,ke]),X}}const ut=!!mt.hot,ye=(De,...Ce)=>{(0,d.isDevMode)()&&typeof console<"u"&&console[De](...Ce)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(mt,be,V)=>{"use strict";V.d(be,{q4:()=>Zi,iC:()=>aa,fc:()=>lt,HU:()=>Pf,vb:()=>Ud,JM:()=>to,u3:()=>la});var d=V(4650),$=V(259),k=V(5861),te=V(9681),ie=V(2090),oe=V(4859),ue=V(1877),re=V(8766);const pe="@firebase/installations",G="0.6.4",q=1e4,Q=`w:${G}`,Ue="FIS_v2",Te="https://firebaseinstallations.googleapis.com/v1",qe=36e5,Ce=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Oe(D){return D instanceof ie.ZR&&D.code.includes("request-failed")}function Me({projectId:D}){return`${Te}/projects/${D}/installations`}function ke(D){return{token:D.token,requestStatus:2,expiresIn:$e(D.expiresIn),creationTime:Date.now()}}function Se(D,T){return He.apply(this,arguments)}function He(){return(He=(0,k.Z)(function*(D,T){const z=(yield T.json()).error;return Ce.create("request-failed",{requestName:D,serverCode:z.code,serverMessage:z.message,serverStatus:z.status})})).apply(this,arguments)}function X({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ve(D){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,k.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function $e(D){return Number(D.replace("s","000"))}function le(){return(le=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:R}){const z=Me(D),Y=X(D),ae=T.getImmediate({optional:!0});if(ae){const Dt=yield ae.getHeartbeatsHeader();Dt&&Y.append("x-firebase-client",Dt)}const ot={method:"POST",headers:Y,body:JSON.stringify({fid:R,authVersion:Ue,appId:D.appId,sdkVersion:Q})},ct=yield ve(()=>fetch(z,ot));if(ct.ok){const Dt=yield ct.json();return{fid:Dt.fid||R,registrationStatus:2,refreshToken:Dt.refreshToken,authToken:ke(Dt.authToken)}}throw yield Se("Create Installation",ct)})).apply(this,arguments)}function me(D){return new Promise(T=>{setTimeout(T,D)})}const Ne=/^[cdef][\w-]{21}$/,Ve="";function je(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const R=function nt(D){return function Ie(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Ne.test(R)?R:Ve}catch{return Ve}}function Ze(D){return`${D.appName}!${D.appId}`}const fn=new Map;function bt(D,T){const R=Ze(D);rn(R,T),function Fn(D,T){const R=function pn(){return!gn&&"BroadcastChannel"in self&&(gn=new BroadcastChannel("[Firebase] FID Change"),gn.onmessage=D=>{rn(D.data.key,D.data.fid)}),gn}();R&&R.postMessage({key:D,fid:T}),function lr(){0===fn.size&&gn&&(gn.close(),gn=null)}()}(R,T)}function rn(D,T){const R=fn.get(D);if(R)for(const z of R)z(T)}let gn=null;const Ur="firebase-installations-database",zi=1,Gn="firebase-installations-store";let ii=null;function Ei(){return ii||(ii=(0,re.X3)(Ur,zi,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Gn)}})),ii}function bn(D,T){return vr.apply(this,arguments)}function vr(){return(vr=(0,k.Z)(function*(D,T){const R=Ze(D),Y=(yield Ei()).transaction(Gn,"readwrite"),ae=Y.objectStore(Gn),Pe=yield ae.get(R);return yield ae.put(T,R),yield Y.done,(!Pe||Pe.fid!==T.fid)&&bt(D,T.fid),T})).apply(this,arguments)}function at(D){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,k.Z)(function*(D){const T=Ze(D),z=(yield Ei()).transaction(Gn,"readwrite");yield z.objectStore(Gn).delete(T),yield z.done})).apply(this,arguments)}function xr(D,T){return ir.apply(this,arguments)}function ir(){return(ir=(0,k.Z)(function*(D,T){const R=Ze(D),Y=(yield Ei()).transaction(Gn,"readwrite"),ae=Y.objectStore(Gn),Pe=yield ae.get(R),ot=T(Pe);return void 0===ot?yield ae.delete(R):yield ae.put(ot,R),yield Y.done,ot&&(!Pe||Pe.fid!==ot.fid)&&bt(D,ot.fid),ot})).apply(this,arguments)}function qn(D){return si.apply(this,arguments)}function si(){return si=(0,k.Z)(function*(D){let T;const R=yield xr(D.appConfig,z=>{const Y=function Lt(D){return ur(D||{fid:je(),registrationStatus:0})}(z),ae=function yt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ce.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},z=function kt(D,T){return Mn.apply(this,arguments)}(D,R);return{installationEntry:R,registrationPromise:z}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Rn(D)}:{installationEntry:T}}(D,Y);return T=ae.registrationPromise,ae.installationEntry});return R.fid===Ve?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}}),si.apply(this,arguments)}function Mn(){return Mn=(0,k.Z)(function*(D,T){try{const R=yield function tt(D,T){return le.apply(this,arguments)}(D,T);return bn(D.appConfig,R)}catch(R){throw Oe(R)&&409===R.customData.serverCode?yield at(D.appConfig):yield bn(D.appConfig,{fid:T.fid,registrationStatus:0}),R}}),Mn.apply(this,arguments)}function Rn(D){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,k.Z)(function*(D){let T=yield wr(D.appConfig);for(;1===T.registrationStatus;)yield me(100),T=yield wr(D.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:z}=yield qn(D);return z||R}return T})).apply(this,arguments)}function wr(D){return xr(D,T=>{if(!T)throw Ce.create("installation-not-found");return ur(T)})}function ur(D){return function xi(D){return 1===D.registrationStatus&&D.registrationTime+q<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Ni(){return(Ni=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:T},R){const z=function Xt(D,{fid:T}){return`${Me(D)}/${T}/authTokens:generate`}(D,R),Y=function de(D,{refreshToken:T}){const R=X(D);return R.append("Authorization",function Rt(D){return`${Ue} ${D}`}(T)),R}(D,R),ae=T.getImmediate({optional:!0});if(ae){const Dt=yield ae.getHeartbeatsHeader();Dt&&Y.append("x-firebase-client",Dt)}const ot={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:Q,appId:D.appId}})},ct=yield ve(()=>fetch(z,ot));if(ct.ok)return ke(yield ct.json());throw yield Se("Generate Auth Token",ct)})).apply(this,arguments)}function Vr(D){return Zn.apply(this,arguments)}function Zn(){return Zn=(0,k.Z)(function*(D,T=!1){let R;const z=yield xr(D.appConfig,ae=>{if(!tn(ae))throw Ce.create("not-registered");const Pe=ae.authToken;if(!T&&function Qn(D){return 2===D.requestStatus&&!function K(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+qe}(D)}(Pe))return ae;if(1===Pe.requestStatus)return R=function Be(D,T){return Ee.apply(this,arguments)}(D,T),ae;{if(!navigator.onLine)throw Ce.create("app-offline");const ot=function H(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}(ae);return R=function Et(D,T){return Nt.apply(this,arguments)}(D,ot),ot}});return R?yield R:z.authToken}),Zn.apply(this,arguments)}function Ee(){return(Ee=(0,k.Z)(function*(D,T){let R=yield rt(D.appConfig);for(;1===R.authToken.requestStatus;)yield me(100),R=yield rt(D.appConfig);const z=R.authToken;return 0===z.requestStatus?Vr(D,T):z})).apply(this,arguments)}function rt(D){return xr(D,T=>{if(!tn(T))throw Ce.create("not-registered");return function O(D){return 1===D.requestStatus&&D.requestTime+q<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Nt(){return Nt=(0,k.Z)(function*(D,T){try{const R=yield function $t(D,T){return Ni.apply(this,arguments)}(D,T),z=Object.assign(Object.assign({},T),{authToken:R});return yield bn(D.appConfig,z),R}catch(R){if(!Oe(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const z=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield bn(D.appConfig,z)}else yield at(D.appConfig);throw R}}),Nt.apply(this,arguments)}function tn(D){return void 0!==D&&2===D.registrationStatus}function P(){return(P=(0,k.Z)(function*(D){const T=D,{installationEntry:R,registrationPromise:z}=yield qn(T);return z?z.catch(console.error):Vr(T).catch(console.error),R.fid})).apply(this,arguments)}function fe(){return fe=(0,k.Z)(function*(D,T=!1){const R=D;return yield function st(D){return St.apply(this,arguments)}(R),(yield Vr(R,T)).token}),fe.apply(this,arguments)}function St(){return(St=(0,k.Z)(function*(D){const{registrationPromise:T}=yield qn(D);T&&(yield T)})).apply(this,arguments)}function Bu(D){return Ce.create("missing-app-config-values",{valueName:D})}const xl="installations",Ca=D=>{const T=D.getProvider("app").getImmediate(),R=function Rl(D){if(!D||!D.options)throw Bu("App Configuration");if(!D.name)throw Bu("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!D.options[R])throw Bu(R);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,te._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},zu=D=>{const T=D.getProvider("app").getImmediate(),R=(0,te._getProvider)(T,xl).getImmediate();return{getId:()=>function F(D){return P.apply(this,arguments)}(R),getToken:Y=>function J(D){return fe.apply(this,arguments)}(R,Y)}};(function $u(){(0,te._registerComponent)(new oe.wA(xl,Ca,"PUBLIC")),(0,te._registerComponent)(new oe.wA("installations-internal",zu,"PRIVATE"))})(),(0,te.registerVersion)(pe,G),(0,te.registerVersion)(pe,G,"esm2017");const cn="@firebase/remote-config",Pr=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Gs{constructor(T,R,z,Y){this.client=T,this.storage=R,this.storageCache=z,this.logger=Y}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const z=Date.now()-R,Y=z<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${z}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var R=this;return(0,k.Z)(function*(){const[z,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(T.cacheMaxAgeMillis,z))return Y;T.eTag=Y&&Y.eTag;const ae=yield R.client.fetch(T),Pe=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&Pe.push(R.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(Pe),ae})()}}function rs(D=navigator){return D.languages&&D.languages[0]||D.language}class Vn{constructor(T,R,z,Y,ae,Pe){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=z,this.projectId=Y,this.apiKey=ae,this.appId=Pe}fetch(T){var R=this;return(0,k.Z)(function*(){const[z,Y]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,ot={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ct={sdk_version:R.sdkVersion,app_instance_id:z,app_instance_id_token:Y,app_id:R.appId,language_code:rs()},Dt={method:"POST",headers:ot,body:JSON.stringify(ct)},Bt=fetch(Pe,Dt),Pt=new Promise((Gr,Yi)=>{T.signal.addEventListener(()=>{const el=new Error("The operation was aborted.");el.name="AbortError",Yi(el)})});let yn;try{yield Promise.race([Bt,Pt]),yn=yield Bt}catch(Gr){let Yi="fetch-client-network";throw"AbortError"===Gr?.name&&(Yi="fetch-timeout"),Pr.create(Yi,{originalErrorMessage:Gr?.message})}let kn=yn.status;const Ja=yn.headers.get("ETag")||void 0;let Qi,xo;if(200===yn.status){let Gr;try{Gr=yield yn.json()}catch(Yi){throw Pr.create("fetch-client-parse",{originalErrorMessage:Yi?.message})}Qi=Gr.entries,xo=Gr.state}if("INSTANCE_STATE_UNSPECIFIED"===xo?kn=500:"NO_CHANGE"===xo?kn=304:("NO_TEMPLATE"===xo||"EMPTY_CONFIG"===xo)&&(Qi={}),304!==kn&&200!==kn)throw Pr.create("fetch-status",{httpStatus:kn});return{status:kn,eTag:Ja,config:Qi}})()}}class jt{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,k.Z)(function*(){const z=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,z)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:z}){var Y=this;return(0,k.Z)(function*(){yield function qo(D,T){return new Promise((R,z)=>{const Y=Math.max(T-Date.now(),0),ae=setTimeout(R,Y);D.addEventListener(()=>{clearTimeout(ae),z(Pr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const ae=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function If(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ae))throw ae;const Pe={throttleEndTimeMillis:Date.now()+(0,ie.$s)(z),backoffCount:z+1};return yield Y.storage.setThrottleMetadata(Pe),Y.attemptFetch(T,Pe)}})()}}class yd{constructor(T,R,z,Y,ae){this.app=T,this._client=R,this._storageCache=z,this._storage=Y,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function vs(D,T){const R=D.target.error||void 0;return Pr.create(T,{originalErrorMessage:R&&R?.message})}const $i="app_namespace_store";class $r{constructor(T,R,z,Y=function Gg(){return new Promise((D,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=z=>{T(vs(z,"storage-open"))},R.onsuccess=z=>{D(z.target.result)},R.onupgradeneeded=z=>{0===z.oldVersion&&z.target.result.createObjectStore($i,{keyPath:"compositeKey"})}}catch(R){T(Pr.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=T,this.appName=R,this.namespace=z,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,k.Z)(function*(){const z=yield R.openDbPromise;return new Promise((Y,ae)=>{const ot=z.transaction([$i],"readonly").objectStore($i),ct=R.createCompositeKey(T);try{const Dt=ot.get(ct);Dt.onerror=Bt=>{ae(vs(Bt,"storage-get"))},Dt.onsuccess=Bt=>{const Pt=Bt.target.result;Y(Pt?Pt.value:void 0)}}catch(Dt){ae(Pr.create("storage-get",{originalErrorMessage:Dt?.message}))}})})()}set(T,R){var z=this;return(0,k.Z)(function*(){const Y=yield z.openDbPromise;return new Promise((ae,Pe)=>{const ct=Y.transaction([$i],"readwrite").objectStore($i),Dt=z.createCompositeKey(T);try{const Bt=ct.put({compositeKey:Dt,value:R});Bt.onerror=Pt=>{Pe(vs(Pt,"storage-set"))},Bt.onsuccess=()=>{ae()}}catch(Bt){Pe(Pr.create("storage-set",{originalErrorMessage:Bt?.message}))}})})()}delete(T){var R=this;return(0,k.Z)(function*(){const z=yield R.openDbPromise;return new Promise((Y,ae)=>{const ot=z.transaction([$i],"readwrite").objectStore($i),ct=R.createCompositeKey(T);try{const Dt=ot.delete(ct);Dt.onerror=Bt=>{ae(vs(Bt,"storage-delete"))},Dt.onsuccess=()=>{Y()}}catch(Dt){ae(Pr.create("storage-delete",{originalErrorMessage:Dt?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Er{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const R=T.storage.getLastFetchStatus(),z=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),ae=yield R;ae&&(T.lastFetchStatus=ae);const Pe=yield z;Pe&&(T.lastSuccessfulFetchTimestampMillis=Pe);const ot=yield Y;ot&&(T.activeConfig=ot)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function ss(){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,k.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function Wu(){(0,te._registerComponent)(new oe.wA("remote-config",function D(T,{instanceIdentifier:R}){const z=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Pr.create("registration-window");if(!(0,ie.hl)())throw Pr.create("indexed-db-unavailable");const{projectId:ae,apiKey:Pe,appId:ot}=z.options;if(!ae)throw Pr.create("registration-project-id");if(!Pe)throw Pr.create("registration-api-key");if(!ot)throw Pr.create("registration-app-id");const ct=new $r(ot,z.name,R=R||"firebase"),Dt=new Er(ct),Bt=new ue.Yd(cn);Bt.logLevel=ue.in.ERROR;const Pt=new Vn(Y,te.SDK_VERSION,R,ae,Pe,ot),yn=new jt(Pt,ct),kn=new Gs(yn,ct,Dt,Bt),Ja=new yd(z,kn,Dt,ct,Bt);return function ys(D){const T=(0,ie.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ja),Ja},"PUBLIC").setMultipleInstances(!0)),(0,te.registerVersion)(cn,"0.4.4"),(0,te.registerVersion)(cn,"0.4.4","esm2017")}();const Ks="/firebase-messaging-sw.js",Ko="/firebase-cloud-messaging-push-scope",Zo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qg="https://fcmregistrations.googleapis.com/v1",vd="google.c.a.c_id",Kg="google.c.a.c_l",Zg="google.c.a.ts",Sa="google.c.a.e";var os=(()=>{return(D=os||(os={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",os;var D})();function _o(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qg(D){const R=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),z=atob(R),Y=new Uint8Array(z.length);for(let ae=0;ae<z.length;++ae)Y[ae]=z.charCodeAt(ae);return Y}const Aa="fcm_token_details_db",Pi=5,wd="fcm_token_object_Store";function Qo(){return Qo=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(Aa))return null;let T=null;return(yield(0,re.X3)(Aa,Pi,{upgrade:(z=(0,k.Z)(function*(Y,ae,Pe,ot){var ct;if(ae<2||!Y.objectStoreNames.contains(wd))return;const Dt=ot.objectStore(wd),Bt=yield Dt.index("fcmSenderId").get(D);if(yield Dt.clear(),Bt)if(2===ae){const Pt=Bt;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;T={token:Pt.fcmToken,createTime:null!==(ct=Pt.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:_o(Pt.vapidKey)}}}else if(3===ae){const Pt=Bt;T={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:_o(Pt.auth),p256dh:_o(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:_o(Pt.vapidKey)}}}else if(4===ae){const Pt=Bt;T={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:_o(Pt.auth),p256dh:_o(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:_o(Pt.vapidKey)}}}}),function(ae,Pe,ot,ct){return z.apply(this,arguments)})})).close(),yield(0,re.Lj)(Aa),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),function Gu(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var z}),Qo.apply(this,arguments)}const Ed="firebase-messaging-database",Yg=1,ki="firebase-messaging-store";let Ma=null;function yo(){return Ma||(Ma=(0,re.X3)(Ed,Yg,{upgrade:(D,T)=>{0===T&&D.createObjectStore(ki)}})),Ma}function Ra(D){return vo.apply(this,arguments)}function vo(){return vo=(0,k.Z)(function*(D){const T=ws(D),z=yield(yield yo()).transaction(ki).objectStore(ki).get(T);if(z)return z;{const Y=yield function Id(D){return Qo.apply(this,arguments)}(D.appConfig.senderId);if(Y)return yield xa(D,Y),Y}}),vo.apply(this,arguments)}function xa(D,T){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,k.Z)(function*(D,T){const R=ws(D),Y=(yield yo()).transaction(ki,"readwrite");return yield Y.objectStore(ki).put(T,R),yield Y.done,T})).apply(this,arguments)}function qu(){return(qu=(0,k.Z)(function*(D){const T=ws(D),z=(yield yo()).transaction(ki,"readwrite");yield z.objectStore(ki).delete(T),yield z.done})).apply(this,arguments)}function ws({appConfig:D}){return D.appId}const mn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Zu(D,T){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,k.Z)(function*(D,T){const R=yield ka(D),z=kr(T),Y={method:"POST",headers:R,body:JSON.stringify(z)};let ae;try{ae=yield(yield fetch(Qu(D.appConfig),Y)).json()}catch(Pe){throw mn.create("token-subscribe-failed",{errorInfo:Pe?.toString()})}if(ae.error)throw mn.create("token-subscribe-failed",{errorInfo:ae.error.message});if(!ae.token)throw mn.create("token-subscribe-no-token");return ae.token})).apply(this,arguments)}function Pa(){return(Pa=(0,k.Z)(function*(D,T){const R=yield ka(D),z=kr(T.subscriptionOptions),Y={method:"PATCH",headers:R,body:JSON.stringify(z)};let ae;try{ae=yield(yield fetch(`${Qu(D.appConfig)}/${T.token}`,Y)).json()}catch(Pe){throw mn.create("token-update-failed",{errorInfo:Pe?.toString()})}if(ae.error)throw mn.create("token-update-failed",{errorInfo:ae.error.message});if(!ae.token)throw mn.create("token-update-no-token");return ae.token})).apply(this,arguments)}function Zs(D,T){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,k.Z)(function*(D,T){const z={method:"DELETE",headers:yield ka(D)};try{const ae=yield(yield fetch(`${Qu(D.appConfig)}/${T}`,z)).json();if(ae.error)throw mn.create("token-unsubscribe-failed",{errorInfo:ae.error.message})}catch(Y){throw mn.create("token-unsubscribe-failed",{errorInfo:Y?.toString()})}})).apply(this,arguments)}function Qu({projectId:D}){return`${qg}/projects/${D}/registrations`}function ka(D){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,k.Z)(function*({appConfig:D,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function kr({p256dh:D,auth:T,endpoint:R,vapidKey:z}){const Y={web:{endpoint:R,auth:T,p256dh:D}};return z!==Zo&&(Y.web.applicationPubKey=z),Y}const Yu=6048e5;function Cd(){return Cd=(0,k.Z)(function*(D){const T=yield function Ju(D,T){return ec.apply(this,arguments)}(D.swRegistration,D.vapidKey),R={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:_o(T.getKey("auth")),p256dh:_o(T.getKey("p256dh"))},z=yield Ra(D.firebaseDependencies);if(z){if(function tc(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}(z.subscriptionOptions,R))return Date.now()>=z.createTime+Yu?function Oa(D,T){return Ut.apply(this,arguments)}(D,{token:z.token,createTime:Date.now(),subscriptionOptions:R}):z.token;try{yield Zs(D.firebaseDependencies,z.token)}catch(Y){console.warn(Y)}return Ll(D.firebaseDependencies,R)}return Ll(D.firebaseDependencies,R)}),Cd.apply(this,arguments)}function Fl(){return Fl=(0,k.Z)(function*(D){const T=yield Ra(D.firebaseDependencies);T&&(yield Zs(D.firebaseDependencies,T.token),yield function Na(D){return qu.apply(this,arguments)}(D.firebaseDependencies));const R=yield D.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()}),Fl.apply(this,arguments)}function Ut(){return Ut=(0,k.Z)(function*(D,T){try{const R=yield function jn(D,T){return Pa.apply(this,arguments)}(D.firebaseDependencies,T),z=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield xa(D.firebaseDependencies,z),R}catch(R){throw yield function Hi(D){return Fl.apply(this,arguments)}(D),R}}),Ut.apply(this,arguments)}function Ll(D,T){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,k.Z)(function*(D,T){const z={token:yield Zu(D,T),createTime:Date.now(),subscriptionOptions:T};return yield xa(D,z),z.token})).apply(this,arguments)}function ec(){return(ec=(0,k.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qg(T)})})).apply(this,arguments)}function bd(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Ul(D,T){if(!T.notification)return;D.notification={};const R=T.notification.title;R&&(D.notification.title=R);const z=T.notification.body;z&&(D.notification.body=z);const Y=T.notification.image;Y&&(D.notification.image=Y);const ae=T.notification.icon;ae&&(D.notification.icon=ae)}(T,D),function On(D,T){T.data&&(D.data=T.data)}(T,D),function Re(D,T){var R,z,Y,ae,Pe;if(!(T.fcmOptions||null!==(R=T.notification)&&void 0!==R&&R.click_action))return;D.fcmOptions={};const ot=null!==(Y=null===(z=T.fcmOptions)||void 0===z?void 0:z.link)&&void 0!==Y?Y:null===(ae=T.notification)||void 0===ae?void 0:ae.click_action;ot&&(D.fcmOptions.link=ot);const ct=null===(Pe=T.fcmOptions)||void 0===Pe?void 0:Pe.analytics_label;ct&&(D.fcmOptions.analyticsLabel=ct)}(T,D),T}function Dd(D,T){const R=[];for(let z=0;z<D.length;z++)R.push(D.charAt(z)),z<T.length&&R.push(T.charAt(z));return R.join("")}function Xn(D){return mn.create("missing-app-config-values",{valueName:D})}Dd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Dd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class bf{constructor(T,R,z){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Cf(D){if(!D||!D.options)throw Xn("App Configuration Object");if(!D.name)throw Xn("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=D;for(const z of T)if(!R[z])throw Xn(z);return{appName:D.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:R,analyticsProvider:z}}_delete(){return Promise.resolve()}}function Qs(D){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,k.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Ks,{scope:Ko}),D.swRegistration.update().catch(()=>{})}catch(T){throw mn.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function jl(){return(jl=(0,k.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield Qs(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw mn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function Td(){return(Td=(0,k.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=Zo)})).apply(this,arguments)}function sr(){return sr=(0,k.Z)(function*(D,T){if(!navigator)throw mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw mn.create("permission-blocked");return yield function Bl(D,T){return Td.apply(this,arguments)}(D,T?.vapidKey),yield function Vl(D,T){return jl.apply(this,arguments)}(D,T?.serviceWorkerRegistration),function wo(D){return Cd.apply(this,arguments)}(D)}),sr.apply(this,arguments)}function nc(){return(nc=(0,k.Z)(function*(D,T,R){const z=function Io(D){switch(D){case os.NOTIFICATION_CLICKED:return"notification_open";case os.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(z,{message_id:R[vd],message_name:R[Kg],message_time:R[Zg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function zl(){return zl=(0,k.Z)(function*(D,T){const R=T.data;if(!R.isFirebaseMessaging)return;D.onMessageHandler&&R.messageType===os.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(bd(R)):D.onMessageHandler.next(bd(R)));const z=R.data;(function sn(D){return"object"==typeof D&&!!D&&vd in D})(z)&&"1"===z[Sa]&&(yield function Hr(D,T,R){return nc.apply(this,arguments)}(D,R.messageType,z))}),zl.apply(this,arguments)}const rc="@firebase/messaging",Df=D=>{const T=new bf(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function as(D,T){return zl.apply(this,arguments)}(T,R)),T},Is=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:z=>function Fa(D,T){return sr.apply(this,arguments)}(T,z)}};function Sd(){return $l.apply(this,arguments)}function $l(){return($l=(0,k.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function sc(){(0,te._registerComponent)(new oe.wA("messaging",Df,"PUBLIC")),(0,te._registerComponent)(new oe.wA("messaging-internal",Is,"PRIVATE")),(0,te.registerVersion)(rc,"0.12.4"),(0,te.registerVersion)(rc,"0.12.4","esm2017")}();const Md="analytics",em="firebase_id",ui="origin",Ys=6e4,In="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",La="https://www.googletagmanager.com/gtag/js",cr=new ue.Yd("@firebase/analytics"),bi=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function sv(D){if(!D.startsWith(La)){const T=bi.create("invalid-gtag-resource",{gtagURL:D});return cr.warn(T.message),""}return D}function Af(D){return Promise.all(D.map(T=>T.catch(R=>R)))}function Gi(){return(Gi=(0,k.Z)(function*(D,T,R,z,Y,ae){const Pe=z[Y];try{if(Pe)yield T[Pe];else{const ct=(yield Af(R)).find(Dt=>Dt.measurementId===Y);ct&&(yield T[ct.appId])}}catch(ot){cr.error(ot)}D("config",Y,ae)})).apply(this,arguments)}function qi(){return(qi=(0,k.Z)(function*(D,T,R,z,Y){try{let ae=[];if(Y&&Y.send_to){let Pe=Y.send_to;Array.isArray(Pe)||(Pe=[Pe]);const ot=yield Af(R);for(const ct of Pe){const Dt=ot.find(Pt=>Pt.measurementId===ct),Bt=Dt&&T[Dt.appId];if(!Bt){ae=[];break}ae.push(Bt)}}0===ae.length&&(ae=Object.values(T)),yield Promise.all(ae),D("event",z,Y||{})}catch(ae){cr.error(ae)}})).apply(this,arguments)}const Hl=30,Ba=new class uc{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function cc(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Jo(){return(Jo=(0,k.Z)(function*(D){var T;const{appId:R,apiKey:z}=D,Y={method:"GET",headers:cc(z)},ae=In.replace("{app-id}",R),Pe=yield fetch(ae,Y);if(200!==Pe.status&&304!==Pe.status){let ot="";try{const ct=yield Pe.json();null!==(T=ct.error)&&void 0!==T&&T.message&&(ot=ct.error.message)}catch{}throw bi.create("config-fetch-failed",{httpStatus:Pe.status,responseMessage:ot})}return Pe.json()})).apply(this,arguments)}function ea(){return(ea=(0,k.Z)(function*(D,T=Ba,R){const{appId:z,apiKey:Y,measurementId:ae}=D.options;if(!z)throw bi.create("no-app-id");if(!Y){if(ae)return{measurementId:ae,appId:z};throw bi.create("no-api-key")}const Pe=T.getThrottleMetadata(z)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ot=new Mf;return setTimeout((0,k.Z)(function*(){ot.abort()}),void 0!==R?R:Ys),ls({appId:z,apiKey:Y,measurementId:ae},Pe,ot,T)})).apply(this,arguments)}function ls(D,T,R){return $a.apply(this,arguments)}function $a(){return $a=(0,k.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:R},z,Y=Ba){var ae;const{appId:Pe,measurementId:ot}=D;try{yield function Ha(D,T){return new Promise((R,z)=>{const Y=Math.max(T-Date.now(),0),ae=setTimeout(R,Y);D.addEventListener(()=>{clearTimeout(ae),z(bi.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(z,T)}catch(ct){if(ot)return cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ot} provided in the "measurementId" field in the local Firebase config. [${ct?.message}]`),{appId:Pe,measurementId:ot};throw ct}try{const ct=yield function za(D){return Jo.apply(this,arguments)}(D);return Y.deleteThrottleMetadata(Pe),ct}catch(ct){const Dt=ct;if(!function Wl(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(Dt)){if(Y.deleteThrottleMetadata(Pe),ot)return cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ot} provided in the "measurementId" field in the local Firebase config. [${Dt?.message}]`),{appId:Pe,measurementId:ot};throw ct}const Bt=503===Number(null===(ae=Dt?.customData)||void 0===ae?void 0:ae.httpStatus)?(0,ie.$s)(R,Y.intervalMillis,Hl):(0,ie.$s)(R,Y.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+Bt,backoffCount:R+1};return Y.setThrottleMetadata(Pe,Pt),cr.debug(`Calling attemptFetch again in ${Bt} millis`),ls(D,Pt,z,Y)}}),$a.apply(this,arguments)}class Mf{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Eo,ra;function Es(){return(Es=(0,k.Z)(function*(D,T,R,z,Y){if(Y&&Y.global)D("event",R,z);else{const ae=yield T;D("event",R,Object.assign(Object.assign({},z),{send_to:ae}))}})).apply(this,arguments)}function Kl(){return(Kl=(0,k.Z)(function*(){if(!(0,ie.hl)())return cr.warn(bi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(D){return cr.warn(bi.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function Zl(){return Zl=(0,k.Z)(function*(D,T,R,z,Y,ae,Pe){var ot;const ct=function xn(D){return ea.apply(this,arguments)}(D);ct.then(kn=>{R[kn.measurementId]=kn.appId,D.options.measurementId&&kn.measurementId!==D.options.measurementId&&cr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(kn=>cr.error(kn)),T.push(ct);const Dt=function xf(){return Kl.apply(this,arguments)}().then(kn=>{if(kn)return z.getId()}),[Bt,Pt]=yield Promise.all([ct,Dt]);(function ov(D){const T=window.document.getElementsByTagName("script");for(const R of Object.values(T))if(R.src&&R.src.includes(La)&&R.src.includes(D))return R;return null})(ae)||function Ua(D,T){const R=function lc(D,T){let R;return window.trustedTypes&&(R=window.trustedTypes.createPolicy(D,T)),R}("firebase-js-sdk-policy",{createScriptURL:sv}),z=document.createElement("script"),Y=`${La}?l=${D}&id=${T}`;z.src=R?R?.createScriptURL(Y):Y,z.async=!0,document.head.appendChild(z)}(ae,Bt.measurementId),ra&&(Y("consent","default",ra),function bo(D){ra=D}(void 0)),Y("js",new Date);const yn=null!==(ot=Pe?.config)&&void 0!==ot?ot:{};return yn[ui]="firebase",yn.update=!0,null!=Pt&&(yn[em]=Pt),Y("config",Bt.measurementId,yn),Eo&&(Y("set",Eo),function Ga(D){Eo=D}(void 0)),Bt.measurementId}),Zl.apply(this,arguments)}class Nd{constructor(T){this.app=T}_delete(){return delete Ki[this.app.options.appId],Promise.resolve()}}let Ki={},Ql=[];const bs={};let Yl,di,qa="dataLayer",hc="gtag",fc=!1;function Pd(D,T,R){!function pc(){const D=[];if((0,ie.ru)()&&D.push("This is a browser extension environment."),(0,ie.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((z,Y)=>`(${Y+1}) ${z}`).join(" "),R=bi.create("invalid-analytics-context",{errorInfo:T});cr.warn(R.message)}}();const z=D.options.appId;if(!z)throw bi.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw bi.create("no-api-key");cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ki[z])throw bi.create("already-exists",{id:z});if(!fc){!function Xo(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(qa);const{wrappedGtag:ae,gtagCore:Pe}=function xd(D,T,R,z,Y){let ae=function(...Pe){window[z].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ae=window[Y]),window[Y]=function ja(D,T,R,z){function ae(){return ae=(0,k.Z)(function*(Pe,ot,ct){try{"event"===Pe?yield function Rd(D,T,R,z,Y){return qi.apply(this,arguments)}(D,T,R,ot,ct):"config"===Pe?yield function Va(D,T,R,z,Y,ae){return Gi.apply(this,arguments)}(D,T,R,z,ot,ct):"consent"===Pe?D("consent","update",ct):D("set",ot)}catch(Dt){cr.error(Dt)}}),ae.apply(this,arguments)}return function Y(Pe,ot,ct){return ae.apply(this,arguments)}}(ae,D,T,R),{gtagCore:ae,wrappedGtag:window[Y]}}(Ki,Ql,bs,qa,hc);di=ae,Yl=Pe,fc=!0}return Ki[z]=function dc(D,T,R,z,Y,ae,Pe){return Zl.apply(this,arguments)}(D,Ql,bs,T,Yl,qa,R),new Nd(D)}function sa(){return Do.apply(this,arguments)}function Do(){return(Do=(0,k.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const Jl="@firebase/analytics";!function Js(){(0,te._registerComponent)(new oe.wA(Md,(T,{options:R})=>Pd(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,te._registerComponent)(new oe.wA("analytics-internal",function D(T){try{const R=T.getProvider(Md).getImmediate();return{logEvent:(z,Y,ae)=>function Ds(D,T,R,z){D=(0,ie.m9)(D),function Gl(D,T,R,z,Y){return Es.apply(this,arguments)}(di,Ki[D.app.options.appId],T,R,z).catch(Y=>cr.error(Y))}(R,z,Y,ae)}}catch(R){throw bi.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,te.registerVersion)(Jl,"0.9.5"),(0,te.registerVersion)(Jl,"0.9.5","esm2017")}();var tm=V(4408),nm=V(7565);const Bn=new class gc extends nm.v{}(class Fd extends tm.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,z=0){return null!=z&&z>0||null==z&&this.delay>0?super.requestAsyncId(T,R,z):(T.flush(this),0)}});var lv=V(4986),zn=V(9751),mc=V(8505),Di=V(5363),_c=V(9468);const Zi=new d.Version("7.5.0"),eo="__angularfire_symbol__analyticsIsSupportedValue",yc="__angularfire_symbol__analyticsIsSupported",So="__angularfire_symbol__remoteConfigIsSupportedValue",Ao="__angularfire_symbol__remoteConfigIsSupported",Ld="__angularfire_symbol__messagingIsSupportedValue",Nf="__angularfire_symbol__messagingIsSupported";function to(D,T,R){if(T){if(1===T.length)return T[0];const ae=T.filter(Pe=>Pe.app===R);if(1===ae.length)return ae[0]}return R.container.getProvider(D).getImmediate({optional:!0})}globalThis[yc]||(globalThis[yc]=sa().then(D=>globalThis[eo]=D).catch(()=>globalThis[eo]=!1)),globalThis[Nf]||(globalThis[Nf]=Sd().then(D=>globalThis[Ld]=D).catch(()=>globalThis[Ld]=!1)),globalThis[Ao]||(globalThis[Ao]=ss().then(D=>globalThis[So]=D).catch(()=>globalThis[So]=!1));const Ud=(D,T)=>{const R=T?[T]:(0,$.C6)(),z=[];return R.forEach(Y=>{Y.container.getProvider(D).instances.forEach(Pe=>{z.includes(Pe)||z.push(Pe)})}),z};function Mo(){}class oa{constructor(T,R=Bn){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,z){const Y=this.zone;return this.delegate.schedule(function(Pe){Y.runGuarded(()=>{T.apply(this,[Pe])})},R,z)}}class Vd{constructor(T){this.zone=T,this.task=null}call(T,R){const z=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mo,{},Mo,Mo)),R.pipe((0,mc.b)({next:z,complete:z,error:z})).subscribe(T).add(z)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Pf=(()=>{class D{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new oa(Zone.current)),this.insideAngular=R.run(()=>new oa(Zone.current,lv.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(R){return new(R||D)(d.\u0275\u0275inject(d.NgZone))},D.\u0275prov=d.\u0275\u0275defineInjectable({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function hi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function _n(D){return hi().ngZone.run(()=>D())}function lt(D){return D.pipe((0,Di.Q)(hi().outsideAngular))}function aa(D){return hi(),function Ro(D){return function(R){return(R=R.lift(new Vd(D.ngZone))).pipe((0,_c.R)(D.outsideAngular),(0,Di.Q)(D.insideAngular))}}(hi())(D)}const Xa=(D,T)=>function(){const z=arguments;return T&&setTimeout(()=>{"scheduled"===T.state&&T.invoke()},10),_n(()=>D.apply(void 0,z))},la=(D,T)=>function(){let R;const z=arguments;for(let ae=0;ae<arguments.length;ae++)"function"==typeof z[ae]&&(T&&(R||(R=_n(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mo,{},Mo,Mo)))),z[ae]=Xa(z[ae],R));const Y=function Ts(D){return hi().ngZone.runOutsideAngular(()=>D())}(()=>D.apply(this,z));if(!T){if(Y instanceof zn.y){const ae=hi();return Y.pipe((0,_c.R)(ae.outsideAngular),(0,Di.Q)(ae.insideAngular))}return _n(()=>Y)}return Y instanceof zn.y?Y.pipe(aa):Y instanceof Promise?_n(()=>new Promise((ae,Pe)=>Y.then(ot=>_n(()=>ae(ot)),ot=>_n(()=>Pe(ot))))):"function"==typeof Y&&R?function(){return setTimeout(()=>{R&&"scheduled"===R.state&&R.invoke()},10),Y.apply(this,arguments)}:_n(()=>Y)}},3432:(mt,be,V)=>{"use strict";V.d(be,{$:()=>Zu,A:()=>q,C:()=>Te,H:()=>zu,I:()=>Ci,K:()=>jt,M:()=>Qn,N:()=>Ta,P:()=>mc,Q:()=>qg,R:()=>Ds,U:()=>vd,V:()=>Kg,W:()=>Zo,X:()=>os,Y:()=>_o,Z:()=>Id,_:()=>Ku,a:()=>uc,a0:()=>jn,a1:()=>Qu,a2:()=>Cd,a3:()=>Fl,a4:()=>Ut,a5:()=>Xu,a6:()=>ec,a7:()=>bd,a8:()=>On,a9:()=>Re,aA:()=>Ja,aB:()=>$e,aC:()=>K,aD:()=>Dt,aE:()=>eu,aF:()=>lt,aG:()=>Ir,aK:()=>za,aN:()=>Sa,aa:()=>Dd,ab:()=>Cf,ac:()=>Wi,ad:()=>jl,ae:()=>Td,ah:()=>nc,ai:()=>as,aj:()=>zl,am:()=>ki,an:()=>Ad,ap:()=>cr,aq:()=>Va,ar:()=>ve,as:()=>Jt,at:()=>st,au:()=>Oe,av:()=>Cc,aw:()=>Yi,ax:()=>At,ay:()=>Me,az:()=>X,b:()=>Hl,c:()=>Nf,d:()=>Wr,e:()=>S0,f:()=>Xa,g:()=>Y,h:()=>T,i:()=>dc,j:()=>ot,k:()=>Bf,l:()=>tm,m:()=>dv,o:()=>ru,p:()=>re,r:()=>nm,s:()=>Qa,u:()=>lv});var d=V(5861),$=V(2090),k=V(9681),te=V(1877),ie=V(655),oe=V(4859);const re={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Te=function Q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},qe=function Ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ut=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new te.Yd("@firebase/auth");function Ce(w,...g){De.logLevel<=te.in.ERROR&&De.error(`Auth (${k.SDK_VERSION}): ${w}`,...g)}function Oe(w,...g){throw He(w,...g)}function Me(w,...g){return He(w,...g)}function ke(w,g,_){const E=Object.assign(Object.assign({},qe()),{[g]:_});return new $.LL("auth","Firebase",E).create(g,{appName:w.name})}function Se(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Oe(w,"argument-error"),ke(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(w,...g){if("string"!=typeof w){const _=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(_,...E)}return ut.create(w,...g)}function X(w,g,..._){if(!w)throw He(g,..._)}function de(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Ce(g),new Error(g)}function ve(w,g){w||de(g)}const Ke=new Map;function $e(w){ve(w instanceof Function,"Expected a class definition");let g=Ke.get(w);return g?(ve(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,Ke.set(w,g),g)}function le(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function me(){return"http:"===Ie()||"https:"===Ie()}function Ie(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class je{constructor(g,_){this.shortDelay=g,this.longDelay=_,ve(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function Ne(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(me()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function nt(w,g){ve(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Ze{static initialize(g,_,E){this.fetchImpl=g,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void de("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void de("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void de("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},bt=new je(3e4,6e4);function _t(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function et(w,g,_,E){return rn.apply(this,arguments)}function rn(){return(rn=(0,d.Z)(function*(w,g,_,E,M={}){return Fn(w,M,(0,d.Z)(function*(){let L={},ee={};E&&("GET"===g?ee=E:L={body:JSON.stringify(E)});const Ae=(0,$.xO)(Object.assign({key:w.config.apiKey},ee)).slice(1),Xe=yield w._getAdditionalHeaders();return Xe["Content-Type"]="application/json",w.languageCode&&(Xe["X-Firebase-Locale"]=w.languageCode),Ze.fetch()(Ur(w,w.config.apiHost,_,Ae),Object.assign({method:g,headers:Xe,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function Fn(w,g,_){return gn.apply(this,arguments)}function gn(){return(gn=(0,d.Z)(function*(w,g,_){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},fn),g);try{const M=new zi(w),L=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const ee=yield L.json();if("needConfirmation"in ee)throw Gn(w,"account-exists-with-different-credential",ee);if(L.ok&&!("errorMessage"in ee))return ee;{const Ae=L.ok?ee.errorMessage:ee.error.message,[Xe,wt]=Ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Xe)throw Gn(w,"credential-already-in-use",ee);if("EMAIL_EXISTS"===Xe)throw Gn(w,"email-already-in-use",ee);if("USER_DISABLED"===Xe)throw Gn(w,"user-disabled",ee);const zt=E[Xe]||Xe.toLowerCase().replace(/[_\s]+/g,"-");if(wt)throw ke(w,zt,wt);Oe(w,zt)}}catch(M){if(M instanceof $.ZR)throw M;Oe(w,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function pn(w,g,_,E){return lr.apply(this,arguments)}function lr(){return(lr=(0,d.Z)(function*(w,g,_,E,M={}){const L=yield et(w,g,_,E,M);return"mfaPendingCredential"in L&&Oe(w,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Ur(w,g,_,E){const M=`${g}${_}?${E}`;return w.config.emulator?nt(w.config,M):`${w.config.apiScheme}://${M}`}class zi{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(Me(this.auth,"network-request-failed")),bt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gn(w,g,_){const E={appName:w.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const M=Me(w,g,E);return M.customData._tokenResponse=_,M}function Ei(){return(Ei=(0,d.Z)(function*(w,g){return et(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function vr(){return(vr=(0,d.Z)(function*(w,g){return et(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Rr(){return(Rr=(0,d.Z)(function*(w,g){return et(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function xr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function si(){return(si=(0,d.Z)(function*(w,g=!1){const _=(0,$.m9)(w),E=yield _.getIdToken(g),M=yt(E);X(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const L="object"==typeof M.firebase?M.firebase:void 0,ee=L?.sign_in_provider;return{claims:M,token:E,authTime:xr(Lt(M.auth_time)),issuedAtTime:xr(Lt(M.iat)),expirationTime:xr(Lt(M.exp)),signInProvider:ee||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function Lt(w){return 1e3*Number(w)}function yt(w){const[g,_,E]=w.split(".");if(void 0===g||void 0===_||void 0===E)return Ce("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,$.tV)(_);return M?JSON.parse(M):(Ce("Failed to decode base64 JWT payload"),null)}catch(M){return Ce("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Mn(w,g){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,d.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(E){throw E instanceof $.ZR&&function Kn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}class wr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),E)}iteration(){var g=this;return(0,d.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class ur{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=xr(this.lastLoginAt),this.creationTime=xr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xi(w){return $t.apply(this,arguments)}function $t(){return $t=(0,d.Z)(function*(w){var g;const _=w.auth,E=yield w.getIdToken(),M=yield Mn(w,function at(w,g){return Rr.apply(this,arguments)}(_,{idToken:E}));X(M?.users.length,_,"internal-error");const L=M.users[0];w._notifyReloadListener(L);const ee=null!==(g=L.providerUserInfo)&&void 0!==g&&g.length?function Zn(w){return w.map(g=>{var{providerId:_}=g,E=(0,ie._T)(g,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(L.providerUserInfo):[],Ae=function Vr(w,g){return[...w.filter(E=>!g.some(M=>M.providerId===E.providerId)),...g]}(w.providerData,ee),zt=!!w.isAnonymous&&!(w.email&&L.passwordHash||Ae?.length),$n={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:Ae,metadata:new ur(L.createdAt,L.lastLoginAt),isAnonymous:zt};Object.assign(w,$n)}),$t.apply(this,arguments)}function Xt(){return(Xt=(0,d.Z)(function*(w){const g=(0,$.m9)(w);yield xi(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Ee(){return(Ee=(0,d.Z)(function*(w,g){const _=yield Fn(w,{},(0,d.Z)(function*(){const E=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:M,apiKey:L}=w.config,ee=Ur(w,M,"/v1/token",`key=${L}`),Ae=yield w._getAdditionalHeaders();return Ae["Content-Type"]="application/x-www-form-urlencoded",Ze.fetch()(ee,{method:"POST",headers:Ae,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class rt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){X(g.idToken,"internal-error"),X(typeof g.idToken<"u","internal-error"),X(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function kt(w){const g=yt(w);return X(g,"internal-error"),X(typeof g.exp<"u","internal-error"),X(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var E=this;return(0,d.Z)(function*(){return X(!E.accessToken||E.refreshToken,g,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var E=this;return(0,d.Z)(function*(){const{accessToken:M,refreshToken:L,expiresIn:ee}=yield function Be(w,g){return Ee.apply(this,arguments)}(g,_);E.updateTokensAndExpiration(M,L,Number(ee))})()}updateTokensAndExpiration(g,_,E){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,_){const{refreshToken:E,accessToken:M,expirationTime:L}=_,ee=new rt;return E&&(X("string"==typeof E,"internal-error",{appName:g}),ee.refreshToken=E),M&&(X("string"==typeof M,"internal-error",{appName:g}),ee.accessToken=M),L&&(X("number"==typeof L,"internal-error",{appName:g}),ee.expirationTime=L),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new rt,this.toJSON())}_performRefresh(){return de("not implemented")}}function Et(w,g){X("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class Nt{constructor(g){var{uid:_,auth:E,stsTokenManager:M}=g,L=(0,ie._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new ur(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,d.Z)(function*(){const E=yield Mn(_,_.stsTokenManager.getToken(_.auth,g));return X(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(g){return function qn(w){return si.apply(this,arguments)}(this,g)}reload(){return function Ni(w){return Xt.apply(this,arguments)}(this)}_assign(g){this!==g&&(X(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const _=new Nt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(g){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var E=this;return(0,d.Z)(function*(){let M=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),M=!0),_&&(yield xi(E)),yield E.auth._persistUserIfCurrent(E),M&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,d.Z)(function*(){const _=yield g.getIdToken();return yield Mn(g,function ii(w,g){return Ei.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var E,M,L,ee,Ae,Xe,wt,zt;const $n=null!==(E=_.displayName)&&void 0!==E?E:void 0,As=null!==(M=_.email)&&void 0!==M?M:void 0,ca=null!==(L=_.phoneNumber)&&void 0!==L?L:void 0,zf=null!==(ee=_.photoURL)&&void 0!==ee?ee:void 0,da=null!==(Ae=_.tenantId)&&void 0!==Ae?Ae:void 0,tl=null!==(Xe=_._redirectEventId)&&void 0!==Xe?Xe:void 0,Sc=null!==(wt=_.createdAt)&&void 0!==wt?wt:void 0,iu=null!==(zt=_.lastLoginAt)&&void 0!==zt?zt:void 0,{uid:nl,emailVerified:rl,isAnonymous:$f,providerData:il,stsTokenManager:Ac}=_;X(nl&&Ac,g,"internal-error");const gv=rt.fromJSON(this.name,Ac);X("string"==typeof nl,g,"internal-error"),Et($n,g.name),Et(As,g.name),X("boolean"==typeof rl,g,"internal-error"),X("boolean"==typeof $f,g,"internal-error"),Et(ca,g.name),Et(zf,g.name),Et(da,g.name),Et(tl,g.name),Et(Sc,g.name),Et(iu,g.name);const Gd=new Nt({uid:nl,auth:g,email:As,emailVerified:rl,displayName:$n,isAnonymous:$f,photoURL:zf,phoneNumber:ca,tenantId:da,stsTokenManager:gv,createdAt:Sc,lastLoginAt:iu});return il&&Array.isArray(il)&&(Gd.providerData=il.map(Hf=>Object.assign({},Hf))),tl&&(Gd._redirectEventId=tl),Gd}static _fromIdTokenResponse(g,_,E=!1){return(0,d.Z)(function*(){const M=new rt;M.updateFromServerResponse(_);const L=new Nt({uid:_.localId,auth:g,stsTokenManager:M,isAnonymous:E});return yield xi(L),L})()}}const Qn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,E){var M=this;return(0,d.Z)(function*(){M.storage[_]=E})()}_get(_){var E=this;return(0,d.Z)(function*(){const M=E.storage[_];return void 0===M?null:M})()}_remove(_){var E=this;return(0,d.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return w.type="NONE",w})();function K(w,g,_){return`firebase:${w}:${g}:${_}`}class H{constructor(g,_,E){this.persistence=g,this.auth=_,this.userKey=E;const{config:M,name:L}=this.auth;this.fullUserKey=K(this.userKey,M.apiKey,L),this.fullPersistenceKey=K("persistence",M.apiKey,L),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Nt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,d.Z)(function*(){if(_.persistence===g)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,E="authUser"){return(0,d.Z)(function*(){if(!_.length)return new H($e(Qn),g,E);const M=(yield Promise.all(_.map(function(){var wt=(0,d.Z)(function*(zt){if(yield zt._isAvailable())return zt});return function(zt){return wt.apply(this,arguments)}}()))).filter(wt=>wt);let L=M[0]||$e(Qn);const ee=K(E,g.config.apiKey,g.name);let Ae=null;for(const wt of _)try{const zt=yield wt._get(ee);if(zt){const $n=Nt._fromJSON(g,zt);wt!==L&&(Ae=$n),L=wt;break}}catch{}const Xe=M.filter(wt=>wt._shouldAllowMigration);return L._shouldAllowMigration&&Xe.length?(L=Xe[0],Ae&&(yield L._set(ee,Ae.toJSON())),yield Promise.all(_.map(function(){var wt=(0,d.Z)(function*(zt){if(zt!==L)try{yield zt._remove(ee)}catch{}});return function(zt){return wt.apply(this,arguments)}}())),new H(L,g,E)):new H(L,g,E)})()}}function O(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(fe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(F(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(St(g))return"Blackberry";if(xt(g))return"Webos";if(P(g))return"Safari";if((g.includes("chrome/")||J(g))&&!g.includes("edge/"))return"Chrome";if(st(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function F(w=(0,$.z$)()){return/firefox\//i.test(w)}function P(w=(0,$.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function J(w=(0,$.z$)()){return/crios\//i.test(w)}function fe(w=(0,$.z$)()){return/iemobile/i.test(w)}function st(w=(0,$.z$)()){return/android/i.test(w)}function St(w=(0,$.z$)()){return/blackberry/i.test(w)}function xt(w=(0,$.z$)()){return/webos/i.test(w)}function Jt(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function At(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function oi(w=(0,$.z$)()){return Jt(w)||st(w)||xt(w)||St(w)||/windows phone/i.test(w)||fe(w)}function Rl(w,g=[]){let _;switch(w){case"Browser":_=O((0,$.z$)());break;case"Worker":_=`${O((0,$.z$)())}-${w}`;break;default:_=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${k.SDK_VERSION}/${E}`}class Bu{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const E=L=>new Promise((ee,Ae)=>{try{ee(g(L))}catch(Xe){Ae(Xe)}});E.onAbort=_,this.queue.push(E);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,d.Z)(function*(){if(_.auth.currentUser===g)return;const E=[];try{for(const M of _.queue)yield M(g),M.onAbort&&E.push(M.onAbort)}catch(M){E.reverse();for(const L of E)try{L()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class xl{constructor(g,_,E){this.app=g,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ca(this),this.idTokenSubscription=new Ca(this),this.beforeStateQueue=new Bu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ut,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,_){var E=this;return _&&(this._popupRedirectResolver=$e(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var M,L;if(!E._deleted&&(E.persistenceManager=yield H.create(E,g),!E._deleted)){if(null!==(M=E._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(L=E.currentUser)||void 0===L?void 0:L.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,d.Z)(function*(){var E;const M=yield _.assertedPersistence.getCurrentUser();let L=M,ee=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Ae=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,Xe=L?._redirectEventId,wt=yield _.tryRedirectSignIn(g);(!Ae||Ae===Xe)&&wt?.user&&(L=wt.user,ee=!0)}if(!L)return _.directlySetCurrentUser(null);if(!L._redirectEventId){if(ee)try{yield _.beforeStateQueue.runMiddleware(L)}catch(Ae){L=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Ae))}return L?_.reloadAndSetCurrentUserOrClear(L):_.directlySetCurrentUser(null)}return X(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===L._redirectEventId?_.directlySetCurrentUser(L):_.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(g){var _=this;return(0,d.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,d.Z)(function*(){try{yield xi(g)}catch(E){if("auth/network-request-failed"!==E?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Ve(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,d.Z)(function*(){const E=g?(0,$.m9)(g):null;return E&&X(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(g,_=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return g&&X(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence($e(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,_,E){return this.registerStateListener(this.authStateSubscription,g,_,E)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,E){return this.registerStateListener(this.idTokenSubscription,g,_,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var E=this;return(0,d.Z)(function*(){const M=yield E.getOrInitRedirectPersistenceManager(_);return null===g?M.removeCurrentUser():M.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const E=g&&$e(g)||_._popupRedirectResolver;X(E,_,"argument-error"),_.redirectPersistenceManager=yield H.create(_,[$e(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,d.Z)(function*(){var E,M;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===g?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,d.Z)(function*(){if(g===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,E,M){if(this._deleted)return()=>{};const L="function"==typeof _?_:_.next.bind(_),ee=this._isInitialized?Promise.resolve():this._initializationPromise;return X(ee,this,"internal-error"),ee.then(()=>L(this.currentUser)),"function"==typeof _?g.addObserver(_,E,M):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Rl(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var _;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const M=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return M&&(E["X-Firebase-Client"]=M),E})()}}function Ir(w){return(0,$.m9)(w)}class Ca{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function zu(w,g,_){const E=Ir(w);X(E._canInitEmulator,E,"emulator-config-failed"),X(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const M=!!_?.disableWarnings,L=$u(g),{host:ee,port:Ae}=function cn(w){const g=$u(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(E);if(M){const L=M[1];return{host:L,port:Yn(E.substr(L.length+1))}}{const[L,ee]=E.split(":");return{host:L,port:Yn(ee)}}}(g);E.config.emulator={url:`${L}//${ee}${null===Ae?"":`:${Ae}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ee,port:Ae,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Nr(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function $u(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Yn(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class Ci{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return de("not implemented")}_getIdTokenResponse(g){return de("not implemented")}_linkToIdToken(g,_){return de("not implemented")}_getReauthenticationResolver(g){return de("not implemented")}}function ai(w,g){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,d.Z)(function*(w,g){return et(w,"POST","/v1/accounts:resetPassword",_t(w,g))})).apply(this,arguments)}function Nl(w,g){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,d.Z)(function*(w,g){return et(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function it(){return(it=(0,d.Z)(function*(w,g){return et(w,"POST","/v1/accounts:update",_t(w,g))})).apply(this,arguments)}function Cn(){return(Cn=(0,d.Z)(function*(w,g){return pn(w,"POST","/v1/accounts:signInWithPassword",_t(w,g))})).apply(this,arguments)}function li(w,g){return _s.apply(this,arguments)}function _s(){return(_s=(0,d.Z)(function*(w,g){return et(w,"POST","/v1/accounts:sendOobCode",_t(w,g))})).apply(this,arguments)}function ys(){return(ys=(0,d.Z)(function*(w,g){return li(w,g)})).apply(this,arguments)}function jr(){return(jr=(0,d.Z)(function*(w,g){return li(w,g)})).apply(this,arguments)}function Ht(){return(Ht=(0,d.Z)(function*(w,g){return li(w,g)})).apply(this,arguments)}function Ws(){return(Ws=(0,d.Z)(function*(w,g){return li(w,g)})).apply(this,arguments)}function mo(){return(mo=(0,d.Z)(function*(w,g){return pn(w,"POST","/v1/accounts:signInWithEmailLink",_t(w,g))})).apply(this,arguments)}function Gs(){return(Gs=(0,d.Z)(function*(w,g){return pn(w,"POST","/v1/accounts:signInWithEmailLink",_t(w,g))})).apply(this,arguments)}class rs extends Ci{constructor(g,_,E,M=null){super("password",E),this._email=g,this._password=_,this._tenantId=M}static _fromEmailAndPassword(g,_){return new rs(g,_,"password")}static _fromEmailAndCode(g,_,E=null){return new rs(g,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function qt(w,g){return Cn.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ba(w,g){return mo.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Oe(g,"internal-error")}})()}_linkToIdToken(g,_){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return Nl(g,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Br(w,g){return Gs.apply(this,arguments)}(g,{idToken:_,email:E._email,oobCode:E._password});default:Oe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Vn(w,g){return qo.apply(this,arguments)}function qo(){return(qo=(0,d.Z)(function*(w,g){return pn(w,"POST","/v1/accounts:signInWithIdp",_t(w,g))})).apply(this,arguments)}class jt extends Ci{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new jt(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Oe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:M}=_,L=(0,ie._T)(_,["providerId","signInMethod"]);if(!E||!M)return null;const ee=new jt(E,M);return ee.idToken=L.idToken||void 0,ee.accessToken=L.accessToken||void 0,ee.secret=L.secret,ee.nonce=L.nonce,ee.pendingToken=L.pendingToken||null,ee}_getIdTokenResponse(g){return Vn(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,Vn(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Vn(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,$.xO)(_)}return g}}function Da(){return(Da=(0,d.Z)(function*(w,g){return et(w,"POST","/v1/accounts:sendVerificationCode",_t(w,g))})).apply(this,arguments)}function vs(){return(vs=(0,d.Z)(function*(w,g){return pn(w,"POST","/v1/accounts:signInWithPhoneNumber",_t(w,g))})).apply(this,arguments)}function qs(){return(qs=(0,d.Z)(function*(w,g){const _=yield pn(w,"POST","/v1/accounts:signInWithPhoneNumber",_t(w,g));if(_.temporaryProof)throw Gn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const zr={USER_NOT_FOUND:"user-not-found"};function $r(){return($r=(0,d.Z)(function*(w,g){return pn(w,"POST","/v1/accounts:signInWithPhoneNumber",_t(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),zr)})).apply(this,arguments)}class Er extends Ci{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Er({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Er({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function yd(w,g){return vs.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function $i(w,g){return qs.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Gg(w,g){return $r.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:E,verificationCode:M}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:E,code:M}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:E,phoneNumber:M,temporaryProof:L}=g;return E||_||M||L?new Er({verificationId:_,verificationCode:E,phoneNumber:M,temporaryProof:L}):null}}class is{constructor(g){var _,E,M,L,ee,Ae;const Xe=(0,$.zd)((0,$.pd)(g)),wt=null!==(_=Xe.apiKey)&&void 0!==_?_:null,zt=null!==(E=Xe.oobCode)&&void 0!==E?E:null,$n=function Wu(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Xe.mode)&&void 0!==M?M:null);X(wt&&zt&&$n,"argument-error"),this.apiKey=wt,this.operation=$n,this.code=zt,this.continueUrl=null!==(L=Xe.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(ee=Xe.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(Ae=Xe.tenantId)&&void 0!==Ae?Ae:null}static parseLink(g){const _=function kl(w){const g=(0,$.zd)((0,$.pd)(w)).link,_=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,E=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(E?(0,$.zd)((0,$.pd)(E)).link:null)||E||_||g||w}(g);try{return new is(_)}catch{return null}}}let Ta=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,E){return rs._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const M=is.parseLink(E);return X(M,"argument-error"),rs._fromEmailAndCode(_,M.code,M.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Ks{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ko extends Ks{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Zo extends Ko{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return X("providerId"in _&&"signInMethod"in _,"argument-error"),jt._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return X(g.idToken||g.accessToken,"argument-error"),jt._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Zo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Zo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:M,pendingToken:L,nonce:ee,providerId:Ae}=g;if(!E&&!M&&!_&&!L||!Ae)return null;try{return new Zo(Ae)._credential({idToken:_,accessToken:E,nonce:ee,pendingToken:L})}catch{return null}}}let qg=(()=>{class w extends Ko{constructor(){super("facebook.com")}static credential(_){return jt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),vd=(()=>{class w extends Ko{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return jt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:M}=_;if(!E&&!M)return null;try{return w.credential(E,M)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Kg=(()=>{class w extends Ko{constructor(){super("github.com")}static credential(_){return jt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Sa extends Ci{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Vn(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,Vn(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Vn(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:M,pendingToken:L}=_;return E&&M&&L&&E===M?new Sa(E,L):null}static _create(g,_){return new Sa(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class os extends Ks{constructor(g){X(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return os.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return os.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Sa.fromJSON(g);return X(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:E}=g;if(!_||!E)return null;try{return Sa._create(E,_)}catch{return null}}}let _o=(()=>{class w extends Ko{constructor(){super("twitter.com")}static credential(_,E){return jt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:M}=_;if(!E||!M)return null;try{return w.credential(E,M)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Qg(w,g){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,d.Z)(function*(w,g){return pn(w,"POST","/v1/accounts:signUp",_t(w,g))})).apply(this,arguments)}class Pi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,E,M=!1){return(0,d.Z)(function*(){const L=yield Nt._fromIdTokenResponse(g,E,M),ee=wd(E);return new Pi({user:L,providerId:ee,_tokenResponse:E,operationType:_})})()}static _forOperation(g,_,E){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const M=wd(E);return new Pi({user:g,providerId:M,_tokenResponse:E,operationType:_})})()}}function wd(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Id(w){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,d.Z)(function*(w){var g;const _=Ir(w);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new Pi({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield Qg(_,{returnSecureToken:!0}),M=yield Pi._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Gu extends $.ZR{constructor(g,_,E,M){var L;super(_.code,_.message),this.operationType=E,this.user=M,Object.setPrototypeOf(this,Gu.prototype),this.customData={appName:g.name,tenantId:null!==(L=g.tenantId)&&void 0!==L?L:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,_,E,M){return new Gu(g,_,E,M)}}function Ed(w,g,_,E){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?Gu._fromErrorAndOperation(w,L,g,E):L})}function Yg(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function ki(w,g){return Ma.apply(this,arguments)}function Ma(){return Ma=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w);yield vo(!0,_,g);const{providerUserInfo:E}=yield function bn(w,g){return vr.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),M=Yg(E||[]);return _.providerData=_.providerData.filter(L=>M.has(L.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Ma.apply(this,arguments)}function yo(w,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(w,g,_=!1){const E=yield Mn(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return Pi._forOperation(w,"link",E)})).apply(this,arguments)}function vo(w,g,_){return xa.apply(this,arguments)}function xa(){return(xa=(0,d.Z)(function*(w,g,_){yield xi(g);const M=!1===w?"provider-already-linked":"no-such-provider";X(Yg(g.providerData).has(_)===w,g.auth,M)})).apply(this,arguments)}function Ol(w,g){return Na.apply(this,arguments)}function Na(){return(Na=(0,d.Z)(function*(w,g,_=!1){const{auth:E}=w,M="reauthenticate";try{const L=yield Mn(w,Ed(E,M,g,w),_);X(L.idToken,E,"internal-error");const ee=yt(L.idToken);X(ee,E,"internal-error");const{sub:Ae}=ee;return X(w.uid===Ae,E,"user-mismatch"),Pi._forOperation(w,M,L)}catch(L){throw"auth/user-not-found"===L?.code&&Oe(E,"user-mismatch"),L}})).apply(this,arguments)}function qu(w,g){return ws.apply(this,arguments)}function ws(){return(ws=(0,d.Z)(function*(w,g,_=!1){const E="signIn",M=yield Ed(w,E,g),L=yield Pi._fromIdTokenResponse(w,E,M);return _||(yield w._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Ku(w,g){return mn.apply(this,arguments)}function mn(){return(mn=(0,d.Z)(function*(w,g){return qu(Ir(w),g)})).apply(this,arguments)}function Zu(w,g){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w);return yield vo(!1,_,g.providerId),yo(_,g)})).apply(this,arguments)}function jn(w,g){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(w,g){return Ol((0,$.m9)(w),g)})).apply(this,arguments)}function Cr(){return(Cr=(0,d.Z)(function*(w,g){return pn(w,"POST","/v1/accounts:signInWithCustomToken",_t(w,g))})).apply(this,arguments)}function Qu(w,g){return ka.apply(this,arguments)}function ka(){return ka=(0,d.Z)(function*(w,g){const _=Ir(w),E=yield function Zs(w,g){return Cr.apply(this,arguments)}(_,{token:g,returnSecureToken:!0}),M=yield Pi._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(M.user),M}),ka.apply(this,arguments)}class Oi{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?kr._fromServerResponse(g,_):"totpInfo"in _?Yu._fromServerResponse(g,_):Oe(g,"internal-error")}}class kr extends Oi{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new kr(_)}}class Yu extends Oi{constructor(g){super("totp",g)}static _fromServerResponse(g,_){return new Yu(_)}}function wo(w,g,_){var E;X((null===(E=_.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),X(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(X(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(X(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Cd(w,g,_){return Hi.apply(this,arguments)}function Hi(){return Hi=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w),M={requestType:"PASSWORD_RESET",email:g};_&&wo(E,M,_),yield function Un(w,g){return jr.apply(this,arguments)}(E,M)}),Hi.apply(this,arguments)}function Fl(w,g,_){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,d.Z)(function*(w,g,_){yield ai((0,$.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Ut(w,g){return Ll.apply(this,arguments)}function Ll(){return Ll=(0,d.Z)(function*(w,g){yield function ns(w,g){return it.apply(this,arguments)}((0,$.m9)(w),{oobCode:g})}),Ll.apply(this,arguments)}function Xu(w,g){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w),E=yield ai(_,{oobCode:g}),M=E.requestType;switch(X(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(E.mfaInfo,_,"internal-error");default:X(E.email,_,"internal-error")}let L=null;return E.mfaInfo&&(L=Oi._fromServerResponse(Ir(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:L},operation:M}})).apply(this,arguments)}function ec(w,g){return tc.apply(this,arguments)}function tc(){return(tc=(0,d.Z)(function*(w,g){const{data:_}=yield Xu((0,$.m9)(w),g);return _.email})).apply(this,arguments)}function bd(w,g,_){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,d.Z)(function*(w,g,_){const E=Ir(w),M=yield Qg(E,{returnSecureToken:!0,email:g,password:_}),L=yield Pi._fromIdTokenResponse(E,"signIn",M);return yield E._updateCurrentUser(L.user),L})).apply(this,arguments)}function On(w,g,_){return Ku((0,$.m9)(w),Ta.credential(g,_))}function Re(w,g,_){return sn.apply(this,arguments)}function sn(){return sn=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w),M={requestType:"EMAIL_SIGNIN",email:g};X(_.handleCodeInApp,E,"argument-error"),_&&wo(E,M,_),yield function Hu(w,g){return Ht.apply(this,arguments)}(E,M)}),sn.apply(this,arguments)}function Dd(w,g){return"EMAIL_SIGNIN"===is.parseLink(g)?.operation}function Cf(w,g,_){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w),M=Ta.credentialWithLink(g,_||le());return X(M._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ku(E,M)})).apply(this,arguments)}function Qs(){return(Qs=(0,d.Z)(function*(w,g){return et(w,"POST","/v1/accounts:createAuthUri",_t(w,g))})).apply(this,arguments)}function Wi(w,g){return Vl.apply(this,arguments)}function Vl(){return Vl=(0,d.Z)(function*(w,g){const E={identifier:g,continueUri:me()?le():"http://localhost"},{signinMethods:M}=yield function bf(w,g){return Qs.apply(this,arguments)}((0,$.m9)(w),E);return M||[]}),Vl.apply(this,arguments)}function jl(w,g){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w),M={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&wo(_.auth,M,g);const{email:L}=yield function Ln(w,g){return ys.apply(this,arguments)}(_.auth,M);L!==w.email&&(yield w.reload())}),Bl.apply(this,arguments)}function Td(w,g,_){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&wo(E.auth,L,_);const{email:ee}=yield function Pl(w,g){return Ws.apply(this,arguments)}(E.auth,L);ee!==w.email&&(yield w.reload())}),Fa.apply(this,arguments)}function Hr(){return(Hr=(0,d.Z)(function*(w,g){return et(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function nc(w,g){return Io.apply(this,arguments)}function Io(){return Io=(0,d.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const E=(0,$.m9)(w),L={idToken:yield E.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},ee=yield Mn(E,function sr(w,g){return Hr.apply(this,arguments)}(E.auth,L));E.displayName=ee.displayName||null,E.photoURL=ee.photoUrl||null;const Ae=E.providerData.find(({providerId:Xe})=>"password"===Xe);Ae&&(Ae.displayName=E.displayName,Ae.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ee)}),Io.apply(this,arguments)}function as(w,g){return rc((0,$.m9)(w),g,null)}function zl(w,g){return rc((0,$.m9)(w),null,g)}function rc(w,g,_){return ic.apply(this,arguments)}function ic(){return(ic=(0,d.Z)(function*(w,g,_){const{auth:E}=w,L={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(L.email=g),_&&(L.password=_);const ee=yield Mn(w,Nl(E,L));yield w._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class Is{constructor(g,_,E={}){this.isNewUser=g,this.providerId=_,this.profile=E}}class sc extends Is{constructor(g,_,E,M){super(g,_,E),this.username=M}}class Sd extends Is{constructor(g,_){super(g,"facebook.com",_)}}class $l extends sc{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Xg extends Is{constructor(g,_){super(g,"google.com",_)}}class oc extends sc{constructor(g,_,E){super(g,"twitter.com",_,E)}}function Ad(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Df(w){var g,_;if(!w)return null;const{providerId:E}=w,M=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},L=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const ee=null===(_=null===(g=yt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(ee)return new Is(L,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!E)return null;switch(E){case"facebook.com":return new Sd(L,M);case"github.com":return new $l(L,M);case"google.com":return new Xg(L,M);case"twitter.com":return new oc(L,M,w.screenName||null);case"custom":case"anonymous":return new Is(L,null);default:return new Is(L,E,M)}}(_)}class In{constructor(g,_,E){this.type=g,this.credential=_,this.auth=E}static _fromIdtoken(g,_){return new In("enroll",g,_)}static _fromMfaPendingCredential(g){return new In("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,E;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return In._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return In._fromIdtoken(g.multiFactorSession.idToken)}return null}}class La{constructor(g,_,E){this.session=g,this.hints=_,this.signInResolver=E}static _fromError(g,_){const E=Ir(g),M=_.customData._serverResponse,L=(M.mfaInfo||[]).map(Ae=>Oi._fromServerResponse(E,Ae));X(M.mfaPendingCredential,E,"internal-error");const ee=In._fromMfaPendingCredential(M.mfaPendingCredential);return new La(ee,L,function(){var Ae=(0,d.Z)(function*(Xe){const wt=yield Xe._process(E,ee);delete M.mfaInfo,delete M.mfaPendingCredential;const zt=Object.assign(Object.assign({},M),{idToken:wt.idToken,refreshToken:wt.refreshToken});switch(_.operationType){case"signIn":const $n=yield Pi._fromIdTokenResponse(E,_.operationType,zt);return yield E._updateCurrentUser($n.user),$n;case"reauthenticate":return X(_.user,E,"internal-error"),Pi._forOperation(_.user,_.operationType,zt);default:Oe(E,"internal-error")}});return function(Xe){return Ae.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,d.Z)(function*(){return _.signInResolver(g)})()}}function cr(w,g){var _;const E=(0,$.m9)(w),M=g;return X(g.customData.operationType,E,"argument-error"),X(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),La._fromError(E,M)}class Ua{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Oi._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Ua(g)}getSession(){var g=this;return(0,d.Z)(function*(){return In._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var E=this;return(0,d.Z)(function*(){const M=g,L=yield E.getSession(),ee=yield Mn(E.user,M._process(E.user.auth,L,_));return yield E.user._updateTokensIfNecessary(ee),E.user.reload()})()}unenroll(g){var _=this;return(0,d.Z)(function*(){const E="string"==typeof g?g:g.uid,M=yield _.user.getIdToken();try{const L=yield Mn(_.user,function lc(w,g){return et(w,"POST","/v2/accounts/mfaEnrollment:withdraw",_t(w,g))}(_.user.auth,{idToken:M,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ee})=>ee!==E),yield _.user._updateTokensIfNecessary(L),yield _.user.reload()}catch(L){throw L}})()}}const Xo=new WeakMap;function Va(w){const g=(0,$.m9)(w);return Xo.has(g)||Xo.set(g,Ua._fromUser(g)),Xo.get(g)}const Gi="__sak";class Rd{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Gi,"1"),this.storage.removeItem(Gi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Hl=(()=>{class w extends Rd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function qi(){const w=(0,$.z$)();return P(w)||Jt(w)}()&&function Ml(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=oi(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const M=this.storage.getItem(E),L=this.localCache[E];M!==L&&_(E,L,M)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((Ae,Xe,wt)=>{this.notifyListeners(Ae,wt)});const M=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ae=this.storage.getItem(M);if(_.newValue!==Ae)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!E)return}const L=()=>{const Ae=this.storage.getItem(M);!E&&this.localCache[M]===Ae||this.notifyListeners(M,Ae)},ee=this.storage.getItem(M);!function Gt(){return(0,$.w1)()&&10===document.documentMode}()||ee===_.newValue||_.newValue===_.oldValue?L():setTimeout(L,10)}notifyListeners(_,E){this.localCache[_]=E;const M=this.listeners[_];if(M)for(const L of Array.from(M))L(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var M=()=>super._set,L=this;return(0,d.Z)(function*(){yield M().call(L,_,E),L.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,M=this;return(0,d.Z)(function*(){const L=yield E().call(M,_);return M.localCache[_]=JSON.stringify(L),L})()}_remove(_){var E=()=>super._remove,M=this;return(0,d.Z)(function*(){yield E().call(M,_),delete M.localCache[_]})()}}return w.type="LOCAL",w})(),uc=(()=>{class w extends Rd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return w.type="SESSION",w})();let cc=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(L=>L.isListeningto(_));if(E)return E;const M=new w(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,d.Z)(function*(){const M=_,{eventId:L,eventType:ee,data:Ae}=M.data,Xe=E.handlersMap[ee];if(!Xe?.size)return;M.ports[0].postMessage({status:"ack",eventId:L,eventType:ee});const wt=Array.from(Xe).map(function(){var $n=(0,d.Z)(function*(As){return As(M.origin,Ae)});return function(As){return $n.apply(this,arguments)}}()),zt=yield function Ba(w){return Promise.all(w.map(function(){var g=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return g.apply(this,arguments)}}()))}(wt);M.ports[0].postMessage({status:"done",eventId:L,eventType:ee,response:zt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function za(w="",g=10){let _="";for(let E=0;E<g;E++)_+=Math.floor(10*Math.random());return w+_}class Jo{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,E=50){var M=this;return(0,d.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let ee,Ae;return new Promise((Xe,wt)=>{const zt=za("",20);L.port1.start();const $n=setTimeout(()=>{wt(new Error("unsupported_event"))},E);Ae={messageChannel:L,onMessage(As){const ca=As;if(ca.data.eventId===zt)switch(ca.data.status){case"ack":clearTimeout($n),ee=setTimeout(()=>{wt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),Xe(ca.data.response);break;default:clearTimeout($n),clearTimeout(ee),wt(new Error("invalid_response"))}}},M.handlers.add(Ae),L.port1.addEventListener("message",Ae.onMessage),M.target.postMessage({eventType:g,eventId:zt,data:_},[L.port2])}).finally(()=>{Ae&&M.removeMessageHandler(Ae)})})()}}function xn(){return window}function ls(){return typeof xn().WorkerGlobalScope<"u"&&"function"==typeof xn().importScripts}function Ha(){return(Ha=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Eo="firebaseLocalStorageDb",Gl=1,Es="firebaseLocalStorage",Rf="fbase_key";class Cs{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ta(w,g){return w.transaction([Es],g?"readwrite":"readonly").objectStore(Es)}function ci(){const w=indexedDB.open(Eo,Gl);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(Es,{keyPath:Rf})}catch(M){_(M)}}),w.addEventListener("success",(0,d.Z)(function*(){const E=w.result;E.objectStoreNames.contains(Es)?g(E):(E.close(),yield function Wa(){const w=indexedDB.deleteDatabase(Eo);return new Cs(w).toPromise()}(),g(yield ci()))}))})}function ql(w,g,_){return Co.apply(this,arguments)}function Co(){return(Co=(0,d.Z)(function*(w,g,_){const E=ta(w,!0).put({[Rf]:g,value:_});return new Cs(E).toPromise()})).apply(this,arguments)}function ra(){return(ra=(0,d.Z)(function*(w,g){const _=ta(w,!1).get(g),E=yield new Cs(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function bo(w,g){const _=ta(w,!0).delete(g);return new Cs(_).toPromise()}const dc=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield ci()),_.db})()}_withRetries(_){var E=this;return(0,d.Z)(function*(){let M=0;for(;;)try{const L=yield E._openDb();return yield _(L)}catch(L){if(M++>3)throw L;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return ls()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=cc._getInstance(function Mf(){return ls()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(M,L){return{keyProcessed:(yield _._poll()).includes(L.key)}});return function(M,L){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(M,L){return["keyChanged"]});return function(M,L){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var E,M;if(_.activeServiceWorker=yield function $a(){return Ha.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Jo(_.activeServiceWorker);const L=yield _.sender._send("ping",{},800);L&&null!==(E=L[0])&&void 0!==E&&E.fulfilled&&null!==(M=L[0])&&void 0!==M&&M.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Wl(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield ci();return yield ql(_,Gi,"1"),yield bo(_,Gi),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var M=this;return(0,d.Z)(function*(){return M._withPendingWrite((0,d.Z)(function*(){return yield M._withRetries(L=>ql(L,_,E)),M.localCache[_]=E,M.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,d.Z)(function*(){const M=yield E._withRetries(L=>function na(w,g){return ra.apply(this,arguments)}(L,_));return E.localCache[_]=M,M})()}_remove(_){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(M=>bo(M,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const E=yield _._withRetries(ee=>{const Ae=ta(ee,!1).getAll();return new Cs(Ae).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const M=[],L=new Set;for(const{fbase_key:ee,value:Ae}of E)L.add(ee),JSON.stringify(_.localCache[ee])!==JSON.stringify(Ae)&&(_.notifyListeners(ee,Ae),M.push(ee));for(const ee of Object.keys(_.localCache))_.localCache[ee]&&!L.has(ee)&&(_.notifyListeners(ee,null),M.push(ee));return M})()}notifyListeners(_,E){this.localCache[_]=E;const M=this.listeners[_];if(M)for(const L of Array.from(M))L(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function bs(){return(bs=(0,d.Z)(function*(w){return(yield et(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function hc(w){return new Promise((g,_)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=M=>{const L=Me("internal-error");L.customData=M,_(L)},E.type="text/javascript",E.charset="UTF-8",function qa(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function Yl(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Ka=1e12;class pc{constructor(g){this.auth=g,this.counter=Ka,this._widgets=new Map}render(g,_){const E=this.counter;return this._widgets.set(E,new Pd(g,this.auth.name,_||{})),this.counter++,E}reset(g){var _;const E=g||Ka;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Ka))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,d.Z)(function*(){var E;return null===(E=_._widgets.get(g||Ka))||void 0===E||E.execute(),""})()}}class Pd{constructor(g,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof g?document.getElementById(g):g;X(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function kd(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ia=Yl("rcb"),sa=new je(3e4,6e4);class Za{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=xn().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return X(function Xl(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(xn().grecaptcha):new Promise((E,M)=>{const L=xn().setTimeout(()=>{M(Me(g,"network-request-failed"))},sa.get());xn()[ia]=()=>{xn().clearTimeout(L),delete xn()[ia];const Ae=xn().grecaptcha;if(!Ae)return void M(Me(g,"internal-error"));const Xe=Ae.render;Ae.render=(wt,zt)=>{const $n=Xe(wt,zt);return this.counter++,$n},this.hostLanguage=_,E(Ae)},hc(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:ia,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(L),M(Me(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=xn().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Od{load(g){return(0,d.Z)(function*(){return new pc(g)})()}clearedOneInstance(){}}const To="recaptcha",Xs={theme:"light",type:"image"};class Ds{constructor(g,_=Object.assign({},Xs),E){this.parameters=_,this.type=To,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ir(E),this.isInvisible="invisible"===this.parameters.size,X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;X(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Od:new Za,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(_)||new Promise(L=>{const ee=Ae=>{Ae&&(g.tokenChangeListeners.delete(ee),L(Ae))};g.tokenChangeListeners.add(ee),g.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof g)g(_);else if("string"==typeof g){const E=xn()[g];"function"==typeof E&&E(_)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){X(me()&&!ls(),g.auth,"internal-error"),yield function Sn(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Ql(w){return bs.apply(this,arguments)}(g.auth);X(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jl{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Er._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Qa(w,g,_){return Js.apply(this,arguments)}function Js(){return(Js=(0,d.Z)(function*(w,g,_){const E=Ir(w),M=yield Bn(E,g,(0,$.m9)(_));return new Jl(M,L=>Ku(E,L))})).apply(this,arguments)}function tm(w,g,_){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w);yield vo(!1,E,"phone");const M=yield Bn(E.auth,g,(0,$.m9)(_));return new Jl(M,L=>Zu(E,L))})).apply(this,arguments)}function nm(w,g,_){return gc.apply(this,arguments)}function gc(){return(gc=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w),M=yield Bn(E.auth,g,(0,$.m9)(_));return new Jl(M,L=>jn(E,L))})).apply(this,arguments)}function Bn(w,g,_){return rm.apply(this,arguments)}function rm(){return rm=(0,d.Z)(function*(w,g,_){var E;const M=yield _.verify();try{let L;if(X("string"==typeof M,w,"argument-error"),X(_.type===To,w,"argument-error"),L="string"==typeof g?{phoneNumber:g}:g,"session"in L){const ee=L.session;if("phoneNumber"in L)return X("enroll"===ee.type,w,"internal-error"),(yield function Sf(w,g){return et(w,"POST","/v2/accounts/mfaEnrollment:start",_t(w,g))}(w,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{X("signin"===ee.type,w,"internal-error");const Ae=(null===(E=L.multiFactorHint)||void 0===E?void 0:E.uid)||L.multiFactorUid;return X(Ae,w,"missing-multi-factor-info"),(yield function Zl(w,g){return et(w,"POST","/v2/accounts/mfaSignIn:start",_t(w,g))}(w,{mfaPendingCredential:ee.credential,mfaEnrollmentId:Ae,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield function Wg(w,g){return Da.apply(this,arguments)}(w,{phoneNumber:L.phoneNumber,recaptchaToken:M});return ee}}finally{_._reset()}}),rm.apply(this,arguments)}function lv(w,g){return zn.apply(this,arguments)}function zn(){return(zn=(0,d.Z)(function*(w,g){yield yo((0,$.m9)(w),g)})).apply(this,arguments)}let mc=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=Ir(_)}verifyPhoneNumber(_,E){return Bn(this.auth,_,(0,$.m9)(E))}static credential(_,E){return Er._fromVerification(_,E)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:M}=_;return E&&M?Er._fromTokenResponse(E,M):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Di(w,g){return g?$e(g):(X(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class _c extends Ci{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Vn(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Vn(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Vn(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Zi(w){return qu(w.auth,new _c(w),w.bypassAuthState)}function eo(w){const{auth:g,user:_}=w;return X(_,g,"internal-error"),Ol(_,new _c(w),w.bypassAuthState)}function yc(w){return So.apply(this,arguments)}function So(){return(So=(0,d.Z)(function*(w){const{auth:g,user:_}=w;return X(_,g,"internal-error"),yo(_,new _c(w),w.bypassAuthState)})).apply(this,arguments)}class Ao{constructor(g,_,E,M,L=!1){this.auth=g,this.resolver=E,this.user=M,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,d.Z)(function*(E,M){g.pendingPromise={resolve:E,reject:M};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(L){g.reject(L)}});return function(E,M){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:M,postBody:L,tenantId:ee,error:Ae,type:Xe}=g;if(Ae)return void _.reject(Ae);const wt={auth:_.auth,requestUri:E,sessionId:M,tenantId:ee||void 0,postBody:L||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Xe)(wt))}catch(zt){_.reject(zt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Zi;case"linkViaPopup":case"linkViaRedirect":return yc;case"reauthViaPopup":case"reauthViaRedirect":return eo;default:Oe(this.auth,"internal-error")}}resolve(g){ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ld=new je(2e3,1e4);function Nf(w,g,_){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,d.Z)(function*(w,g,_){const E=Ir(w);Se(w,g,Ks);const M=Di(E,_);return new Ud(E,"signInViaPopup",g,M).executeNotNull()})).apply(this,arguments)}function S0(w,g,_){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w);Se(E.auth,g,Ks);const M=Di(E.auth,_);return new Ud(E.auth,"reauthViaPopup",g,M,E).executeNotNull()})).apply(this,arguments)}function Wr(w,g,_){return to.apply(this,arguments)}function to(){return(to=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w);Se(E.auth,g,Ks);const M=Di(E.auth,_);return new Ud(E.auth,"linkViaPopup",g,M,E).executeNotNull()})).apply(this,arguments)}let Ud=(()=>{class w extends Ao{constructor(_,E,M,L,ee){super(_,E,L,ee),this.provider=M,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const E=yield _.execute();return X(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,d.Z)(function*(){ve(1===_.filter.length,"Popup operations only handle one event");const E=za();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(Me(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,M;this.pollId=null!==(M=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Ld.get())};_()}}return w.currentPopupAction=null,w})();const Mo="pendingRedirect",oa=new Map;class Vd extends Ao{constructor(g,_,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,d.Z)(function*(){let E=oa.get(_.auth._key());if(!E){try{const L=(yield function Pf(w,g){return hi.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;E=()=>Promise.resolve(L)}catch(M){E=()=>Promise.reject(M)}oa.set(_.auth._key(),E)}return _.bypassAuthState||oa.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(E,g);if("unknown"!==g.type){if(g.eventId){const M=yield E.auth._redirectUserForId(g.eventId);if(M)return E.user=M,_().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function hi(){return(hi=(0,d.Z)(function*(w,g){const _=Ro(g),E=aa(w);if(!(yield E._isAvailable()))return!1;const M="true"===(yield E._get(_));return yield E._remove(_),M})).apply(this,arguments)}function Ts(w,g){return _n.apply(this,arguments)}function _n(){return(_n=(0,d.Z)(function*(w,g){return aa(w)._set(Ro(g),"true")})).apply(this,arguments)}function lt(){oa.clear()}function eu(w,g){oa.set(w._key(),g)}function aa(w){return $e(w._redirectPersistence)}function Ro(w){return K(Mo,w.config.apiKey,w.name)}function Xa(w,g,_){return function la(w,g,_){return D.apply(this,arguments)}(w,g,_)}function D(){return(D=(0,d.Z)(function*(w,g,_){const E=Ir(w);Se(w,g,Ks),yield E._initializationPromise;const M=Di(E,_);return yield Ts(M,E),M._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function T(w,g,_){return function R(w,g,_){return z.apply(this,arguments)}(w,g,_)}function z(){return(z=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w);Se(E.auth,g,Ks),yield E.auth._initializationPromise;const M=Di(E.auth,_);yield Ts(M,E.auth);const L=yield Pt(E);return M._openRedirect(E.auth,g,"reauthViaRedirect",L)})).apply(this,arguments)}function Y(w,g,_){return function ae(w,g,_){return Pe.apply(this,arguments)}(w,g,_)}function Pe(){return(Pe=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w);Se(E.auth,g,Ks),yield E.auth._initializationPromise;const M=Di(E.auth,_);yield vo(!1,E,g.providerId),yield Ts(M,E.auth);const L=yield Pt(E);return M._openRedirect(E.auth,g,"linkViaRedirect",L)})).apply(this,arguments)}function ot(w,g){return ct.apply(this,arguments)}function ct(){return(ct=(0,d.Z)(function*(w,g){return yield Ir(w)._initializationPromise,Dt(w,g,!1)})).apply(this,arguments)}function Dt(w,g){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,d.Z)(function*(w,g,_=!1){const E=Ir(w),M=Di(E,g),ee=yield new Vd(E,M,_).execute();return ee&&!_&&(delete ee.user._redirectEventId,yield E._persistUserIfCurrent(ee.user),yield E._setRedirectUser(null,g)),ee})).apply(this,arguments)}function Pt(w){return yn.apply(this,arguments)}function yn(){return(yn=(0,d.Z)(function*(w){const g=za(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Ja{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(_=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Gr(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xo(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var E;if(g.error&&!xo(g)){const M=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(Me(this.auth,M))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const E=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qi(g))}saveEventToCache(g){this.cachedEventUids.add(Qi(g)),this.lastProcessedEventTime=Date.now()}}function Qi(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function xo({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function Yi(w){return el.apply(this,arguments)}function el(){return(el=(0,d.Z)(function*(w,g={}){return et(w,"GET","/v1/projects",g)})).apply(this,arguments)}const jd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uv=/^https?/;function Bd(){return(Bd=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Yi(w);for(const _ of g)try{if(vc(_))return}catch{}Oe(w,"unauthorized-domain")})).apply(this,arguments)}function vc(w){const g=le(),{protocol:_,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const ee=new URL(w);return""===ee.hostname&&""===E?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&ee.hostname===E}if(!uv.test(_))return!1;if(jd.test(w))return E===w;const M=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(E)}const Of=new je(3e4,6e4);function wc(){const w=xn().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Ic=null;const sm=new je(5e3,15e3),om="__/auth/iframe",am="emulator/auth/iframe",cv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function um(w){const g=w.config;X(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?nt(g,am):`https://${w.config.authDomain}/${om}`,E={apiKey:g.apiKey,appName:w.name,v:k.SDK_VERSION},M=lm.get(w.config.apiHost);M&&(E.eid=M);const L=w._getFrameworks();return L.length&&(E.fw=L.join(",")),`${_}?${(0,$.xO)(E).slice(1)}`}function tu(){return tu=(0,d.Z)(function*(w){const g=yield function Ff(w){return Ic=Ic||function im(w){return new Promise((g,_)=>{var E,M,L;function ee(){wc(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{wc(),_(Me(w,"network-request-failed"))},timeout:Of.get()})}if(null!==(M=null===(E=xn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==M&&M.Iframe)g(gapi.iframes.getContext());else{if(null===(L=xn().gapi)||void 0===L||!L.load){const Ae=Yl("iframefcb");return xn()[Ae]=()=>{gapi.load?ee():_(Me(w,"network-request-failed"))},hc(`https://apis.google.com/js/api.js?onload=${Ae}`).catch(Xe=>_(Xe))}ee()}}).catch(g=>{throw Ic=null,g})}(w),Ic}(w),_=xn().gapi;return X(_,w,"internal-error"),g.open({where:document.body,url:um(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cv,dontclear:!0},E=>new Promise(function(){var M=(0,d.Z)(function*(L,ee){yield E.restyle({setHideOnLeave:!1});const Ae=Me(w,"network-request-failed"),Xe=xn().setTimeout(()=>{ee(Ae)},sm.get());function wt(){xn().clearTimeout(Xe),L(E)}E.ping(wt).then(wt,()=>{ee(Ae)})});return function(L,ee){return M.apply(this,arguments)}}()))}),tu.apply(this,arguments)}const zd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ec=500,Uf=600,Ss="_blank",cm="http://localhost";class fi{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const dm="__/auth/handler",A0="emulator/auth/handler";function Cc(w,g,_,E,M,L){X(w.config.authDomain,w,"auth-domain-config-required"),X(w.config.apiKey,w,"invalid-api-key");const ee={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:E,v:k.SDK_VERSION,eventId:M};if(g instanceof Ks){g.setDefaultLanguage(w.languageCode),ee.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(ee.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Xe,wt]of Object.entries(L||{}))ee[Xe]=wt}if(g instanceof Ko){const Xe=g.getScopes().filter(wt=>""!==wt);Xe.length>0&&(ee.scopes=Xe.join(","))}w.tenantId&&(ee.tid=w.tenantId);const Ae=ee;for(const Xe of Object.keys(Ae))void 0===Ae[Xe]&&delete Ae[Xe];return`${function jf({config:w}){return w.emulator?nt(w,A0):`https://${w.authDomain}/${dm}`}(w)}?${(0,$.xO)(Ae).slice(1)}`}const nu="webStorageSupport",Bf=class $d{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uc,this._completeRedirectFn=Dt,this._overrideRedirectResult=eu}_openPopup(g,_,E,M){var L=this;return(0,d.Z)(function*(){var ee;ve(null===(ee=L.eventManagers[g._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const Ae=Cc(g,_,E,le(),M);return function ua(w,g,_,E=Ec,M=Uf){const L=Math.max((window.screen.availHeight-M)/2,0).toString(),ee=Math.max((window.screen.availWidth-E)/2,0).toString();let Ae="";const Xe=Object.assign(Object.assign({},zd),{width:E.toString(),height:M.toString(),top:L,left:ee}),wt=(0,$.z$)().toLowerCase();_&&(Ae=J(wt)?Ss:_),F(wt)&&(g=g||cm,Xe.scrollbars="yes");const zt=Object.entries(Xe).reduce((As,[ca,zf])=>`${As}${ca}=${zf},`,"");if(function Dn(w=(0,$.z$)()){var g;return Jt(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(wt)&&"_self"!==Ae)return function Vf(w,g){const _=document.createElement("a");_.href=w,_.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(g||"",Ae),new fi(null);const $n=window.open(g||"",Ae,zt);X($n,w,"popup-blocked");try{$n.focus()}catch{}return new fi($n)}(g,Ae,za())})()}_openRedirect(g,_,E,M){var L=this;return(0,d.Z)(function*(){return yield L._originValidation(g),function ea(w){xn().location.href=w}(Cc(g,_,E,le(),M)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:M,promise:L}=this.eventManagers[_];return M?Promise.resolve(M):(ve(L,"If manager is not set, promise should be"),L)}const E=this.initAndGetManager(g);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(g){var _=this;return(0,d.Z)(function*(){const E=yield function Lf(w){return tu.apply(this,arguments)}(g),M=new Ja(g);return E.register("authEvent",L=>(X(L?.authEvent,g,"invalid-auth-event"),{status:M.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:M},_.iframes[g._key()]=E,M})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(nu,{type:nu},M=>{var L;const ee=null===(L=M?.[0])||void 0===L?void 0:L[nu];void 0!==ee&&_(!!ee),Oe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function kf(w){return Bd.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return oi()||P()||Jt()}};class qr{constructor(g){this.factorId=g}_process(g,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,E);case"signin":return this._finalizeSignIn(g,_.credential);default:return de("unexpected MultiFactorSessionType")}}}class bc extends qr{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new bc(g)}_finalizeEnroll(g,_,E){return function bi(w,g){return et(w,"POST","/v2/accounts/mfaEnrollment:finalize",_t(w,g))}(g,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Nd(w,g){return et(w,"POST","/v2/accounts/mfaSignIn:finalize",_t(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let dv=(()=>{class w{constructor(){}static assertion(_){return bc._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var hm="@firebase/auth";class fm{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(E=>{g(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const mm=(0,$.Pz)("authIdTokenMaxAge")||300;let Wd=null;const Tc=w=>function(){var g=(0,d.Z)(function*(_){const E=_&&(yield _.getIdTokenResult()),M=E&&((new Date).getTime()-Date.parse(E.issuedAtTime))/1e3;if(M&&M>mm)return;const L=E?.token;Wd!==L&&(Wd=L,yield fetch(w,{method:L?"POST":"DELETE",headers:L?{Authorization:`Bearer ${L}`}:{}}))});return function(_){return g.apply(this,arguments)}}();function ru(w=(0,k.getApp)()){const g=(0,k._getProvider)(w,"auth");if(g.isInitialized())return g.getImmediate();const _=function Rt(w,g){const _=(0,k._getProvider)(w,"auth");if(_.isInitialized()){const M=_.getImmediate(),L=_.getOptions();if((0,$.vZ)(L,g??{}))return M;Oe(M,"already-initialized")}return _.initialize({options:g})}(w,{popupRedirectResolver:Bf,persistence:[dc,Hl,uc]}),E=(0,$.Pz)("authTokenSyncURL");if(E){const L=Tc(E);(function ac(w,g,_){(0,$.m9)(w).beforeAuthStateChanged(g,_)})(_,L,()=>L(_.currentUser)),function Jg(w,g,_,E){(0,$.m9)(w).onIdTokenChanged(g,_,E)}(_,ee=>L(ee))}const M=(0,$.q4)("auth");return M&&zu(_,`http://${M}`),_}!function gm(w){(0,k._registerComponent)(new oe.wA("auth",(g,{options:_})=>{const E=g.getProvider("app").getImmediate(),M=g.getProvider("heartbeat"),{apiKey:L,authDomain:ee}=E.options;return((Ae,Xe)=>{X(L&&!L.includes(":"),"invalid-api-key",{appName:Ae.name}),X(!ee?.includes(":"),"argument-error",{appName:Ae.name});const wt={apiKey:L,authDomain:ee,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rl(w)},zt=new xl(Ae,Xe,wt);return function tt(w,g){const _=g?.persistence||[],E=(Array.isArray(_)?_:[_]).map($e);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,g?.popupRedirectResolver)}(zt,_),zt})(E,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,E)=>{g.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new oe.wA("auth-internal",g=>{const _=Ir(g.getProvider("auth").getImmediate());return new fm(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(hm,"0.22.0",function pm(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,k.registerVersion)(hm,"0.22.0","esm2017")}("Browser")},2090:(mt,be,V)=>{"use strict";V.d(be,{$s:()=>Et,BH:()=>Se,DV:()=>ii,Dv:()=>Kn,G6:()=>Ne,GJ:()=>zi,L:()=>pe,LL:()=>bt,P0:()=>Oe,Pz:()=>ke,Sg:()=>He,UG:()=>ve,UI:()=>bn,US:()=>oe,Wj:()=>xi,Wl:()=>Fn,Yr:()=>Ie,ZB:()=>Q,ZR:()=>fn,aH:()=>Me,b$:()=>Rt,cI:()=>rn,dS:()=>Ni,eu:()=>je,g5:()=>k,gK:()=>wr,gQ:()=>si,h$:()=>re,hl:()=>Ve,hu:()=>$,jU:()=>Ke,lb:()=>$t,m9:()=>Qn,ne:()=>Lt,p$:()=>q,pd:()=>qn,q4:()=>Ce,r3:()=>Gn,ru:()=>$e,tV:()=>G,uI:()=>de,ug:()=>Xt,vZ:()=>vr,w1:()=>le,w9:()=>Ur,xO:()=>xr,xb:()=>Ei,z$:()=>X,zI:()=>nt,zd:()=>ir});const d={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},$=function(K,H){if(!K)throw k(H)},k=function(K){return new Error("Firebase Database ("+d.SDK_VERSION+") INTERNAL ASSERT FAILED: "+K)},te=function(K){const H=[];let O=0;for(let F=0;F<K.length;F++){let P=K.charCodeAt(F);P<128?H[O++]=P:P<2048?(H[O++]=P>>6|192,H[O++]=63&P|128):55296==(64512&P)&&F+1<K.length&&56320==(64512&K.charCodeAt(F+1))?(P=65536+((1023&P)<<10)+(1023&K.charCodeAt(++F)),H[O++]=P>>18|240,H[O++]=P>>12&63|128,H[O++]=P>>6&63|128,H[O++]=63&P|128):(H[O++]=P>>12|224,H[O++]=P>>6&63|128,H[O++]=63&P|128)}return H},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,H){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let P=0;P<K.length;P+=3){const J=K[P],fe=P+1<K.length,st=fe?K[P+1]:0,St=P+2<K.length,xt=St?K[P+2]:0;let Dn=(15&st)<<2|xt>>6,Gt=63&xt;St||(Gt=64,fe||(Dn=64)),F.push(O[J>>2],O[(3&J)<<4|st>>4],O[Dn],O[Gt])}return F.join("")},encodeString(K,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(K):this.encodeByteArray(te(K),H)},decodeString(K,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(K):function(K){const H=[];let O=0,F=0;for(;O<K.length;){const P=K[O++];if(P<128)H[F++]=String.fromCharCode(P);else if(P>191&&P<224){const J=K[O++];H[F++]=String.fromCharCode((31&P)<<6|63&J)}else if(P>239&&P<365){const St=((7&P)<<18|(63&K[O++])<<12|(63&K[O++])<<6|63&K[O++])-65536;H[F++]=String.fromCharCode(55296+(St>>10)),H[F++]=String.fromCharCode(56320+(1023&St))}else{const J=K[O++],fe=K[O++];H[F++]=String.fromCharCode((15&P)<<12|(63&J)<<6|63&fe)}}return H.join("")}(this.decodeStringToByteArray(K,H))},decodeStringToByteArray(K,H){this.init_();const O=H?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let P=0;P<K.length;){const J=O[K.charAt(P++)],st=P<K.length?O[K.charAt(P)]:0;++P;const xt=P<K.length?O[K.charAt(P)]:64;++P;const At=P<K.length?O[K.charAt(P)]:64;if(++P,null==J||null==st||null==xt||null==At)throw new ue;F.push(J<<2|st>>4),64!==xt&&(F.push(st<<4&240|xt>>2),64!==At&&F.push(xt<<6&192|At))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}};class ue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const re=function(K){const H=te(K);return oe.encodeByteArray(H,!0)},pe=function(K){return re(K).replace(/\./g,"")},G=function(K){try{return oe.decodeString(K,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function q(K){return Q(void 0,K)}function Q(K,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return H}for(const O in H)!H.hasOwnProperty(O)||!Ue(O)||(K[O]=Q(K[O],H[O]));return K}function Ue(K){return"__proto__"!==K}const De=()=>{try{return function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const K=process.env.__FIREBASE_DEFAULTS__;return K?JSON.parse(K):void 0})()||(()=>{if(typeof document>"u")return;let K;try{K=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=K&&G(K[1]);return H&&JSON.parse(H)})()}catch(K){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${K}`)}},Ce=K=>{var H,O;return null===(O=null===(H=De())||void 0===H?void 0:H.emulatorHosts)||void 0===O?void 0:O[K]},Oe=K=>{const H=Ce(K);if(!H)return;const O=H.lastIndexOf(":");if(O<=0||O+1===H.length)throw new Error(`Invalid host ${H} with no separate hostname and port!`);const F=parseInt(H.substring(O+1),10);return"["===H[0]?[H.substring(1,O-1),F]:[H.substring(0,O),F]},Me=()=>{var K;return null===(K=De())||void 0===K?void 0:K.config},ke=K=>{var H;return null===(H=De())||void 0===H?void 0:H[`_${K}`]};class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,O)=>{this.resolve=H,this.reject=O})}wrapCallback(H){return(O,F)=>{O?this.reject(O):this.resolve(F),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(O):H(O,F))}}}function He(K,H){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=H||"demo-project",P=K.iat||0,J=K.sub||K.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const fe=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:P,exp:P+3600,auth_time:P,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},K);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(fe)),""].join(".")}function X(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(X())}function ve(){var K;const H=null===(K=De())||void 0===K?void 0:K.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ke(){return"object"==typeof self&&self.self===self}function $e(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function Rt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function le(){const K=X();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Ie(){return!0===d.NODE_CLIENT||!0===d.NODE_ADMIN}function Ne(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ve(){try{return"object"==typeof indexedDB}catch{return!1}}function je(){return new Promise((K,H)=>{try{let O=!0;const F="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(F);P.onsuccess=()=>{P.result.close(),O||self.indexedDB.deleteDatabase(F),K(!0)},P.onupgradeneeded=()=>{O=!1},P.onerror=()=>{var J;H((null===(J=P.error)||void 0===J?void 0:J.message)||"")}}catch(O){H(O)}})}function nt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class fn extends Error{constructor(H,O,F){super(O),this.code=H,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bt.prototype.create)}}class bt{constructor(H,O,F){this.service=H,this.serviceName=O,this.errors=F}create(H,...O){const F=O[0]||{},P=`${this.service}/${H}`,J=this.errors[H],fe=J?function _t(K,H){return K.replace(et,(O,F)=>{const P=H[F];return null!=P?String(P):`<${F}?>`})}(J,F):"Error";return new fn(P,`${this.serviceName}: ${fe} (${P}).`,F)}}const et=/\{\$([^}]+)}/g;function rn(K){return JSON.parse(K)}function Fn(K){return JSON.stringify(K)}const gn=function(K){let H={},O={},F={},P="";try{const J=K.split(".");H=rn(G(J[0])||""),O=rn(G(J[1])||""),P=J[2],F=O.d||{},delete O.d}catch{}return{header:H,claims:O,data:F,signature:P}},Ur=function(K){const O=gn(K).claims;return!!O&&"object"==typeof O&&O.hasOwnProperty("iat")},zi=function(K){const H=gn(K).claims;return"object"==typeof H&&!0===H.admin};function Gn(K,H){return Object.prototype.hasOwnProperty.call(K,H)}function ii(K,H){if(Object.prototype.hasOwnProperty.call(K,H))return K[H]}function Ei(K){for(const H in K)if(Object.prototype.hasOwnProperty.call(K,H))return!1;return!0}function bn(K,H,O){const F={};for(const P in K)Object.prototype.hasOwnProperty.call(K,P)&&(F[P]=H.call(O,K[P],P,K));return F}function vr(K,H){if(K===H)return!0;const O=Object.keys(K),F=Object.keys(H);for(const P of O){if(!F.includes(P))return!1;const J=K[P],fe=H[P];if(at(J)&&at(fe)){if(!vr(J,fe))return!1}else if(J!==fe)return!1}for(const P of F)if(!O.includes(P))return!1;return!0}function at(K){return null!==K&&"object"==typeof K}function xr(K){const H=[];for(const[O,F]of Object.entries(K))Array.isArray(F)?F.forEach(P=>{H.push(encodeURIComponent(O)+"="+encodeURIComponent(P))}):H.push(encodeURIComponent(O)+"="+encodeURIComponent(F));return H.length?"&"+H.join("&"):""}function ir(K){const H={};return K.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[P,J]=F.split("=");H[decodeURIComponent(P)]=decodeURIComponent(J)}}),H}function qn(K){const H=K.indexOf("?");if(!H)return"";const O=K.indexOf("#",H);return K.substring(H,O>0?O:void 0)}class si{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,O){O||(O=0);const F=this.W_;if("string"==typeof H)for(let At=0;At<16;At++)F[At]=H.charCodeAt(O)<<24|H.charCodeAt(O+1)<<16|H.charCodeAt(O+2)<<8|H.charCodeAt(O+3),O+=4;else for(let At=0;At<16;At++)F[At]=H[O]<<24|H[O+1]<<16|H[O+2]<<8|H[O+3],O+=4;for(let At=16;At<80;At++){const Dn=F[At-3]^F[At-8]^F[At-14]^F[At-16];F[At]=4294967295&(Dn<<1|Dn>>>31)}let xt,Jt,P=this.chain_[0],J=this.chain_[1],fe=this.chain_[2],st=this.chain_[3],St=this.chain_[4];for(let At=0;At<80;At++){At<40?At<20?(xt=st^J&(fe^st),Jt=1518500249):(xt=J^fe^st,Jt=1859775393):At<60?(xt=J&fe|st&(J|fe),Jt=2400959708):(xt=J^fe^st,Jt=3395469782);const Dn=(P<<5|P>>>27)+xt+St+Jt+F[At]&4294967295;St=st,st=fe,fe=4294967295&(J<<30|J>>>2),J=P,P=Dn}this.chain_[0]=this.chain_[0]+P&4294967295,this.chain_[1]=this.chain_[1]+J&4294967295,this.chain_[2]=this.chain_[2]+fe&4294967295,this.chain_[3]=this.chain_[3]+st&4294967295,this.chain_[4]=this.chain_[4]+St&4294967295}update(H,O){if(null==H)return;void 0===O&&(O=H.length);const F=O-this.blockSize;let P=0;const J=this.buf_;let fe=this.inbuf_;for(;P<O;){if(0===fe)for(;P<=F;)this.compress_(H,P),P+=this.blockSize;if("string"==typeof H){for(;P<O;)if(J[fe]=H.charCodeAt(P),++fe,++P,fe===this.blockSize){this.compress_(J),fe=0;break}}else for(;P<O;)if(J[fe]=H[P],++fe,++P,fe===this.blockSize){this.compress_(J),fe=0;break}}this.inbuf_=fe,this.total_+=O}digest(){const H=[];let O=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let P=this.blockSize-1;P>=56;P--)this.buf_[P]=255&O,O/=256;this.compress_(this.buf_);let F=0;for(let P=0;P<5;P++)for(let J=24;J>=0;J-=8)H[F]=this.chain_[P]>>J&255,++F;return H}}function Lt(K,H){const O=new yt(K,H);return O.subscribe.bind(O)}class yt{constructor(H,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{H(this)}).catch(F=>{this.error(F)})}next(H){this.forEachObserver(O=>{O.next(H)})}error(H){this.forEachObserver(O=>{O.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,O,F){let P;if(void 0===H&&void 0===O&&void 0===F)throw new Error("Missing Observer.");P=function Mn(K,H){if("object"!=typeof K||null===K)return!1;for(const O of H)if(O in K&&"function"==typeof K[O])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:O,complete:F},void 0===P.next&&(P.next=Rn),void 0===P.error&&(P.error=Rn),void 0===P.complete&&(P.complete=Rn);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch{}}),this.observers.push(P),J}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,H)}sendOne(H,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{O(this.observers[H])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rn(){}const Kn=function(K,H,O,F){let P;if(F<H?P="at least "+H:F>O&&(P=0===O?"none":"no more than "+O),P)throw new Error(K+" failed: Was called with "+F+(1===F?" argument.":" arguments.")+" Expects "+P+".")};function wr(K,H){return`${K} failed: ${H} argument `}function xi(K,H,O,F){if((!F||O)&&"function"!=typeof O)throw new Error(wr(K,H)+"must be a valid function.")}function $t(K,H,O,F){if((!F||O)&&("object"!=typeof O||null===O))throw new Error(wr(K,H)+"must be a valid context object.")}const Ni=function(K){const H=[];let O=0;for(let F=0;F<K.length;F++){let P=K.charCodeAt(F);if(P>=55296&&P<=56319){const J=P-55296;F++,$(F<K.length,"Surrogate pair missing trail surrogate."),P=65536+(J<<10)+(K.charCodeAt(F)-56320)}P<128?H[O++]=P:P<2048?(H[O++]=P>>6|192,H[O++]=63&P|128):P<65536?(H[O++]=P>>12|224,H[O++]=P>>6&63|128,H[O++]=63&P|128):(H[O++]=P>>18|240,H[O++]=P>>12&63|128,H[O++]=P>>6&63|128,H[O++]=63&P|128)}return H},Xt=function(K){let H=0;for(let O=0;O<K.length;O++){const F=K.charCodeAt(O);F<128?H++:F<2048?H+=2:F>=55296&&F<=56319?(H+=4,O++):H+=3}return H},Zn=1e3,Be=2,Ee=144e5,rt=.5;function Et(K,H=Zn,O=Be){const F=H*Math.pow(O,K),P=Math.round(rt*F*(Math.random()-.5)*2);return Math.min(Ee,F+P)}function Qn(K){return K&&K._delegate?K._delegate:K}},6186:(mt,be,V)=>{"use strict";var d=V(4650);let $=null;function k(){return $}class ie{}const oe=new d.InjectionToken("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:function(){return function re(){return(0,d.\u0275\u0275inject)(G)}()},providedIn:"platform"}),n})();const pe=new d.InjectionToken("Location Initialized");let G=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){q()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){q()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(oe))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:function(){return function Q(){return new G((0,d.\u0275\u0275inject)(oe))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function Ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let ut=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:function(){return(0,d.inject)(De)},providedIn:"root"}),n})();const ye=new d.InjectionToken("appBaseHref");let De=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.inject)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ue(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+qe(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+qe(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(ue),d.\u0275\u0275inject(ye,8))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ce=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ue(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+qe(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+qe(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(ue),d.\u0275\u0275inject(ye,8))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Oe=(()=>{class n{constructor(t){this._subject=new d.EventEmitter,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function He(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Te(Se(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function ke(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Se(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=qe,n.joinWithSlash=Ue,n.stripTrailingSlash=Te,n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(ut))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:function(){return function Me(){return new Oe((0,d.\u0275\u0275inject)(ut))}()},providedIn:"root"}),n})();function Se(n){return n.replace(/\/index.html$/,"")}function Nl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class _s{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ln=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new _s(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,u),ys(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ys(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(d.ViewContainerRef),d.\u0275\u0275directiveInject(d.TemplateRef),d.\u0275\u0275directiveInject(d.IterableDiffers))},n.\u0275dir=d.\u0275\u0275defineDirective({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ys(n,e){n.context.$implicit=e.item}let jr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Hu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ht("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ht("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(d.ViewContainerRef),d.\u0275\u0275directiveInject(d.TemplateRef))},n.\u0275dir=d.\u0275\u0275defineDirective({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Hu{constructor(){this.$implicit=null,this.ngIf=null}}function Ht(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.\u0275stringify)(e)}'.`)}let Vn=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split("."),u=-1===i.indexOf("-")?void 0:d.RendererStyleFlags2.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,a?`${r}${a}`:r,u):this._renderer.removeStyle(this._ngEl.nativeElement,i,u)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(d.KeyValueDiffers),d.\u0275\u0275directiveInject(d.Renderer2))},n.\u0275dir=d.\u0275\u0275defineDirective({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();class Wg{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Da{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const yd=new Da,vs=new Wg;let $i=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.\u0275isPromise)(t))return yd;if((0,d.\u0275isSubscribable)(t))return vs;throw function jt(n,e){return new d.\u0275RuntimeError(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(d.ChangeDetectorRef,16))},n.\u0275pipe=d.\u0275\u0275definePipe({name:"async",type:n,pure:!1,standalone:!0}),n})(),Aa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({}),n})();const wd="server";function Ed(n){return n===wd}let yo=(()=>{class n{}return n.\u0275prov=(0,d.\u0275\u0275defineInjectable)({token:n,providedIn:"root",factory:()=>new Ra((0,d.\u0275\u0275inject)(oe),window)}),n})();class Ra{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function xa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=vo(this.window.history)||vo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function vo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Na{}class Xo extends ie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Va extends Xo{static makeCurrent(){!function te(n){$||($=n)}(new Va)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Rd(){return Gi=Gi||document.querySelector("base"),Gi?Gi.getAttribute("href"):null}();return null==t?null:function ja(n){qi=qi||document.createElement("a"),qi.setAttribute("href",n);const e=qi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Gi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Nl(document.cookie,e)}}let qi,Gi=null;const xd=new d.InjectionToken("TRANSITION_ID"),Hl=[{provide:d.APP_INITIALIZER,useFactory:function ov(n,e,t){return()=>{t.get(d.ApplicationInitStatus).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[xd,oe,d.Injector],multi:!0}];let uc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();const Ba=new d.InjectionToken("EventManagerPlugins");let cc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(Ba),d.\u0275\u0275inject(d.NgZone))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();class za{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Jo=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let a=i.get(t)??0;return a+=r,a>0?i.set(t,a):i.delete(t),a}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),xn=(()=>{class n extends Jo{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(a=>a.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const a=this.styleRef.get(r);a?a.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(oe))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();const ea={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ls=/%COMP%/g,Gl=new d.InjectionToken("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Cs(n,e){return e.flat(100).map(t=>t.replace(ls,n))}function ta(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Wa=(()=>{class n{constructor(t,r,i,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.rendererByCompId=new Map,this.defaultRenderer=new ci(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Ga?i.applyToHost(t):i instanceof bo&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const u=this.eventManager,f=this.sharedStylesHost,m=this.removeStylesOnCompDestory;switch(r.encapsulation){case d.ViewEncapsulation.Emulated:a=new Ga(u,f,r,this.appId,m);break;case d.ViewEncapsulation.ShadowDom:return new ra(u,f,t,r);default:a=new bo(u,f,r,m)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(cc),d.\u0275\u0275inject(xn),d.\u0275\u0275inject(d.APP_ID),d.\u0275\u0275inject(Gl))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();class ci{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ea[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(na(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(na(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ea[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ea[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.RendererStyleFlags2.DashCase|d.RendererStyleFlags2.Important)?e.style.setProperty(t,r,i&d.RendererStyleFlags2.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ta(r)):this.eventManager.addEventListener(e,t,ta(r))}}function na(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ra extends ci{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Cs(i.id,i.styles);for(const u of a){const f=document.createElement("style");f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class bo extends ci{constructor(e,t,r,i,a=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Cs(a,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ga extends bo{constructor(e,t,r,i,a){const u=i+"-"+r.id;super(e,t,r,a,u),this.contentAttr=function Es(n){return"_ngcontent-%COMP%".replace(ls,n)}(u),this.hostAttr=function Rf(n){return"_nghost-%COMP%".replace(ls,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let xf=(()=>{class n extends za{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(oe))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();const Kl=["alt","control","meta","shift"],dc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Nd=(()=>{class n extends za{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),u="code."),Kl.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),u+=v+".")}),u+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=u,m}static matchEventFullKeyCode(t,r){let i=dc[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Kl.forEach(u=>{u!==i&&(0,Zl[u])(t)&&(a+=u+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(oe))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();const pc=(0,d.createPlatformFactory)(d.platformCore,"browser",[{provide:d.PLATFORM_ID,useValue:"browser"},{provide:d.PLATFORM_INITIALIZER,useValue:function Yl(){Va.makeCurrent()},multi:!0},{provide:oe,useFactory:function fc(){return(0,d.\u0275setDocument)(document),document},deps:[]}]),Pd=new d.InjectionToken(""),kd=[{provide:d.\u0275TESTABILITY_GETTER,useClass:class av{addToWindow(e){d.\u0275global.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.\u0275global.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.\u0275global.getAllAngularRootElements=()=>e.getAllRootElements(),d.\u0275global.frameworkStabilizers||(d.\u0275global.frameworkStabilizers=[]),d.\u0275global.frameworkStabilizers.push(r=>{const i=d.\u0275global.getAllAngularTestabilities();let a=i.length,u=!1;const f=function(m){u=u||m,a--,0==a&&r(u)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.\u0275TESTABILITY,useClass:d.Testability,deps:[d.NgZone,d.TestabilityRegistry,d.\u0275TESTABILITY_GETTER]},{provide:d.Testability,useClass:d.Testability,deps:[d.NgZone,d.TestabilityRegistry,d.\u0275TESTABILITY_GETTER]}],ia=[{provide:d.\u0275INJECTOR_SCOPE,useValue:"root"},{provide:d.ErrorHandler,useFactory:function di(){return new d.ErrorHandler},deps:[]},{provide:Ba,useClass:xf,multi:!0,deps:[oe,d.NgZone,d.PLATFORM_ID]},{provide:Ba,useClass:Nd,multi:!0,deps:[oe]},{provide:Wa,useClass:Wa,deps:[cc,xn,d.APP_ID,Gl]},{provide:d.RendererFactory2,useExisting:Wa},{provide:Jo,useExisting:xn},{provide:xn,useClass:xn,deps:[oe]},{provide:cc,useClass:cc,deps:[Ba,d.NgZone]},{provide:Na,useClass:uc,deps:[]},[]];let sa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.APP_ID,useValue:t.appId},{provide:xd,useExisting:d.APP_ID},Hl]}}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(Pd,12))},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({providers:[...ia,...kd],imports:[Aa,d.ApplicationModule]}),n})(),To=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(oe))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:function(t){let r=null;return r=t?new t:function Od(){return new To((0,d.\u0275\u0275inject)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Wt=V(8996),Wr=V(9751);const{isArray:to}=Array,{getPrototypeOf:Ud,prototype:Mo,keys:oa}=Object;function Vd(n){if(1===n.length){const e=n[0];if(to(e))return{args:e,keys:null};if(function Pf(n){return n&&"object"==typeof n&&Ud(n)===Mo}(e)){const t=oa(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var hi=V(8421),Ts=V(7669),_n=V(5403),lt=V(4004);const{isArray:eu}=Array;function Ro(n){return(0,lt.U)(e=>function aa(n,e){return eu(e)?n(...e):n(e)}(n,e))}function Xa(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let D=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(d.Renderer2),d.\u0275\u0275directiveInject(d.ElementRef))},n.\u0275dir=d.\u0275\u0275defineDirective({type:n}),n})(),T=(()=>{class n extends D{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275dir=d.\u0275\u0275defineDirective({type:n,features:[d.\u0275\u0275InheritDefinitionFeature]}),n})();const R=new d.InjectionToken("NgValueAccessor"),ae={provide:R,useExisting:(0,d.forwardRef)(()=>ct),multi:!0},ot=new d.InjectionToken("CompositionEventMode");let ct=(()=>{class n extends D{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Pe(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(d.Renderer2),d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(ot,8))},n.\u0275dir=d.\u0275\u0275defineDirective({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.\u0275\u0275listener("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d.\u0275\u0275ProvidersFeature([ae]),d.\u0275\u0275InheritDefinitionFeature]}),n})();const Dt=!1;function Bt(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Pt(n){return null!=n&&"number"==typeof n.length}const yn=new d.InjectionToken("NgValidators"),kn=new d.InjectionToken("NgAsyncValidators"),Ja=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Qi{static min(e){return function xo(n){return e=>{if(Bt(e.value)||Bt(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Gr(n){return e=>{if(Bt(e.value)||Bt(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Yi(e)}static requiredTrue(e){return function el(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function jd(n){return Bt(n.value)||Ja.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function uv(n){return e=>Bt(e.value)||!Pt(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function kf(n){return e=>Pt(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Bd(n){if(!n)return vc;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Bt(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return om(e)}static composeAsync(e){return cv(e)}}function Yi(n){return Bt(n.value)?{required:!0}:null}function vc(n){return null}function Of(n){return null!=n}function wc(n){const e=(0,d.\u0275isPromise)(n)?(0,Wt.D)(n):n;if(Dt&&!(0,d.\u0275isObservable)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new d.\u0275RuntimeError(-1101,t)}return e}function im(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Ic(n,e){return e.map(t=>t(n))}function sm(n){return n.map(e=>function Ff(n){return!n.validate}(e)?e:t=>e.validate(t))}function om(n){if(!n)return null;const e=n.filter(Of);return 0==e.length?null:function(t){return im(Ic(t,e))}}function am(n){return null!=n?om(sm(n)):null}function cv(n){if(!n)return null;const e=n.filter(Of);return 0==e.length?null:function(t){return function la(...n){const e=(0,Ts.jO)(n),{args:t,keys:r}=Vd(n),i=new Wr.y(a=>{const{length:u}=t;if(!u)return void a.complete();const f=new Array(u);let m=u,v=u;for(let b=0;b<u;b++){let A=!1;(0,hi.Xf)(t[b]).subscribe((0,_n.x)(a,x=>{A||(A=!0,v--),f[b]=x},()=>m--,void 0,()=>{(!m||!A)&&(v||a.next(r?Xa(r,f):f),a.complete())}))}});return e?i.pipe(Ro(e)):i}(Ic(t,e).map(wc)).pipe((0,lt.U)(im))}}function lm(n){return null!=n?cv(sm(n)):null}function um(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Lf(n){return n._rawValidators}function tu(n){return n._rawAsyncValidators}function zd(n){return n?Array.isArray(n)?n:[n]:[]}function Ec(n,e){return Array.isArray(n)?n.includes(e):n===e}function Uf(n,e){const t=zd(e);return zd(n).forEach(i=>{Ec(t,i)||t.push(i)}),t}function Ss(n,e){return zd(e).filter(t=>!Ec(n,t))}class cm{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=am(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class fi extends cm{get formDirective(){return null}get path(){return null}}class ua extends cm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Vf{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Cc=(()=>{class n extends Vf{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(ua,2))},n.\u0275dir=d.\u0275\u0275defineDirective({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.\u0275\u0275classProp("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.\u0275\u0275InheritDefinitionFeature]}),n})(),jf=(()=>{class n extends Vf{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(fi,10))},n.\u0275dir=d.\u0275\u0275defineDirective({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.\u0275\u0275classProp("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.\u0275\u0275InheritDefinitionFeature]}),n})();function pm(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const Wd=!1,Tc="VALID",ru="INVALID",w="PENDING",g="DISABLED";function _(n){return(ee(n)?n.validators:n)||null}function M(n,e){return(ee(e)?e.asyncValidators:n)||null}function ee(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class wt{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Tc}get invalid(){return this.status===ru}get pending(){return this.status==w}get disabled(){return this.status===g}get enabled(){return this.status!==g}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Uf(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Uf(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ss(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ss(e,this._rawAsyncValidators))}hasValidator(e){return Ec(this._rawValidators,e)}hasAsyncValidator(e){return Ec(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=w,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=g,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Tc,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tc||this.status===w)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?g:Tc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=w,this._hasOwnPendingAsyncValidator=!0;const t=wc(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.EventEmitter,this.statusChanges=new d.EventEmitter}_calculateStatus(){return this._allControlsDisabled()?g:this.errors?ru:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(w)?w:this._anyControlsHaveStatus(ru)?ru:Tc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ee(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function E(n){return Array.isArray(n)?am(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function L(n){return Array.isArray(n)?lm(n):n||null}(this._rawAsyncValidators)}}class zt extends wt{constructor(e,t,r){super(_(t),M(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Xe(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.\u0275RuntimeError(1002,Wd?function mm(n,e){return`Must supply a value for form control ${pm(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function Ae(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.\u0275RuntimeError(1e3,Wd?function gm(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new d.\u0275RuntimeError(1001,Wd?function pv(n,e){return`Cannot find form control ${pm(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const da=new d.InjectionToken("CallSetDisabledState",{providedIn:"root",factory:()=>tl}),tl="always";function iu(n,e,t=tl){il(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function gv(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Hf(n,e)})}(n,e),function Mc(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Gd(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Hf(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function $f(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function nl(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ac(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function rl(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function il(n,e){const t=Lf(n);null!==e.validator?n.setValidators(um(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=tu(n);null!==e.asyncValidator?n.setAsyncValidators(um(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();rl(e._rawValidators,i),rl(e._rawAsyncValidators,i)}function Ac(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Lf(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=tu(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return rl(e._rawValidators,r),rl(e._rawAsyncValidators,r),t}function Hf(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Im(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Kd(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const su=class extends wt{constructor(e=null,t,r){super(_(t),M(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ee(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Kd(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Im(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Im(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Kd(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Em=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.\u0275\u0275defineDirective({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Cm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({}),n})();const Cv=new d.InjectionToken("NgModelWithFormControlWarning"),US={provide:fi,useExisting:(0,d.forwardRef)(()=>Gf)};let Gf=(()=>{class n extends fi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.EventEmitter,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ac(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return iu(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){nl(t.control||null,t,!1),function wm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function ym(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(nl(r||null,t),(n=>n instanceof su)(i)&&(iu(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function mv(n,e){il(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function M0(n,e){return Ac(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){il(this.form,this),this._oldForm&&Ac(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(yn,10),d.\u0275\u0275directiveInject(kn,10),d.\u0275\u0275directiveInject(da,8))},n.\u0275dir=d.\u0275\u0275defineDirective({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.\u0275\u0275listener("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d.\u0275\u0275ProvidersFeature([US]),d.\u0275\u0275InheritDefinitionFeature,d.\u0275\u0275NgOnChangesFeature]}),n})();const VS={provide:ua,useExisting:(0,d.forwardRef)(()=>bm)};let bm=(()=>{class n extends ua{set isDisabled(t){}constructor(t,r,i,a,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new d.EventEmitter,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function vm(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===ct?t=a:function R0(n){return Object.getPrototypeOf(n.constructor)===T}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._added||this._setUpControl(),function _m(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Sc(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(fi,13),d.\u0275\u0275directiveInject(yn,10),d.\u0275\u0275directiveInject(kn,10),d.\u0275\u0275directiveInject(R,10),d.\u0275\u0275directiveInject(Cv,8))},n.\u0275dir=d.\u0275\u0275defineDirective({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d.\u0275\u0275ProvidersFeature([VS]),d.\u0275\u0275InheritDefinitionFeature,d.\u0275\u0275NgOnChangesFeature]}),n})(),Zd=(()=>{class n{constructor(){this._validator=vc}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):vc,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.\u0275\u0275defineDirective({type:n,features:[d.\u0275\u0275NgOnChangesFeature]}),n})();const ok={provide:yn,useExisting:(0,d.forwardRef)(()=>Kf),multi:!0};let Kf=(()=>{class n extends Zd{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.\u0275coerceToBoolean,this.createValidator=t=>Yi}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275dir=d.\u0275\u0275defineDirective({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.\u0275\u0275attribute("required",r._enabled?"":null)},inputs:{required:"required"},features:[d.\u0275\u0275ProvidersFeature([ok]),d.\u0275\u0275InheritDefinitionFeature]}),n})(),Mm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({imports:[Cm]}),n})(),Mv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:da,useValue:t.callSetDisabledState??tl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({imports:[Mm]}),n})(),Rv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Cv,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:da,useValue:t.callSetDisabledState??tl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({imports:[Mm]}),n})();function vt(...n){const e=(0,Ts.yG)(n);return(0,Wt.D)(n,e)}var Fi=V(5577),xv=V(576);function al(n,e){return(0,xv.m)(e)?(0,Fi.z)(n,e,1):(0,Fi.z)(n,1)}var Or=V(4482);function Ms(n,e){return(0,Or.e)((t,r)=>{let i=0;t.subscribe((0,_n.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}class Qd{}class Z0{}class No{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(u):this.headers.set(a,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof No?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new No;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof No?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let u=this.headers.get(t);if(!u)return;u=u.filter(f=>-1===a.indexOf(f)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Nv{encodeKey(e){return X0(e)}encodeValue(e){return X0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Y0=/%(\d[a-f0-9])/gi,Nc={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function X0(n){return encodeURIComponent(n).replace(Y0,(e,t)=>Nc[t]??e)}function Yd(n){return`${n}`}class Po{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Nv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Q0(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[u,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(u)||[];m.push(f),t.set(u,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Yd):[Yd(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Po({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Yd(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Yd(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Pv{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function lu(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function kv(n){return typeof Blob<"u"&&n instanceof Blob}function Nm(n){return typeof FormData<"u"&&n instanceof FormData}class Qf{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function xm(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new No),this.context||(this.context=new Pv),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+u}}else this.params=new Po,this.urlWithParams=t}serializeBody(){return null===this.body?null:lu(this.body)||kv(this.body)||Nm(this.body)||function JS(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Po?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Nm(this.body)?null:kv(this.body)?this.body.type||null:lu(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Po?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,v=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((A,x)=>A.set(x,e.setHeaders[x]),m)),e.setParams&&(v=Object.keys(e.setParams).reduce((A,x)=>A.set(x,e.setParams[x]),v)),new Qf(t,r,a,{params:v,headers:m,context:b,reportProgress:f,responseType:i,withCredentials:u})}}var hr=(()=>((hr=hr||{})[hr.Sent=0]="Sent",hr[hr.UploadProgress=1]="UploadProgress",hr[hr.ResponseHeader=2]="ResponseHeader",hr[hr.DownloadProgress=3]="DownloadProgress",hr[hr.Response=4]="Response",hr[hr.User=5]="User",hr))();class uu{constructor(e,t=200,r="OK"){this.headers=e.headers||new No,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ov extends uu{constructor(e={}){super(e),this.type=hr.ResponseHeader}clone(e={}){return new Ov({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Yf extends uu{constructor(e={}){super(e),this.type=hr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Yf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Pm extends uu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Xf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let km=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof Qf)a=t;else{let m,v;m=i.headers instanceof No?i.headers:new No(i.headers),i.params&&(v=i.params instanceof Po?i.params:new Po({fromObject:i.params})),a=new Qf(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=vt(a).pipe(al(m=>this.handler.handle(m)));if(t instanceof Qf||"events"===i.observe)return u;const f=u.pipe(Ms(m=>m instanceof Yf));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,lt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return f.pipe((0,lt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return f.pipe((0,lt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return f.pipe((0,lt.U)(m=>m.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Po).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Xf(i,r))}post(t,r,i={}){return this.request("POST",t,Xf(i,r))}put(t,r,i={}){return this.request("PUT",t,Xf(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(Qd))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();function Jf(n,e){return e(n)}function eA(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const ck=new d.InjectionToken("HTTP_INTERCEPTORS"),ep=new d.InjectionToken("HTTP_INTERCEPTOR_FNS");function tp(){let n=null;return(e,t)=>(null===n&&(n=((0,d.inject)(ck,{optional:!0})??[]).reduceRight(eA,Jf)),n(e,t))}let Pc,eC=(()=>{class n extends Qd{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(ep)));this.chain=r.reduceRight((i,a)=>function J0(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(i,a,this.injector),Jf)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(Z0),d.\u0275\u0275inject(d.EnvironmentInjector))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Xd=0;class Fv{}function nC(){return"object"==typeof window?window:{}}let Lv=(()=>{class n{constructor(t,r){this.callbackMap=t,this.document=r,this.resolvedPromise=Promise.resolve()}nextCallback(){return"ng_jsonp_callback_"+Xd++}handle(t){if("JSONP"!==t.method)throw new Error("JSONP requests must use JSONP request method.");if("json"!==t.responseType)throw new Error("JSONP requests must use Json response type.");if(t.headers.keys().length>0)throw new Error("JSONP requests do not support headers.");return new Wr.y(r=>{const i=this.nextCallback(),a=t.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,`=${i}$1`),u=this.document.createElement("script");u.src=a;let f=null,m=!1;this.callbackMap[i]=x=>{delete this.callbackMap[i],f=x,m=!0};const v=()=>{u.parentNode&&u.parentNode.removeChild(u),delete this.callbackMap[i]};return u.addEventListener("load",x=>{this.resolvedPromise.then(()=>{v(),m?(r.next(new Yf({body:f,status:200,statusText:"OK",url:a})),r.complete()):r.error(new Pm({url:a,status:0,statusText:"JSONP Error",error:new Error("JSONP injected script did not invoke callback.")}))})}),u.addEventListener("error",x=>{v(),r.error(new Pm({error:x,status:0,statusText:"JSONP Error",url:a}))}),this.document.body.appendChild(u),r.next({type:hr.Sent}),()=>{m||this.removeListeners(u),v()}})}removeListeners(t){Pc||(Pc=this.document.implementation.createHTMLDocument()),Pc.adoptNode(t)}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(Fv),d.\u0275\u0275inject(oe))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();function Om(n,e){return"JSONP"===n.method?(0,d.inject)(Lv).handle(n):e(n)}const iA=/^\)\]\}',?\n/;let Jd=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Wr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((j,W)=>i.setRequestHeader(j,W.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const j=t.detectContentTypeHeader();null!==j&&i.setRequestHeader("Content-Type",j)}if(t.responseType){const j=t.responseType.toLowerCase();i.responseType="json"!==j?j:"text"}const a=t.serializeBody();let u=null;const f=()=>{if(null!==u)return u;const j=i.statusText||"OK",W=new No(i.getAllResponseHeaders()),ce=function Uv(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return u=new Ov({headers:W,status:i.status,statusText:j,url:ce}),u},m=()=>{let{headers:j,status:W,statusText:ce,url:_e}=f(),Ge=null;204!==W&&(Ge=typeof i.response>"u"?i.responseText:i.response),0===W&&(W=Ge?200:0);let ft=W>=200&&W<300;if("json"===t.responseType&&"string"==typeof Ge){const Je=Ge;Ge=Ge.replace(iA,"");try{Ge=""!==Ge?JSON.parse(Ge):null}catch(gt){Ge=Je,ft&&(ft=!1,Ge={error:gt,text:Ge})}}ft?(r.next(new Yf({body:Ge,headers:j,status:W,statusText:ce,url:_e||void 0})),r.complete()):r.error(new Pm({error:Ge,headers:j,status:W,statusText:ce,url:_e||void 0}))},v=j=>{const{url:W}=f(),ce=new Pm({error:j,status:i.status||0,statusText:i.statusText||"Unknown Error",url:W||void 0});r.error(ce)};let b=!1;const A=j=>{b||(r.next(f()),b=!0);let W={type:hr.DownloadProgress,loaded:j.loaded};j.lengthComputable&&(W.total=j.total),"text"===t.responseType&&i.responseText&&(W.partialText=i.responseText),r.next(W)},x=j=>{let W={type:hr.UploadProgress,loaded:j.loaded};j.lengthComputable&&(W.total=j.total),r.next(W)};return i.addEventListener("load",m),i.addEventListener("error",v),i.addEventListener("timeout",v),i.addEventListener("abort",v),t.reportProgress&&(i.addEventListener("progress",A),null!==a&&i.upload&&i.upload.addEventListener("progress",x)),i.send(a),r.next({type:hr.Sent}),()=>{i.removeEventListener("error",v),i.removeEventListener("abort",v),i.removeEventListener("load",m),i.removeEventListener("timeout",v),t.reportProgress&&(i.removeEventListener("progress",A),null!==a&&i.upload&&i.upload.removeEventListener("progress",x)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(Na))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();const Vv=new d.InjectionToken("XSRF_ENABLED"),iC=new d.InjectionToken("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),jv=new d.InjectionToken("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Bv{}let sC=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Nl(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(oe),d.\u0275\u0275inject(d.PLATFORM_ID),d.\u0275\u0275inject(iC))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();function eh(n,e){const t=n.url.toLowerCase();if(!(0,d.inject)(Vv)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.inject)(Bv).getToken(),i=(0,d.inject)(jv);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var br=(()=>((br=br||{})[br.Interceptors=0]="Interceptors",br[br.LegacyInterceptors=1]="LegacyInterceptors",br[br.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",br[br.NoXsrfProtection=3]="NoXsrfProtection",br[br.JsonpSupport=4]="JsonpSupport",br[br.RequestsMadeViaParent=5]="RequestsMadeViaParent",br))();function th(n,e){return{\u0275kind:n,\u0275providers:e}}function dk(...n){const e=[km,Jd,eC,{provide:Qd,useExisting:eC},{provide:Z0,useExisting:Jd},{provide:ep,useValue:eh,multi:!0},{provide:Vv,useValue:!0},{provide:Bv,useClass:sC}];for(const t of n)e.push(...t.\u0275providers);return(0,d.makeEnvironmentProviders)(e)}const zv=new d.InjectionToken("LEGACY_INTERCEPTOR_FN");let dA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({providers:[dk(th(br.LegacyInterceptors,[{provide:zv,useFactory:tp},{provide:ep,useExisting:zv,multi:!0}]))]}),n})(),ko=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({providers:[th(br.JsonpSupport,[Lv,{provide:Fv,useFactory:nC},{provide:ep,useValue:Om,multi:!0}]).\u0275providers]}),n})();var pi=V(7579);class An extends pi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Fm=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var nh=V(4671),oC=V(9672);function du(...n){const e=(0,Ts.yG)(n),t=(0,Ts.jO)(n),{args:r,keys:i}=Vd(n);if(0===r.length)return(0,Wt.D)([],e);const a=new Wr.y(function fA(n,e,t=nh.y){return r=>{aC(e,()=>{const{length:i}=n,a=new Array(i);let u=i,f=i;for(let m=0;m<i;m++)aC(e,()=>{const v=(0,Wt.D)(n[m],e);let b=!1;v.subscribe((0,_n.x)(r,A=>{a[m]=A,b||(b=!0,f--),f||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Xa(i,u):nh.y));return t?a.pipe(Ro(t)):a}function aC(n,e,t){n?(0,oC.f)(t,n,e):e()}var Vt=V(8189);function Lm(...n){return function lC(){return(0,Vt.J)(1)}()((0,Wt.D)(n,(0,Ts.yG)(n)))}function $v(n){return new Wr.y(e=>{(0,hi.Xf)(n()).subscribe(e)})}var pA=V(9635);function rh(n,e){const t=(0,xv.m)(n)?n:()=>n,r=i=>i.error(t());return new Wr.y(e?i=>e.schedule(r,0,i):r)}var ll=V(515),uC=V(727);function Um(){return(0,Or.e)((n,e)=>{let t=null;n._refCount++;const r=(0,_n.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class cC extends Wr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Or.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new uC.w0;const t=this.getSubject();e.add(this.source.subscribe((0,_n.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=uC.w0.EMPTY)}return e}refCount(){return Um()(this)}}function fr(n,e){return(0,Or.e)((t,r)=>{let i=null,a=0,u=!1;const f=()=>u&&!i&&r.complete();t.subscribe((0,_n.x)(r,m=>{i?.unsubscribe();let v=0;const b=a++;(0,hi.Xf)(n(m,b)).subscribe(i=(0,_n.x)(r,A=>r.next(e?e(m,A,b,v++):A),()=>{i=null,f()}))},()=>{u=!0,f()}))})}function no(n){return n<=0?()=>ll.E:(0,Or.e)((e,t)=>{let r=0;e.subscribe((0,_n.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ih(...n){const e=(0,Ts.yG)(n);return(0,Or.e)((t,r)=>{(e?Lm(n,t,e):Lm(n,t)).subscribe(r)})}function np(n){return(0,Or.e)((e,t)=>{let r=!1;e.subscribe((0,_n.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ul(n=gA){return(0,Or.e)((e,t)=>{let r=!1;e.subscribe((0,_n.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gA(){return new Fm}function Oo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ms((i,a)=>n(i,a,r)):nh.y,no(1),t?np(e):ul(()=>new Fm))}var gi=V(8505);function hu(n){return(0,Or.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,_n.x)(t,void 0,void 0,u=>{a=(0,hi.Xf)(n(u,hu(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function kc(n,e){return(0,Or.e)(function mA(n,e,t,r,i){return(a,u)=>{let f=t,m=e,v=0;a.subscribe((0,_n.x)(u,b=>{const A=v++;m=f?n(m,b,A):(f=!0,b),r&&u.next(m)},i&&(()=>{f&&u.next(m),u.complete()})))}}(n,e,arguments.length>=2,!0))}function Hv(n){return n<=0?()=>ll.E:(0,Or.e)((e,t)=>{let r=[];e.subscribe((0,_n.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function dC(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ms((i,a)=>n(i,a,r)):nh.y,Hv(1),t?np(e):ul(()=>new Fm))}function Wv(n){return(0,Or.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ot="primary",rp=Symbol("RouteTitle");class fC{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function cl(n){return new fC(n)}function yA(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],f=n[a];if(u.startsWith(":"))i[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Fo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!gC(n[i],e[i]))return!1;return!0}function gC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function mC(n){return Array.prototype.concat.apply([],n)}function _C(n){return n.length>0?n[n.length-1]:null}function mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function fu(n){return(0,d.\u0275isObservable)(n)?n:(0,d.\u0275isPromise)(n)?(0,Wt.D)(Promise.resolve(n)):vt(n)}const ip=!1,yC={exact:function vC(n,e,t){if(!ro(n.segments,e.segments)||!jm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!vC(n.children[r],e.children[r],t))return!1;return!0},subset:Oc},Vm={exact:function oh(n,e){return Fo(n,e)},subset:function vA(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>gC(n[t],e[t]))},ignored:()=>!0};function sh(n,e,t){return yC[t.paths](n.root,e.root,t.matrixParams)&&Vm[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Oc(n,e,t){return Gv(n,e,e.segments,t)}function Gv(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ro(i,t)||e.hasChildren()||!jm(i,t,r))}if(n.segments.length===t.length){if(!ro(n.segments,t)||!jm(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Oc(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ro(n.segments,i)&&jm(n.segments,i,r)&&n.children[Ot])&&Gv(n.children[Ot],e,a,r)}}function jm(n,e,t){return e.every((r,i)=>Vm[t](n[i].parameters,r.parameters))}class dl{constructor(e=new an([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cl(this.queryParams)),this._queryParamMap}toString(){return zm.serialize(this)}}class an{constructor(e,t){this.segments=e,this.children=t,this.parent=null,mi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ap(this)}}class sp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=cl(this.parameters)),this._parameterMap}toString(){return Kv(this)}}function ro(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let hl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:function(){return new op},providedIn:"root"}),n})();class op{parse(e){const t=new mk(e);return new dl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Fc(e.root,!0)}`,r=function EC(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ah(t)}=${ah(i)}`).join("&"):`${ah(t)}=${ah(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function wC(n){return encodeURI(n)}(e.fragment)}`:""}`}}const zm=new op;function ap(n){return n.segments.map(e=>Kv(e)).join("/")}function Fc(n,e){if(!n.hasChildren())return ap(n);if(e){const t=n.children[Ot]?Fc(n.children[Ot],!1):"",r=[];return mi(n.children,(i,a)=>{a!==Ot&&r.push(`${a}:${Fc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function qv(n,e){let t=[];return mi(n.children,(r,i)=>{i===Ot&&(t=t.concat(e(r,i)))}),mi(n.children,(r,i)=>{i!==Ot&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ot?[Fc(n.children[Ot],!1)]:[`${i}:${Fc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${ap(n)}/${t[0]}`:`${ap(n)}/(${t.join("//")})`}}function $m(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ah(n){return $m(n).replace(/%3B/gi,";")}function lp(n){return $m(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hm(n){return decodeURIComponent(n)}function IC(n){return Hm(n.replace(/\+/g,"%20"))}function Kv(n){return`${lp(n.path)}${function wA(n){return Object.keys(n).map(e=>`;${lp(e)}=${lp(n[e])}`).join("")}(n.parameters)}`}const CC=/^[^\/()?;=#]+/;function Wm(n){const e=n.match(CC);return e?e[0]:""}const IA=/^[^=?&#]+/,bC=/^[^&#]+/;class mk{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new an([],{}):new an([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new an(e,t)),r}parseSegment(){const e=Wm(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.\u0275RuntimeError(4009,ip);return this.capture(e),new sp(Hm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Wm(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Wm(this.remaining);i&&(r=i,this.capture(r))}e[Hm(t)]=Hm(r)}parseQueryParam(e){const t=function Rs(n){const e=n.match(IA);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function EA(n){const e=n.match(bC);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=IC(t),a=IC(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Wm(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.\u0275RuntimeError(4010,ip);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Ot);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[Ot]:new an([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.\u0275RuntimeError(4011,ip)}}function up(n){return n.segments.length>0?new an([],{[Ot]:n}):n}function cp(n){const e={};for(const r of Object.keys(n.children)){const a=cp(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function CA(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new an(n.segments.concat(e.segments),e.children)}return n}(new an(n.segments,e))}function Lc(n){return n instanceof dl}const Zv=!1;function Qv(n,e,t,r,i){if(0===t.length)return lh(e.root,e.root,e.root,r,i);const a=function Lo(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new AC(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return mi(a.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new AC(t,e,r)}(t);return a.toRoot()?lh(e.root,e.root,new an([],{}),r,i):function u(m){const v=function TA(n,e,t,r){if(n.isAbsolute)return new pu(e.root,!0,0);if(-1===r)return new pu(t,t===e.root,0);return function Yv(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.\u0275RuntimeError(4005,Zv&&"Invalid number of '../'");i=r.segments.length}return new pu(r,!1,i-a)}(t,r+(dp(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),b=v.processChildren?uh(v.segmentGroup,v.index,a.commands):Xv(v.segmentGroup,v.index,a.commands);return lh(e.root,v.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function dp(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function hp(n){return"object"==typeof n&&null!=n&&n.outlets}function lh(n,e,t,r,i){let u,a={};r&&mi(r,(m,v)=>{a[v]=Array.isArray(m)?m.map(b=>`${b}`):`${m}`}),u=n===e?t:SC(n,e,t);const f=up(cp(u));return new dl(f,a,i)}function SC(n,e,t){const r={};return mi(n.children,(i,a)=>{r[a]=i===e?t:SC(i,e,t)}),new an(n.segments,r)}class AC{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&dp(r[0]))throw new d.\u0275RuntimeError(4003,Zv&&"Root segment cannot have matrix parameters");const i=r.find(hp);if(i&&i!==_C(r))throw new d.\u0275RuntimeError(4004,Zv&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Xv(n,e,t){if(n||(n=new an([],{})),0===n.segments.length&&n.hasChildren())return uh(n,e,t);const r=function Jv(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],f=t[r];if(hp(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!Gm(m,v,u))return a;r+=2}else{if(!Gm(m,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new an(n.segments.slice(0,r.pathIndex),{});return a.children[Ot]=new an(n.segments.slice(r.pathIndex),n.children),uh(a,0,i)}return r.match&&0===i.length?new an(n.segments,{}):r.match&&!n.hasChildren()?ew(n,e,t):r.match?uh(n,0,i):ew(n,e,t)}function uh(n,e,t){if(0===t.length)return new an(n.segments,{});{const r=function SA(n){return hp(n[0])?n[0].outlets:{[Ot]:n}}(t),i={};return!r[Ot]&&n.children[Ot]&&1===n.numberOfChildren&&0===n.children[Ot].segments.length?uh(n.children[Ot],e,t):(mi(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=Xv(n.children[u],e,a))}),mi(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new an(n.segments,i))}}function ew(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(hp(a)){const m=AA(a.outlets);return new an(r,m)}if(0===i&&dp(t[0])){r.push(new sp(n.segments[e].path,fp(t[0]))),i++;continue}const u=hp(a)?a.outlets[Ot]:`${a}`,f=i<t.length-1?t[i+1]:null;u&&f&&dp(f)?(r.push(new sp(u,fp(f))),i+=2):(r.push(new sp(u,{})),i++)}return new an(r,{})}function AA(n){const e={};return mi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ew(new an([],{}),0,t))}),e}function fp(n){const e={};return mi(n,(t,r)=>e[r]=`${t}`),e}function Gm(n,e,t){return n==t.path&&Fo(e,t.parameters)}const gu="imperative";class fl{constructor(e,t){this.id=e,this.url=t}}class pp extends fl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ch extends fl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gp extends fl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mp extends fl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class qm extends fl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class MC extends fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tw extends fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pl extends fl{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Km extends fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zm extends fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dh{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class MA{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class RC{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xC{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RA{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xA{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let NA=(()=>{class n{createUrlTree(t,r,i,a,u,f){return Qv(t||r.root,i,a,u,f)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),kA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:function(e){return NA.\u0275fac(e)},providedIn:"root"}),n})();class PC{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=nw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=nw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=rw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return rw(e,this._root).map(t=>t.value)}}function nw(n,e){if(n===e.value)return e;for(const t of e.children){const r=nw(n,t);if(r)return r}return null}function rw(n,e){if(n===e.value)return[e];for(const t of e.children){const r=rw(n,t);if(r.length)return r.unshift(e),r}return[]}class ha{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Qm extends PC{constructor(e,t){super(e),this.snapshot=t,Xm(this,e)}toString(){return this.snapshot.toString()}}function kC(n,e){const t=function iw(n,e){const u=new Ym([],{},{},"",{},Ot,e,null,n.root,-1,{});return new FC("",new ha(u,[]))}(n,e),r=new An([new sp("",{})]),i=new An({}),a=new An({}),u=new An({}),f=new An(""),m=new hh(r,i,u,f,a,Ot,e,t.root);return m.snapshot=t.root,new Qm(new ha(m,[]),t)}class hh{constructor(e,t,r,i,a,u,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=f,this.title=this.data?.pipe((0,lt.U)(v=>v[rp]))??vt(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,lt.U)(e=>cl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,lt.U)(e=>cl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function OC(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function OA(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ym{get title(){return this.data?.[rp]}constructor(e,t,r,i,a,u,f,m,v,b,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=f,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=b,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class FC extends PC{constructor(e,t){super(t),this.url=e,Xm(this,t)}toString(){return sw(this._root)}}function Xm(n,e){e.value._routerState=n,e.children.forEach(t=>Xm(n,t))}function sw(n){const e=n.children.length>0?` { ${n.children.map(sw).join(", ")} } `:"";return`${n.value}${e}`}function Jm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Fo(e.params,t.params)||n.params.next(t.params),function pC(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Fo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function e_(n,e){const t=Fo(n.params,e.params)&&function Bm(n,e){return ro(n,e)&&n.every((t,r)=>Fo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||e_(n.parent,e.parent))}function t_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function LC(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return t_(n,r,i);return t_(n,r)})}(n,e,t);return new ha(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(f=>t_(n,f)),u}}const r=function yk(n){return new hh(new An(n.url),new An(n.params),new An(n.queryParams),new An(n.fragment),new An(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>t_(n,a));return new ha(r,i)}}const fh="ngNavigationCancelingError";function UC(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Lc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=VC(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function VC(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[fh]=!0,r.cancellationCode=e,t&&(r.url=t),r}function n_(n){return ow(n)&&Lc(n.url)}function ow(n){return n&&n[fh]}class fa{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new gl,this.attachRef=null}}let gl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new fa,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Zr=!1;let ml=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ot,this.activateEvents=new d.EventEmitter,this.deactivateEvents=new d.EventEmitter,this.attachEvents=new d.EventEmitter,this.detachEvents=new d.EventEmitter,this.parentContexts=(0,d.inject)(gl),this.location=(0,d.inject)(d.ViewContainerRef),this.changeDetector=(0,d.inject)(d.ChangeDetectorRef),this.environmentInjector=(0,d.inject)(d.EnvironmentInjector)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.\u0275RuntimeError(4012,Zr);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.\u0275RuntimeError(4012,Zr);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.\u0275RuntimeError(4012,Zr);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.\u0275RuntimeError(4013,Zr);this._activatedRoute=t;const i=this.location,u=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,m=new r_(t,f,i.injector);if(r&&function io(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(u);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(u,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.\u0275\u0275defineDirective({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.\u0275\u0275NgOnChangesFeature]}),n})();class r_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===hh?this.route:e===gl?this.childContexts:this.parent.get(e,t)}}let _p=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.\u0275\u0275StandaloneFeature],decls:1,vars:0,template:function(t,r){1&t&&d.\u0275\u0275element(0,"router-outlet")},dependencies:[ml],encapsulation:2}),n})();function jc(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.createEnvironmentInjector)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ep(n){const e=n.children&&n.children.map(Ep),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=_p),t}function us(n){return n.outlet||Ot}function i_(n,e){const t=n.filter(r=>us(r)===e);return t.push(...n.filter(r=>us(r)!==e)),t}function Bc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class lw{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Jm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Vc(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),mi(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Vc(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Vc(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Vc(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new xA(a.value.snapshot))}),e.children.length&&this.forwardEvent(new xC(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Jm(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),Jm(f.route.value),this.activateChildRoutes(e,null,u.children)}else{const f=Bc(i.snapshot),m=f?.get(d.ComponentFactoryResolver)??null;u.attachRef=null,u.route=i,u.resolver=m,u.injector=f,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class s_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class _h{constructor(e,t){this.component=e,this.route=t}}function uw(n,e,t){const r=n._root;return vh(r,e?e._root:null,t,[r.value])}function yh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.\u0275isInjectable)(n)?e.get(n):n:r}function vh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Vc(e);return n.children.forEach(u=>{(function BC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const m=function zC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ro(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ro(n.url,e.url)||!Fo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!e_(n,e)||!Fo(n.queryParams,e.queryParams);default:return!e_(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new s_(r)):(a.data=u.data,a._resolvedData=u._resolvedData),vh(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new _h(f.outlet.component,u))}else u&&zc(e,f,i),i.canActivateChecks.push(new s_(r)),vh(n,null,a.component?f?f.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),mi(a,(u,f)=>zc(u,t.getContext(f),i)),i}function zc(n,e,t){const r=Vc(n),i=n.value;mi(r,(a,u)=>{zc(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new _h(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function $c(n){return"function"==typeof n}function u_(n){return n instanceof Fm||"EmptyError"===n?.name}const wh=Symbol("INITIAL_VALUE");function Hc(){return fr(n=>du(n.map(e=>e.pipe(no(1),ih(wh)))).pipe((0,lt.U)(e=>{for(const t of e)if(!0!==t){if(t===wh)return wh;if(!1===t||t instanceof dl)return t}return!0}),Ms(e=>e!==wh),no(1)))}function gw(n){return(0,pA.z)((0,gi.b)(e=>{if(Lc(e))throw UC(0,e)}),(0,lt.U)(e=>!0===e))}const Cp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bp(n,e,t,r,i){const a=Dp(n,e,t);return a.matched?function KC(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?vt(i.map(u=>{const f=yh(u,n);return fu(function l_(n){return n&&$c(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Hc(),gw()):vt(!0)}(r=jc(e,r),e,t).pipe((0,lt.U)(u=>!0===u?a:{...Cp})):vt(a)}function Dp(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Cp}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||yA)(t,n,e);if(!i)return{...Cp};const a={};mi(i.posParams,(f,m)=>{a[m]=f.path});const u=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function Ih(n,e,t,r){if(t.length>0&&function yw(n,e,t){return t.some(r=>Eh(n,e,r)&&us(r)!==Ot)}(n,t,r)){const a=new an(e,function _w(n,e,t,r){const i={};i[Ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&us(a)!==Ot){const u=new an([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[us(a)]=u}return i}(n,e,r,new an(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function vw(n,e,t){return t.some(r=>Eh(n,e,r))}(n,t,r)){const a=new an(n.segments,function mw(n,e,t,r,i){const a={};for(const u of r)if(Eh(n,t,u)&&!i[us(u)]){const f=new an([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[us(u)]=f}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new an(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Eh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function c_(n,e,t,r){return!!(us(n)===r||r!==Ot&&Eh(e,t,n))&&("**"===n.path||Dp(e,n,t).matched)}function Tp(n,e,t){return 0===e.length&&!n.children[t]}const Uo=!1;class d_{constructor(e){this.segmentGroup=e||null}}class ZC{constructor(e){this.urlTree=e}}function Wc(n){return rh(new d_(n))}function _u(n){return rh(new ZC(n))}class vk{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Ih(this.urlTree.root,[],[],this.config).segmentGroup,t=new an(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ot).pipe((0,lt.U)(a=>this.createUrlTree(cp(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(hu(a=>{if(a instanceof ZC)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof d_?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ot).pipe((0,lt.U)(i=>this.createUrlTree(cp(i),e.queryParams,e.fragment))).pipe(hu(i=>{throw i instanceof d_?this.noMatchError(i):i}))}noMatchError(e){return new d.\u0275RuntimeError(4002,Uo)}createUrlTree(e,t,r){const i=up(e);return new dl(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,lt.U)(a=>new an([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Wt.D)(i).pipe(al(a=>{const u=r.children[a],f=i_(t,a);return this.expandSegmentGroup(e,f,u,a).pipe((0,lt.U)(m=>({segment:m,outlet:a})))}),kc((a,u)=>(a[u.outlet]=u.segment,a),{}),dC())}expandSegment(e,t,r,i,a,u){return(0,Wt.D)(r).pipe(al(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,u).pipe(hu(v=>{if(v instanceof d_)return vt(null);throw v}))),Oo(f=>!!f),hu((f,m)=>{if(u_(f))return Tp(t,i,a)?vt(new an([],{})):Wc(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,u,f){return c_(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):Wc(t):Wc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?_u(a):this.lineralizeSegments(r,a).pipe((0,Fi.z)(u=>{const f=new an(u,{});return this.expandSegment(e,f,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:b}=Dp(t,i,a);if(!f)return Wc(t);const A=this.applyRedirectCommands(m,i.redirectTo,b);return i.redirectTo.startsWith("/")?_u(A):this.lineralizeSegments(i,A).pipe((0,Fi.z)(x=>this.expandSegment(e,t,r,x.concat(v),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=jc(r,e),r.loadChildren?(r._loadedRoutes?vt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,lt.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new an(i,{})))):vt(new an(i,{}))):bp(t,r,i,e).pipe(fr(({matched:u,consumedSegments:f,remainingSegments:m})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Fi.z)(b=>{const A=b.injector??e,x=b.routes,{segmentGroup:j,slicedSegments:W}=Ih(t,f,m,x),ce=new an(j.segments,j.children);if(0===W.length&&ce.hasChildren())return this.expandChildren(A,x,ce).pipe((0,lt.U)(Je=>new an(f,Je)));if(0===x.length&&0===W.length)return vt(new an(f,{}));const _e=us(r)===a;return this.expandSegment(A,ce,x,W,_e?Ot:a,!0).pipe((0,lt.U)(ft=>new an(f.concat(ft.segments),ft.children)))})):Wc(t)))}getChildConfig(e,t,r){return t.children?vt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?vt({routes:t._loadedRoutes,injector:t._loadedInjector}):function jA(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?vt(!0):vt(i.map(u=>{const f=yh(u,n);return fu(function o_(n){return n&&$c(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Hc(),gw())}(e,t,r).pipe((0,Fi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,gi.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function BA(n){return rh(VC(Uo,3))}())):vt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return vt(r);if(i.numberOfChildren>1||!i.children[Ot])return e.redirectTo,rh(new d.\u0275RuntimeError(4e3,Uo));i=i.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new dl(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return mi(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return mi(t.children,(f,m)=>{u[m]=this.createSegmentGroup(e,f,r,i)}),new an(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.\u0275RuntimeError(4001,Uo);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class zA{}class Qr{constructor(e,t,r,i,a,u,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=u,this.urlSerializer=f}recognize(){const e=Ih(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ot).pipe((0,lt.U)(t=>{if(null===t)return null;const r=new Ym([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ha(r,t),a=new FC(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=OC(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Wt.D)(Object.keys(r.children)).pipe(al(i=>{const a=r.children[i],u=i_(t,i);return this.processSegmentGroup(e,u,a,i)}),kc((i,a)=>i&&a?(i.push(...a),i):null),function hC(n,e=!1){return(0,Or.e)((t,r)=>{let i=0;t.subscribe((0,_n.x)(r,a=>{const u=n(a,i++);(u||e)&&r.next(a),!u&&r.complete()}))})}(i=>null!==i),np(null),dC(),(0,lt.U)(i=>{if(null===i)return null;const a=Ew(i);return function XC(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Wt.D)(t).pipe(al(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,a)),Oo(u=>!!u),hu(u=>{if(u_(u))return Tp(r,i,a)?vt([]):vt(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!c_(t,r,i,a))return vt(null);let u;if("**"===t.path){const f=i.length>0?_C(i).parameters:{},m=bw(r)+i.length;u=vt({snapshot:new Ym(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,JC(t),us(t),t.component??t._loadedComponent??null,t,Cw(r),m,eb(t)),consumedSegments:[],remainingSegments:[]})}else u=bp(r,t,i,e).pipe((0,lt.U)(({matched:f,consumedSegments:m,remainingSegments:v,parameters:b})=>{if(!f)return null;const A=bw(r)+m.length;return{snapshot:new Ym(m,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,JC(t),us(t),t.component??t._loadedComponent??null,t,Cw(r),A,eb(t)),consumedSegments:m,remainingSegments:v}}));return u.pipe(fr(f=>{if(null===f)return vt(null);const{snapshot:m,consumedSegments:v,remainingSegments:b}=f;e=t._injector??e;const A=t._loadedInjector??e,x=function HA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:j,slicedSegments:W}=Ih(r,v,b,x.filter(_e=>void 0===_e.redirectTo));if(0===W.length&&j.hasChildren())return this.processChildren(A,x,j).pipe((0,lt.U)(_e=>null===_e?null:[new ha(m,_e)]));if(0===x.length&&0===W.length)return vt([new ha(m,[])]);const ce=us(t)===a;return this.processSegment(A,x,j,W,ce?Ot:a).pipe((0,lt.U)(_e=>null===_e?null:[new ha(m,_e)]))}))}}function WA(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ew(n){const e=[],t=new Set;for(const r of n){if(!WA(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Ew(r.children);e.push(new ha(r.value,i))}return e.filter(r=>!t.has(r))}function Cw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function bw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function JC(n){return n.data||{}}function eb(n){return n.resolve||{}}function so(n){return"string"==typeof n.title||null===n.title}function Sw(n){return fr(e=>{const t=n(e);return t?(0,Wt.D)(t).pipe((0,lt.U)(()=>e)):vt(e)})}const Li=new d.InjectionToken("ROUTES");let xs=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return vt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=fu(t.loadComponent()).pipe((0,lt.U)(Aw),(0,gi.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Wv(()=>{this.componentLoaders.delete(t)})),i=new cC(r,()=>new pi.x).pipe(Um());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return vt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,lt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,b=!1;Array.isArray(f)?v=f:(m=f.create(t).injector,v=mC(m.get(Li,[],d.InjectFlags.Self|d.InjectFlags.Optional)));return{routes:v.map(Ep),injector:m}}),Wv(()=>{this.childrenLoaders.delete(r)})),u=new cC(a,()=>new pi.x).pipe(Um());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return fu(t()).pipe((0,lt.U)(Aw),(0,Fi.z)(i=>i instanceof d.NgModuleFactory||Array.isArray(i)?vt(i):(0,Wt.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(d.Injector),d.\u0275\u0275inject(d.Compiler))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Aw(n){return function ib(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let f_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new pi.x,this.configLoader=(0,d.inject)(xs),this.environmentInjector=(0,d.inject)(d.EnvironmentInjector),this.urlSerializer=(0,d.inject)(hl),this.rootContexts=(0,d.inject)(gl),this.navigationId=0,this.afterPreactivation=()=>vt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new MA(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new dh(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new An({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:gu,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ms(r=>0!==r.id),(0,lt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),fr(r=>{let i=!1,a=!1;return vt(r).pipe((0,gi.b)(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),fr(u=>{const f=t.browserUrlTree.toString(),m=!t.navigated||u.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!m&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new mp(u.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=u.rawUrl,u.resolve(null),ll.E}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return sb(u.source)&&(t.browserUrlTree=u.extractedUrl),vt(u).pipe(fr(b=>{const A=this.transitions?.getValue();return this.events.next(new pp(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),A!==this.transitions?.getValue()?ll.E:Promise.resolve(b)}),function wk(n,e,t,r){return fr(i=>function Iw(n,e,t,r,i){return new vk(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,lt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,gi.b)(b=>{this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},r.urlAfterRedirects=b.urlAfterRedirects}),function tb(n,e,t,r,i){return(0,Fi.z)(a=>function $A(n,e,t,r,i,a,u="emptyOnly"){return new Qr(n,e,t,r,i,u,a).recognize().pipe(fr(f=>null===f?function YC(n){return new Wr.y(e=>e.error(n))}(new zA):vt(f)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,lt.U)(u=>({...a,targetSnapshot:u}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,gi.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const x=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl(x,b)}t.browserUrlTree=b.urlAfterRedirects}const A=new MC(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(A)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:A,source:x,restoredState:j,extras:W}=u,ce=new pp(b,this.urlSerializer.serialize(A),x,j);this.events.next(ce);const _e=kC(A,this.rootComponentType).snapshot;return vt(r={...u,targetSnapshot:_e,urlAfterRedirects:A,extras:{...W,skipLocationChange:!1,replaceUrl:!1}})}{const b="";return this.events.next(new mp(u.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=u.rawUrl,u.resolve(null),ll.E}}),(0,gi.b)(u=>{const f=new tw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),(0,lt.U)(u=>r={...u,guards:uw(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),function $C(n,e){return(0,Fi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?vt({...t,guardsResult:!0}):function fw(n,e,t,r){return(0,Wt.D)(n).pipe((0,Fi.z)(i=>function qC(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?vt(a.map(f=>{const m=Bc(e)??i,v=yh(f,m);return fu(function UA(n){return n&&$c(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(Oo())})).pipe(Hc()):vt(!0)}(i.component,i.route,t,e,r)),Oo(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Fi.z)(f=>f&&function LA(n){return"boolean"==typeof n}(f)?function pw(n,e,t,r){return(0,Wt.D)(e).pipe(al(i=>Lm(function HC(n,e){return null!==n&&e&&e(new RC(n)),vt(!0)}(i.route.parent,r),function VA(n,e){return null!==n&&e&&e(new RA(n)),vt(!0)}(i.route,r),function GC(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function jC(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>$v(()=>vt(u.guards.map(m=>{const v=Bc(u.node)??t,b=yh(m,v);return fu(function cw(n){return n&&$c(n.canActivateChild)}(b)?b.canActivateChild(r,n):v.runInContext(()=>b(r,n))).pipe(Oo())})).pipe(Hc())));return vt(a).pipe(Hc())}(n,i.path,t),function WC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return vt(!0);const i=r.map(a=>$v(()=>{const u=Bc(e)??t,f=yh(a,u);return fu(function a_(n){return n&&$c(n.canActivate)}(f)?f.canActivate(e,n):u.runInContext(()=>f(e,n))).pipe(Oo())}));return vt(i).pipe(Hc())}(n,i.route,t))),Oo(i=>!0!==i,!0))}(r,a,n,e):vt(f)),(0,lt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,u=>this.events.next(u)),(0,gi.b)(u=>{if(r.guardsResult=u.guardsResult,Lc(u.guardsResult))throw UC(0,u.guardsResult);const f=new pl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(f)}),Ms(u=>!!u.guardsResult||(t.restoreHistory(u),this.cancelNavigationTransition(u,"",3),!1)),Sw(u=>{if(u.guards.canActivateChecks.length)return vt(u).pipe((0,gi.b)(f=>{const m=new Km(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),fr(f=>{let m=!1;return vt(f).pipe(function qA(n,e){return(0,Fi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return vt(t);let a=0;return(0,Wt.D)(i).pipe(al(u=>function nb(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!so(i)&&(a[rp]=i.title),function Ik(n,e,t,r){const i=function Dw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return vt({});const a={};return(0,Wt.D)(i).pipe((0,Fi.z)(u=>function Tw(n,e,t,r){const i=Bc(e)??r,a=yh(n,i);return fu(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[u],e,t,r).pipe(Oo(),(0,gi.b)(f=>{a[u]=f}))),Hv(1),function _A(n){return(0,lt.U)(()=>n)}(a),hu(u=>u_(u)?ll.E:rh(u)))}(a,n,e,r).pipe((0,lt.U)(u=>(n._resolvedData=u,n.data=OC(n,t).resolve,i&&so(i)&&(n.data[rp]=i.title),null)))}(u.route,r,n,e)),(0,gi.b)(()=>a++),Hv(1),(0,Fi.z)(u=>a===i.length?vt(t):ll.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,gi.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,gi.b)(f=>{const m=new Zm(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}))}),Sw(u=>{const f=m=>{const v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,gi.b)(b=>{m.component=b}),(0,lt.U)(()=>{})));for(const b of m.children)v.push(...f(b));return v};return du(f(u.targetSnapshot.root)).pipe(np(),no(1))}),Sw(()=>this.afterPreactivation()),(0,lt.U)(u=>{const f=function FA(n,e,t){const r=t_(n,e._root,t?t._root:void 0);return new Qm(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return r={...u,targetRouterState:f}}),(0,gi.b)(u=>{t.currentUrlTree=u.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),t.routerState=u.targetRouterState,"deferred"===t.urlUpdateStrategy&&(u.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,u),t.browserUrlTree=u.urlAfterRedirects)}),((n,e,t)=>(0,lt.U)(r=>(new lw(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u)),(0,gi.b)({next:u=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ch(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{i=!0}}),Wv(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),hu(u=>{if(a=!0,ow(u)){n_(u)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new gp(r.id,this.urlSerializer.serialize(r.extractedUrl),u.message,u.cancellationCode);if(this.events.next(f),n_(u)){const m=t.urlHandlingStrategy.merge(u.url,t.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||sb(r.source)};t.scheduleNavigation(m,gu,null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new qm(r.id,this.urlSerializer.serialize(r.extractedUrl),u,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(u))}catch(m){r.reject(m)}}return ll.E}))}))}cancelNavigationTransition(t,r,i){const a=new gp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sb(n){return n!==gu}let ob=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Ot);return r}getResolvedTitleForRoute(t){return t.data[rp]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:function(){return(0,d.inject)(Mw)},providedIn:"root"}),n})(),Mw=(()=>{class n extends ob{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(To))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ap=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:function(){return(0,d.inject)(ab)},providedIn:"root"}),n})();class KA{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let ab=(()=>{class n extends KA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Mp=new d.InjectionToken("",{providedIn:"root",factory:()=>({})});let lb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:function(){return(0,d.inject)(p_)},providedIn:"root"}),n})(),p_=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ub(n){throw n}function cb(n,e,t){return e.parse("/")}const xw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},g_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.inject)(d.\u0275Console),this.isNgZoneEnabled=!1,this.options=(0,d.inject)(Mp,{optional:!0})||{},this.errorHandler=this.options.errorHandler||ub,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||cb,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.inject)(lb),this.routeReuseStrategy=(0,d.inject)(Ap),this.urlCreationStrategy=(0,d.inject)(kA),this.titleStrategy=(0,d.inject)(ob),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=mC((0,d.inject)(Li,{optional:!0})??[]),this.navigationTransitions=(0,d.inject)(f_),this.urlSerializer=(0,d.inject)(hl),this.location=(0,d.inject)(Oe),this.isNgZoneEnabled=(0,d.inject)(d.NgZone)instanceof d.NgZone&&d.NgZone.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new dl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=kC(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),gu,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},u=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,u,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Ep),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:f,preserveFragment:m}=r,v=m?this.currentUrlTree.fragment:u;let b=null;switch(f){case"merge":b={...this.currentUrlTree.queryParams,...a};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=a||null}return null!==b&&(b=this.removeEmptyProps(b)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,b,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Lc(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,gu,null,r)}navigate(t,r={skipLocationChange:!1}){return function Nw(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new d.\u0275RuntimeError(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...xw}:!1===r?{...g_}:r,Lc(t))return sh(this.currentUrlTree,t,i);const a=this.parseUrl(t);return sh(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,u){if(this.disposed)return Promise.resolve(!1);let f,m,v,b;return u?(f=u.resolve,m=u.reject,v=u.promise):v=new Promise((A,x)=>{f=A,m=x}),b="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:b,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(A=>Promise.reject(A))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yu=(()=>{class n{constructor(t,r,i,a,u,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=u,this.locationStrategy=f,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new pi.x;const m=u.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof ch&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.\u0275coerceToBoolean)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.\u0275coerceToBoolean)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.\u0275coerceToBoolean)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,u){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||u||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.\u0275\u0275sanitizeUrlOrResourceUrl)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(Fr),d.\u0275\u0275directiveInject(hh),d.\u0275\u0275injectAttribute("tabindex"),d.\u0275\u0275directiveInject(d.Renderer2),d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(ut))},n.\u0275dir=d.\u0275\u0275defineDirective({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.\u0275\u0275listener("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.\u0275\u0275attribute("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.\u0275\u0275NgOnChangesFeature]}),n})();class m_{}let fb=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Ms(t=>t instanceof ch),al(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.createEnvironmentInjector)(a.providers,t,`Route: ${a.path}`));const u=a._injector??t,f=a._loadedInjector??u;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(u,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,Wt.D)(i).pipe((0,Vt.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):vt(null);const a=i.pipe((0,Fi.z)(u=>null===u?vt(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,Wt.D)([a,u]).pipe((0,Vt.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(Fr),d.\u0275\u0275inject(d.Compiler),d.\u0275\u0275inject(d.EnvironmentInjector),d.\u0275\u0275inject(m_),d.\u0275\u0275inject(xs))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const __=new d.InjectionToken("");let Ow=(()=>{class n{constructor(t,r,i,a,u={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ch&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Uc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Uc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.\u0275\u0275invalidFactory()},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var cs=(()=>((cs=cs||{})[cs.COMPLETE=0]="COMPLETE",cs[cs.FAILED=1]="FAILED",cs[cs.REDIRECTING=2]="REDIRECTING",cs))();const Gc=!1;function _l(n,e){return{\u0275kind:n,\u0275providers:e}}const y_=new d.InjectionToken("",{providedIn:"root",factory:()=>!1});function Lw(){const n=(0,d.inject)(d.Injector);return e=>{const t=n.get(d.ApplicationRef);if(e!==t.components[0])return;const r=n.get(Fr),i=n.get(Uw);1===n.get(v_)&&r.initialNavigation(),n.get(w_,null,d.InjectFlags.Optional)?.setUpPreloading(),n.get(__,null,d.InjectFlags.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const Uw=new d.InjectionToken(Gc?"bootstrap done indicator":"",{factory:()=>new pi.x}),v_=new d.InjectionToken(Gc?"initial navigation":"",{providedIn:"root",factory:()=>1});function Vw(){let n=[];return n=Gc?[{provide:d.ENVIRONMENT_INITIALIZER,multi:!0,useFactory:()=>{const e=(0,d.inject)(Fr);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function NC(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],_l(1,n)}const w_=new d.InjectionToken(Gc?"router preloader":"");function jw(n){return _l(0,[{provide:w_,useExisting:fb},{provide:m_,useExisting:n}])}const qc=!1,I_=new d.InjectionToken(qc?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Bw=[Oe,{provide:hl,useClass:op},Fr,gl,{provide:hh,useFactory:function Fw(n){return n.routerState.root},deps:[Fr]},xs,qc?{provide:y_,useValue:!0}:[]];function zw(){return new d.NgProbeToken("Router",Fr)}let vu=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Bw,qc&&r?.enableTracing?Vw().\u0275providers:[],{provide:Li,multi:!0,useValue:t},{provide:I_,useFactory:tM,deps:[[Fr,new d.Optional,new d.SkipSelf]]},{provide:Mp,useValue:r||{}},r?.useHash?{provide:ut,useClass:Ce}:{provide:ut,useClass:De},{provide:__,useFactory:()=>{const n=(0,d.inject)(yo),e=(0,d.inject)(d.NgZone),t=(0,d.inject)(Mp),r=(0,d.inject)(f_),i=(0,d.inject)(hl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Ow(i,r,n,e,t)}},r?.preloadingStrategy?jw(r.preloadingStrategy).\u0275providers:[],{provide:d.NgProbeToken,multi:!0,useFactory:zw},r?.initialNavigation?$w(r):[],[{provide:Eb,useFactory:Lw},{provide:d.APP_BOOTSTRAP_LISTENER,multi:!0,useExisting:Eb}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Li,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(I_,8))},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({imports:[_p]}),n})();function tM(n){if(qc&&n)throw new d.\u0275RuntimeError(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function $w(n){return["disabled"===n.initialNavigation?_l(3,[{provide:d.APP_INITIALIZER,multi:!0,useFactory:()=>{const e=(0,d.inject)(Fr);return()=>{e.setUpLocationChangeListener()}}},{provide:v_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?_l(2,[{provide:v_,useValue:0},{provide:d.APP_INITIALIZER,multi:!0,deps:[d.Injector],useFactory:e=>{const t=e.get(pe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Fr),a=e.get(Uw);(function pb(n,e){n.events.pipe(Ms(t=>t instanceof ch||t instanceof gp||t instanceof qm||t instanceof mp),(0,lt.U)(t=>t instanceof ch||t instanceof mp?cs.COMPLETE:t instanceof gp&&(0===t.code||1===t.code)?cs.REDIRECTING:cs.FAILED),Ms(t=>t!==cs.REDIRECTING),no(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(f_).afterPreactivation=()=>(r(!0),a.closed?vt(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const Eb=new d.InjectionToken(qc?"Router Initializer":"");var bh=V(9260),Mt=V(4986),Tt=V(2122);function Hw(){return(0,Or.e)((n,e)=>{let t,r=!1;n.subscribe((0,_n.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function bb(n,e=nh.y){return n=n??Kc,(0,Or.e)((t,r)=>{let i,a=!0;t.subscribe((0,_n.x)(r,u=>{const f=e(u);(a||!n(i,f))&&(a=!1,i=f,r.next(u))}))})}function Kc(n,e){return n===e}var It,Yr=V(2011),Dh=(V(9568),V(3942)),he=V(5861),Lr=V(9681),oo=V(4859),Ns=V(1877),U=V(2090),Db=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pa={},E_=E_||{},Kt=Db||self;function C_(){}function b_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function yl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Gw="closure_uid_"+(1e9*Math.random()>>>0),iM=0;function D_(n,e,t){return n.call.apply(n.bind,arguments)}function Tb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ti(n,e,t){return(Ti=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?D_:Tb).apply(null,arguments)}function Rp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Si(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return e.prototype[i].apply(r,u)}}function ao(){this.s=this.s,this.o=this.o}ao.prototype.s=!1,ao.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function rM(n){Object.prototype.hasOwnProperty.call(n,Gw)&&n[Gw]||(n[Gw]=++iM)}(this)},ao.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Sb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function qw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ab(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(b_(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let u=0;u<a;u++)n[i+u]=r[u]}else n.push(r)}}function Ai(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ai.prototype.h=function(){this.defaultPrevented=!0};var Mb=function(){if(!Kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Kt.addEventListener("test",C_,e),Kt.removeEventListener("test",C_,e)}catch{}return n}();function Np(n){return/^[\s\xa0]*$/.test(n)}var Rb=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function T_(n,e){return n<e?-1:n>e?1:0}function S_(){var n=Kt.navigator;return n&&(n=n.userAgent)?n:""}function ga(n){return-1!=S_().indexOf(n)}function xb(n){return xb[" "](n),n}xb[" "]=C_;var wu,n,Ck=ga("Opera"),Pp=ga("Trident")||ga("MSIE"),Kw=ga("Edge"),Th=Kw||Pp,Nb=ga("Gecko")&&!(-1!=S_().toLowerCase().indexOf("webkit")&&!ga("Edge"))&&!(ga("Trident")||ga("MSIE"))&&!ga("Edge"),sM=-1!=S_().toLowerCase().indexOf("webkit")&&!ga("Edge");function Zw(){var n=Kt.document;return n?n.documentMode:void 0}e:{var Qw="",Yw=(n=S_(),Nb?/rv:([^\);]+)(\)|;)/.exec(n):Kw?/Edge\/([\d\.]+)/.exec(n):Pp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):sM?/WebKit\/(\S+)/.exec(n):Ck?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Yw&&(Qw=Yw?Yw[1]:""),Pp){var Xw=Zw();if(null!=Xw&&Xw>parseFloat(Qw)){wu=String(Xw);break e}}wu=Qw}var oM={};var aM=Kt.document&&Pp&&(Zw()||parseInt(wu,10))||void 0;function kp(n,e){if(Ai.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Nb){e:{try{xb(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Op[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&kp.X.h.call(this)}}Si(kp,Ai);var Op={2:"touch",3:"pen",4:"mouse"};kp.prototype.h=function(){kp.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fp="closure_listenable_"+(1e6*Math.random()|0),Pb=0;function lM(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++Pb,this.ba=this.ea=!1}function Lp(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function tI(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function nI(n){const e={};for(const t in n)e[t]=n[t];return e}const kb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A_(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<kb.length;a++)t=kb[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function M_(n){this.src=n,this.g={},this.h=0}function R_(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Sb(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Lp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function x_(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}M_.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=x_(n,e,r,i);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new lM(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var rI="closure_lm_"+(1e6*Math.random()|0),iI={};function Ob(n,e,t,r,i){if(r&&r.once)return sI(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Ob(n,e[a],t,r,i);return null}return t=uI(t),n&&n[Fp]?n.N(e,t,yl(r)?!!r.capture:!!r,i):N_(n,e,t,!1,r,i)}function N_(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=yl(i)?!!i.capture:!!i,f=aI(n);if(f||(n[rI]=f=new M_(n)),(t=f.add(e,t,r,u,a)).proxy)return t;if(r=function uM(){const e=cM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Mb||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Lb(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function sI(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)sI(n,e[a],t,r,i);return null}return t=uI(t),n&&n[Fp]?n.O(e,t,yl(r)?!!r.capture:!!r,i):N_(n,e,t,!0,r,i)}function Fb(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Fb(n,e[a],t,r,i);else r=yl(r)?!!r.capture:!!r,t=uI(t),n&&n[Fp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=x_(a=n.g[e],t,r,i))&&(Lp(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=aI(n))&&(e=n.g[e.toString()],n=-1,e&&(n=x_(e,t,r,i)),(t=-1<n?e[n]:null)&&oI(t))}function oI(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Fp])R_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Lb(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=aI(e))?(R_(t,n),0==t.h&&(t.src=null,e[rI]=null)):Lp(n)}}}function Lb(n){return n in iI?iI[n]:iI[n]="on"+n}function cM(n,e){if(n.ba)n=!0;else{e=new kp(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&oI(n),n=t.call(r,e)}return n}function aI(n){return(n=n[rI])instanceof M_?n:null}var lI="__closure_events_fn_"+(1e9*Math.random()>>>0);function uI(n){return"function"==typeof n?n:(n[lI]||(n[lI]=function(e){return n.handleEvent(e)}),n[lI])}function _i(){ao.call(this),this.i=new M_(this),this.P=this,this.I=null}function Xr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ai(e,n);else if(e instanceof Ai)e.target=e.target||n;else{var i=e;A_(e=new Ai(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=Sh(u,r,!0,e)&&i}if(i=Sh(u=e.g=n,r,!0,e)&&i,i=Sh(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Sh(u=e.g=t[a],r,!1,e)&&i}function Sh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ba&&u.capture==t){var f=u.listener,m=u.ha||u.src;u.ea&&R_(n.i,u),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}Si(_i,ao),_i.prototype[Fp]=!0,_i.prototype.removeEventListener=function(n,e,t,r){Fb(this,n,e,t,r)},_i.prototype.M=function(){if(_i.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Lp(t[r]);delete n.g[e],n.h--}}this.I=null},_i.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},_i.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var P_=Kt.JSON.stringify;function Ub(){var n=Bb;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Up,dI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Vb,n=>n.reset());class Vb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function dM(n){Kt.setTimeout(()=>{throw n},0)}function k_(n,e){Up||function jb(){var n=Kt.Promise.resolve(void 0);Up=function(){n.then(hM)}}(),Vp||(Up(),Vp=!0),Bb.add(n,e)}var Vp=!1,Bb=new class cI{constructor(){this.h=this.g=null}add(e,t){const r=dI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function hM(){for(var n;n=Ub();){try{n.h.call(n.g)}catch(t){dM(t)}var e=dI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Vp=!1}function Ah(n,e){_i.call(this),this.h=n||1,this.g=e||Kt,this.j=Ti(this.lb,this),this.l=Date.now()}function hI(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function O_(n,e,t){if("function"==typeof n)t&&(n=Ti(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ti(n.handleEvent,n)}return 2147483647<Number(e)?-1:Kt.setTimeout(n,e||0)}function Zc(n){n.g=O_(()=>{n.g=null,n.i&&(n.i=!1,Zc(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Si(Ah,_i),(It=Ah.prototype).ca=!1,It.R=null,It.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Xr(this,"tick"),this.ca&&(hI(this),this.start()))}},It.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},It.M=function(){Ah.X.M.call(this),hI(this),delete this.g};class zb extends ao{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Zc(this)}M(){super.M(),this.g&&(Kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mh(n){ao.call(this),this.h=n,this.g={}}Si(Mh,ao);var $b=[];function F_(n,e,t,r){Array.isArray(t)||(t&&($b[0]=t.toString()),t=$b);for(var i=0;i<t.length;i++){var a=Ob(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function jp(n){tI(n.g,function(e,t){this.g.hasOwnProperty(t)&&oI(e)},n),n.g={}}function L_(){this.g=!0}function Qc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Hb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return P_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Mh.prototype.M=function(){Mh.X.M.call(this),jp(this)},Mh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},L_.prototype.Aa=function(){this.g=!1},L_.prototype.info=function(){};var Iu={},gI=null;function Bp(){return gI=gI||new _i}function Wb(n){Ai.call(this,Iu.Pa,n)}function Rh(n){const e=Bp();Xr(e,new Wb(e))}function Gb(n,e){Ai.call(this,Iu.STAT_EVENT,n),this.stat=e}function Xi(n){const e=Bp();Xr(e,new Gb(e,n))}function U_(n,e){Ai.call(this,Iu.Qa,n),this.size=e}function V_(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Kt.setTimeout(function(){n()},e)}Iu.Pa="serverreachability",Si(Wb,Ai),Iu.STAT_EVENT="statevent",Si(Gb,Ai),Iu.Qa="timingevent",Si(U_,Ai);var zp={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},qb={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function mI(){}function Kb(){}mI.prototype.h=null;var z_,xh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function j_(){Ai.call(this,"d")}function B_(){Ai.call(this,"c")}function $p(){}function Nh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Mh(this),this.O=Zb,this.T=new Ah(n=Th?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new _I}function _I(){this.i=null,this.g="",this.h=!1}Si(j_,Ai),Si(B_,Ai),Si($p,mI),$p.prototype.g=function(){return new XMLHttpRequest},$p.prototype.i=function(){return{}},z_=new $p;var Zb=45e3,$_={},Hp={};function H_(n,e,t){n.K=1,n.v=q_(jo(e)),n.s=t,n.P=!0,Ph(n,null)}function Ph(n,e){n.F=Date.now(),kh(n),n.A=jo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),CI(t.i,"t",r),n.C=0,t=n.l.H,n.h=new _I,n.g=VI(n.l,t?e:null,!n.s),0<n.N&&(n.L=new zb(Ti(n.La,n,n.g),n.N)),F_(n.S,n.g,"readystatechange",n.ib),e=n.H?nI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Rh(),function fI(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",f=a.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var b=v[0];v=v[1];var A=b.split("_");u=2<=A.length&&"type"==A[1]?u+(b+"=")+v+"&":u+(b+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function yI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function vI(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Qb(n,t),i==Hp){4==e&&(n.o=4,Xi(14),r=!1),Qc(n.j,n.m,null,"[Incomplete Response]");break}if(i==$_){n.o=4,Xi(15),Qc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Qc(n.j,n.m,i,null),W_(n,i)}yI(n)&&i!=Hp&&i!=$_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Xi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),aD(e),e.K=!0,Xi(11))):(Qc(n.j,n.m,t,"[Invalid Chunked Response]"),Oh(n),Gp(n))}function Qb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Hp:(t=Number(e.substring(t,r)),isNaN(t)?$_:(r+=1)+t>e.length?Hp:(e=e.substr(r,t),n.C=r+t,e))}function kh(n){n.V=Date.now()+n.O,wI(n,n.O)}function wI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=V_(Ti(n.gb,n),e)}function Wp(n){n.B&&(Kt.clearTimeout(n.B),n.B=null)}function Gp(n){0==n.l.G||n.I||oy(n.l,n)}function Oh(n){Wp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,hI(n.T),jp(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function W_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Xp(t.h,n)))if(!n.J&&Xp(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;sy(t),ig(t)}FI(t),Xi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=V_(Ti(t.cb,t),6e3));if(1>=DI(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else bu(t,11)}else if((n.J||t.g==n)&&sy(t),!Np(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const b=v[3];null!=b&&(t.ma=b,t.j.info("VER="+t.ma));const A=v[4];null!=A&&(t.Ca=A,t.j.info("SVER="+t.Ca));const x=v[5];null!=x&&"number"==typeof x&&0<x&&(t.J=r=1.5*x,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const W=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var a=r.h;a.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Y_(a,a.h),a.h=null))}if(r.D){const ce=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;ce&&(r.za=ce,Nn(r.F,r.D,ce))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((r=t).sa=UI(r,r.H?r.ka:null,r.V),u.J){TI(r.h,u);var f=u,m=r.J;m&&f.setTimeout(m),f.B&&(Wp(f),kh(f)),r.g=u}else OI(r);0<t.i.length&&Lh(t)}else"stop"!=v[0]&&"close"!=v[0]||bu(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?bu(t,7):kI(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}Rh()}catch{}}function II(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(b_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Xb(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(b_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Yb(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(b_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(It=Nh.prototype).setTimeout=function(n){this.O=n},It.ib=function(n){n=n.target;const e=this.L;e&&3==wl(n)?e.l():this.La(n)},It.La=function(n){try{if(n==this.g)e:{const b=wl(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||Th||this.g&&(this.h.h||this.g.fa()||ty(this.g)))){this.I||4!=b||7==e||Rh(),Wp(this);var t=this.g.aa();this.Y=t;t:if(yI(this)){var r=ty(this.g);n="";var i=r.length,a=4==wl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Oh(this),Gp(this);var u="";break t}this.h.i=new Kt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function fM(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.U,b,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Np(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Xi(12),Oh(this),Gp(this);break e}Qc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,W_(this,t)}this.P?(vI(this,b,u),Th&&this.i&&3==b&&(F_(this.S,this.T,"tick",this.hb),this.T.start())):(Qc(this.j,this.m,u,null),W_(this,u)),4==b&&Oh(this),this.i&&!this.I&&(4==b?oy(this.l,this):(this.i=!1,kh(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Xi(12)):(this.o=0,Xi(13)),Oh(this),Gp(this)}}}catch{}},It.hb=function(){if(this.g){var n=wl(this.g),e=this.g.fa();this.C<e.length&&(Wp(this),vI(this,n,e),this.i&&4!=n&&kh(this))}},It.cancel=function(){this.I=!0,Oh(this)},It.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function pI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Rh(),Xi(17)),Oh(this),this.o=2,Gp(this)):wI(this,this.V-n)};var EI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Yc){this.h=void 0!==e?e:n.h,Ps(this,n.j),this.s=n.s,this.g=n.g,G_(this,n.m),this.l=n.l,e=n.i;var t=new Xc;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Kp(this,t),this.o=n.o}else n&&(t=String(n).match(EI))?(this.h=!!e,Ps(this,t[1]||"",!0),this.s=Zp(t[2]||""),this.g=Zp(t[3]||"",!0),G_(this,t[4]),this.l=Zp(t[5]||"",!0),Kp(this,t[6]||"",!0),this.o=Zp(t[7]||"")):(this.h=!!e,this.i=new Xc(null,this.h))}function jo(n){return new Yc(n)}function Ps(n,e,t){n.j=t?Zp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function G_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Kp(n,e,t){e instanceof Xc?(n.i=e,function bI(n,e){e&&!n.j&&(vl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Z_(this,r),CI(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Qp(e,Jb)),n.i=new Xc(e,n.h))}function Nn(n,e,t){n.i.set(e,t)}function q_(n){return Nn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Zp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Qp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,K_),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function K_(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Yc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Qp(e,Yp,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Qp(e,Yp,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Qp(t,"/"==t.charAt(0)?mM:gM,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Qp(t,eD)),n.join("")};var Yp=/[#\/\?@]/g,gM=/[#\?:]/g,mM=/[#\?]/g,Jb=/[#\?@]/g,eD=/#/g;function Xc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function vl(n){n.g||(n.g=new Map,n.h=0,n.i&&function qp(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Z_(n,e){vl(n),e=Eu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Q_(n,e){return vl(n),e=Eu(n,e),n.g.has(e)}function CI(n,e,t){Z_(n,e),0<t.length&&(n.i=null,n.g.set(Eu(n,e),qw(t)),n.h+=t.length)}function Eu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function tD(n){this.l=n||yM,n=Kt.PerformanceNavigationTiming?0<(n=Kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Kt.g&&Kt.g.Ga&&Kt.g.Ga()&&Kt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(It=Xc.prototype).add=function(n,e){vl(this),this.i=null,n=Eu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},It.forEach=function(n,e){vl(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},It.oa=function(){vl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},It.W=function(n){vl(this);let e=[];if("string"==typeof n)Q_(this,n)&&(e=e.concat(this.g.get(Eu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},It.set=function(n,e){return vl(this),this.i=null,Q_(this,n=Eu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},It.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},It.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),u=this.W(r);for(r=0;r<u.length;r++){var i=a;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var yM=10;function nD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function DI(n){return n.h?1:n.g?n.g.size:0}function Xp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Y_(n,e){n.g?n.g.add(e):n.h=e}function TI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function SI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return qw(n.i)}function X_(){}function vM(){this.g=new X_}function rD(n,e,t){const r=t||"";try{II(n,function(i,a){let u=i;yl(i)&&(u=P_(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function J_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Fh(n){this.l=n.ac||null,this.j=n.jb||!1}function Jp(n,e){_i.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Mi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tD.prototype.cancel=function(){if(this.i=SI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},X_.prototype.stringify=function(n){return Kt.JSON.stringify(n,void 0)},X_.prototype.parse=function(n){return Kt.JSON.parse(n,void 0)},Si(Fh,mI),Fh.prototype.g=function(){return new Jp(this.l,this.j)},Fh.prototype.i=function(n){return function(){return n}}({}),Si(Jp,_i);var Mi=0;function Jc(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function eg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,tg(n)}function tg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(It=Jp.prototype).open=function(n,e){if(this.readyState!=Mi)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,tg(this)},It.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Kt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},It.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,eg(this)),this.readyState=Mi},It.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,tg(this)),this.g&&(this.readyState=3,tg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Jc(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},It.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?eg(this):tg(this),3==this.readyState&&Jc(this)}},It.Va=function(n){this.g&&(this.response=this.responseText=n,eg(this))},It.Ua=function(n){this.g&&(this.response=n,eg(this))},It.ga=function(){this.g&&eg(this)},It.setRequestHeader=function(n,e){this.v.append(n,e)},It.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},It.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Jp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var wM=Kt.JSON.parse;function Dr(n){_i.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=AI,this.K=this.L=!1}Si(Dr,_i);var AI="",MI=/^https?$/i,ng=["POST","PUT"];function ey(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,RI(n),rg(n)}function RI(n){n.D||(n.D=!0,Xr(n,"complete"),Xr(n,"error"))}function xI(n){if(n.h&&typeof E_<"u"&&(!n.C[1]||4!=wl(n)||2!=n.aa()))if(n.v&&4==wl(n))O_(n.Ha,0,n);else if(Xr(n,"readystatechange"),4==wl(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(EI)[1]||null;if(!i&&Kt.self&&Kt.self.location){var a=Kt.self.location.protocol;i=a.substr(0,a.length-1)}r=!MI.test(i?i.toLowerCase():"")}t=r}if(t)Xr(n,"complete"),Xr(n,"success");else{n.m=6;try{var u=2<wl(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",RI(n)}}finally{rg(n)}}}function rg(n,e){if(n.g){NI(n);const t=n.g,r=n.C[0]?C_:null;n.g=null,n.C=null,e||Xr(n,"ready");try{t.onreadystatechange=r}catch{}}}function NI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Kt.clearTimeout(n.A),n.A=null)}function wl(n){return n.g?n.g.readyState:0}function ty(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case AI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function PI(n){let e="";return tI(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ny(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=PI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Nn(n,e,t))}function Cu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ry(n){this.Ca=0,this.i=[],this.j=new L_,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Cu("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Cu("baseRetryDelayMs",5e3,n),this.bb=Cu("retryDelaySeedMs",1e4,n),this.$a=Cu("forwardChannelMaxRetries",2,n),this.ta=Cu("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new tD(n&&n.concurrentRequestLimit),this.Fa=new vM,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function kI(n){if(sD(n),3==n.G){var e=n.U++,t=jo(n.F);Nn(t,"SID",n.I),Nn(t,"RID",e),Nn(t,"TYPE","terminate"),Uh(n,t),(e=new Nh(n,n.j,e,void 0)).K=2,e.v=q_(jo(t)),t=!1,Kt.navigator&&Kt.navigator.sendBeacon&&(t=Kt.navigator.sendBeacon(e.v.toString(),"")),!t&&Kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=VI(e.l,null),e.g.da(e.v)),e.F=Date.now(),kh(e)}uD(n)}function ig(n){n.g&&(aD(n),n.g.cancel(),n.g=null)}function sD(n){ig(n),n.u&&(Kt.clearTimeout(n.u),n.u=null),sy(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Kt.clearTimeout(n.m),n.m=null)}function Lh(n){nD(n.h)||n.m||(n.m=!0,k_(n.Ja,n),n.C=0)}function oD(n,e){var t;t=e?e.m:n.U++;const r=jo(n.F);Nn(r,"SID",n.I),Nn(r,"RID",t),Nn(r,"AID",n.T),Uh(n,r),n.o&&n.s&&ny(r,n.o,n.s),t=new Nh(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=iy(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Y_(n.h,t),H_(t,r,e)}function Uh(n,e){n.ia&&tI(n.ia,function(t,r){Nn(e,r,t)}),n.l&&II({},function(t,r){Nn(e,r,t)})}function iy(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ti(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let v=i[m].h;const b=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),f=!1;else try{rD(b,u,"req"+v+"_")}catch{r&&r(b)}}if(f){r=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function OI(n){n.g||n.u||(n.Z=1,k_(n.Ia,n),n.A=0)}function FI(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=V_(Ti(n.Ia,n),LI(n,n.A)),n.A++,0))}function aD(n){null!=n.B&&(Kt.clearTimeout(n.B),n.B=null)}function lD(n){n.g=new Nh(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=jo(n.sa);Nn(e,"RID","rpc"),Nn(e,"SID",n.I),Nn(e,"CI",n.L?"0":"1"),Nn(e,"AID",n.T),Nn(e,"TYPE","xmlhttp"),Uh(n,e),n.o&&n.s&&ny(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=q_(jo(e)),t.s=null,t.P=!0,Ph(t,n)}function sy(n){null!=n.v&&(Kt.clearTimeout(n.v),n.v=null)}function oy(n,e){var t=null;if(n.g==e){sy(n),aD(n),n.g=null;var r=2}else{if(!Xp(n.h,e))return;t=e.D,TI(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Xr(r=Bp(),new U_(r,t)),Lh(n)}else OI(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function ed(n,e){return!(DI(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=V_(Ti(n.Ja,n,e),LI(n,n.C)),n.C++,0)))}(n,e)||2==r&&FI(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:bu(n,5);break;case 4:bu(n,10);break;case 3:bu(n,6);break;default:bu(n,2)}}function LI(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function bu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ti(n.kb,n);t||(t=new Yc("//www.google.com/images/cleardot.gif"),Kt.location&&"http"==Kt.location.protocol||Ps(t,"https"),q_(t)),function iD(n,e){const t=new L_;if(Kt.Image){const r=new Image;r.onload=Rp(J_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Rp(J_,t,r,"TestLoadImage: error",!1,e),r.onabort=Rp(J_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Rp(J_,t,r,"TestLoadImage: timeout",!1,e),Kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Xi(2);n.G=0,n.l&&n.l.va(e),uD(n),sD(n)}function uD(n){if(n.G=0,n.la=[],n.l){const e=SI(n.h);(0!=e.length||0!=n.i.length)&&(Ab(n.la,e),Ab(n.la,n.i),n.h.i.length=0,qw(n.i),n.i.length=0),n.l.ua()}}function UI(n,e,t){var r=t instanceof Yc?jo(t):new Yc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),G_(r,r.m);else{var i=Kt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Yc(null,void 0);r&&Ps(a,r),e&&(a.g=e),i&&G_(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Nn(r,t,e),Nn(r,"VER",n.ma),Uh(n,r),r}function VI(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Dr(t&&n.Da&&!n.ra?new Fh({jb:!0}):n.ra)).Ka(n.H),e}function cD(){}function ay(){if(Pp&&!(10<=Number(aM)))throw Error("Environmental error: no available transport.")}function ds(n,e){_i.call(this),this.g=new ry(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Np(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Np(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new td(this)}function dD(n){j_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function jI(){B_.call(this),this.status=1}function td(n){this.g=n}(It=Dr.prototype).Ka=function(n){this.L=n},It.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():z_.g(),this.C=function pM(n){return n.h||(n.h=n.i())}(this.u?this.u:z_),this.g.onreadystatechange=Ti(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void ey(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Kt.FormData&&n instanceof Kt.FormData,!(0<=Sb(ng,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,u]of t)this.g.setRequestHeader(a,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{NI(this),0<this.B&&((this.K=function IM(n){return Pp&&function bk(){return function Ek(n){var e=oM;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Rb(String(wu)).split("."),t=Rb("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=T_(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||T_(0==i[2].length,0==a[2].length)||T_(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ti(this.qa,this)):this.A=O_(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){ey(this,a)}},It.qa=function(){typeof E_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xr(this,"timeout"),this.abort(8))},It.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xr(this,"complete"),Xr(this,"abort"),rg(this))},It.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rg(this,!0)),Dr.X.M.call(this)},It.Ha=function(){this.s||(this.F||this.v||this.l?xI(this):this.fb())},It.fb=function(){xI(this)},It.aa=function(){try{return 2<wl(this)?this.g.status:-1}catch{return-1}},It.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},It.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),wM(e)}},It.Ea=function(){return this.m},It.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(It=ry.prototype).ma=8,It.G=1,It.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Nh(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=nI(a),A_(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=iy(this,i,e),Nn(t=jo(this.F),"RID",n),Nn(t,"CVER",22),this.D&&Nn(t,"X-HTTP-Session-Id",this.D),Uh(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(PI(a)))+"&"+e:this.o&&ny(t,this.o,a)),Y_(this.h,i),this.Ya&&Nn(t,"TYPE","init"),this.O?(Nn(t,"$req",e),Nn(t,"SID","null"),i.Z=!0,H_(i,t,null)):H_(i,t,e),this.G=2}}else 3==this.G&&(n?oD(this,n):0==this.i.length||nD(this.h)||oD(this))},It.Ia=function(){if(this.u=null,lD(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=V_(Ti(this.eb,this),n)}},It.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Xi(10),ig(this),lD(this))},It.cb=function(){null!=this.v&&(this.v=null,ig(this),FI(this),Xi(19))},It.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Xi(2)):(this.j.info("Failed to ping google.com"),Xi(1))},(It=cD.prototype).xa=function(){},It.wa=function(){},It.va=function(){},It.ua=function(){},It.Ra=function(){},ay.prototype.g=function(n,e){return new ds(n,e)},Si(ds,_i),ds.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Xi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=UI(n,null,n.V),Lh(n)},ds.prototype.close=function(){kI(this.g)},ds.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=P_(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Lh(e)},ds.prototype.M=function(){this.g.l=null,delete this.j,kI(this.g),delete this.g,ds.X.M.call(this)},Si(dD,j_),Si(jI,B_),Si(td,cD),td.prototype.xa=function(){Xr(this.g,"a")},td.prototype.wa=function(n){Xr(this.g,new dD(n))},td.prototype.va=function(n){Xr(this.g,new jI)},td.prototype.ua=function(){Xr(this.g,"b")},ay.prototype.createWebChannel=ay.prototype.g,ds.prototype.send=ds.prototype.u,ds.prototype.open=ds.prototype.m,ds.prototype.close=ds.prototype.close,zp.NO_ERROR=0,zp.TIMEOUT=8,zp.HTTP_ERROR=6,qb.COMPLETE="complete",Kb.EventType=xh,xh.OPEN="a",xh.CLOSE="b",xh.ERROR="c",xh.MESSAGE="d",_i.prototype.listen=_i.prototype.N,Dr.prototype.listenOnce=Dr.prototype.O,Dr.prototype.getLastError=Dr.prototype.Oa,Dr.prototype.getLastErrorCode=Dr.prototype.Ea,Dr.prototype.getStatus=Dr.prototype.aa,Dr.prototype.getResponseJson=Dr.prototype.Sa,Dr.prototype.getResponseText=Dr.prototype.fa,Dr.prototype.send=Dr.prototype.da,Dr.prototype.setWithCredentials=Dr.prototype.Ka;var hD=pa.createWebChannelTransport=function(){return new ay},fD=pa.getStatEventTarget=function(){return Bp()},BI=pa.ErrorCode=zp,EM=pa.EventType=qb,pD=pa.Event=Iu,zI=pa.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},gD=pa.FetchXmlHttpFactory=Fh,ly=pa.WebChannel=Kb,CM=pa.XhrIo=Dr;const mD="@firebase/firestore";class yi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");let Vh="9.19.0";const Du=new Ns.Yd("@firebase/firestore");function $I(){return Du.logLevel}function Le(n,...e){if(Du.logLevel<=Ns.in.DEBUG){const t=e.map(cy);Du.debug(`Firestore (${Vh}): ${n}`,...t)}}function pr(n,...e){if(Du.logLevel<=Ns.in.ERROR){const t=e.map(cy);Du.error(`Firestore (${Vh}): ${n}`,...t)}}function ks(n,...e){if(Du.logLevel<=Ns.in.WARN){const t=e.map(cy);Du.warn(`Firestore (${Vh}): ${n}`,...t)}}function cy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${Vh}) INTERNAL ASSERTION FAILED: `+n;throw pr(e),new Error(e)}function Ct(n,e){n||dt()}function Qe(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends U.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _D{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yi.UNAUTHENTICATED))}shutdown(){}}class dy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class DM{constructor(e){this.t=e,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let u=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Jr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=u;e.enqueueRetryable((0,he.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Jr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new _D(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new yi(e)}}class TM{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=yi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class SM{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new TM(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yD{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.T;return this.T=a.token,Le("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.T=t.token,new Bo(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class wD{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=vD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Zt(n,e){return n<e?-1:n>e?1:0}function nd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function WI(n){return n+"\0"}class Jn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jn.fromMillis(Date.now())}static fromDate(e){return Jn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Jn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ht(e)}static min(){return new ht(new Jn(0,0))}static max(){return new ht(new Jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class sg{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===sg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends sg{construct(e,t,r){return new dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const AM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tr extends sg{construct(e,t,r){return new Tr(e,t,r)}static isValidIdentifier(e){return AM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new xe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new xe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new xe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(u=!u,i++):"."!==f||u?(r+=f,i++):(a(),i++)}if(a(),u)throw new xe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tr(t)}static emptyPath(){return new Tr([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(dn.fromString(e))}static fromName(e){return new We(dn.fromString(e).popFirst(5))}static empty(){return new We(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new dn(e.slice()))}}class hy{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function og(n){return n.fields.find(e=>2===e.kind)}function rd(n){return n.fields.filter(e=>2!==e.kind)}hy.UNKNOWN_ID=-1;class jh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Bh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Bh(0,hs.min())}}function GI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ht.fromTimestamp(1e9===r?new Jn(t+1,0):new Jn(t,r));return new hs(i,We.empty(),e)}function qI(n){return new hs(n.readTime,n.key,-1)}class hs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hs(ht.min(),We.empty(),-1)}static max(){return new hs(ht.max(),We.empty(),-1)}}function KI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:Zt(n.largestBatchId,e.largestBatchId))}const ZI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ma(n){return zo.apply(this,arguments)}function zo(){return zo=(0,he.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==ZI)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),zo.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let i=0,a=0,u=!1;e.forEach(f=>{++i,f.next(()=>{++a,u&&a===i&&t()},m=>r(m))}),u=!0,a===i&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(i=>i?se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new se((r,i)=>{const a=e.length,u=new Array(a);let f=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(b=>{u[v]=b,++f,f===a&&r(u)},b=>i(b))}})}static doWhile(e,t){return new se((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class zh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Jr,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new $h(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const i=XI(r.target.error);this.R.reject(new $h(e,i))}}static open(e,t,r,i){try{return new zh(t,e.transaction(i,r))}catch(a){throw new $h(t,a)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new CD(t)}}class Os{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Os.S((0,U.z$)())&&pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),sd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,U.hl)())return!1;if(Os.C())return!0;const e=(0,U.z$)(),t=Os.S(e),r=0<t&&t<10,i=Os.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,he.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new $h(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const f=u.target.error;i("VersionError"===f.name?new xe(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new xe(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new $h(e,f))},a.onupgradeneeded=u=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.V.M(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,he.Z)(function*(){const u="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const m=zh.open(a.db,e,u?"readonly":"readwrite",r),v=i(m).next(b=>(m.P(),b)).catch(b=>(m.abort(b),se.reject(b))).toPromise();return v.catch(()=>{}),yield m.v,v}catch(m){const v=m,b="FirebaseError"!==v.name&&f<3;if(Le("SimpleDb","Transaction failed with error:",v.message,"Retrying:",b),a.close(),!b)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ED{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return sd(this.L.delete())}}class $h extends xe{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function id(n){return"IndexedDbTransactionError"===n.name}class CD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),sd(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),sd(this.store.add(e))}get(e){return sd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),sd(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),sd(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(u,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new se((a,u)=>{i.onerror=f=>{u(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}J(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,u,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}X(e){const t=this.cursor({});return new se((r,i)=>{t.onerror=a=>{const u=XI(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(f=>{f?u.continue():r()}):r()}})}W(e,t){const r=[];return new se((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void i();const m=new ED(f),v=t(f.primaryKey,f.value,m);if(v instanceof se){const b=v.catch(A=>(m.done(),se.reject(A)));r.push(b)}m.isDone?i():null===m.K?f.continue():f.continue(m.K)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function sd(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=XI(r.target.error);t(i)}})}let YI=!1;function XI(n){const e=Os.S((0,U.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YI||(YI=!0,setTimeout(()=>{throw r},0)),r}}return n}class bD{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Le("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,he.Z)(function*(){t.task=null;try{Le("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){id(r)?Le("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ma(r)}yield t.et(6e4)}))}}class RM{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,he.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return se.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Le("IndexBackiller",`Processing collection: ${u}`),this.it(e,u,i).next(f=>{i-=f,r.add(u)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.rt(i,a)).next(f=>(Le("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>u.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const u=qI(a);KI(u,r)>0&&(r=u)}),new hs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let fs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Hh(n){return null==n}function Wh(n){return 0===n&&1/n==-1/0}function DD(n){return"number"==typeof n&&Number.isInteger(n)&&!Wh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function vi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=eE(e)),e=JI(n.get(t),e);return eE(e)}function JI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function eE(n){return n+"\x01\x01"}function $o(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&dt(),n.charAt(u+1)){case"\x01":const f=n.substring(a,u);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:dt()}a=u+2}return new dn(r)}const tE=["userId","batchId"];function ag(n,e){return[n,vi(e)]}function lg(n,e,t){return[n,vi(e),t]}const fy={},TD=["prefixPath","collectionGroup","readTime","documentId"],xM=["prefixPath","collectionGroup","documentId"],NM=["collectionGroup","readTime","prefixPath","documentId"],PM=["canonicalId","targetId"],kM=["targetId","path"],OM=["path","targetId"],SD=["collectionId","parent"],AD=["indexId","uid"],MD=["uid","sequenceNumber"],FM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RD=["indexId","uid","orderedDocumentKey"],LM=["userId","collectionPath","documentId"],Tk=["userId","collectionPath","largestBatchId"],UM=["userId","collectionGroup","largestBatchId"],xD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],nE=[...xD,"documentOverlays"],Gh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ND=Gh,VM=[...ND,"indexConfiguration","indexState","indexEntries"];class py extends QI{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function er(n,e){const t=Qe(n);return Os.O(t.at,e)}function rE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Il(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class gr{constructor(e,t){this.comparator=e,this.root=t||ei.EMPTY}insert(e,t){return new gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ei.BLACK,null,null))}remove(e){return new gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qh(this.root,e,this.comparator,!0)}}class qh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ei{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ei.RED,this.left=i??ei.EMPTY,this.right=a??ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ei(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ei.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}ei.EMPTY=null,ei.RED=!0,ei.BLACK=!1,ei.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ei(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wn{constructor(e){this.comparator=e,this.data=new gr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PD(this.data.getIterator())}getIteratorFrom(e){return new PD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class PD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ug(n){return n.hasNext()?n.getNext():void 0}class Fs{constructor(e){this.fields=e,e.sort(Tr.comparator)}static empty(){return new Fs([])}unionWith(e){let t=new wn(Tr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Fs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Sk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ti{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Sk("Invalid base64 string: "+i):i}}(e);return new ti(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ti(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ti.EMPTY_BYTE_STRING=new ti("");const OD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tu(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=OD.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mr(n.seconds),nanos:mr(n.nanos)}}function mr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Su(n){return"string"==typeof n?ti.fromBase64String(n):ti.fromUint8Array(n)}function my(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function iE(n){const e=n.mapValue.fields.__previous_value__;return my(e)?iE(e):e}function cg(n){const e=Tu(n.mapValue.fields.__local_write_time__.timestampValue);return new Jn(e.seconds,e.nanos)}class jM{constructor(e,t,r,i,a,u,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class El{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new El("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof El&&e.projectId===this.projectId&&e.database===this.database}}const _a={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sE={nullValue:"NULL_VALUE"};function Au(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?my(n)?4:VD(n)?9007199254740991:10:dt()}function lo(n,e){if(n===e)return!0;const t=Au(n);if(t!==Au(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cg(n).isEqual(cg(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Tu(r.timestampValue),u=Tu(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Su(n.bytesValue).isEqual(Su(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return mr(r.geoPointValue.latitude)===mr(i.geoPointValue.latitude)&&mr(r.geoPointValue.longitude)===mr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return mr(r.integerValue)===mr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=mr(r.doubleValue),u=mr(i.doubleValue);return a===u?Wh(a)===Wh(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return nd(n.arrayValue.values||[],e.arrayValue.values||[],lo);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(rE(a)!==rE(u))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===u[f]||!lo(a[f],u[f])))return!1;return!0}(n,e);default:return dt()}var i}function dg(n,e){return void 0!==(n.values||[]).find(t=>lo(t,e))}function Mu(n,e){if(n===e)return 0;const t=Au(n),r=Au(e);if(t!==r)return Zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=mr(i.integerValue||i.doubleValue),f=mr(a.integerValue||a.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return FD(n.timestampValue,e.timestampValue);case 4:return FD(cg(n),cg(e));case 5:return Zt(n.stringValue,e.stringValue);case 6:return function(i,a){const u=Su(i),f=Su(a);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),f=a.split("/");for(let m=0;m<u.length&&m<f.length;m++){const v=Zt(u[m],f[m]);if(0!==v)return v}return Zt(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=Zt(mr(i.latitude),mr(a.latitude));return 0!==u?u:Zt(mr(i.longitude),mr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],f=a.values||[];for(let m=0;m<u.length&&m<f.length;++m){const v=Mu(u[m],f[m]);if(v)return v}return Zt(u.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===_a.mapValue&&a===_a.mapValue)return 0;if(i===_a.mapValue)return 1;if(a===_a.mapValue)return-1;const u=i.fields||{},f=Object.keys(u),m=a.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const A=Zt(f[b],v[b]);if(0!==A)return A;const x=Mu(u[f[b]],m[v[b]]);if(0!==x)return x}return Zt(f.length,v.length)}(n.mapValue,e.mapValue);default:throw dt()}}function FD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Zt(n,e);const t=Tu(n),r=Tu(e),i=Zt(t.seconds,r.seconds);return 0!==i?i:Zt(t.nanos,r.nanos)}function Kh(n){return oE(n)}function oE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Tu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Su(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=oE(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const f of i)u?u=!1:a+=",",a+=`${f}:${oE(r.fields[f])}`;return a+"}"}(n.mapValue):dt();var e}function od(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function aE(n){return!!n&&"integerValue"in n}function hg(n){return!!n&&"arrayValue"in n}function LD(n){return!!n&&"nullValue"in n}function UD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _y(n){return!!n&&"mapValue"in n}function fg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Il(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=fg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function VD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function BM(n){return"nullValue"in n?sE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?od(El.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function zM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?od(El.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?_a:dt()}function jD(n,e){const t=Mu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function BD(n,e){const t=Mu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class wi{constructor(e){this.value=e}static empty(){return new wi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_y(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fg(t)}setAll(e){let t=Tr.emptyPath(),r={},i=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}u?r[f.lastSegment()]=fg(u):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());_y(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];_y(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Il(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new wi(fg(this.value))}}function s(n){const e=[];return Il(n.fields,(t,r)=>{const i=new Tr([t]);if(_y(r)){const a=s(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new Fs(e)}class o{constructor(e,t,r,i,a,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=u,this.documentState=f}static newInvalidDocument(e){return new o(e,0,ht.min(),ht.min(),ht.min(),wi.empty(),0)}static newFoundDocument(e,t,r,i){return new o(e,1,t,ht.min(),r,i,0)}static newNoDocument(e,t){return new o(e,2,t,ht.min(),ht.min(),wi.empty(),0)}static newUnknownDocument(e,t){return new o(e,3,t,ht.min(),ht.min(),wi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ht.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof o&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new o(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class l{constructor(e,t){this.position=e,this.inclusive=t}}function c(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?We.comparator(We.fromName(u.referenceValue),t.key):Mu(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function h(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!lo(n.position[t],e.position[t]))return!1;return!0}class p{constructor(e,t="asc"){this.field=e,this.dir=t}}function y(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class I{}class C extends I{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Ft(e,t,r):"array-contains"===t?new Sr(e,r):"in"===t?new $M(e,r):"not-in"===t?new dj(e,r):"array-contains-any"===t?new hj(e,r):new C(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Fe(e,r):new Qt(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Mu(t,this.value)):null!==t&&Au(this.value)===Au(t)&&this.matchesComparison(Mu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class S extends I{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new S(e,t)}matches(e){return N(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function N(n){return"and"===n.op}function B(n){return"or"===n.op}function Z(n){return ne(n)&&N(n)}function ne(n){for(const e of n.filters)if(e instanceof S)return!1;return!0}function we(n){if(n instanceof C)return n.field.canonicalString()+n.op.toString()+Kh(n.value);if(Z(n))return n.filters.map(e=>we(e)).join(",");{const e=n.filters.map(t=>we(t)).join(",");return`${n.op}(${e})`}}function ze(n,e){return n instanceof C?(t=n,(r=e)instanceof C&&t.op===r.op&&t.field.isEqual(r.field)&&lo(t.value,r.value)):n instanceof S?function(t,r){return r instanceof S&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,u)=>i&&ze(a,r.filters[u]),!0)}(n,e):void dt();var t,r}function Ye(n,e){const t=n.filters.concat(e);return S.create(t,n.op)}function pt(n){return n instanceof C?`${(e=n).field.canonicalString()} ${e.op} ${Kh(e.value)}`:n instanceof S?function(e){return e.op.toString()+" {"+e.getFilters().map(pt).join(" ,")+"}"}(n):"Filter";var e}class Ft extends C{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.matchesComparison(t)}}class Fe extends C{constructor(e,t){super(e,"in",t),this.keys=Hn(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qt extends C{constructor(e,t){super(e,"not-in",t),this.keys=Hn(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Hn(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class Sr extends C{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hg(t)&&dg(t.arrayValue,this.value)}}class $M extends C{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&dg(this.value.arrayValue,t)}}class dj extends C{constructor(e,t){super(e,"not-in",t)}matches(e){if(dg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!dg(this.value.arrayValue,t)}}class hj extends C{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>dg(this.value.arrayValue,r))}}class fj{constructor(e,t=null,r=[],i=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=f,this.ft=null}}function HM(n,e=null,t=[],r=[],i=null,a=null,u=null){return new fj(n,e,t,r,i,a,u)}function pg(n){const e=Qe(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>we(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Hh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Kh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Kh(r)).join(",")),e.ft=t}return e.ft}function lE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!y(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ze(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!h(n.startAt,e.startAt)&&h(n.endAt,e.endAt)}function zD(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $D(n,e){return n.filters.filter(t=>t instanceof C&&t.field.isEqual(e))}function Ak(n,e,t){let r=sE,i=!0;for(const a of $D(n,e)){let u=sE,f=!0;switch(a.op){case"<":case"<=":u=BM(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,f=!1;break;case"!=":case"not-in":u=sE}jD({value:r,inclusive:i},{value:u,inclusive:f})<0&&(r=u,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];jD({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function Mk(n,e,t){let r=_a,i=!0;for(const a of $D(n,e)){let u=_a,f=!0;switch(a.op){case">=":case">":u=zM(a.value),f=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,f=!1;break;case"!=":case"not-in":u=_a}BD({value:r,inclusive:i},{value:u,inclusive:f})>0&&(r=u,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];BD({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class ad{constructor(e,t=null,r=[],i=[],a=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=m,this.dt=null,this.wt=null}}function Rk(n,e,t,r,i,a,u,f){return new ad(n,e,t,r,i,a,u,f)}function yy(n){return new ad(n)}function xk(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function WM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function HD(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function GM(n){return null!==n.collectionGroup}function gg(n){const e=Qe(n);if(null===e.dt){e.dt=[];const t=HD(e),r=WM(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new p(t)),e.dt.push(new p(Tr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new p(Tr.keyField(),a))}}}return e.dt}function Ls(n){const e=Qe(n);if(!e.wt)if("F"===e.limitType)e.wt=HM(e.path,e.collectionGroup,gg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of gg(e))t.push(new p(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new l(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new l(e.startAt.position,e.startAt.inclusive):null;e.wt=HM(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function qM(n,e){e.getFirstInequalityField(),HD(n);const t=n.filters.concat([e]);return new ad(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function WD(n,e,t){return new ad(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function uE(n,e){return lE(Ls(n),Ls(e))&&n.limitType===e.limitType}function Nk(n){return`${pg(Ls(n))}|lt:${n.limitType}`}function KM(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>pt(r)).join(", ")}]`),Hh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Kh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Kh(r)).join(",")),`Target(${t})`}(Ls(n))}; limitType=${n.limitType})`}function cE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):We.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of gg(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const f=c(i,a,u);return i.inclusive?f<=0:f<0}(t.startAt,gg(t),r)||t.endAt&&!function(i,a,u){const f=c(i,a,u);return i.inclusive?f>=0:f>0}(t.endAt,gg(t),r)));var t,r}function Pk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kk(n){return(e,t)=>{let r=!1;for(const i of gg(n)){const a=pj(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function pj(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(i,a,u){const f=a.data.field(i),m=u.data.field(i);return null!==f&&null!==m?Mu(f,m):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}class Zh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Il(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return gy(this.inner)}size(){return this.innerSize}}const gj=new gr(We.comparator);function uo(){return gj}const Ok=new gr(We.comparator);function dE(...n){let e=Ok;for(const t of n)e=e.insert(t.key,t);return e}function Fk(n){let e=Ok;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ru(){return hE()}function Lk(){return hE()}function hE(){return new Zh(n=>n.toString(),(n,e)=>n.isEqual(e))}const mj=new gr(We.comparator),_j=new wn(We.comparator);function nn(...n){let e=_j;for(const t of n)e=e.add(t);return e}const yj=new wn(Zt);function GD(){return yj}function Uk(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wh(e)?"-0":e}}function Vk(n){return{integerValue:""+n}}function jk(n,e){return DD(e)?Vk(e):Uk(n,e)}class qD{constructor(){this._=void 0}}function vj(n,e,t){return n instanceof vy?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof mg?zk(n,e):n instanceof _g?$k(n,e):function(r,i){const a=Bk(r,i),u=Hk(a)+Hk(r._t);return aE(a)&&aE(r._t)?Vk(u):Uk(r.serializer,u)}(n,e)}function wj(n,e,t){return n instanceof mg?zk(n,e):n instanceof _g?$k(n,e):t}function Bk(n,e){return n instanceof wy?aE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class vy extends qD{}class mg extends qD{constructor(e){super(),this.elements=e}}function zk(n,e){const t=Wk(e);for(const r of n.elements)t.some(i=>lo(i,r))||t.push(r);return{arrayValue:{values:t}}}class _g extends qD{constructor(e){super(),this.elements=e}}function $k(n,e){let t=Wk(e);for(const r of n.elements)t=t.filter(i=>!lo(i,r));return{arrayValue:{values:t}}}class wy extends qD{constructor(e,t){super(),this.serializer=e,this._t=t}}function Hk(n){return mr(n.integerValue||n.doubleValue)}function Wk(n){return hg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fE{constructor(e,t){this.field=e,this.transform=t}}class Ej{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function KD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ZD{}function Gk(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ey(n.key,_r.none()):new Iy(n.key,n.data,_r.none());{const t=n.data,r=wi.empty();let i=new wn(Tr.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);null===u&&a.length>1&&(a=a.popLast(),u=t.field(a)),null===u?r.delete(a):r.set(a,u),i=i.add(a)}return new ld(n.key,r,new Fs(i.toArray()),_r.none())}}function Cj(n,e,t){n instanceof Iy?function(r,i,a){const u=r.value.clone(),f=Zk(r.fieldTransforms,i,a.transformResults);u.setAll(f),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof ld?function(r,i,a){if(!KD(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=Zk(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(Kk(r)),f.setAll(u),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pE(n,e,t,r){return n instanceof Iy?function(i,a,u,f){if(!KD(i.precondition,a))return u;const m=i.value.clone(),v=Qk(i.fieldTransforms,f,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof ld?function(i,a,u,f){if(!KD(i.precondition,a))return u;const m=Qk(i.fieldTransforms,f,a),v=a.data;return v.setAll(Kk(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(u=t,KD(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u);var a,u}function bj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Bk(r.transform,i||null);null!=a&&(null===t&&(t=wi.empty()),t.set(r.field,a))}return t||null}function qk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&nd(t,r,(i,a)=>function Ij(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof mg&&r instanceof mg||t instanceof _g&&r instanceof _g?nd(t.elements,r.elements,lo):t instanceof wy&&r instanceof wy?lo(t._t,r._t):t instanceof vy&&r instanceof vy);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Iy extends ZD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ld extends ZD{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Kk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Zk(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,f=e.data.field(a.field);r.set(a.field,wj(u,f,t[i]))}return r}function Qk(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,vj(a,u,e))}return r}class Ey extends ZD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZM extends ZD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class QM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Cj(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Lk();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=t.has(i.key)?null:f;const m=Gk(u,f);null!==m&&r.set(i.key,m),u.isValidDocument()||u.convertToNoDocument(ht.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nn())}isEqual(e){return this.batchId===e.batchId&&nd(this.mutations,e.mutations,(t,r)=>qk(t,r))&&nd(this.baseMutations,e.baseMutations,(t,r)=>qk(t,r))}}class YM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=mj;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new YM(e,t,r,i)}}class XM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Sj{constructor(e){this.count=e}}var Ii,En;function Yk(n){switch(n){default:return dt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function Xk(n){if(void 0===n)return pr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Ii.OK:return ge.OK;case Ii.CANCELLED:return ge.CANCELLED;case Ii.UNKNOWN:return ge.UNKNOWN;case Ii.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Ii.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Ii.INTERNAL:return ge.INTERNAL;case Ii.UNAVAILABLE:return ge.UNAVAILABLE;case Ii.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Ii.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Ii.NOT_FOUND:return ge.NOT_FOUND;case Ii.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Ii.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Ii.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Ii.ABORTED:return ge.ABORTED;case Ii.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Ii.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Ii.DATA_LOSS:return ge.DATA_LOSS;default:return dt()}}(En=Ii||(Ii={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";class eR{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return QD}static getOrCreateInstance(){return null===QD&&(QD=new eR),QD}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let QD=null;class gE{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,mE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new gE(ht.min(),i,GD(),uo(),nn())}}class mE{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new mE(r,t,nn(),nn(),nn())}}class YD{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class Jk{constructor(e,t){this.targetId=e,this.Et=t}}class eO{constructor(e,t,r=ti.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class tO{constructor(){this.At=0,this.Rt=rO(),this.vt=ti.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=nn(),t=nn(),r=nn();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new mE(this.vt,this.bt,e,t,r)}xt(){this.Pt=!1,this.Rt=rO()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class Aj{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=uo(),this.qt=nO(),this.Ut=new wn(Zt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const r=this.jt(t);switch(e.state){case 0:this.Wt(t)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.Wt(i)&&t(i)})}Jt(e){var t;const r=e.targetId,i=e.Et.count,a=this.Yt(r);if(a){const u=a.target;if(zD(u))if(0===i){const f=new We(u.path);this.Qt(r,f,o.newNoDocument(f,ht.min()))}else Ct(1===i);else{const f=this.Zt(r);f!==i&&(this.Ht(r),this.Ut=this.Ut.add(r),null===(t=eR.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:f,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((a,u)=>{const f=this.Yt(u);if(f){if(a.current&&zD(f.target)){const m=new We(f.target.path);null!==this.Lt.get(m)||this.te(u,m)||this.Qt(u,m,o.newNoDocument(m,e))}a.St&&(t.set(u,a.Ct()),a.xt())}});let r=nn();this.qt.forEach((a,u)=>{let f=!0;u.forEachWhile(m=>{const v=this.Yt(m);return!v||2===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Lt.forEach((a,u)=>u.setReadTime(e));const i=new gE(e,t,this.Ut,this.Lt,r);return this.Lt=uo(),this.qt=nO(),this.Ut=new wn(Zt),i}Gt(e,t){if(!this.Wt(e))return;const r=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.Wt(e))return;const i=this.jt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new tO,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new wn(Zt),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new tO),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function nO(){return new gr(We.comparator)}function rO(){return new gr(We.comparator)}const Mj={asc:"ASCENDING",desc:"DESCENDING"},Rj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xj={and:"AND",or:"OR"};class Nj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cy(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Pj(n,e){return Cy(n,e.toTimestamp())}function ni(n){return Ct(!!n),ht.fromTimestamp(function(e){const t=Tu(e);return new Jn(t.seconds,t.nanos)}(n))}function tR(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function sO(n){const e=dn.fromString(n);return Ct(pO(e)),e}function _E(n,e){return tR(n.databaseId,e.path)}function xu(n,e){const t=sO(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(aO(t))}function nR(n,e){return tR(n.databaseId,e)}function oO(n){const e=sO(n);return 4===e.length?dn.emptyPath():aO(e)}function yE(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aO(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function lO(n,e,t){return{name:_E(n,e),fields:t.value.mapValue.fields}}function uO(n,e,t){const r=xu(n,e.name),i=ni(e.updateTime),a=e.createTime?ni(e.createTime):ht.min(),u=new wi({mapValue:{fields:e.fields}}),f=o.newFoundDocument(r,i,a,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function vE(n,e){let t;if(e instanceof Iy)t={update:lO(n,e.key,e.value)};else if(e instanceof Ey)t={delete:_E(n,e.key)};else if(e instanceof ld)t={update:lO(n,e.key,e.data),updateMask:Bj(e.fieldMask)};else{if(!(e instanceof ZM))return dt();t={verify:_E(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof vy)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof mg)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof _g)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof wy)return{fieldPath:a.field.canonicalString(),increment:u._t};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Pj(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function rR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?_r.updateTime(ni(i.updateTime)):void 0!==i.exists?_r.exists(i.exists):_r.none():_r.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let f=null;"setToServerValue"in u?(Ct("REQUEST_TIME"===u.setToServerValue),f=new vy):"appendMissingElements"in u?f=new mg(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new _g(u.removeAllFromArray.values||[]):"increment"in u?f=new wy(a,u.increment):dt();const m=Tr.fromServerFormat(u.fieldPath);return new fE(m,f)}(n,i)):[];var i;if(e.update){const i=xu(n,e.update.name),a=new wi({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Fs((e.updateMask.fieldPaths||[]).map(v=>Tr.fromServerFormat(v)));return new ld(i,a,u,t,r)}return new Iy(i,a,t,r)}if(e.delete){const i=xu(n,e.delete);return new Ey(i,t)}if(e.verify){const i=xu(n,e.verify);return new ZM(i,t)}return dt()}function cO(n,e){return{documents:[nR(n,e.path)]}}function iR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=nR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=nR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return fO(S.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:Qh((b=v).field),direction:Uj(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(v=e.limit,n.useProto3Json||Hh(v)?v:{value:v});var v,f,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function dO(n){let e=oO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(b){const A=hO(b);return A instanceof S&&Z(A)?A.getFilters():[A]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(b=>{return new p(by((A=b).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;t.limit&&(f=function(b){let A;return A="object"==typeof b?b.value:b,Hh(A)?null:A}(t.limit));let m=null;var b;t.startAt&&(m=new l((b=t.startAt).values||[],!!b.before));let v=null;return t.endAt&&(v=function(b){return new l(b.values||[],!b.before)}(t.endAt)),Rk(e,i,u,a,f,"F",m,v)}function hO(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=by(e.unaryFilter.field);return C.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=by(e.unaryFilter.field);return C.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=by(e.unaryFilter.field);return C.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=by(e.unaryFilter.field);return C.create(a,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}(n):void 0!==n.fieldFilter?C.create(by((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return S.create(e.compositeFilter.filters.map(t=>hO(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return dt()}}(e.compositeFilter.op))}(n):dt();var e}function Uj(n){return Mj[n]}function Vj(n){return Rj[n]}function jj(n){return xj[n]}function Qh(n){return{fieldPath:n.canonicalString()}}function by(n){return Tr.fromServerFormat(n.fieldPath)}function fO(n){return n instanceof C?function(e){if("=="===e.op){if(UD(e.value))return{unaryFilter:{field:Qh(e.field),op:"IS_NAN"}};if(LD(e.value))return{unaryFilter:{field:Qh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(UD(e.value))return{unaryFilter:{field:Qh(e.field),op:"IS_NOT_NAN"}};if(LD(e.value))return{unaryFilter:{field:Qh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qh(e.field),op:Vj(e.op),value:e.value}}}(n):n instanceof S?function(e){const t=e.getFilters().map(r=>fO(r));return 1===t.length?t[0]:{compositeFilter:{op:jj(e.op),filters:t}}}(n):dt()}function Bj(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pO(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Yh{constructor(e,t,r,i,a=ht.min(),u=ht.min(),f=ti.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f}withSequenceNumber(e){return new Yh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class gO{constructor(e){this.se=e}}function mO(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:XD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:_E(i=n.se,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Cy(i,a.version.toTimestamp()),createTime:Cy(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:yg(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:yg(e.version)}}var i,a;return r}function XD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function yg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vg(n){const e=new Jn(n.seconds,n.nanoseconds);return ht.fromTimestamp(e)}function wg(n,e){const t=(e.baseMutations||[]).map(a=>rR(n.se,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>rR(n.se,a)),i=Jn.fromMillis(e.localWriteTimeMs);return new QM(e.batchId,i,t,r)}function wE(n){const e=vg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?vg(n.lastLimboFreeSnapshotVersion):ht.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=Ls(yy(oO(i.documents[0])))):r=Ls(dO(n.query)),new Yh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ti.fromBase64String(n.resumeToken))}function _O(n,e){const t=yg(e.snapshotVersion),r=yg(e.lastLimboFreeSnapshotVersion);let i;i=zD(e.target)?cO(n.se,e.target):iR(n.se,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pg(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sR(n){const e=dO({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?WD(e,e.limit,"L"):e}function oR(n,e){return new XM(e.largestBatchId,rR(n.se,e.overlayMutation))}function yO(n,e){const t=e.path.lastSegment();return[n,vi(e.path.popLast()),t]}function vO(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:yg(r.readTime),documentKey:vi(r.documentKey.path),largestBatchId:r.largestBatchId}}class $j{getBundleMetadata(e,t){return wO(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:vg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return wO(e).put({bundleId:(r=t).id,createTime:yg(ni(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return IO(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:sR(i.bundledQuery),readTime:vg(i.readTime)};var i})}saveNamedQuery(e,t){return IO(e).put({name:(r=t).name,readTime:yg(ni(r.readTime)),bundledQuery:r.bundledQuery});var r}}function wO(n){return er(n,"bundles")}function IO(n){return er(n,"namedQueries")}class JD{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new JD(e,t.uid||"")}getOverlay(e,t){return IE(e).get(yO(this.userId,t)).next(r=>r?oR(this.serializer,r):null)}getOverlays(e,t){const r=Ru();return se.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const f=new XM(t,u);i.push(this.re(e,f))}),se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(vi(u.getCollectionPath())));const a=[];return i.forEach(u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(IE(e).J("collectionPathOverlayIndex",f))}),se.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Ru(),a=vi(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return IE(e).j("collectionPathOverlayIndex",u).next(f=>{for(const m of f){const v=oR(this.serializer,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Ru();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return IE(e).Z({index:"collectionGroupOverlayIndex",range:f},(m,v,b)=>{const A=oR(this.serializer,v);a.size()<i||A.largestBatchId===u?(a.set(A.getKey(),A),u=A.largestBatchId):b.done()}).next(()=>a)}re(e,t){return IE(e).put(function(r,i,a){const[u,f,m]=yO(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:vE(r.se,a.mutation)}}(this.serializer,this.userId,t))}}function IE(n){return er(n,"documentOverlays")}class Ig{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(mr(e.integerValue));else if("doubleValue"in e){const r=mr(e.doubleValue);isNaN(r)?this.ae(t,13):(this.ae(t,15),Wh(r)?t.he(0):t.he(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le(`${r.seconds||""}`),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Su(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ae(t,45),t.he(r.latitude||0),t.he(r.longitude||0)}else"mapValue"in e?VD(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):dt()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const r=e.fields||{};this.ae(t,55);for(const i of Object.keys(r))this.fe(i,t),this.ue(r[i],t)}ge(e,t){const r=e.values||[];this.ae(t,50);for(const i of r)this.ue(i,t)}_e(e,t){this.ae(t,37),We.fromName(e).path.forEach(r=>{this.ae(t,60),this.ye(r,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function Hj(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function EO(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=Hj(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Ig.pe=new Ig;class Wj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Te(r.value),r=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.ve()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Te(r);else if(r<2048)this.Te(960|r>>>6),this.Te(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Te(480|r>>>12),this.Te(128|63&r>>>6),this.Te(128|63&r);else{const i=t.codePointAt(0);this.Te(240|i>>>18),this.Te(128|63&i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i)}}this.Ee()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.ve()}Ve(e){const t=this.Se(e),r=EO(t);this.De(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ce(e){const t=this.Se(e),r=EO(t);this.De(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Gj{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class qj{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class EE{constructor(){this.Me=new Wj,this.Fe=new Gj(this.Me),this.Be=new qj(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class Eg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Eg(this.indexId,this.documentKey,this.arrayValue,r)}}function Xh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=CO(n.arrayValue,e.arrayValue),0!==t?t:(t=CO(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function CO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Kj{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ge=r:this.Ke.push(r)}}Qe(e){Ct(e.collectionGroup===this.collectionId);const t=og(e);if(void 0!==t&&!this.ze(t))return!1;const r=rd(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ge){const u=r[i];if(!this.je(this.Ge,u)||!this.We(this.Ue[a++],u))return!1;++i}for(;i<r.length;++i)if(a>=this.Ue.length||!this.We(this.Ue[a++],r[i]))return!1;return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function bO(n){var e,t;if(Ct(n instanceof C||n instanceof S),n instanceof C){if(n instanceof $M){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>C.create(n.field,"==",a)))||[];return S.create(i,"or")}return n}const r=n.filters.map(i=>bO(i));return S.create(r,n.op)}function Zj(n){if(0===n.getFilters().length)return[];const e=uR(bO(n));return Ct(DO(e)),aR(e)||lR(e)?[e]:e.getFilters()}function aR(n){return n instanceof C}function lR(n){return n instanceof S&&Z(n)}function DO(n){return aR(n)||lR(n)||function(e){if(e instanceof S&&B(e)){for(const t of e.getFilters())if(!aR(t)&&!lR(t))return!1;return!0}return!1}(n)}function uR(n){if(Ct(n instanceof C||n instanceof S),n instanceof C)return n;if(1===n.filters.length)return uR(n.filters[0]);const e=n.filters.map(r=>uR(r));let t=S.create(e,n.op);return t=eT(t),DO(t)?t:(Ct(t instanceof S),Ct(N(t)),Ct(t.filters.length>1),t.filters.reduce((r,i)=>cR(r,i)))}function cR(n,e){let t;return Ct(n instanceof C||n instanceof S),Ct(e instanceof C||e instanceof S),t=n instanceof C?e instanceof C?S.create([n,e],"and"):TO(n,e):e instanceof C?TO(e,n):function(r,i){if(Ct(r.filters.length>0&&i.filters.length>0),N(r)&&N(i))return Ye(r,i.getFilters());const a=B(r)?r:i,u=B(r)?i:r,f=a.filters.map(m=>cR(m,u));return S.create(f,"or")}(n,e),eT(t)}function TO(n,e){if(N(e))return Ye(e,n.getFilters());{const t=e.filters.map(r=>cR(n,r));return S.create(t,"or")}}function eT(n){if(Ct(n instanceof C||n instanceof S),n instanceof C)return n;const e=n.getFilters();if(1===e.length)return eT(e[0]);if(ne(n))return n;const t=e.map(i=>eT(i)),r=[];return t.forEach(i=>{i instanceof C?r.push(i):i instanceof S&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:S.create(r,n.op)}class Qj{constructor(){this.He=new dR}addToCollectionParentIndex(e,t){return this.He.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(hs.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class dR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wn(dn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wn(dn.comparator)).toArray()}}const tT=new Uint8Array(0);class Yj{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new dR,this.Ye=new Zh(r=>pg(r),(r,i)=>lE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const a={collectionId:r,parent:vi(i)};return SO(e).put(a)}return se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[WI(t),""],!1,!0);return SO(e).j(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push($o(u.parent))}return r})}addFieldIndex(e,t){const r=nT(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var u;delete i.indexId;const a=r.add(i);if(t.indexState){const u=bE(e);return a.next(f=>{u.put(vO(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=nT(e),i=bE(e),a=CE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=CE(e);let i=!0;const a=new Map;return se.forEach(this.Ze(t),u=>this.Xe(e,u).next(f=>{i&&(i=!!f),a.set(u,f)})).next(()=>{if(i){let u=nn();const f=[];return se.forEach(a,(m,v)=>{var b;Le("IndexedDbIndexManager",`Using index ${b=m,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Je=>`${Je.fieldPath}:${Je.kind}`).join(",")}`} to execute ${pg(t)}`);const A=function(Je,gt){const Yt=og(gt);if(void 0===Yt)return null;for(const on of $D(Je,Yt.fieldPath))switch(on.op){case"array-contains-any":return on.value.arrayValue.values||[];case"array-contains":return[on.value]}return null}(v,m),x=function(Je,gt){const Yt=new Map;for(const on of rd(gt))for(const Ri of $D(Je,on.fieldPath))switch(Ri.op){case"==":case"in":Yt.set(on.fieldPath.canonicalString(),Ri.value);break;case"not-in":case"!=":return Yt.set(on.fieldPath.canonicalString(),Ri.value),Array.from(Yt.values())}return null}(v,m),j=function(Je,gt){const Yt=[];let on=!0;for(const Ri of rd(gt)){const go=0===Ri.kind?Ak(Je,Ri.fieldPath,Je.startAt):Mk(Je,Ri.fieldPath,Je.startAt);Yt.push(go.value),on&&(on=go.inclusive)}return new l(Yt,on)}(v,m),W=function(Je,gt){const Yt=[];let on=!0;for(const Ri of rd(gt)){const go=0===Ri.kind?Mk(Je,Ri.fieldPath,Je.endAt):Ak(Je,Ri.fieldPath,Je.endAt);Yt.push(go.value),on&&(on=go.inclusive)}return new l(Yt,on)}(v,m),ce=this.tn(m,v,j),_e=this.tn(m,v,W),Ge=this.en(m,v,x),ft=this.nn(m.indexId,A,ce,j.inclusive,_e,W.inclusive,Ge);return se.forEach(ft,Je=>r.H(Je,t.limit).next(gt=>{gt.forEach(Yt=>{const on=We.fromSegments(Yt.documentKey);u.has(on)||(u=u.add(on),f.push(on))})}))}).next(()=>f)}return se.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:Zj(S.create(e.filters,"and")).map(r=>HM(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,r,i,a,u,f){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),b=[];for(let A=0;A<m;++A){const x=t?this.sn(t[A/v]):tT,j=this.rn(e,x,r[A%v],i),W=this.on(e,x,a[A%v],u),ce=f.map(_e=>this.rn(e,x,_e,!0));b.push(...this.createRange(j,W,ce))}return b}rn(e,t,r,i){const a=new Eg(e,We.empty(),t,r);return i?a:a.qe()}on(e,t,r,i){const a=new Eg(e,We.empty(),t,r);return i?a.qe():a}Xe(e,t){const r=new Kj(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const f of a)r.Qe(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u})}getIndexType(e,t){let r=2;const i=this.Ze(t);return se.forEach(i,a=>this.Xe(e,a).next(u=>{u?0!==r&&u.fields.length<function(f){let m=new wn(Tr.comparator),v=!1;for(const b of f.filters)for(const A of b.getFlattenedFilters())A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:m=m.add(A.field));for(const b of f.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}un(e,t){const r=new EE;for(const i of rd(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.Le(i.kind);Ig.pe.oe(a,u)}return r.$e()}sn(e){const t=new EE;return Ig.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const r=new EE;return Ig.pe.oe(od(this.databaseId,t),r.Le(function(i){const a=rd(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}en(e,t,r){if(null===r)return[];let i=[];i.push(new EE);let a=0;for(const u of rd(e)){const f=r[a++];for(const m of i)if(this.an(t,u.fieldPath)&&hg(f))i=this.hn(i,u,f);else{const v=m.Le(u.kind);Ig.pe.oe(f,v)}}return this.ln(i)}tn(e,t,r){return this.en(e,t,r.position)}ln(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}hn(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const f of i){const m=new EE;m.seed(f.$e()),Ig.pe.oe(u,m.Le(t.kind)),a.push(m)}return a}an(e,t){return!!e.filters.find(r=>r instanceof C&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=nT(e),i=bE(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const u=[];return se.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{u.push(function(v,b){const A=b?new Bh(b.sequenceNumber,new hs(vg(b.readTime),new We($o(b.documentKey)),b.largestBatchId)):Bh.empty(),x=v.fields.map(([j,W])=>new jh(Tr.fromServerFormat(j),W));return new hy(v.indexId,v.collectionGroup,x,A)}(f,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Zt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=nT(e),a=bE(e);return this.fn(e).next(u=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>se.forEach(f,m=>a.put(vO(m.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?se.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),se.forEach(f,m=>this.dn(e,i,m).next(v=>{const b=this.wn(a,m);return v.isEqual(b)?se.resolve():this._n(e,a,m,v,b)}))))})}mn(e,t,r,i){return CE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.cn(r,t.key),documentKey:t.key.path.toArray()})}gn(e,t,r,i){return CE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.cn(r,t.key),t.key.path.toArray()])}dn(e,t,r){const i=CE(e);let a=new wn(Xh);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.cn(r,t)])},(u,f)=>{a=a.add(new Eg(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}wn(e,t){let r=new wn(Xh);const i=this.un(t,e);if(null==i)return r;const a=og(t);if(null!=a){const u=e.data.field(a.fieldPath);if(hg(u))for(const f of u.arrayValue.values||[])r=r.add(new Eg(t.indexId,e.key,this.sn(f),i))}else r=r.add(new Eg(t.indexId,e.key,tT,i));return r}_n(e,t,r,i,a){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(f,m,v,b,A){const x=f.getIterator(),j=m.getIterator();let W=ug(x),ce=ug(j);for(;W||ce;){let _e=!1,Ge=!1;if(W&&ce){const ft=v(W,ce);ft<0?Ge=!0:ft>0&&(_e=!0)}else null!=W?Ge=!0:_e=!0;_e?(b(ce),ce=ug(j)):Ge?(A(W),W=ug(x)):(W=ug(x),ce=ug(j))}}(i,a,Xh,f=>{u.push(this.mn(e,t,r,f))},f=>{u.push(this.gn(e,t,r,f))}),se.waitFor(u)}fn(e){let t=1;return bE(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,f)=>Xh(u,f)).filter((u,f,m)=>!f||0!==Xh(u,m[f-1]));const i=[];i.push(e);for(const u of r){const f=Xh(u,e),m=Xh(u,t);if(0===f)i[0]=e.qe();else if(f>0&&m<0)i.push(u),i.push(u.qe());else if(m>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2){if(this.yn(i[u],i[u+1]))return[];a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,tT,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,tT,[]]))}return a}yn(e,t){return Xh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(AO)}getMinOffset(e,t){return se.mapArray(this.Ze(t),r=>this.Xe(e,r).next(i=>i||dt())).next(AO)}}function SO(n){return er(n,"collectionParents")}function CE(n){return er(n,"indexEntries")}function nT(n){return er(n,"indexConfiguration")}function bE(n){return er(n,"indexState")}function AO(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;KI(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new hs(e.readTime,e.documentKey,t)}const MO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class co{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new co(e,co.DEFAULT_COLLECTION_PERCENTILE,co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function RO(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let f=0;const m=r.Z({range:u},(b,A,x)=>(f++,x.delete()));a.push(m.next(()=>{Ct(1===f)}));const v=[];for(const b of t.mutations){const A=lg(e,b.key.path,t.batchId);a.push(i.delete(A)),v.push(b.key)}return se.waitFor(a).next(()=>v)}function rT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}co.DEFAULT_COLLECTION_PERCENTILE=10,co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,co.DEFAULT=new co(41943040,co.DEFAULT_COLLECTION_PERCENTILE,co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),co.DISABLED=new co(-1,0,0);class iT{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.pn={}}static ie(e,t,r,i){Ct(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new iT(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jh(e).Z({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Dy(e),u=Jh(e);return u.add({}).next(f=>{Ct("number"==typeof f);const m=new QM(f,t,r,i),v=function(x,j,W){const ce=W.baseMutations.map(Ge=>vE(x.se,Ge)),_e=W.mutations.map(Ge=>vE(x.se,Ge));return{userId:j,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:ce,mutations:_e}}(this.serializer,this.userId,m),b=[];let A=new wn((x,j)=>Zt(x.canonicalString(),j.canonicalString()));for(const x of i){const j=lg(this.userId,x.key.path,f);A=A.add(x.key.path.popLast()),b.push(u.put(v)),b.push(a.put(j,fy))}return A.forEach(x=>{b.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.pn[f]=m.keys()}),se.waitFor(b).next(()=>m)})}lookupMutationBatch(e,t){return Jh(e).get(t).next(r=>r?(Ct(r.userId===this.userId),wg(this.serializer,r)):null)}In(e,t){return this.pn[t]?se.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.pn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Jh(e).Z({index:"userMutationsIndex",range:i},(u,f,m)=>{f.userId===this.userId&&(Ct(f.batchId>=r),a=wg(this.serializer,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Jh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jh(e).j("userMutationsIndex",t).next(r=>r.map(i=>wg(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ag(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Dy(e).Z({range:i},(u,f,m)=>{const[v,b,A]=u,x=$o(b);if(v===this.userId&&t.path.isEqual(x))return Jh(e).get(A).next(j=>{if(!j)throw dt();Ct(j.userId===this.userId),a.push(wg(this.serializer,j))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Zt);const i=[];return t.forEach(a=>{const u=ag(this.userId,a.path),f=IDBKeyRange.lowerBound(u),m=Dy(e).Z({range:f},(v,b,A)=>{const[x,j,W]=v,ce=$o(j);x===this.userId&&a.path.isEqual(ce)?r=r.add(W):A.done()});i.push(m)}),se.waitFor(i).next(()=>this.Tn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=ag(this.userId,r),u=IDBKeyRange.lowerBound(a);let f=new wn(Zt);return Dy(e).Z({range:u},(m,v,b)=>{const[A,x,j]=m,W=$o(x);A===this.userId&&r.isPrefixOf(W)?W.length===i&&(f=f.add(j)):b.done()}).next(()=>this.Tn(e,f))}Tn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Jh(e).get(a).next(u=>{if(null===u)throw dt();Ct(u.userId===this.userId),r.push(wg(this.serializer,u))}))}),se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return RO(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Dy(e).Z({range:r},(a,u,f)=>{if(a[0]===this.userId){const m=$o(a[1]);i.push(m)}else f.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return xO(e,this.userId,t)}An(e){return NO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xO(n,e,t){const r=ag(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return Dy(n).Z({range:a,Y:!0},(f,m,v)=>{const[b,A,x]=f;b===e&&A===i&&(u=!0),v.done()}).next(()=>u)}function Jh(n){return er(n,"mutations")}function Dy(n){return er(n,"documentMutations")}function NO(n){return er(n,"mutationQueues")}class Cg{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new Cg(0)}static bn(){return new Cg(-1)}}class Xj{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const r=new Cg(t.highestTargetId);return t.highestTargetId=r.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>ht.fromTimestamp(new Jn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Vn(e,i)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(r=>(r.targetCount+=1,this.Dn(t,r),this.Vn(e,r))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ty(e).delete(t.targetId)).next(()=>this.Pn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.Vn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Ty(e).Z((u,f)=>{const m=wE(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>se.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Ty(e).Z((r,i)=>{const a=wE(i);t(a)})}Pn(e){return PO(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}Vn(e,t){return PO(e).put("targetGlobalKey",t)}Sn(e,t){return Ty(e).put(_O(this.serializer,t))}Dn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=pg(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Ty(e).Z({range:i,index:"queryTargetsIndex"},(u,f,m)=>{const v=wE(f);lE(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=ef(e);return t.forEach(u=>{const f=vi(u.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,u))}),se.waitFor(i)}removeMatchingKeys(e,t,r){const i=ef(e);return se.forEach(t,a=>{const u=vi(a.path);return se.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=ef(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ef(e);let a=nn();return i.Z({range:r,Y:!0},(u,f,m)=>{const v=$o(u[1]),b=new We(v);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=vi(t.path),i=IDBKeyRange.bound([r],[WI(r)],!1,!0);let a=0;return ef(e).Z({index:"documentTargetsIndex",Y:!0,range:i},([u,f],m,v)=>{0!==u&&(a++,v.done())}).next(()=>a>0)}ne(e,t){return Ty(e).get(t).next(r=>r?wE(r):null)}}function Ty(n){return er(n,"targets")}function PO(n){return er(n,"targetGlobal")}function ef(n){return er(n,"targetDocuments")}function kO([n,e],[t,r]){const i=Zt(n,t);return 0===i?Zt(e,r):i}class Jj{constructor(e){this.Cn=e,this.buffer=new wn(kO),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eB{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;Le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,he.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){id(r)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ma(r)}yield t.$n(3e5)}))}}class tB{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(fs.ct);const r=new Jj(t);return this.Mn.forEachTarget(e,i=>r.kn(i.sequenceNumber)).next(()=>this.Mn.Bn(e,i=>r.kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(MO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),MO):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let r,i,a,u,f,m,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,u=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(e,r,t))).next(A=>(a=A,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(v=Date.now(),$I()<=Ns.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-b}ms\n\tDetermined least recently used ${i} in `+(f-u)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${A} documents in `+(v-m)+`ms\nTotal Duration: ${v-b}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class nB{constructor(e,t){this.db=e,this.garbageCollector=new tB(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Bn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(r,i)=>t(i))}addReference(e,t,r){return sT(e,r)}removeReference(e,t,r){return sT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return sT(e,t)}Kn(e,t){return function(r,i){let a=!1;return NO(r).X(u=>xO(r,u,i).next(f=>(f&&(a=!0),se.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Un(e,(u,f)=>{if(f<=t){const m=this.Kn(e,u).next(v=>{if(!v)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,ht.min()),ef(e).delete([0,vi(u.path)])))});i.push(m)}}).next(()=>se.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return sT(e,t)}Un(e,t){const r=ef(e);let i,a=fs.ct;return r.Z({index:"documentTargetsIndex"},([u,f],{path:m,sequenceNumber:v})=>{0===u?(a!==fs.ct&&t(new We($o(i)),a),a=v,i=m):a=fs.ct}).next(()=>{a!==fs.ct&&t(new We($o(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sT(n,e){return ef(n).put((r=n.currentSequenceNumber,{targetId:0,path:vi(e.path),sequenceNumber:r}));var r}class OO{constructor(){this.changes=new Zh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,o.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return bg(e).put(r)}removeEntry(e,t,r){return bg(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],XD(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Gn(e,r)))}getEntry(e,t){let r=o.newInvalidDocument(t);return bg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(DE(t))},(i,a)=>{r=this.Qn(t,a)}).next(()=>r)}zn(e,t){let r={size:0,document:o.newInvalidDocument(t)};return bg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(DE(t))},(i,a)=>{r={document:this.Qn(t,a),size:rT(a)}}).next(()=>r)}getEntries(e,t){let r=uo();return this.jn(e,t,(i,a)=>{const u=this.Qn(i,a);r=r.insert(i,u)}).next(()=>r)}Wn(e,t){let r=uo(),i=new gr(We.comparator);return this.jn(e,t,(a,u)=>{const f=this.Qn(a,u);r=r.insert(a,f),i=i.insert(a,rT(u))}).next(()=>({documents:r,Hn:i}))}jn(e,t,r){if(t.isEmpty())return se.resolve();let i=new wn(VO);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(DE(i.first()),DE(i.last())),u=i.getIterator();let f=u.getNext();return bg(e).Z({index:"documentKeyIndex",range:a},(m,v,b)=>{const A=We.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&VO(f,A)<0;)r(f,null),f=u.getNext();f&&f.isEqual(A)&&(r(f,v),f=u.hasNext()?u.getNext():null),f?b.G(DE(f)):b.done()}).next(()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,u=[a.popLast().toArray(),a.lastSegment(),XD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bg(e).j(IDBKeyRange.bound(u,f,!0)).next(m=>{let v=uo();for(const b of m){const A=this.Qn(We.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);A.isFoundDocument()&&(cE(t,A)||i.has(A.key))&&(v=v.insert(A.key,A))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=uo();const u=UO(t,r),f=UO(t,hs.max());return bg(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,f,!0)},(m,v,b)=>{const A=this.Qn(We.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(A.key,A),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new iB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return LO(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}Gn(e,t){return LO(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const r=function zj(n,e){let t;if(e.document)t=uO(n.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=vg(e.noDocument.readTime);t=o.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=We.fromSegments(e.unknownDocument.path),i=vg(e.unknownDocument.version);t=o.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Jn(r[0],r[1]);return ht.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ht.min()))return r}return o.newInvalidDocument(e)}}function FO(n){return new rB(n)}class iB extends OO{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new Zh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new wn((a,u)=>Zt(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const f=this.Yn.get(a);if(t.push(this.Jn.removeEntry(e,a,f.readTime)),u.isValidDocument()){const m=mO(this.Jn.serializer,u);i=i.add(a.path.popLast());const v=rT(m);r+=v-f.size,t.push(this.Jn.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=mO(this.Jn.serializer,u.convertToNoDocument(ht.min()));t.push(this.Jn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Jn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(r=>(this.Yn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:r,Hn:i})=>(i.forEach((a,u)=>{this.Yn.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function LO(n){return er(n,"remoteDocumentGlobal")}function bg(n){return er(n,"remoteDocumentsV14")}function DE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function UO(n,e){const t=e.documentKey.path.toArray();return[n,XD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function VO(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Zt(t[a],r[a]),i)return i;return i=Zt(t.length,r.length),i||(i=Zt(t[t.length-2],r[r.length-2]),i||Zt(t[t.length-1],r[r.length-1]))}class sB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class jO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&pE(r.mutation,i,Fs.empty(),Jn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,nn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=nn()){const i=Ru();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let u=dE();return a.forEach((f,m)=>{u=u.insert(f,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Ru();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,nn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,r,i){let a=uo();const u=hE(),f=hE();return t.forEach((m,v)=>{const b=r.get(v.key);i.has(v.key)&&(void 0===b||b.mutation instanceof ld)?a=a.insert(v.key,v):void 0!==b?(u.set(v.key,b.mutation.getFieldMask()),pE(b.mutation,v,b.mutation.getFieldMask(),Jn.now())):u.set(v.key,Fs.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,b)=>u.set(v,b)),t.forEach((v,b)=>{var A;return f.set(v,new sB(b,null!==(A=u.get(v))&&void 0!==A?A:null))}),f))}recalculateAndSaveOverlays(e,t){const r=hE();let i=new gr((u,f)=>u-f),a=nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let b=r.get(m)||Fs.empty();b=f.applyToLocalView(v,b),r.set(m,b);const A=(i.get(f.batchId)||nn()).add(m);i=i.insert(f.batchId,A)})}).next(()=>{const u=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,b=m.value,A=Lk();b.forEach(x=>{if(!a.has(x)){const j=Gk(t.get(x),r.get(x));null!==j&&A.set(x,j),a=a.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(e,v,A))}return se.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return We.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):GM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):se.resolve(Ru());let f=-1,m=a;return u.next(v=>se.forEach(v,(b,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),a.get(b)?se.resolve():this.remoteDocumentCache.getEntry(e,b).next(x=>{m=m.insert(b,x)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,nn())).next(b=>({batchId:f,changes:Fk(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let i=dE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=dE();return this.indexManager.getCollectionParents(e,i).next(u=>se.forEach(u,f=>{const m=(v=t,b=f.child(i),new ad(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,b;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((b,A)=>{a=a.insert(b,A)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,m)=>{const v=m.getKey();null===a.get(v)&&(a=a.insert(v,o.newInvalidDocument(v)))});let u=dE();return a.forEach((f,m)=>{const v=i.get(f);void 0!==v&&pE(v.mutation,m,Fs.empty(),Jn.now()),cE(t,m)&&(u=u.insert(f,m))}),u})}}class oB{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:ni(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:sR(r.bundledQuery),readTime:ni(r.readTime)}),se.resolve();var r}}class aB{constructor(){this.overlays=new gr(We.comparator),this.ts=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ru();return se.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.re(e,t,a)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ts.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ts.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const i=Ru(),a=t.length+1,u=new We(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new gr((v,b)=>v-b);const u=this.overlays.getIterator();for(;u.hasNext();){const v=u.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let b=a.get(v.largestBatchId);null===b&&(b=Ru(),a=a.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const f=Ru(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,b)=>f.set(v,b)),!(f.size()>=i)););return se.resolve(f)}re(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ts.get(i.largestBatchId).delete(r.key);this.ts.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new XM(t,r));let a=this.ts.get(t);void 0===a&&(a=nn(),this.ts.set(t,a)),this.ts.set(t,a.add(r.key))}}class hR{constructor(){this.es=new wn(Ui.ns),this.ss=new wn(Ui.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const r=new Ui(e,t);this.es=this.es.add(r),this.ss=this.ss.add(r)}os(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.us(new Ui(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}hs(e){const t=new We(new dn([])),r=new Ui(t,e),i=new Ui(t,e+1),a=[];return this.ss.forEachInRange([r,i],u=>{this.us(u),a.push(u.key)}),a}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new We(new dn([])),r=new Ui(t,e),i=new Ui(t,e+1);let a=nn();return this.ss.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Ui(e,0),r=this.es.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ui{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return We.comparator(e.key,t.key)||Zt(e.ds,t.ds)}static rs(e,t){return Zt(e.ds,t.ds)||We.comparator(e.key,t.key)}}class lB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new wn(Ui.ns)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const u=new QM(a,t,r,i);this.mutationQueue.push(u);for(const f of i)this._s=this._s.add(new Ui(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ys(t+1),a=i<0?0:i;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ui(t,0),i=new Ui(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],u=>{const f=this.gs(u.ds);a.push(f)}),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Zt);return t.forEach(i=>{const a=new Ui(i,0),u=new Ui(i,Number.POSITIVE_INFINITY);this._s.forEachInRange([a,u],f=>{r=r.add(f.ds)})}),se.resolve(this.ps(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const u=new Ui(new We(a),0);let f=new wn(Zt);return this._s.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m.ds)),!0)},u),se.resolve(this.ps(f))}ps(e){const t=[];return e.forEach(r=>{const i=this.gs(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let r=this._s;return se.forEach(t.mutations,i=>{const a=new Ui(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this._s=r})}En(e){}containsKey(e,t){const r=new Ui(t,0),i=this._s.firstAfterOrEqual(r);return se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return se.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class uB{constructor(e){this.Ts=e,this.docs=new gr(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():o.newInvalidDocument(t))}getEntries(e,t){let r=uo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():o.newInvalidDocument(i))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=uo();const u=t.path,f=new We(u.child("")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:b}}=m.getNext();if(!u.isPrefixOf(v.path))break;v.path.length>u.length+1||KI(qI(b),r)<=0||(i.has(b.key)||cE(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,r,i){dt()}Es(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cB(this)}getSize(e){return se.resolve(this.size)}}class cB extends OO{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Jn.addEntry(e,i)):this.Jn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class dB{constructor(e){this.persistence=e,this.As=new Zh(t=>pg(t),lE),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.Rs=0,this.vs=new hR,this.targetCount=0,this.bs=Cg.vn()}forEachTarget(e,t){return this.As.forEach((r,i)=>t(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Rs&&(this.Rs=t),se.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new Cg(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Sn(t),se.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.As.forEach((u,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.As.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),se.waitFor(a).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.As.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.vs.os(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.vs.cs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.vs.fs(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.vs.containsKey(t))}}class BO{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new fs(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new dB(this),this.indexManager=new Qj,this.remoteDocumentCache=new uB(r=>this.referenceDelegate.Cs(r)),this.serializer=new gO(t),this.xs=new oB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ps[e.toKey()];return r||(r=new lB(t,this.referenceDelegate),this.Ps[e.toKey()]=r),r}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new hB(this.Vs.next());return this.referenceDelegate.Ns(),r(i).next(a=>this.referenceDelegate.ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Os(e,t){return se.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class hB extends QI{constructor(e){super(),this.currentSequenceNumber=e}}class oT{constructor(e){this.persistence=e,this.$s=new hR,this.Ms=null}static Fs(e){return new oT(e)}get Bs(){if(this.Ms)return this.Ms;throw dt()}addReference(e,t,r){return this.$s.addReference(r,t),this.Bs.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.$s.removeReference(r,t),this.Bs.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),se.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(i=>this.Bs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Bs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Bs,r=>{const i=We.fromPath(r);return this.Ls(e,i).next(a=>{a||t.removeEntry(i,ht.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(r=>{r?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return se.or([()=>se.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class fB{constructor(e){this.serializer=e}M(e,t,r,i){const a=new zh("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tE,{unique:!0}),f.createObjectStore("documentMutations"),zO(e),function(f){f.createObjectStore("remoteDocuments")}(e));let u=se.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),zO(e)),u=u.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ht.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(f,m){return m.store("mutations").j().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tE,{unique:!0});const b=m.store("mutations"),A=v.map(x=>b.put(x));return se.waitFor(A)})}(e,a))),u=u.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.qs(a))),r<6&&i>=6&&(u=u.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Us(a)))),r<7&&i>=7&&(u=u.next(()=>this.Ks(a))),r<8&&i>=8&&(u=u.next(()=>this.Gs(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.Qs(a))),r<11&&i>=11&&(u=u.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:LM});m.createIndex("collectionPathOverlayIndex",Tk,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",UM,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:TD});m.createIndex("documentKeyIndex",xM),m.createIndex("collectionGroupIndex",NM)}(e)).next(()=>this.zs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.js(e,a))),r<15&&i>=15&&(u=u.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:AD}).createIndex("sequenceNumberIndex",MD,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:FM}).createIndex("documentKeyIndex",RD,{unique:!1})}(e))),u}Us(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=rT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>se.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",u).next(f=>se.forEach(f,m=>{Ct(m.userId===a.userId);const v=wg(this.serializer,m);return RO(e,a.userId,v).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((u,f)=>{const m=new dn(u),v=[0,vi(m)];a.push(t.get(v).next(b=>b?se.resolve():t.put({targetId:0,path:vi(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>se.waitFor(a))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:SD});const r=t.store("collectionParents"),i=new dR,a=u=>{if(i.add(u)){const f=u.lastSegment(),m=u.popLast();return r.put({collectionId:f,parent:vi(m)})}};return t.store("remoteDocuments").Z({Y:!0},(u,f)=>{const m=new dn(u);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([u,f,m],v)=>{const b=$o(f);return a(b.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((r,i)=>{const a=wE(i),u=_O(this.serializer,a);return t.put(u)})}zs(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,u)=>{const f=t.store("remoteDocumentsV14"),m=(v=u,v.document?new We(dn.fromString(v.document.name).popFirst(5)):v.noDocument?We.fromSegments(v.noDocument.path):v.unknownDocument?We.fromSegments(v.unknownDocument.path):dt()).path.toArray();var v;const b={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(f.put(b))}).next(()=>se.waitFor(i))}js(e,t){const r=t.store("mutations"),i=FO(this.serializer),a=new BO(oT.Fs,this.serializer.se);return r.j().next(u=>{const f=new Map;return u.forEach(m=>{var v;let b=null!==(v=f.get(m.userId))&&void 0!==v?v:nn();wg(this.serializer,m).keys().forEach(A=>b=b.add(A)),f.set(m.userId,b)}),se.forEach(f,(m,v)=>{const b=new yi(v),A=JD.ie(this.serializer,b),x=a.getIndexManager(b),j=iT.ie(b,this.serializer,x,a.referenceDelegate);return new jO(i,j,A,x).recalculateAndSaveOverlaysForDocumentKeys(new py(t,fs.ct),m).next()})})}}function zO(n){n.createObjectStore("targetDocuments",{keyPath:kM}).createIndex("documentTargetsIndex",OM,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PM,{unique:!0}),n.createObjectStore("targetGlobal")}const fR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pR{constructor(e,t,r,i,a,u,f,m,v,b,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ws=a,this.window=u,this.document=f,this.Hs=v,this.Js=b,this.Ys=A,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=x=>Promise.resolve(),!pR.D())throw new xe(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nB(this,i),this.si=t+"main",this.serializer=new gO(m),this.ii=new Os(this.si,this.Ys,new fB(this.serializer)),this.Ds=new Xj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=FO(this.serializer),this.xs=new $j,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===b&&pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ge.FAILED_PRECONDITION,fR);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new fs(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var r=(0,he.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,he.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>aT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(id(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return TE(e).get("owner").next(t=>se.resolve(this._i(t)))}mi(e){return aT(e).delete(this.clientId)}gi(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=er(r,"clientMetadata");return i.j().next(a=>{const u=e.pi(a,18e5),f=a.filter(m=>-1===u.indexOf(m));return se.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ri)for(const r of t)e.ri.removeItem(e.Ii(r.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?se.resolve(!0):TE(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new xe(ge.FAILED_PRECONDITION,fR);return!1}}return!(!this.networkEnabled||!this.inForeground)||aT(e).j().next(r=>void 0===this.pi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new py(t,fs.ct);return e.di(r).next(()=>e.mi(r))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(r=>this.yi(r.updateTimeMs,t)&&!this.Ti(r.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>aT(e).j().next(t=>this.pi(t,18e5).map(r=>r.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return iT.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Yj(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return JD.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(u=this.Ys)?VM:14===u?ND:13===u?Gh:12===u?nE:11===u?xD:void dt();var u;let f;return this.ii.runTransaction(e,i,a,m=>(f=new py(m,this.Vs?this.Vs.next():fs.ct),"readwrite-primary"===t?this.li(f).next(v=>!!v||this.fi(f)).next(v=>{if(!v)throw pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new xe(ge.FAILED_PRECONDITION,ZI);return r(f)}).next(v=>this.wi(f).next(()=>v)):this.Pi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Pi(e){return TE(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ge.FAILED_PRECONDITION,fR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return TE(e).put("owner",t)}static D(){return Os.D()}di(e){const t=TE(e);return t.get("owner").next(r=>this._i(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}yi(e,t){const r=Date.now();return!(e<r-t||e>r&&(pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,U.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const r=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){pr("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function TE(n){return er(n,"owner")}function aT(n){return er(n,"clientMetadata")}function gR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class mR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Vi=r,this.Si=i}static Di(e,t){let r=nn(),i=nn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new mR(e,t.fromCache,r,i)}}class $O{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ni(e,t).next(a=>a||this.ki(e,t,i,r)).next(a=>a||this.Oi(e,t))}Ni(e,t){if(xk(t))return se.resolve(null);let r=Ls(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=WD(t,null,"F"),r=Ls(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=nn(...a);return this.xi.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.$i(t,f);return this.Mi(t,v,u,m.readTime)?this.Ni(e,WD(t,null,"F")):this.Fi(e,v,t,m)}))})))}ki(e,t,r,i){return xk(t)||i.isEqual(ht.min())?this.Oi(e,t):this.xi.getDocuments(e,r).next(a=>{const u=this.$i(t,a);return this.Mi(t,u,r,i)?this.Oi(e,t):($I()<=Ns.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),KM(t)),this.Fi(e,u,t,GI(i,-1)))})}$i(e,t){let r=new wn(kk(e));return t.forEach((i,a)=>{cE(e,a)&&(r=r.add(a))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Oi(e,t){return $I()<=Ns.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",KM(t)),this.xi.getDocumentsMatchingQuery(e,t,hs.min())}Fi(e,t,r,i){return this.xi.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}class pB{constructor(e,t,r,i){this.persistence=e,this.Bi=t,this.serializer=i,this.Li=new gr(Zt),this.qi=new Zh(a=>pg(a),lE),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(r)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jO(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function HO(n,e,t,r){return new pB(n,e,t,r)}function WO(n,e){return _R.apply(this,arguments)}function _R(){return _R=(0,he.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Gi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],f=[];let m=nn();for(const v of i){u.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}for(const v of a){f.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}return t.localDocuments.getDocuments(r,m).next(v=>({Qi:v,removedBatchIds:u,addedBatchIds:f}))})})}),_R.apply(this,arguments)}function GO(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function qO(n,e,t){let r=nn(),i=nn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=uo();return t.forEach((f,m)=>{const v=a.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(ht.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):Le("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{zi:u,ji:i}})}function _B(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sy(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ds.getTargetData(r,e).next(a=>a?(i=a,se.resolve(i)):t.Ds.allocateTargetId(r).next(u=>(i=new Yh(e,u,0,r.currentSequenceNumber),t.Ds.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Li.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Li=t.Li.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Ay(n,e,t){return yR.apply(this,arguments)}function yR(){return yR=(0,he.Z)(function*(n,e,t){const r=Qe(n),i=r.Li.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!id(u))throw u;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Li=r.Li.remove(e),r.qi.delete(i.target)}),yR.apply(this,arguments)}function lT(n,e,t){const r=Qe(n);let i=ht.min(),a=nn();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,m,v){const b=Qe(f),A=b.qi.get(v);return void 0!==A?se.resolve(b.Li.get(A)):b.Ds.getTargetData(m,v)}(r,u,Ls(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(u,f.targetId).next(m=>{a=m})}).next(()=>r.Bi.getDocumentsMatchingQuery(u,e,t?i:ht.min(),t?a:nn())).next(f=>(QO(r,Pk(e),f),{documents:f,Wi:a})))}function KO(n,e){const t=Qe(n),r=Qe(t.Ds),i=t.Li.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ne(a,e).next(u=>u?u.target:null))}function ZO(n,e){const t=Qe(n),r=t.Ui.get(e)||ht.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ki.getAllFromCollectionGroup(i,e,GI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(QO(t,e,i),i))}function QO(n,e,t){let r=n.Ui.get(e)||ht.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ui.set(e,r)}function vR(){return vR=(0,he.Z)(function*(n,e,t,r){const i=Qe(n);let a=nn(),u=uo();for(const v of t){const b=e.Hi(v.metadata.name);v.document&&(a=a.add(b));const A=e.Ji(v);A.setReadTime(e.Yi(v.metadata.readTime)),u=u.insert(b,A)}const f=i.Ki.newChangeBuffer({trackRemovals:!0}),m=yield Sy(i,(v=r,Ls(yy(dn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>qO(v,f,u).next(b=>(f.apply(v),b)).next(b=>i.Ds.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Ds.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,b.zi,b.ji)).next(()=>b.zi)))}),vR.apply(this,arguments)}function vB(n,e){return wR.apply(this,arguments)}function wR(){return wR=(0,he.Z)(function*(n,e,t=nn()){const r=yield Sy(n,Ls(sR(e.bundledQuery))),i=Qe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=ni(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.xs.saveNamedQuery(a,e);const f=r.withResumeToken(ti.EMPTY_BYTE_STRING,u);return i.Li=i.Li.insert(f.targetId,f),i.Ds.updateTargetData(a,f).next(()=>i.Ds.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Ds.addMatchingKeys(a,t,r.targetId)).next(()=>i.xs.saveNamedQuery(a,e))})}),wR.apply(this,arguments)}function YO(n,e){return`firestore_clients_${n}_${e}`}function XO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function IR(n,e){return`firestore_targets_${n}_${e}`}class uT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new xe(i.error.code,i.error.message))),u?new uT(e,t,i.state,a):(pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class SE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new xe(r.error.code,r.error.message))),a?new SE(e,r.state,i):(pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=GD();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=DD(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new cT(e,a):(pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ER{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ER(t.clientId,t.onlineState):(pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class CR{constructor(){this.activeTargetIds=GD()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bR{constructor(e,t,r,i,a){this.window=e,this.Ws=t,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new gr(Zt),this.started=!1,this.ur=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.cr=YO(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new CR),this.hr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.bi();for(const i of t){if(i===e.nr)continue;const a=e.getItem(YO(e.persistenceKey,i));if(a){const u=cT.Zi(i,a);u&&(e.rr=e.rr.insert(u.clientId,u))}}e.mr();const r=e.storage.getItem(e.wr);if(r){const i=e.gr(r);i&&e.yr(i)}for(const i of e.ur)e.ir(i);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,r){this.Ir(e,t,r),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(IR(this.persistenceKey,e));if(r){const i=SE.Zi(e,r);i&&(t=i.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(IR(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ar(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Tr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.cr)return void pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==r.key)if(t.hr.test(r.key)){if(null==r.newValue){const i=t.br(r.key);return t.Pr(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.Pr(i.clientId,i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.gr(r.newValue);if(i)return t.yr(i)}}else if(r.key===t.ar){const i=function(a){let u=fs.ct;if(null!=a)try{const f=JSON.parse(a);Ct("number"==typeof f),u=f}catch(f){pr("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(r.newValue);i!==fs.ct&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.kr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Or(a)))}}else t.ur.push(r)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,r){const i=new uT(this.currentUser,e,t,r),a=XO(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Xi())}Tr(e){const t=XO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,r){const i=IR(this.persistenceKey,e),a=new SE(e,t,r);this.setItem(i,a.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.br(e);return cT.Zi(r,t)}Sr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return uT.Zi(new yi(void 0!==r[2]?r[2]:null),i,t)}Cr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return SE.Zi(i,t)}gr(e){return ER.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),a=this.pr(r),u=[],f=[];return a.forEach(m=>{i.has(m)||u.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Fr(u,f).then(()=>{this.rr=r})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=GD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class JO{constructor(){this.Br=new CR,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,r){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new CR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wB{qr(e){}shutdown(){}}class e1{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let dT=null;function DR(){return null===dT?dT=268435456+Math.round(2147483648*Math.random()):dT++,"0x"+dT.toString(16)}const IB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EB{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const ps="WebChannelConnection";class CB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,r,i,a){const u=DR(),f=this.ao(e,t);Le("RestConnection",`Sending RPC '${e}' ${u}:`,f,r);const m={};return this.ho(m,i,a),this.lo(e,f,m,r).then(v=>(Le("RestConnection",`Received RPC '${e}' ${u}: `,v),v),v=>{throw ks("RestConnection",`RPC '${e}' ${u} failed with error: `,v,"url: ",f,"request:",r),v})}fo(e,t,r,i,a,u){return this.co(e,t,r,i,a)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ao(e,t){return`${this.ro}/v1/${t}:${IB[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){const a=DR();return new Promise((u,f)=>{const m=new CM;m.setWithCredentials(!0),m.listenOnce(EM.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case BI.NO_ERROR:const b=m.getResponseJson();Le(ps,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),u(b);break;case BI.TIMEOUT:Le(ps,`RPC '${e}' ${a} timed out`),f(new xe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case BI.HTTP_ERROR:const A=m.getStatus();if(Le(ps,`RPC '${e}' ${a} failed with status:`,A,"response text:",m.getResponseText()),A>0){let x=m.getResponseJson();Array.isArray(x)&&(x=x[0]);const j=x?.error;if(j&&j.status&&j.message){const W=function(ce){const _e=ce.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(_e)>=0?_e:ge.UNKNOWN}(j.status);f(new xe(W,j.message))}else f(new xe(ge.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new xe(ge.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Le(ps,`RPC '${e}' ${a} completed.`)}});const v=JSON.stringify(i);Le(ps,`RPC '${e}' ${a} sending request:`,i),m.send(t,"POST",v,r,15)})}wo(e,t,r){const i=DR(),a=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=hD(),f=fD(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new gD({})),this.ho(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=a.join("");Le(ps,`Creating RPC '${e}' stream ${i}: ${v}`,m);const b=u.createWebChannel(v,m);let A=!1,x=!1;const j=new EB({Wr:ce=>{x?Le(ps,`Not sending because RPC '${e}' stream ${i} is closed:`,ce):(A||(Le(ps,`Opening RPC '${e}' stream ${i} transport.`),b.open(),A=!0),Le(ps,`RPC '${e}' stream ${i} sending:`,ce),b.send(ce))},Hr:()=>b.close()}),W=(ce,_e,Ge)=>{ce.listen(_e,ft=>{try{Ge(ft)}catch(Je){setTimeout(()=>{throw Je},0)}})};return W(b,ly.EventType.OPEN,()=>{x||Le(ps,`RPC '${e}' stream ${i} transport opened.`)}),W(b,ly.EventType.CLOSE,()=>{x||(x=!0,Le(ps,`RPC '${e}' stream ${i} transport closed`),j.so())}),W(b,ly.EventType.ERROR,ce=>{x||(x=!0,ks(ps,`RPC '${e}' stream ${i} transport errored:`,ce),j.so(new xe(ge.UNAVAILABLE,"The operation could not be completed")))}),W(b,ly.EventType.MESSAGE,ce=>{var _e;if(!x){const Ge=ce.data[0];Ct(!!Ge);const Je=Ge.error||(null===(_e=Ge[0])||void 0===_e?void 0:_e.error);if(Je){Le(ps,`RPC '${e}' stream ${i} received error:`,Je);const gt=Je.status;let Yt=function(Ri){const go=Ii[Ri];if(void 0!==go)return Xk(go)}(gt),on=Je.message;void 0===Yt&&(Yt=ge.INTERNAL,on="Unknown error status: "+gt+" with message "+Je.message),x=!0,j.so(new xe(Yt,on)),b.close()}else Le(ps,`RPC '${e}' stream ${i} received:`,Ge),j.io(Ge)}}),W(f,pD.STAT_EVENT,ce=>{ce.stat===zI.PROXY?Le(ps,`RPC '${e}' stream ${i} detected buffering proxy`):ce.stat===zI.NOPROXY&&Le(ps,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{j.no()},0),j}}function t1(){return typeof window<"u"?window:null}function hT(){return typeof document<"u"?document:null}function AE(n){return new Nj(n,!0)}class TR{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Ws=e,this.timerId=t,this._o=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class n1{constructor(e,t,r,i,a,u,f,m){this.Ws=e,this.bo=r,this.Po=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new TR(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,he.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,he.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var r=this;return(0,he.Z)(function*(){r.Bo(),r.Lo(),r.Co.cancel(),r.Vo++,4!==e?r.Co.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),r.Co.Eo()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.Ko(r,i)},r=>{e(()=>{const i=new xe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Go(i)})})}Ko(e,t){const r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{r(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(i=>{r(()=>this.Go(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}ko(){var e=this;this.state=5,this.Co.Ao((0,he.Z)(function*(){e.state=0,e.start()}))}Go(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bB extends n1{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function Oj(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:dt(),i=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(Ct(void 0===v||"string"==typeof v),ti.fromBase64String(v||"")):(Ct(void 0===v||v instanceof Uint8Array),ti.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(m){const v=void 0===m.code?ge.UNKNOWN:Xk(m.code);return new xe(v,m.message||"")}(u);t=new eO(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=xu(n,r.document.name),a=ni(r.document.updateTime),u=r.document.createTime?ni(r.document.createTime):ht.min(),f=new wi({mapValue:{fields:r.document.fields}}),m=o.newFoundDocument(i,a,u,f);t=new YD(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=xu(n,r.document),a=r.readTime?ni(r.readTime):ht.min(),u=o.newNoDocument(i,a);t=new YD([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=xu(n,r.document);t=new YD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,a=new Sj(r.count||0);t=new Jk(r.targetId,a)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return ht.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ht.min():a.readTime?ni(a.readTime):ht.min()}(e);return this.listener.zo(t,r)}jo(e){const t={};t.database=yE(this.serializer),t.addTarget=function(i,a){let u;const f=a.target;return u=zD(f)?{documents:cO(i,f)}:{query:iR(i,f)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=iO(i,a.resumeToken):a.snapshotVersion.compareTo(ht.min())>0&&(u.readTime=Cy(i,a.snapshotVersion.toTimestamp())),u}(this.serializer,e);const r=function Lj(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=yE(this.serializer),t.removeTarget=e,this.Fo(t)}}class DB extends n1{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function Fj(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let a=ni(r.updateTime?r.updateTime:i);return a.isEqual(ht.min())&&(a=ni(i)),new Ej(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ni(e.commitTime);return this.listener.Zo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=yE(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vE(this.serializer,r))};this.Fo(t)}}class TB extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.eu=!1}nu(){if(this.eu)throw new xe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(ge.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.fo(e,t,r,a,u,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new xe(ge.UNKNOWN,a.toString())})}terminate(){this.eu=!0}}class AB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(pr(t),this.ru=!1):Le("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class MB{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=a,this._u.qr(f=>{r.enqueueAndForget((0,he.Z)(function*(){var m;ud(u)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,he.Z)(function*(v){const b=Qe(v);b.du.add(4),yield My(b),b.mu.set("Unknown"),b.du.delete(4),yield ME(b)}),function(v){return m.apply(this,arguments)})(u))}))}),this.mu=new AB(r,i)}}function ME(n){return AR.apply(this,arguments)}function AR(){return AR=(0,he.Z)(function*(n){if(ud(n))for(const e of n.wu)yield e(!0)}),AR.apply(this,arguments)}function My(n){return MR.apply(this,arguments)}function MR(){return MR=(0,he.Z)(function*(n){for(const e of n.wu)yield e(!1)}),MR.apply(this,arguments)}function fT(n,e){const t=Qe(n);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),NR(t)?xR(t):xy(t).No()&&RR(t,e))}function RE(n,e){const t=Qe(n),r=xy(t);t.fu.delete(e),r.No()&&r1(t,e),0===t.fu.size&&(r.No()?r.$o():ud(t)&&t.mu.set("Unknown"))}function RR(n,e){n.gu.Ot(e.targetId),xy(n).jo(e)}function r1(n,e){n.gu.Ot(e),xy(n).Wo(e)}function xR(n){n.gu=new Aj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.fu.get(e)||null}),xy(n).start(),n.mu.ou()}function NR(n){return ud(n)&&!xy(n).xo()&&n.fu.size>0}function ud(n){return 0===Qe(n).du.size}function i1(n){n.gu=void 0}function RB(n){return PR.apply(this,arguments)}function PR(){return PR=(0,he.Z)(function*(n){n.fu.forEach((e,t)=>{RR(n,e)})}),PR.apply(this,arguments)}function xB(n,e){return kR.apply(this,arguments)}function kR(){return kR=(0,he.Z)(function*(n,e){i1(n),NR(n)?(n.mu.au(e),xR(n)):n.mu.set("Unknown")}),kR.apply(this,arguments)}function NB(n,e,t){return OR.apply(this,arguments)}function OR(){return OR=(0,he.Z)(function*(n,e,t){if(n.mu.set("Online"),e instanceof eO&&2===e.state&&e.cause)try{yield(r=(0,he.Z)(function*(i,a){const u=a.cause;for(const f of a.targetIds)i.fu.has(f)&&(yield i.remoteSyncer.rejectListen(f,u),i.fu.delete(f),i.gu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pT(n,r)}else if(e instanceof YD?n.gu.Kt(e):e instanceof Jk?n.gu.Jt(e):n.gu.zt(e),!t.isEqual(ht.min()))try{const r=yield GO(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.gu.Xt(a);return u.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.fu.get(m);v&&i.fu.set(m,v.withResumeToken(f.resumeToken,a))}}),u.targetMismatches.forEach(f=>{const m=i.fu.get(f);if(!m)return;i.fu.set(f,m.withResumeToken(ti.EMPTY_BYTE_STRING,m.snapshotVersion)),r1(i,f);const v=new Yh(m.target,f,1,m.sequenceNumber);RR(i,v)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield pT(n,r)}var r}),OR.apply(this,arguments)}function pT(n,e,t){return FR.apply(this,arguments)}function FR(){return FR=(0,he.Z)(function*(n,e,t){if(!id(e))throw e;n.du.add(1),yield My(n),n.mu.set("Offline"),t||(t=()=>GO(n.localStore)),n.asyncQueue.enqueueRetryable((0,he.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.du.delete(1),yield ME(n)}))}),FR.apply(this,arguments)}function s1(n,e){return e().catch(t=>pT(n,t,e))}function Ry(n){return LR.apply(this,arguments)}function LR(){return LR=(0,he.Z)(function*(n){const e=Qe(n),t=tf(e);let r=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;PB(e);)try{const i=yield _B(e.localStore,r);if(null===i){0===e.lu.length&&t.$o();break}r=i.batchId,kB(e,i)}catch(i){yield pT(e,i)}o1(e)&&a1(e)}),LR.apply(this,arguments)}function PB(n){return ud(n)&&n.lu.length<10}function kB(n,e){n.lu.push(e);const t=tf(n);t.No()&&t.Jo&&t.Yo(e.mutations)}function o1(n){return ud(n)&&!tf(n).xo()&&n.lu.length>0}function a1(n){tf(n).start()}function OB(n){return UR.apply(this,arguments)}function UR(){return UR=(0,he.Z)(function*(n){tf(n).tu()}),UR.apply(this,arguments)}function FB(n){return VR.apply(this,arguments)}function VR(){return VR=(0,he.Z)(function*(n){const e=tf(n);for(const t of n.lu)e.Yo(t.mutations)}),VR.apply(this,arguments)}function LB(n,e,t){return jR.apply(this,arguments)}function jR(){return jR=(0,he.Z)(function*(n,e,t){const r=n.lu.shift(),i=YM.from(r,e,t);yield s1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ry(n)}),jR.apply(this,arguments)}function UB(n,e){return BR.apply(this,arguments)}function BR(){return BR=(0,he.Z)(function*(n,e){var t;e&&tf(n).Jo&&(yield(t=(0,he.Z)(function*(r,i){if(Yk(a=i.code)&&a!==ge.ABORTED){const u=r.lu.shift();tf(r).Oo(),yield s1(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Ry(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),o1(n)&&a1(n)}),BR.apply(this,arguments)}function l1(n,e){return zR.apply(this,arguments)}function zR(){return zR=(0,he.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=ud(t);t.du.add(3),yield My(t),r&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield ME(t)}),zR.apply(this,arguments)}function $R(n,e){return HR.apply(this,arguments)}function HR(){return HR=(0,he.Z)(function*(n,e){const t=Qe(n);e?(t.du.delete(2),yield ME(t)):e||(t.du.add(2),yield My(t),t.mu.set("Unknown"))}),HR.apply(this,arguments)}function xy(n){return n.yu||(n.yu=function(e,t,r){const i=Qe(e);return i.nu(),new bB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:RB.bind(null,n),Zr:xB.bind(null,n),zo:NB.bind(null,n)}),n.wu.push(function(){var e=(0,he.Z)(function*(t){t?(n.yu.Oo(),NR(n)?xR(n):n.mu.set("Unknown")):(yield n.yu.stop(),i1(n))});return function(t){return e.apply(this,arguments)}}())),n.yu}function tf(n){return n.pu||(n.pu=function(e,t,r){const i=Qe(e);return i.nu(),new DB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:OB.bind(null,n),Zr:UB.bind(null,n),Xo:FB.bind(null,n),Zo:LB.bind(null,n)}),n.wu.push(function(){var e=(0,he.Z)(function*(t){t?(n.pu.Oo(),yield Ry(n)):(yield n.pu.stop(),n.lu.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.lu.length} pending writes`),n.lu=[]))});return function(t){return e.apply(this,arguments)}}())),n.pu}class WR{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,f=new WR(e,t,u,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ny(n,e){if(pr("AsyncQueue",`${e}: ${n}`),id(n))return new xe(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Py{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=dE(),this.sortedSet=new gr(this.comparator)}static emptySet(e){return new Py(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Py)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Py;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class u1{constructor(){this.Iu=new gr(We.comparator)}track(e){const t=e.doc.key,r=this.Iu.get(t);r?0!==e.type&&3===r.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==r.type?this.Iu=this.Iu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Iu=this.Iu.remove(t):1===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):dt():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ky{constructor(e,t,r,i,a,u,f,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new ky(e,t,Py.emptySet(t),u,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class VB{constructor(){this.Eu=void 0,this.listeners=[]}}class jB{constructor(){this.queries=new Zh(e=>Nk(e),uE),this.onlineState="Unknown",this.Au=new Set}}function GR(n,e){return qR.apply(this,arguments)}function qR(){return qR=(0,he.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new VB),i)try{a.Eu=yield t.onListen(r)}catch(u){const f=Ny(u,`Initialization of query '${KM(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Ru(t.onlineState),a.Eu&&e.vu(a.Eu)&&QR(t)}),qR.apply(this,arguments)}function KR(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,he.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),ZR.apply(this,arguments)}function BB(n,e){const t=Qe(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const f of u.listeners)f.vu(i)&&(r=!0);u.Eu=i}}r&&QR(t)}function zB(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function QR(n){n.Au.forEach(e=>{e.next()})}class YR{constructor(e,t,r){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ky(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=ky.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class $B{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class c1{constructor(e){this.serializer=e}Hi(e){return xu(this.serializer,e)}Ji(e){return e.metadata.exists?uO(this.serializer,e.document,!1):o.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return ni(e)}}class HB{constructor(e,t,r){this.Ou=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=d1(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const r=dn.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new c1(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.Hi(i.metadata.name);for(const u of i.metadata.queries){const f=(t.get(u)||nn()).add(a);t.set(u,f)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function yB(n,e,t,r){return vR.apply(this,arguments)}(e.localStore,new c1(e.serializer),e.documents,e.Ou.id),r=e.Mu(e.documents);for(const i of e.queries)yield vB(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function d1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class h1{constructor(e){this.key=e}}class f1{constructor(e){this.key=e}}class p1{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=nn(),this.mutatedKeys=nn(),this.Ku=kk(e),this.Gu=new Py(this.Ku)}get Qu(){return this.Lu}zu(e,t){const r=t?t.ju:new u1,i=t?t.Gu:this.Gu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,A)=>{const x=i.get(b),j=cE(this.query,A)?A:null,W=!!x&&this.mutatedKeys.has(x.key),ce=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let _e=!1;x&&j?x.data.isEqual(j.data)?W!==ce&&(r.track({type:3,doc:j}),_e=!0):this.Wu(x,j)||(r.track({type:2,doc:j}),_e=!0,(m&&this.Ku(j,m)>0||v&&this.Ku(j,v)<0)&&(f=!0)):!x&&j?(r.track({type:0,doc:j}),_e=!0):x&&!j&&(r.track({type:1,doc:x}),_e=!0,(m||v)&&(f=!0)),_e&&(j?(u=u.add(j),a=ce?a.add(b):a.delete(b)):(u=u.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const b="F"===this.query.limitType?u.last():u.first();u=u.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{Gu:u,ju:r,Mi:f,mutatedKeys:a}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const a=e.ju.Tu();a.sort((v,b)=>function(A,x){const j=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return j(A)-j(x)}(v.type,b.type)||this.Ku(v.doc,b.doc)),this.Hu(r);const u=t?this.Ju():[],f=0===this.Uu.size&&this.current?1:0,m=f!==this.qu;return this.qu=f,0!==a.length||m?{snapshot:new ky(this.query,e.Gu,i,a,e.mutatedKeys,0===f,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Yu:u}:{Yu:u}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new u1,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=nn(),this.Gu.forEach(r=>{this.Zu(r.key)&&(this.Uu=this.Uu.add(r.key))});const t=[];return e.forEach(r=>{this.Uu.has(r)||t.push(new f1(r))}),this.Uu.forEach(r=>{e.has(r)||t.push(new h1(r))}),t}Xu(e){this.Lu=e.Wi,this.Uu=nn();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return ky.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class WB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class GB{constructor(e){this.key=e,this.ec=!1}}class qB{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.nc={},this.sc=new Zh(f=>Nk(f),uE),this.ic=new Map,this.rc=new Set,this.oc=new gr(We.comparator),this.uc=new Map,this.cc=new hR,this.ac={},this.hc=new Map,this.lc=Cg.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function KB(n,e){return XR.apply(this,arguments)}function XR(){return XR=(0,he.Z)(function*(n,e){const t=Ix(n);let r,i;const a=t.sc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.tc();else{const u=yield Sy(t.localStore,Ls(e));t.isPrimaryClient&&fT(t.remoteStore,u);const f=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield JR(t,e,r,"current"===f,u.resumeToken)}return i}),XR.apply(this,arguments)}function JR(n,e,t,r,i){return ex.apply(this,arguments)}function ex(){return ex=(0,he.Z)(function*(n,e,t,r,i){n.dc=(A,x,j)=>{return(W=(0,he.Z)(function*(ce,_e,Ge,ft){let Je=_e.view.zu(Ge);Je.Mi&&(Je=yield lT(ce.localStore,_e.query,!1).then(({documents:on})=>_e.view.zu(on,Je)));const gt=ft&&ft.targetChanges.get(_e.targetId),Yt=_e.view.applyChanges(Je,ce.isPrimaryClient,gt);return cx(ce,_e.targetId,Yt.Yu),Yt.snapshot}),function(ce,_e,Ge,ft){return W.apply(this,arguments)})(n,A,x,j);var W};const a=yield lT(n.localStore,e,!0),u=new p1(e,a.Wi),f=u.zu(a.documents),m=mE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=u.applyChanges(f,n.isPrimaryClient,m);cx(n,t,v.Yu);const b=new WB(e,t,u);return n.sc.set(e,b),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),v.snapshot}),ex.apply(this,arguments)}function ZB(n,e){return tx.apply(this,arguments)}function tx(){return tx=(0,he.Z)(function*(n,e){const t=Qe(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(a=>!uE(a,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ay(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),RE(t.remoteStore,r.targetId),Oy(t,r.targetId)}).catch(ma))):(Oy(t,r.targetId),yield Ay(t.localStore,r.targetId,!0))}),tx.apply(this,arguments)}function nx(){return nx=(0,he.Z)(function*(n,e,t){const r=Ex(n);try{const i=yield function(a,u){const f=Qe(a),m=Jn.now(),v=u.reduce((x,j)=>x.add(j.key),nn());let b,A;return f.persistence.runTransaction("Locally write mutations","readwrite",x=>{let j=uo(),W=nn();return f.Ki.getEntries(x,v).next(ce=>{j=ce,j.forEach((_e,Ge)=>{Ge.isValidDocument()||(W=W.add(_e))})}).next(()=>f.localDocuments.getOverlayedDocuments(x,j)).next(ce=>{b=ce;const _e=[];for(const Ge of u){const ft=bj(Ge,b.get(Ge.key).overlayedDocument);null!=ft&&_e.push(new ld(Ge.key,ft,s(ft.value.mapValue),_r.exists(!0)))}return f.mutationQueue.addMutationBatch(x,m,_e,u)}).next(ce=>{A=ce;const _e=ce.applyToLocalDocumentSet(b,W);return f.documentOverlayCache.saveOverlays(x,ce.batchId,_e)})}).then(()=>({batchId:A.batchId,changes:Fk(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,f){let m=a.ac[a.currentUser.toKey()];m||(m=new gr(Zt)),m=m.insert(u,f),a.ac[a.currentUser.toKey()]=m}(r,i.batchId,t),yield cd(r,i.changes),yield Ry(r.remoteStore)}catch(i){const a=Ny(i,"Failed to persist write");t.reject(a)}}),nx.apply(this,arguments)}function g1(n,e){return rx.apply(this,arguments)}function rx(){return rx=(0,he.Z)(function*(n,e){const t=Qe(n);try{const r=yield function mB(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Ki.newChangeBuffer({trackRemovals:!0});i=t.Li;const f=[];e.targetChanges.forEach((b,A)=>{const x=i.get(A);if(!x)return;f.push(t.Ds.removeMatchingKeys(a,b.removedDocuments,A).next(()=>t.Ds.addMatchingKeys(a,b.addedDocuments,A)));let j=x.withSequenceNumber(a.currentSequenceNumber);var W,ce,_e;e.targetMismatches.has(A)?j=j.withResumeToken(ti.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):b.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(b.resumeToken,r)),i=i.insert(A,j),ce=j,_e=b,(0===(W=x).resumeToken.approximateByteSize()||ce.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0)&&f.push(t.Ds.updateTargetData(a,j))});let m=uo(),v=nn();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),f.push(qO(a,u,e.documentUpdates).next(b=>{m=b.zi,v=b.ji})),!r.isEqual(ht.min())){const b=t.Ds.getLastRemoteSnapshotVersion(a).next(A=>t.Ds.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(b)}return se.waitFor(f).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Li=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.uc.get(a);u&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.ec=!0:i.modifiedDocuments.size>0?Ct(u.ec):i.removedDocuments.size>0&&(Ct(u.ec),u.ec=!1))}),yield cd(t,r,e)}catch(r){yield ma(r)}}),rx.apply(this,arguments)}function m1(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((a,u)=>{const f=u.view.Ru(e);f.snapshot&&i.push(f.snapshot)}),function(a,u){const f=Qe(a);f.onlineState=u;let m=!1;f.queries.forEach((v,b)=>{for(const A of b.listeners)A.Ru(u)&&(m=!0)}),m&&QR(f)}(r.eventManager,e),i.length&&r.nc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function YB(n,e,t){return ix.apply(this,arguments)}function ix(){return ix=(0,he.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),a=i&&i.key;if(a){let u=new gr(We.comparator);u=u.insert(a,o.newNoDocument(a,ht.min()));const f=nn().add(a),m=new gE(ht.min(),new Map,new wn(Zt),u,f);yield g1(r,m),r.oc=r.oc.remove(a),r.uc.delete(e),dx(r)}else yield Ay(r.localStore,e,!1).then(()=>Oy(r,e,t)).catch(ma)}),ix.apply(this,arguments)}function XB(n,e){return sx.apply(this,arguments)}function sx(){return sx=(0,he.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield function gB(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ki.newChangeBuffer({trackRemovals:!0});return function(u,f,m,v){const b=m.batch,A=b.keys();let x=se.resolve();return A.forEach(j=>{x=x.next(()=>v.getEntry(f,j)).next(W=>{const ce=m.docVersions.get(j);Ct(null!==ce),W.version.compareTo(ce)<0&&(b.applyToRemoteDocument(W,m),W.isValidDocument()&&(W.setReadTime(m.commitVersion),v.addEntry(W)))})}),x.next(()=>u.mutationQueue.removeMutationBatch(f,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let f=nn();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(f=f.add(u.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);ux(t,r,null),lx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield cd(t,i)}catch(i){yield ma(i)}}),sx.apply(this,arguments)}function JB(n,e,t){return ox.apply(this,arguments)}function ox(){return ox=(0,he.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(a,u){const f=Qe(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,u).next(b=>(Ct(null!==b),v=b.keys(),f.mutationQueue.removeMutationBatch(m,b))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,u)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);ux(r,e,t),lx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield cd(r,i)}catch(i){yield ma(i)}}),ox.apply(this,arguments)}function ax(){return ax=(0,he.Z)(function*(n,e){const t=Qe(n);ud(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=Qe(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=Ny(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),ax.apply(this,arguments)}function lx(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function ux(n,e,t){const r=Qe(n);let i=r.ac[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function Oy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc.wc(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.hs(e).forEach(r=>{n.cc.containsKey(r)||_1(n,r)})}function _1(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(RE(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),dx(n))}function cx(n,e,t){for(const r of t)r instanceof h1?(n.cc.addReference(r.key,e),t2(n,r)):r instanceof f1?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||_1(n,r.key)):dt()}function t2(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.rc.add(r),dx(n))}function dx(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new We(dn.fromString(e)),r=n.lc.next();n.uc.set(r,new GB(t)),n.oc=n.oc.insert(t,r),fT(n.remoteStore,new Yh(Ls(yy(t.path)),r,2,fs.ct))}}function cd(n,e,t){return hx.apply(this,arguments)}function hx(){return hx=(0,he.Z)(function*(n,e,t){const r=Qe(n),i=[],a=[],u=[];var f;r.sc.isEmpty()||(r.sc.forEach((f,m)=>{u.push(r.dc(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const b=mR.Di(m.targetId,v);a.push(b)}}))}),yield Promise.all(u),r.nc.zo(i),yield(f=(0,he.Z)(function*(m,v){const b=Qe(m);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>se.forEach(v,x=>se.forEach(x.Vi,j=>b.persistence.referenceDelegate.addReference(A,x.targetId,j)).next(()=>se.forEach(x.Si,j=>b.persistence.referenceDelegate.removeReference(A,x.targetId,j)))))}catch(A){if(!id(A))throw A;Le("LocalStore","Failed to update sequence numbers: "+A)}for(const A of v){const x=A.targetId;if(!A.fromCache){const j=b.Li.get(x),ce=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);b.Li=b.Li.insert(x,ce)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,a))}),hx.apply(this,arguments)}function n2(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,he.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield WO(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(u=>{u.forEach(f=>{f.reject(new xe(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cd(t,r.Qi)}var i}),fx.apply(this,arguments)}function r2(n,e){const t=Qe(n),r=t.uc.get(e);if(r&&r.ec)return nn().add(r.key);{let i=nn();const a=t.ic.get(e);if(!a)return i;for(const u of a){const f=t.sc.get(u);i=i.unionWith(f.view.Qu)}return i}}function i2(n,e){return px.apply(this,arguments)}function px(){return px=(0,he.Z)(function*(n,e){const t=Qe(n),r=yield lT(t.localStore,e.query,!0),i=e.view.Xu(r);return t.isPrimaryClient&&cx(t,e.targetId,i.Yu),i}),px.apply(this,arguments)}function s2(n,e){return gx.apply(this,arguments)}function gx(){return gx=(0,he.Z)(function*(n,e){const t=Qe(n);return ZO(t.localStore,e).then(r=>cd(t,r))}),gx.apply(this,arguments)}function o2(n,e,t,r){return mx.apply(this,arguments)}function mx(){return mx=(0,he.Z)(function*(n,e,t,r){const i=Qe(n),a=yield function(u,f){const m=Qe(u),v=Qe(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.In(b,f).next(A=>A?m.localDocuments.getDocuments(b,A):se.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Ry(i.remoteStore):"acknowledged"===t||"rejected"===t?(ux(i,e,r||null),lx(i,e),f=e,Qe(Qe(i.localStore).mutationQueue).En(f)):dt(),yield cd(i,a)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),mx.apply(this,arguments)}function _x(){return _x=(0,he.Z)(function*(n,e){const t=Qe(n);if(Ix(t),Ex(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield y1(t,r.toArray());t.fc=!0,yield $R(t.remoteStore,!0);for(const a of i)fT(t.remoteStore,a)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Oy(t,u),Ay(t.localStore,u,!0))),RE(t.remoteStore,u)}),yield i,yield y1(t,r),function(a){const u=Qe(a);u.uc.forEach((f,m)=>{RE(u.remoteStore,m)}),u.cc.ls(),u.uc=new Map,u.oc=new gr(We.comparator)}(t),t.fc=!1,yield $R(t.remoteStore,!1)}}),_x.apply(this,arguments)}function y1(n,e,t){return yx.apply(this,arguments)}function yx(){return yx=(0,he.Z)(function*(n,e,t){const r=Qe(n),i=[],a=[];for(const u of e){let f;const m=r.ic.get(u);if(m&&0!==m.length){f=yield Sy(r.localStore,Ls(m[0]));for(const v of m){const b=r.sc.get(v),A=yield i2(r,b);A.snapshot&&a.push(A.snapshot)}}else{const v=yield KO(r.localStore,u);f=yield Sy(r.localStore,v),yield JR(r,v1(v),u,!1,f.resumeToken)}i.push(f)}return r.nc.zo(a),i}),yx.apply(this,arguments)}function v1(n){return Rk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function l2(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).bi()}function u2(n,e,t,r){return vx.apply(this,arguments)}function vx(){return vx=(0,he.Z)(function*(n,e,t,r){const i=Qe(n);if(i.fc)return void Le("SyncEngine","Ignoring unexpected query state notification.");const a=i.ic.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield ZO(i.localStore,Pk(a[0])),f=gE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ti.EMPTY_BYTE_STRING);yield cd(i,u,f);break}case"rejected":yield Ay(i.localStore,e,!0),Oy(i,e,r);break;default:dt()}}),vx.apply(this,arguments)}function c2(n,e,t){return wx.apply(this,arguments)}function wx(){return wx=(0,he.Z)(function*(n,e,t){const r=Ix(n);if(r.fc){for(const i of e){if(r.ic.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const a=yield KO(r.localStore,i),u=yield Sy(r.localStore,a);yield JR(r,v1(a),u.targetId,!1,u.resumeToken),fT(r.remoteStore,u)}for(const i of t)r.ic.has(i)&&(yield Ay(r.localStore,i,!1).then(()=>{RE(r.remoteStore,i),Oy(r,i)}).catch(ma))}}),wx.apply(this,arguments)}function Ix(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=g1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YB.bind(null,e),e.nc.zo=BB.bind(null,e.eventManager),e.nc.wc=zB.bind(null,e.eventManager),e}function Ex(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JB.bind(null,e),e}class gT{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.serializer=AE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return HO(this.persistence,new $O,e.initialUser,this.serializer)}createPersistence(e){return new BO(oT.Fs,this.serializer)}createSharedClientState(e){return new JO}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Cx extends gT{constructor(e,t,r){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e),yield r.mc.initialize(r,e),yield Ex(r.mc.syncEngine),yield Ry(r.mc.remoteStore),yield r.persistence.hi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return HO(this.persistence,new $O,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new eB(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new RM(t,this.persistence);return new bD(e.asyncQueue,r)}createPersistence(e){const t=gR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?co.withCacheSize(this.cacheSizeBytes):co.DEFAULT;return new pR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,t1(),hT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new JO}}class w1 extends Cx{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e);const i=r.mc.syncEngine;r.sharedClientState instanceof bR&&(r.sharedClientState.syncEngine={$r:o2.bind(null,i),Mr:u2.bind(null,i),Fr:c2.bind(null,i),bi:l2.bind(null,i),Or:s2.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.hi(function(){var a=(0,he.Z)(function*(u){yield function a2(n,e){return _x.apply(this,arguments)}(r.mc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=t1();if(!bR.D(t))throw new xe(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=gR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Fy{initialize(e,t){var r=this;return(0,he.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>m1(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=n2.bind(null,r.syncEngine),yield $R(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new jB}createDatastore(e){const t=AE(e.databaseInfo.databaseId),r=new CB(e.databaseInfo);return new TB(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>m1(this.syncEngine,f,0),u=e1.D()?new e1:new wB,new MB(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,f,m,v){const b=new qB(r,i,a,u,f,m);return v&&(b.fc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const r=Qe(t);Le("RemoteStore","RemoteStore shutting down."),r.du.add(5),yield My(r),r._u.shutdown(),r.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function I1(n,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class mT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class h2{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new Jr,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(r=>{r&&r.ku()?this.metadata.resolve(r.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Nu)}`))},r=>this.metadata.reject(r))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,he.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const r=e.Tc.decode(t),i=Number(r);isNaN(i)&&e.Rc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new $B(JSON.parse(a),t.length+i)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,he.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const r=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,he.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class f2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,he.Z)(function*(a,u){const f=Qe(a),m=yE(f.serializer)+"/documents",v={documents:u.map(j=>_E(f.serializer,j))},b=yield f.fo("BatchGetDocuments",m,v,u.length),A=new Map;b.forEach(j=>{const W=function kj(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=xu(t,r.found.name),a=ni(r.found.updateTime),u=r.found.createTime?ni(r.found.createTime):ht.min(),f=new wi({mapValue:{fields:r.found.fields}});return o.newFoundDocument(i,a,u,f)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=xu(t,r.missing),a=ni(r.readTime);return o.newNoDocument(i,a)}(n,e):dt()}(f.serializer,j);A.set(W.key.toString(),W)});const x=[];return u.forEach(j=>{const W=A.get(j.toString());Ct(!!W),x.push(W)}),x}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ey(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=We.fromPath(i);e.mutations.push(new ZM(a,e.precondition(a)))}),yield(r=(0,he.Z)(function*(i,a){const u=Qe(i),f=yE(u.serializer)+"/documents",m={writes:a.map(v=>vE(u.serializer,v))};yield u.co("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=ht.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ht.min())?_r.exists(!1):_r.updateTime(t):_r.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ht.min()))throw new xe(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _r.updateTime(t)}return _r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class p2{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Vc=r.maxAttempts,this.Co=new TR(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,he.Z)(function*(){const t=new f2(e.datastore),r=e.Dc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Cc(a)}))}).catch(i=>{e.Cc(i)})}))}Dc(e){try{const t=this.updateFunction(e);return!Hh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Yk(t)}return!1}}class g2{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yi.UNAUTHENTICATED,this.clientId=wD.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,he.Z)(function*(f){Le("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Le("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ny(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function _T(n,e){return bx.apply(this,arguments)}function bx(){return bx=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,he.Z)(function*(a){r.isEqual(a)||(yield WO(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),bx.apply(this,arguments)}function Dx(n,e){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Sx(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>l1(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>l1(e.remoteStore,a)),n._onlineComponents=e}),Tx.apply(this,arguments)}function E1(n){return"FirebaseError"===n.name?n.code===ge.FAILED_PRECONDITION||n.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Sx(n){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,he.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Le("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _T(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!E1(t))throw t;ks("Error using user provided cache. Falling back to memory cache: "+t),yield _T(n,new gT)}}else Le("FirestoreClient","Using default OfflineComponentProvider"),yield _T(n,new gT);return n._offlineComponents}),Ax.apply(this,arguments)}function yT(n){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,he.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Le("FirestoreClient","Using user provided OnlineComponentProvider"),yield Dx(n,n._uninitializedComponentsProvider._online)):(Le("FirestoreClient","Using default OnlineComponentProvider"),yield Dx(n,new Fy))),n._onlineComponents}),Mx.apply(this,arguments)}function C1(n){return Sx(n).then(e=>e.persistence)}function vT(n){return Sx(n).then(e=>e.localStore)}function Rx(n){return yT(n).then(e=>e.remoteStore)}function xx(n){return yT(n).then(e=>e.syncEngine)}function Ly(n){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,he.Z)(function*(n){const e=yield yT(n),t=e.eventManager;return t.onListen=KB.bind(null,e.syncEngine),t.onUnlisten=ZB.bind(null,e.syncEngine),t}),Nx.apply(this,arguments)}function D1(n,e,t={}){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(i,a,u,f,m){const v=new mT({next:A=>{a.enqueueAndForget(()=>KR(i,b));const x=A.docs.has(u);!x&&A.fromCache?m.reject(new xe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&A.fromCache&&f&&"server"===f.source?m.reject(new xe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(A)},error:A=>m.reject(A)}),b=new YR(yy(u.path),v,{includeMetadataChanges:!0,xu:!0});return GR(i,b)}(yield Ly(n),n.asyncQueue,e,t,r)})),r.promise}function T1(n,e,t={}){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(i,a,u,f,m){const v=new mT({next:A=>{a.enqueueAndForget(()=>KR(i,b)),A.fromCache&&"server"===f.source?m.reject(new xe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(A)},error:A=>m.reject(A)}),b=new YR(u,v,{includeMetadataChanges:!0,xu:!0});return GR(i,b)}(yield Ly(n),n.asyncQueue,e,t,r)})),r.promise}const S1=new Map;function Px(n,e,t){if(!t)throw new xe(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function A1(n,e,t,r){if(!0===e&&!0===r)throw new xe(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function M1(n){if(!We.isDocumentKey(n))throw new xe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function R1(n){if(We.isDocumentKey(n))throw new xe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function vn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wT(n);throw new xe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function x1(n,e){if(e<=0)throw new xe(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class N1{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,A1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N1(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new bM;switch(t.type){case"firstParty":return new SM(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=S1.get(e);t&&(Le("ComponentProvider","Removing Datastore"),S1.delete(e),t.terminate())}(this),Promise.resolve()}}function P1(n,e,t,r={}){var i;const a=(n=vn(n,xE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&ks("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,f;if("string"==typeof r.mockUserToken)u=r.mockUserToken,f=yi.MOCK_USER;else{u=(0,U.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new xe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new yi(m)}n._authCredentials=new dy(new _D(u,f))}}class or{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class Ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ji(this.firestore,e,this._query)}}class Nu extends Ji{constructor(e,t,r){super(e,t,yy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new We(e))}withConverter(e){return new Nu(this.firestore,e,this._path)}}function k1(n,e,...t){if(n=(0,U.m9)(n),Px("collection","path",e),n instanceof xE){const r=dn.fromString(e,...t);return R1(r),new Nu(n,null,r)}{if(!(n instanceof or||n instanceof Nu))throw new xe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return R1(r),new Nu(n.firestore,null,r)}}function IT(n,e,...t){if(n=(0,U.m9)(n),1===arguments.length&&(e=wD.A()),Px("doc","path",e),n instanceof xE){const r=dn.fromString(e,...t);return M1(r),new or(n,null,new We(r))}{if(!(n instanceof or||n instanceof Nu))throw new xe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return M1(r),new or(n.firestore,n instanceof Nu?n.converter:null,new We(r))}}function O1(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),(n instanceof or||n instanceof Nu)&&(e instanceof or||e instanceof Nu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function kx(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),n instanceof Ji&&e instanceof Ji&&n.firestore===e.firestore&&uE(n._query,e._query)&&n.converter===e.converter}class D2{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new TR(this,"async_queue_retry"),this.qc=()=>{const t=hT();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=hT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=hT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new Jr;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,he.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!id(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(r=>{throw this.Mc=r,this.Fc=!1,pr("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Fc=!1,r))));return this.Nc=t,t}enqueueAfterDelay(e,t,r){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const i=WR.createAndSchedule(this,e,t,r,a=>this.Qc(a));return this.$c.push(i),i}Uc(){this.Mc&&dt()}verifyOperationInProgress(){}zc(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function Ox(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class T2{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ar extends xE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new D2,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||F1(this),this._firestoreClient.terminate()}}function A2(n,e){const t="object"==typeof n?n:(0,Lr.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Lr._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,U.P0)("firestore");a&&P1(i,...a)}return i}function ri(n){return n._firestoreClient||F1(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function F1(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new jM(n._databaseId,f,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,v.useFetchStreams));var f,v;n._firestoreClient=new g2(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function L1(n,e,t){const r=new Jr;return n.asyncQueue.enqueue((0,he.Z)(function*(){try{yield _T(n,t),yield Dx(n,e),r.resolve()}catch(i){const a=i;if(!E1(a))throw a;ks("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function U1(n){if(n._initialized||n._terminated)throw new xe(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pu(ti.fromBase64String(e))}catch(t){throw new xe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pu(ti.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Dg{constructor(e){this._methodName=e}}class ET{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}}const U2=/^__.*__$/;class V2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ld(e,this.data,this.fieldMask,t,this.fieldTransforms):new Iy(e,this.data,t,this.fieldTransforms)}}class V1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ld(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function j1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class CT{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Jc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new CT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.ea(e),i}na(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.Jc(),i}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return TT(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(j1(this.Yc)&&U2.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class j2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||AE(e)}ua(e,t,r,i=!1){return new CT({Yc:e,methodName:t,oa:r,path:Tr.emptyPath(),ta:!1,ra:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tg(n){const e=n._freezeSettings(),t=AE(n._databaseId);return new j2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bT(n,e,t,r,i,a={}){const u=n.ua(a.merge||a.mergeFields?2:0,e,t,i);Vx("Data must be an object, but it was:",u,r);const f=$1(r,u);let m,v;if(a.merge)m=new Fs(u.fieldMask),v=u.fieldTransforms;else if(a.mergeFields){const b=[];for(const A of a.mergeFields){const x=kE(e,A,t);if(!u.contains(x))throw new xe(ge.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);W1(b,x)||b.push(x)}m=new Fs(b),v=u.fieldTransforms.filter(A=>m.covers(A.field))}else m=null,v=u.fieldTransforms;return new V2(new wi(f),m,v)}class PE extends Dg{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof PE}}function B1(n,e,t){return new CT({Yc:3,oa:e.settings.oa,methodName:n._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Fx extends Dg{_toFieldTransform(e){return new fE(e.path,new vy)}isEqual(e){return e instanceof Fx}}class B2 extends Dg{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=B1(this,e,!0),r=this.ca.map(a=>Sg(a,t)),i=new mg(r);return new fE(e.path,i)}isEqual(e){return this===e}}class z2 extends Dg{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=B1(this,e,!0),r=this.ca.map(a=>Sg(a,t)),i=new _g(r);return new fE(e.path,i)}isEqual(e){return this===e}}class $2 extends Dg{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new wy(e.serializer,jk(e.serializer,this.aa));return new fE(e.path,t)}isEqual(e){return this===e}}function Lx(n,e,t,r){const i=n.ua(1,e,t);Vx("Data must be an object, but it was:",i,r);const a=[],u=wi.empty();Il(r,(m,v)=>{const b=DT(e,m,t);v=(0,U.m9)(v);const A=i.na(b);if(v instanceof PE)a.push(b);else{const x=Sg(v,A);null!=x&&(a.push(b),u.set(b,x))}});const f=new Fs(a);return new V1(u,f,i.fieldTransforms)}function Ux(n,e,t,r,i,a){const u=n.ua(1,e,t),f=[kE(e,r,t)],m=[i];if(a.length%2!=0)throw new xe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)f.push(kE(e,a[x])),m.push(a[x+1]);const v=[],b=wi.empty();for(let x=f.length-1;x>=0;--x)if(!W1(v,f[x])){const j=f[x];let W=m[x];W=(0,U.m9)(W);const ce=u.na(j);if(W instanceof PE)v.push(j);else{const _e=Sg(W,ce);null!=_e&&(v.push(j),b.set(j,_e))}}const A=new Fs(v);return new V1(b,A,u.fieldTransforms)}function z1(n,e,t,r=!1){return Sg(t,n.ua(r?4:3,e))}function Sg(n,e){if(H1(n=(0,U.m9)(n)))return Vx("Unsupported field value:",e,n),$1(n,e);if(n instanceof Dg)return function(t,r){if(!j1(r.Yc))throw r.ia(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ia(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let f=Sg(u,r.sa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,U.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jk(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Jn.fromDate(t);return{timestampValue:Cy(r.serializer,i)}}if(t instanceof Jn){const i=new Jn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Cy(r.serializer,i)}}if(t instanceof ET)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pu)return{bytesValue:iO(r.serializer,t._byteString)};if(t instanceof or){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ia(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:tR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ia(`Unsupported field value: ${wT(t)}`)}(n,e)}function $1(n,e){const t={};return gy(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Il(n,(r,i)=>{const a=Sg(i,e.Xc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function H1(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Jn||n instanceof ET||n instanceof Pu||n instanceof or||n instanceof Dg)}function Vx(n,e,t){if(!H1(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=wT(t);throw e.ia("an object"===r?n+" a custom object":n+" "+r)}var r}function kE(n,e,t){if((e=(0,U.m9)(e))instanceof dd)return e._internalPath;if("string"==typeof e)return DT(n,e);throw TT("Field path arguments must be of type string or ",n,!1,void 0,t)}const H2=new RegExp("[~\\*/\\[\\]]");function DT(n,e,t){if(e.search(H2)>=0)throw TT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dd(...e.split("."))._internalPath}catch{throw TT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function TT(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${r}`),u&&(m+=` in document ${i}`),m+=")"),new xe(ge.INVALID_ARGUMENT,f+n+m)}function W1(n,e){return n.some(t=>t.isEqual(e))}class OE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new W2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ST("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class W2 extends OE{data(){return super.data()}}function ST(n,e){return"string"==typeof e?DT(n,e):e instanceof dd?e._internalPath:e._delegate._internalPath}function G1(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jx{}class FE extends jx{}function nf(n,e,...t){let r=[];e instanceof jx&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof Uy).length,u=i.filter(f=>f instanceof LE).length;if(a>1||a>0&&u>0)throw new xe(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class LE extends FE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new LE(e,t,r)}_apply(e){const t=this._parse(e);return Q1(e._query,t),new Ji(e.firestore,e.converter,qM(e._query,t))}_parse(e){const t=Tg(e.firestore);return function(i,a,u,f,m,v,b){let A;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new xe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){Z1(b,v);const x=[];for(const j of b)x.push(K1(f,i,j));A={arrayValue:{values:x}}}else A=K1(f,i,b)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||Z1(b,v),A=z1(u,"where",b,"in"===v||"not-in"===v);return C.create(m,v,A)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Uy extends jx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Uy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:S.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const u=i.getFlattenedFilters();for(const f of u)Q1(a,f),a=qM(a,f)}(e._query,t),new Ji(e.firestore,e.converter,qM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Bx extends FE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Bx(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new xe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new p(i,a);return function(f,m){if(null===WM(f)){const v=HD(f);null!==v&&Y1(0,v,m.field)}}(r,u),u}(e._query,this._field,this._direction);return new Ji(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new ad(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class AT extends FE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new AT(e,t,r)}_apply(e){return new Ji(e.firestore,e.converter,WD(e._query,this._limit,this._limitType))}}class MT extends FE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new MT(e,t,r)}_apply(e){const t=q1(e,this.type,this._docOrFields,this._inclusive);return new Ji(e.firestore,e.converter,(i=t,new ad((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class RT extends FE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new RT(e,t,r)}_apply(e){const t=q1(e,this.type,this._docOrFields,this._inclusive);return new Ji(e.firestore,e.converter,(i=t,new ad((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function q1(n,e,t,r){if(t[0]=(0,U.m9)(t[0]),t[0]instanceof OE)return function(i,a,u,f,m){if(!f)throw new xe(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const v=[];for(const b of gg(i))if(b.field.isKeyField())v.push(od(a,f.key));else{const A=f.data.field(b.field);if(my(A))throw new xe(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const x=b.field.canonicalString();throw new xe(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}v.push(A)}return new l(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Tg(n.firestore);return function(a,u,f,m,v,b){const A=a.explicitOrderBy;if(v.length>A.length)throw new xe(ge.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let j=0;j<v.length;j++){const W=v[j];if(A[j].field.isKeyField()){if("string"!=typeof W)throw new xe(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof W}`);if(!GM(a)&&-1!==W.indexOf("/"))throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${W}' contains a slash.`);const ce=a.path.child(dn.fromString(W));if(!We.isDocumentKey(ce))throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ce}' is not because it contains an odd number of segments.`);const _e=new We(ce);x.push(od(u,_e))}else{const ce=z1(f,m,W);x.push(ce)}}return new l(x,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function K1(n,e,t){if("string"==typeof(t=(0,U.m9)(t))){if(""===t)throw new xe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GM(e)&&-1!==t.indexOf("/"))throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dn.fromString(t));if(!We.isDocumentKey(r))throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return od(n,new We(r))}if(t instanceof or)return od(n,t._key);throw new xe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wT(t)}.`)}function Z1(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Q1(n,e){if(e.isInequality()){const r=HD(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new xe(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=WM(n);null!==a&&Y1(0,i,a)}const t=function(r,i){for(const a of r)for(const u of a.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new xe(ge.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Y1(n,e,t){if(!t.isEqual(e))throw new xe(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class zx{convertValue(e,t="none"){switch(Au(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Su(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return Il(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new ET(mr(e.latitude),mr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=iE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cg(e));default:return null}}convertTimestamp(e){const t=Tu(e);return new Jn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dn.fromString(e);Ct(pO(r));const i=new El(r.get(1),r.get(3)),a=new We(r.popFirst(5));return i.isEqual(t)||pr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function xT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ez extends zx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}class Ag{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hd extends OE{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new UE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ST("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class UE extends hd{data(e={}){return super.data(e)}}class rf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ag(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new UE(this._firestore,this._userDataWriter,r.key,r,new Ag(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new UE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ag(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const f=new UE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ag(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==u.type&&(m=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),v=a.indexOf(u.doc.key)),{type:nz(u.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function J1(n,e){return n instanceof hd&&e instanceof hd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof rf&&e instanceof rf&&n._firestore===e._firestore&&kx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class sf extends zx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}function eF(n,e,t){n=vn(n,or);const r=vn(n.firestore,ar),i=xT(n.converter,e,t);return Vy(r,[bT(Tg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,_r.none())])}function tF(n,e,t,...r){n=vn(n,or);const i=vn(n.firestore,ar),a=Tg(i);let u;return u="string"==typeof(e=(0,U.m9)(e))||e instanceof dd?Ux(a,"updateDoc",n._key,e,t,r):Lx(a,"updateDoc",n._key,e),Vy(i,[u.toMutation(n._key,_r.exists(!0))])}function nF(n,...e){var t,r,i;n=(0,U.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||Ox(e[u])||(a=e[u],u++);const f={includeMetadataChanges:a.includeMetadataChanges};if(Ox(e[u])){const A=e[u];e[u]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[u+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[u+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let m,v,b;if(n instanceof or)v=vn(n.firestore,ar),b=yy(n._key.path),m={next:A=>{e[u]&&e[u]($x(v,n,A))},error:e[u+1],complete:e[u+2]};else{const A=vn(n,Ji);v=vn(A.firestore,ar),b=A._query;const x=new sf(v);m={next:j=>{e[u]&&e[u](new rf(v,x,A,j))},error:e[u+1],complete:e[u+2]},G1(n._query)}return function(A,x,j,W){const ce=new mT(W),_e=new YR(x,ce,j);return A.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return GR(yield Ly(A),_e)})),()=>{ce.yc(),A.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return KR(yield Ly(A),_e)}))}}(ri(v),b,f,m)}function Vy(n,e){return function(t,r){const i=new Jr;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function QB(n,e,t){return nx.apply(this,arguments)}(yield xx(t),r,i)})),i.promise}(ri(n),e)}function $x(n,e,t){const r=t.docs.get(e._key),i=new sf(n);return new hd(n,i,e._key,r,new Ag(t.hasPendingWrites,t.fromCache),e.converter)}const yz={maxAttempts:5};class rF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tg(e)}set(e,t,r){this._verifyNotCommitted();const i=af(e,this._firestore),a=xT(i.converter,t,r),u=bT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,_r.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=af(e,this._firestore);let u;return u="string"==typeof(t=(0,U.m9)(t))||t instanceof dd?Ux(this._dataReader,"WriteBatch.update",a._key,t,r,i):Lx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,_r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=af(e,this._firestore);return this._mutations=this._mutations.concat(new Ey(t._key,_r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function af(n,e){if((n=(0,U.m9)(n)).firestore!==e)throw new xe(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class vz extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Tg(e)}get(e){const t=af(e,this._firestore),r=new ez(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const a=i[0];if(a.isFoundDocument())return new OE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new OE(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=af(e,this._firestore),a=xT(i.converter,t,r),u=bT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=af(e,this._firestore);let u;return u="string"==typeof(t=(0,U.m9)(t))||t instanceof dd?Ux(this._dataReader,"Transaction.update",a._key,t,r,i):Lx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=af(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=af(e,this._firestore),r=new sf(this._firestore);return super.get(e).then(i=>new hd(this._firestore,r,t._key,i._document,new Ag(!1,!1),t.converter))}}!function(n,e=!0){Vh=Lr.SDK_VERSION,(0,Lr._registerComponent)(new oo.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),u=new ar(new DM(t.getProvider("auth-internal")),new yD(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new xe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new El(f.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,Lr.registerVersion)(mD,"3.10.0",n),(0,Lr.registerVersion)(mD,"3.10.0","esm2017")}();function Hx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function sF(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function oF(){if(!function kD(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}class VE{constructor(e){this._delegate=e}static fromBase64String(e){return oF(),new VE(Pu.fromBase64String(e))}static fromUint8Array(e){return sF(),new VE(Pu.fromUint8Array(e))}toBase64(){return oF(),this._delegate.toBase64()}toUint8Array(){return sF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Wx(n){return function Az(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Mz{enableIndexedDbPersistence(e,t){return function M2(n,e){U1(n=vn(n,ar));const t=ri(n);if(t._uninitializedComponentsProvider)throw new xe(ge.FAILED_PRECONDITION,"SDK cache is already specified.");ks("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Fy;return L1(t,i,new Cx(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function R2(n){U1(n=vn(n,ar));const e=ri(n);if(e._uninitializedComponentsProvider)throw new xe(ge.FAILED_PRECONDITION,"SDK cache is already specified.");ks("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Fy;return L1(e,r,new w1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function x2(n){if(n._initialized&&!n._terminated)throw new xe(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Jr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(r){if(!Os.D())return Promise.resolve();const i=r+"main";yield Os.delete(i)}),function(r){return t.apply(this,arguments)})(gR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class aF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof El||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ks("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){P1(this._delegate,e,t,r)}enableNetwork(){return function P2(n){return function m2(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield C1(n),t=yield Rx(n);return e.setNetworkEnabled(!0),function(r){const i=Qe(r);return i.du.delete(0),ME(i)}(t)}))}(ri(n=vn(n,ar)))}(this._delegate)}disableNetwork(){return function k2(n){return function _2(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield C1(n),t=yield Rx(n);return e.setNetworkEnabled(!1),(r=(0,he.Z)(function*(i){const a=Qe(i);a.du.add(0),yield My(a),a.mu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ri(n=vn(n,ar)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,A1("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function N2(n){return function(e){const t=new Jr;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function e2(n,e){return ax.apply(this,arguments)}(yield xx(e),t)})),t.promise}(ri(n=vn(n,ar)))}(this._delegate)}onSnapshotsInSync(e){return function dz(n,e){return function w2(n,e){const t=new mT(e);return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield Ly(n),i=t,Qe(r).Au.add(i),void i.next();var r,i})),()=>{t.yc(),n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield Ly(n),i=t,void Qe(r).Au.delete(i);var r,i}))}}(ri(n=vn(n,ar)),Ox(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new jy(this,k1(this._delegate,e))}catch(t){throw Us(t,"collection()","Firestore.collection()")}}doc(e){try{return new ya(this,IT(this._delegate,e))}catch(t){throw Us(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vs(this,function b2(n,e){if(n=vn(n,xE),Px("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ji(n,null,(t=e,new ad(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Us(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function wz(n,e,t){n=vn(n,ar);const r=Object.assign(Object.assign({},yz),t);return function(i){if(i.maxAttempts<1)throw new xe(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,u){const f=new Jr;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const m=yield function b1(n){return yT(n).then(e=>e.datastore)}(i);new p2(i.asyncQueue,m,u,a,f).run()})),f.promise}(ri(n),i=>e(new vz(n,i)),r)}(this._delegate,t=>e(new lF(this,t)))}batch(){return ri(this._delegate),new uF(new rF(this._delegate,e=>Vy(this._delegate,e)))}loadBundle(e){return function O2(n,e){const t=ri(n=vn(n,ar)),r=new T2;return function I2(n,e,t,r){const i=function(a,u){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return I1(m,v);if(m instanceof ArrayBuffer)return I1(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new h2(m,u);var m}(t,AE(e));n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function d2(n,e,t){const r=Qe(n);var i;(i=(0,he.Z)(function*(a,u,f){try{const m=yield u.getMetadata();if(yield function(x,j){const W=Qe(x),ce=ni(j.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",_e=>W.xs.getBundleMetadata(_e,j.id)).then(_e=>!!_e&&_e.createTime.compareTo(ce)>=0)}(a.localStore,m))return yield u.close(),f._completeWith({taskState:"Success",documentsLoaded:(x=m).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);f._updateProgress(d1(m));const v=new HB(m,a.localStore,u.serializer);let b=yield u._c();for(;b;){const x=yield v.$u(b);x&&f._updateProgress(x),b=yield u._c()}const A=yield v.complete();return yield cd(a,A.Bu,void 0),yield function(x,j){const W=Qe(x);return W.persistence.runTransaction("Save bundle","readwrite",ce=>W.xs.saveBundleMetadata(ce,j))}(a.localStore,m),f._completeWith(A.progress),Promise.resolve(A.Fu)}catch(m){return ks("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var x}),function(a,u,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield xx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function F2(n,e){return function E2(n,e){return n.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,r){const i=Qe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.xs.getNamedQuery(a,r))}(yield vT(n),e)}))}(ri(n=vn(n,ar)),e).then(t=>t?new Ji(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Vs(this,t):null)}}class NT extends zx{constructor(e){super(),this.firestore=e}convertBytes(e){return new VE(new Pu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ya.forKey(t,this.firestore,null)}}class lF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new NT(e)}get(e){const t=Rg(e);return this._delegate.get(t).then(r=>new jE(this._firestore,new hd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Rg(e);return r?(Hx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Rg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Rg(e);return this._delegate.delete(t),this}}class uF{constructor(e){this._delegate=e}set(e,t,r){const i=Rg(e);return r?(Hx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Rg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Rg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Mg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new UE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new BE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Mg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Mg(e,new NT(e),t),i.set(t,a)),a}}Mg.INSTANCES=new WeakMap;class ya{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new NT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ya(t,new or(t._delegate,r,new We(e)))}static forKey(e,t,r){return new ya(t,new or(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new jy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new jy(this.firestore,k1(this._delegate,e))}catch(t){throw Us(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,U.m9)(e))instanceof or&&O1(this._delegate,e)}set(e,t){t=Hx("DocumentReference.set",t);try{return t?eF(this._delegate,e,t):eF(this._delegate,e)}catch(r){throw Us(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?tF(this._delegate,e):tF(this._delegate,e,t,...r)}catch(i){throw Us(i,"updateDoc()","DocumentReference.update()")}}delete(){return function uz(n){return Vy(vn(n.firestore,ar),[new Ey(n._key,_r.none())])}(this._delegate)}onSnapshot(...e){const t=cF(e),r=dF(e,i=>new jE(this.firestore,new hd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return nF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function iz(n){n=vn(n,or);const e=vn(n.firestore,ar),t=ri(e),r=new sf(e);return function y2(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(i,a,u){try{const f=yield function(m,v){const b=Qe(m);return b.persistence.runTransaction("read document","readonly",A=>b.localDocuments.getDocument(A,v))}(i,a);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new xe(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Ny(f,`Failed to get document '${a} from cache`);u.reject(m)}}),function(i,a,u){return r.apply(this,arguments)})(yield vT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new hd(e,r,n._key,i,new Ag(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function sz(n){n=vn(n,or);const e=vn(n.firestore,ar);return D1(ri(e),n._key,{source:"server"}).then(t=>$x(e,n,t))}(this._delegate):function rz(n){n=vn(n,or);const e=vn(n.firestore,ar);return D1(ri(e),n._key).then(t=>$x(e,n,t))}(this._delegate),t.then(r=>new jE(this.firestore,new hd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ya(this.firestore,this._delegate.withConverter(e?Mg.getInstance(this.firestore,e):null))}}function Us(n,e,t){return n.message=n.message.replace(e,t),n}function cF(n){for(const e of n)if("object"==typeof e&&!Wx(e))return e;return{}}function dF(n,e){var t,r;let i;return i=Wx(n[0])?n[0]:Wx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class jE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ya(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return J1(this._delegate,e._delegate)}}class BE extends jE{data(e){const t=this._delegate.data(e);return function HI(n,e){n||dt()}(void 0!==t),t}}class Vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new NT(e)}where(e,t,r){try{return new Vs(this.firestore,nf(this._delegate,function G2(n,e,t){const r=e,i=ST("where",n);return LE._create(i,r,t)}(e,t,r)))}catch(i){throw Us(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vs(this.firestore,nf(this._delegate,function q2(n,e="asc"){const t=e,r=ST("orderBy",n);return Bx._create(r,t)}(e,t)))}catch(r){throw Us(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vs(this.firestore,nf(this._delegate,function K2(n){return x1("limit",n),AT._create("limit",n,"F")}(e)))}catch(t){throw Us(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vs(this.firestore,nf(this._delegate,function Z2(n){return x1("limitToLast",n),AT._create("limitToLast",n,"L")}(e)))}catch(t){throw Us(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vs(this.firestore,nf(this._delegate,function Q2(...n){return MT._create("startAt",n,!0)}(...e)))}catch(t){throw Us(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vs(this.firestore,nf(this._delegate,function Y2(...n){return MT._create("startAfter",n,!1)}(...e)))}catch(t){throw Us(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vs(this.firestore,nf(this._delegate,function X2(...n){return RT._create("endBefore",n,!1)}(...e)))}catch(t){throw Us(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vs(this.firestore,nf(this._delegate,function J2(...n){return RT._create("endAt",n,!0)}(...e)))}catch(t){throw Us(t,"endAt()","Query.endAt()")}}isEqual(e){return kx(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function az(n){n=vn(n,Ji);const e=vn(n.firestore,ar),t=ri(e),r=new sf(e);return function v2(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(i,a,u){try{const f=yield lT(i,a,!0),m=new p1(a,f.Wi),v=m.zu(f.documents),b=m.applyChanges(v,!1);u.resolve(b.snapshot)}catch(f){const m=Ny(f,`Failed to execute query '${a} against cache`);u.reject(m)}}),function(i,a,u){return r.apply(this,arguments)})(yield vT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new rf(e,r,n,i))}(this._delegate):"server"===e?.source?function lz(n){n=vn(n,Ji);const e=vn(n.firestore,ar),t=ri(e),r=new sf(e);return T1(t,n._query,{source:"server"}).then(i=>new rf(e,r,n,i))}(this._delegate):function oz(n){n=vn(n,Ji);const e=vn(n.firestore,ar),t=ri(e),r=new sf(e);return G1(n._query),T1(t,n._query).then(i=>new rf(e,r,n,i))}(this._delegate),t.then(r=>new Gx(this.firestore,new rf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=cF(e),r=dF(e,i=>new Gx(this.firestore,new rf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return nF(this._delegate,t,r)}withConverter(e){return new Vs(this.firestore,this._delegate.withConverter(e?Mg.getInstance(this.firestore,e):null))}}class xz{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new BE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Gx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new BE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xz(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new BE(this._firestore,r))})}isEqual(e){return J1(this._delegate,e._delegate)}}class jy extends Vs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ya(this.firestore,e):null}doc(e){try{return new ya(this.firestore,void 0===e?IT(this._delegate):IT(this._delegate,e))}catch(t){throw Us(t,"doc()","CollectionReference.doc()")}}add(e){return function cz(n,e){const t=vn(n.firestore,ar),r=IT(n),i=xT(n.converter,e);return Vy(t,[bT(Tg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,_r.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ya(this.firestore,t))}isEqual(e){return O1(this._delegate,e._delegate)}withConverter(e){return new jy(this.firestore,this._delegate.withConverter(e?Mg.getInstance(this.firestore,e):null))}}function Rg(n){return vn(n,or)}class qx{constructor(...e){this._delegate=new dd(...e)}static documentId(){return new qx(Tr.keyField().canonicalString())}isEqual(e){return(e=(0,U.m9)(e))instanceof dd&&this._delegate._internalPath.isEqual(e._internalPath)}}class xg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Ez(){return new Fx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new xg(e)}static delete(){const e=function Iz(){return new PE("deleteField")}();return e._methodName="FieldValue.delete",new xg(e)}static arrayUnion(...e){const t=function Cz(...n){return new B2("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new xg(t)}static arrayRemove(...e){const t=function bz(...n){return new z2("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new xg(t)}static increment(e){const t=function Dz(n){return new $2("increment",n)}(e);return t._methodName="FieldValue.increment",new xg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Nz={Firestore:aF,GeoPoint:ET,Timestamp:Jn,Blob:VE,Transaction:lF,WriteBatch:uF,DocumentReference:ya,DocumentSnapshot:jE,Query:Vs,QueryDocumentSnapshot:BE,QuerySnapshot:Gx,CollectionReference:jy,FieldPath:qx,FieldValue:xg,setLogLevel:function Rz(n){!function uy(n){Du.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function kz(n){(function Pz(n,e){n.INTERNAL.registerComponent(new oo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Nz)))})(n,(e,t)=>new aF(e,t,new Mz)),n.registerVersion("@firebase/firestore-compat","0.3.6")}(Dh.Z);var Kx=V(6451),PT=V(5363),Oz=V(6063);class Fz extends pi.x{constructor(e=1/0,t=1/0,r=Oz.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=u;m+=2)f=m;f&&r.splice(0,f+1)}}}var hF=V(3099);function fF(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,hF.B)({connector:()=>new Fz(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function pF(n,e){return(0,xv.m)(e)?fr(()=>n,e):fr(()=>n)}var Zx=V(9468),ku=V(259);class lf{constructor(e){return e}}class zE{constructor(){return(0,ku.C6)()}}const Qx=new d.InjectionToken("angularfire2._apps"),Uz={provide:lf,useFactory:function Lz(n){return n&&1===n.length?n[0]:new lf((0,ku.Mq)())},deps:[[new d.Optional,Qx]]},Vz={provide:zE,deps:[[new d.Optional,Qx]]};function jz(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new lf(r)}}let Bz=(()=>{class n{constructor(t){(0,ku.KN)("angularfire",Tt.q4.full,"core"),(0,ku.KN)("angularfire",Tt.q4.full,"app"),(0,ku.KN)("angular",d.VERSION.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(d.PLATFORM_ID))},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({providers:[Uz,Vz]}),n})();function zz(n,...e){return{ngModule:Bz,providers:[{provide:Qx,useFactory:jz(n),multi:!0,deps:[d.NgZone,d.Injector,Tt.HU,...e]}]}}const $z=(0,Tt.u3)(ku.ZF,!0),Yx=new Map,gF={activated:!1,tokenObservers:[]},Hz={initialized:!1,enabled:!1};function es(n){return Yx.get(n)||Object.assign({},gF)}function kT(){return Hz}const Xx="https://content-firebaseappcheck.googleapis.com/v1",Kz="exchangeDebugToken",mF={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Qz{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,he.Z)(function*(){t.stop();try{t.pending=new U.BH,yield function Yz(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new U.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const js=new U.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function tN(){return tN=(0,he.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const a={method:"POST",body:JSON.stringify(e),headers:r};let u,f;try{u=yield fetch(n,a)}catch(A){throw js.create("fetch-network-error",{originalErrorMessage:A?.message})}if(200!==u.status)throw js.create("fetch-status-error",{httpStatus:u.status});try{f=yield u.json()}catch(A){throw js.create("fetch-parse-error",{originalErrorMessage:A?.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw js.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(m[1]),b=Date.now();return{token:f.token,expireTimeMillis:b+v,issuedAtTimeMillis:b}}),tN.apply(this,arguments)}const n$="firebase-app-check-database",r$=1,$E="firebase-app-check-store";let LT=null;function nN(){return nN=(0,he.Z)(function*(n,e){const r=(yield function vF(){return LT||(LT=new Promise((n,e)=>{try{const t=indexedDB.open(n$,r$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(js.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore($E,{keyPath:"compositeKey"})}}catch(t){e(js.create("storage-open",{originalErrorMessage:t?.message}))}}),LT)}()).transaction($E,"readwrite"),a=r.objectStore($E).put({compositeKey:n,value:e});return new Promise((u,f)=>{a.onsuccess=m=>{u()},r.onerror=m=>{var v;f(js.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})}),nN.apply(this,arguments)}const HE=new Ns.Yd("@firebase/app-check");function sN(n,e){return(0,U.hl)()?function s$(n,e){return function wF(n,e){return nN.apply(this,arguments)}(function EF(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{HE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function aN(){return aN=(0,he.Z)(function*(){const n=kT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),aN.apply(this,arguments)}const d$={error:"UNKNOWN_ERROR"};function h$(n){return U.US.encodeString(JSON.stringify(n),!1)}function UT(n){return lN.apply(this,arguments)}function lN(){return lN=(0,he.Z)(function*(n,e=!1){const t=n.app;!function _F(n){if(!es(n).activated)throw js.create("use-before-activation",{appName:n.name})}(t);const r=es(t);let a,i=r.token;if(i&&!By(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(By(m)?i=m:yield sN(t,void 0))}if(!e&&i&&By(i))return{token:i.token};let f,u=!1;if(function CF(){return kT().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function eN(n,e){return tN.apply(this,arguments)}(function t$(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Xx}/projects/${t}/apps/${r}:${Kz}?key=${i}`,body:{debug_token:e}}}(t,yield function bF(){return aN.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const m=yield r.exchangeTokenPromise;return yield sN(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield es(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?HE.warn(m.message):HE.error(m),a=m}return i?a?f=By(i)?{token:i.token,internalError:a}:SF(a):(f={token:i.token},r.token=i,yield sN(t,i)):f=SF(a),u&&function TF(n,e){const t=es(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),lN.apply(this,arguments)}function cN(n,e){const t=es(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function DF(n){const{app:e}=n,t=es(e);let r=t.tokenRefresher;r||(r=function f$(n){const{app:e}=n;return new Qz((0,he.Z)(function*(){let r;if(r=es(e).token?yield UT(n,!0):yield UT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=es(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},mF.RETRIAL_MIN_WAIT,mF.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function By(n){return n.expireTimeMillis-Date.now()>0}function SF(n){return{token:h$(d$),error:n}}class p${constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=es(this.app);for(const t of e)cN(this.app,t.next);return Promise.resolve()}}const OF="app-check-internal";!function A$(){(0,Lr._registerComponent)(new oo.wA("app-check",n=>function g$(n,e){return new p$(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(OF).initialize()})),(0,Lr._registerComponent)(new oo.wA(OF,n=>function m$(n){return{getToken:e=>UT(n,e),addTokenListener:e=>function uN(n,e,t,r){const{app:i}=n,a=es(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&By(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),DF(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>DF(n))}(n,"INTERNAL",e),removeTokenListener:e=>cN(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Lr.registerVersion)("@firebase/app-check","0.6.4")}();class fd{constructor(){return(0,Tt.vb)("app-check")}}typeof window<"u"&&window;const gN=new d.InjectionToken("angularfire2.auth.use-emulator"),mN=new d.InjectionToken("angularfire2.auth.settings"),_N=new d.InjectionToken("angularfire2.auth.tenant-id"),yN=new d.InjectionToken("angularfire2.auth.langugage-code"),vN=new d.InjectionToken("angularfire2.auth.use-device-language"),wN=new d.InjectionToken("angularfire.auth.persistence"),IN=(n,e,t,r,i,a,u,f)=>(0,Yr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),u)for(const[v,b]of Object.entries(u))m.settings[v]=b;return f&&m.setPersistence(f),m},[t,r,i,a,u,f]);let Ng=(()=>{class n{constructor(t,r,i,a,u,f,m,v,b,A,x,j){const W=new pi.x,ce=vt(void 0).pipe((0,PT.Q)(u.outsideAngular),fr(()=>a.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,9568)))),(0,lt.U)(()=>(0,Yr.on)(t,a,r)),(0,lt.U)(_e=>IN(_e,a,f,v,b,A,m,x)),fF({bufferSize:1,refCount:!1}));if(Ed(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=vt(null);else{ce.pipe(Oo()).subscribe();const Ge=ce.pipe(fr(gt=>gt.getRedirectResult().then(Yt=>Yt,()=>null)),Tt.iC,fF({bufferSize:1,refCount:!1})),ft=ce.pipe(fr(gt=>new Wr.y(Yt=>({unsubscribe:a.runOutsideAngular(()=>gt.onAuthStateChanged(on=>Yt.next(on),on=>Yt.error(on),()=>Yt.complete()))})))),Je=ce.pipe(fr(gt=>new Wr.y(Yt=>({unsubscribe:a.runOutsideAngular(()=>gt.onIdTokenChanged(on=>Yt.next(on),on=>Yt.error(on),()=>Yt.complete()))}))));this.authState=Ge.pipe(pF(ft),(0,Zx.R)(u.outsideAngular),(0,PT.Q)(u.insideAngular)),this.user=Ge.pipe(pF(Je),(0,Zx.R)(u.outsideAngular),(0,PT.Q)(u.insideAngular)),this.idToken=this.user.pipe(fr(gt=>gt?(0,Wt.D)(gt.getIdToken()):vt(null))),this.idTokenResult=this.user.pipe(fr(gt=>gt?(0,Wt.D)(gt.getIdTokenResult()):vt(null))),this.credential=(0,Kx.T)(Ge,W,this.authState.pipe(Ms(gt=>!gt))).pipe((0,lt.U)(gt=>gt?.user?gt:null),(0,Zx.R)(u.outsideAngular),(0,PT.Q)(u.insideAngular))}return(0,Yr.pX)(this,ce,a,{spy:{apply:(_e,Ge,ft)=>{(_e.startsWith("signIn")||_e.startsWith("createUser"))&&ft.then(Je=>W.next(Je))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(Yr.Dh),d.\u0275\u0275inject(Yr.xv,8),d.\u0275\u0275inject(d.PLATFORM_ID),d.\u0275\u0275inject(d.NgZone),d.\u0275\u0275inject(Tt.HU),d.\u0275\u0275inject(gN,8),d.\u0275\u0275inject(mN,8),d.\u0275\u0275inject(_N,8),d.\u0275\u0275inject(yN,8),d.\u0275\u0275inject(vN,8),d.\u0275\u0275inject(wN,8),d.\u0275\u0275inject(fd,8))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),k$=(()=>{class n{constructor(){bh.Z.registerVersion("angularfire",Tt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({providers:[Ng]}),n})();function LF(n,e){return function O$(n,e=Mt.z){return new Wr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function EN(n,e){return LF(n,e).pipe((0,lt.U)(t=>({payload:t,type:"query"})))}function jT(n,e){return EN(n,e).pipe(ih(void 0),Hw(),(0,lt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,f)=>{const m=i.find(b=>b.doc.ref.isEqual(u.ref)),v=t?.payload.docs.find(b=>b.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),a}))}function UF(n,e,t){return jT(n,t).pipe(kc((r,i)=>function L$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function U$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return CN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return CN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return CN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),bb(),(0,lt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function CN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function VF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class jF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=jT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,lt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ih(void 0),Hw(),Ms(([r,i])=>i.length>0||!r),(0,lt.U)(([r,i])=>i),Tt.iC)}auditTrail(e){return this.stateChanges(e).pipe(kc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VF(e);return UF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tt.iC)}valueChanges(e={}){return EN(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Tt.iC)}get(e){return(0,Wt.D)(this.query.get(e)).pipe(Tt.iC)}add(e){return this.ref.add(e)}doc(e){return new BF(this.ref.doc(e),this.afs)}}class BF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=HF(r,t);return new jF(i,a,this.afs)}snapshotChanges(){return function F$(n,e){return LF(n,e).pipe(ih(void 0),Hw(),(0,lt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Tt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,lt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Wt.D)(this.ref.get(e)).pipe(Tt.iC)}}class V${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jT(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ms(t=>t.length>0),Tt.iC):jT(this.query,this.afs.schedulers.outsideAngular).pipe(Tt.iC)}auditTrail(e){return this.stateChanges(e).pipe(kc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VF(e);return UF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tt.iC)}valueChanges(e={}){return EN(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Tt.iC)}get(e){return(0,Wt.D)(this.query.get(e)).pipe(Tt.iC)}}const zF=new d.InjectionToken("angularfire2.enableFirestorePersistence"),$F=new d.InjectionToken("angularfire2.firestore.persistenceSettings"),j$=new d.InjectionToken("angularfire2.firestore.settings"),B$=new d.InjectionToken("angularfire2.firestore.use-emulator");function HF(n,e=(t=>t)){return{query:e(n),ref:n}}let bN=(()=>{class n{constructor(t,r,i,a,u,f,m,v,b,A,x,j,W,ce,_e,Ge,ft){this.schedulers=m;const Je=(0,Yr.on)(t,f,r),gt=b;A&&IN(Je,f,x,W,ce,_e,j,Ge),[this.firestore,this.persistenceEnabled$]=(0,Yr.cc)(`${Je.name}.firestore`,"AngularFirestore",Je.name,()=>{const Yt=f.runOutsideAngular(()=>Je.firestore());if(a&&Yt.settings(a),gt&&Yt.useEmulator(...gt),i&&!Ed(u)){const on=()=>{try{return(0,Wt.D)(Yt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Ri){return typeof console<"u"&&console.warn(Ri),vt(!1)}};return[Yt,f.runOutsideAngular(on)]}return[Yt,vt(!1)]},[a,gt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=HF(i,r),f=this.schedulers.ngZone.run(()=>a);return new jF(f,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new V$(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new BF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(Yr.Dh),d.\u0275\u0275inject(Yr.xv,8),d.\u0275\u0275inject(zF,8),d.\u0275\u0275inject(j$,8),d.\u0275\u0275inject(d.PLATFORM_ID),d.\u0275\u0275inject(d.NgZone),d.\u0275\u0275inject(Tt.HU),d.\u0275\u0275inject($F,8),d.\u0275\u0275inject(B$,8),d.\u0275\u0275inject(Ng,8),d.\u0275\u0275inject(gN,8),d.\u0275\u0275inject(mN,8),d.\u0275\u0275inject(_N,8),d.\u0275\u0275inject(yN,8),d.\u0275\u0275inject(vN,8),d.\u0275\u0275inject(wN,8),d.\u0275\u0275inject(fd,8))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),z$=(()=>{class n{constructor(){bh.Z.registerVersion("angularfire",Tt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:zF,useValue:!0},{provide:$F,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({providers:[bN]}),n})(),WE=(()=>{class n{constructor(t,r,i,a){this.database=t,this.auth=r,this.router=i,this.ngZone=a,this.userLoggedIn=!1,this.auth.authState.subscribe(u=>{this.userLoggedIn=!1,u?this.userLoggedIn=!0:(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")),this.userLoggedIn=!1),this.userRef=this.database.collection("users")})}SignIn(t,r){return this.auth.signInWithEmailAndPassword(t,r).then(()=>{console.log("Auth service: loginUser: success"),this.getUserData().then(()=>{this.router.navigate(["/map"])})}).catch(i=>(console.log("Auth service: login error..."),console.log("error code",i.code),console.log("error",i),i.code?{isValid:!1,message:i.message}:i.message))}SignUp(t){return this.auth.createUserWithEmailAndPassword(t.email,t.password).then(r=>{let i=t.email.toLowerCase();r.user?.sendEmailVerification(),this.SetUserData({uid:r.user.uid,firstName:t.firstName,lastName:t.lastName,email:i})}).catch(r=>r.code?{isValid:!1,message:r.message}:r.message)}SendVerificationMail(){return this.auth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}SetUserData(t){return this.database.doc(`users/${t.uid}`).set(t)}getUserData(){return bh.Z.firestore().collection("users").doc(bh.Z.auth().currentUser?.uid).get().then(t=>{t.exists&&(console.log(t.data()),this.user=t.data(),localStorage.setItem("user",JSON.stringify(t.data())),JSON.parse(localStorage.getItem("user")))}).catch(t=>{console.log("Error getting document:",t)})}SignOut(){return this.auth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(bN),d.\u0275\u0275inject(Ng),d.\u0275\u0275inject(Fr),d.\u0275\u0275inject(d.NgZone))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $$(n,e){1&n&&(d.\u0275\u0275elementStart(0,"p")(1,"small",14),d.\u0275\u0275text(2,"Password is required and should include Upper letter and number"),d.\u0275\u0275elementEnd()())}const H$=function(){return["/register-user"]};let WF=(()=>{class n{constructor(t,r){this.router=t,this.authService=r,this.firebaseErrorMessage=!1,this.signInForm=new zt({email:new su("",[Qi.required,Qi.email]),password:new su("",Qi.required)})}signIn(){this.authService.SignIn(this.signInForm.value.email,this.signInForm.value.password).then(t=>{null==t?console.log("login into..."):0==t.isValid&&(console.log("page reloaded"),this.firebaseErrorMessage=!0)}).catch(()=>{})}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(Fr),d.\u0275\u0275directiveInject(WE))},n.\u0275cmp=d.\u0275\u0275defineComponent({type:n,selectors:[["app-sign-in"]],decls:23,vars:4,consts:[[1,"form-signin"],[3,"formGroup","ngSubmit"],[1,"h3","mb-3","fw-normal","text-center"],[1,"form-floating","mb-4"],["type","email","placeholder","name@example.com","formControlName","email","required","",1,"form-control"],["for","floatingInput"],["type","password","placeholder","Password","formControlName","password","required","",1,"form-control"],["for","floatingPassword"],[4,"ngIf"],[1,"checkbox","mb-3"],["type","checkbox",1,"form-check-input"],["type","submit",1,"w-100","btn","btn-lg"],[1,"mt-4","text-align-center"],[3,"routerLink"],[1,"text-danger"]],template:function(t,r){if(1&t&&(d.\u0275\u0275elementStart(0,"main",0)(1,"form",1),d.\u0275\u0275listener("ngSubmit",function(){return r.signIn()}),d.\u0275\u0275elementStart(2,"h1",2),d.\u0275\u0275text(3,"Please sign in"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"div",3),d.\u0275\u0275element(5,"input",4),d.\u0275\u0275elementStart(6,"label",5),d.\u0275\u0275text(7,"Email address"),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(8,"div",3),d.\u0275\u0275element(9,"input",6),d.\u0275\u0275elementStart(10,"label",7),d.\u0275\u0275text(11,"Password"),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(12,$$,3,0,"p",8),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(13,"div",9)(14,"label"),d.\u0275\u0275element(15,"input",10),d.\u0275\u0275text(16," Remember me "),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(17,"button",11),d.\u0275\u0275text(18,"Sign in"),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(19,"p",12),d.\u0275\u0275text(20,"New to NearMe? "),d.\u0275\u0275elementStart(21,"a",13),d.\u0275\u0275text(22,"Create an account "),d.\u0275\u0275elementEnd()()()),2&t){let i;d.\u0275\u0275advance(1),d.\u0275\u0275property("formGroup",r.signInForm),d.\u0275\u0275advance(11),d.\u0275\u0275property("ngIf",(null==(i=r.signInForm.get("password"))?null:i.invalid)&&(null==(i=r.signInForm.get("password"))?null:i.touched)),d.\u0275\u0275advance(9),d.\u0275\u0275property("routerLink",d.\u0275\u0275pureFunction0(3,H$))}},dependencies:[jr,yu,Em,ct,Cc,jf,Kf,Gf,bm],styles:[".form-signin[_ngcontent-%COMP%]{width:30%;margin:4rem auto;height:500px}.btn[_ngcontent-%COMP%]{background-color:var(--main-color);color:#fff}.form-check-input[_ngcontent-%COMP%]:checked{background-color:var(--main-color)}@media only screen and (max-width: 768px){.form-signin[_ngcontent-%COMP%]{width:60%;height:500px;margin:2rem auto}}@media only screen and (max-width: 425px){.form-signin[_ngcontent-%COMP%]{width:90%}.banklogin[_ngcontent-%COMP%]{font-size:1rem}}"]}),n})(),W$=(()=>{class n{constructor(t){this.router=t}goTo(){this.router.navigate(["map"])}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(Fr))},n.\u0275cmp=d.\u0275\u0275defineComponent({type:n,selectors:[["app-main"]],decls:1,vars:0,template:function(t,r){1&t&&d.\u0275\u0275element(0,"app-sign-in")},dependencies:[WF],styles:[".form-signin[_ngcontent-%COMP%]{width:30%;margin:4rem auto;height:500px}.btn[_ngcontent-%COMP%]{background-color:var(--main-color);color:#fff}.form-check-input[_ngcontent-%COMP%]:checked{background-color:var(--main-color)}@media only screen and (max-width: 768px){.form-signin[_ngcontent-%COMP%]{width:60%;height:500px;margin:2rem auto}}@media only screen and (max-width: 425px){.form-signin[_ngcontent-%COMP%]{width:90%}.banklogin[_ngcontent-%COMP%]{font-size:1rem}}"]}),n})();function G$(n,e){1&n&&(d.\u0275\u0275elementStart(0,"li"),d.\u0275\u0275element(1,"i",16),d.\u0275\u0275elementEnd())}function q$(n,e){if(1&n&&(d.\u0275\u0275elementStart(0,"div",12)(1,"p",13),d.\u0275\u0275text(2),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(3,"ul",14),d.\u0275\u0275template(4,G$,2,0,"li",15),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(5,"p",13),d.\u0275\u0275text(6),d.\u0275\u0275elementEnd()()),2&n){const t=d.\u0275\u0275nextContext().$implicit;d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(t.rating),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngForOf",t.ratingArray),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1("(",t.user_ratings_total,")")}}function K$(n,e){if(1&n&&(d.\u0275\u0275elementStart(0,"span",17),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),2&n){const t=e.$implicit;d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",t," ")}}function Z$(n,e){if(1&n){const t=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"div",6)(3,"h5",7),d.\u0275\u0275text(4),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(5,"i",8),d.\u0275\u0275listener("click",function(){const a=d.\u0275\u0275restoreView(t).$implicit,u=d.\u0275\u0275nextContext(2);return d.\u0275\u0275resetView(u.addToFavorites(a))}),d.\u0275\u0275elementEnd()(),d.\u0275\u0275template(6,q$,7,3,"div",9),d.\u0275\u0275elementStart(7,"div",10),d.\u0275\u0275template(8,K$,2,1,"span",11),d.\u0275\u0275elementEnd()()()}if(2&n){const t=e.$implicit;d.\u0275\u0275advance(4),d.\u0275\u0275textInterpolate(t.name),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",t.rating),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngForOf",t.types)}}function Q$(n,e){if(1&n&&(d.\u0275\u0275elementStart(0,"div",2),d.\u0275\u0275template(1,Z$,9,3,"div",3),d.\u0275\u0275elementEnd()),2&n){const t=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275property("ngForOf",t.placesList)}}function Y$(n,e){1&n&&(d.\u0275\u0275elementStart(0,"div",18),d.\u0275\u0275element(1,"i",19),d.\u0275\u0275elementStart(2,"div"),d.\u0275\u0275text(3,"No places found"),d.\u0275\u0275elementEnd()())}let X$=(()=>{class n{constructor(){this.placesList=[]}addToFavorites(t){console.log(t)}ngOnChanges(t){for(let r=0;r<t.placesList.currentValue.length;r++){let i=t.placesList.currentValue[r];if(i.rating){let a=[],u=Math.round(i.rating);for(let f=0;f<u;f++)a.push(f);i.ratingArray=a}}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.\u0275\u0275defineComponent({type:n,selectors:[["app-list"]],inputs:{placesList:"placesList"},features:[d.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["class","d-flex flex-column gap-3",4,"ngIf","ngIfElse"],["noPlaces",""],[1,"d-flex","flex-column","gap-3"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-body"],[1,"d-flex","flex-row","justify-content-between"],[1,"card-title"],[1,"heart","bi","bi-heart",3,"click"],["class","d-flex flex-row gap-2",4,"ngIf"],[1,"d-flex","gap-1","flex-wrap"],["class","badge text-bg-secondary",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","gap-2"],[1,"text-secondary"],[1,"d-flex","flex-row","text-warning","list-unstyled"],[4,"ngFor","ngForOf"],[1,"bi","bi-star-fill"],[1,"badge","text-bg-secondary"],["role","alert",1,"alert","alert-primary","d-flex","gap-2","align-items-center"],[1,"bi","bi-exclamation-triangle-fill"]],template:function(t,r){if(1&t&&(d.\u0275\u0275template(0,Q$,2,1,"div",0),d.\u0275\u0275template(1,Y$,4,0,"ng-template",null,1,d.\u0275\u0275templateRefExtractor)),2&t){const i=d.\u0275\u0275reference(2);d.\u0275\u0275property("ngIf",r.placesList.length)("ngIfElse",i)}},dependencies:[Ln,jr],styles:[".heart[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.heart[_ngcontent-%COMP%]:hover{color:#f08080}"]}),n})();function J$(n,e){if(1&n){const t=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",4)(1,"div",5),d.\u0275\u0275element(2,"img",6),d.\u0275\u0275elementStart(3,"div",7)(4,"h5",8),d.\u0275\u0275text(5),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(6,"p",9),d.\u0275\u0275text(7),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(8,"div",10),d.\u0275\u0275element(9,"i",11)(10,"i",11)(11,"i",11)(12,"i",11)(13,"i",11),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(14,"button",12),d.\u0275\u0275listener("click",function(){const a=d.\u0275\u0275restoreView(t).$implicit,u=d.\u0275\u0275nextContext(2);return d.\u0275\u0275resetView(u.removeFavorite(a.title))}),d.\u0275\u0275element(15,"i",13),d.\u0275\u0275text(16," Delete "),d.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.$implicit;d.\u0275\u0275advance(2),d.\u0275\u0275property("src",t.img,d.\u0275\u0275sanitizeUrl),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate(t.title),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(t.description)}}function eH(n,e){if(1&n&&(d.\u0275\u0275elementStart(0,"section",2),d.\u0275\u0275template(1,J$,17,3,"div",3),d.\u0275\u0275elementEnd()),2&n){const t=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275property("ngForOf",t.favorites)}}function tH(n,e){1&n&&(d.\u0275\u0275elementStart(0,"div",14),d.\u0275\u0275element(1,"i",15),d.\u0275\u0275elementStart(2,"div",16),d.\u0275\u0275text(3,"No favorites found"),d.\u0275\u0275elementEnd()())}let GF=(()=>{class n{constructor(){this.favorites=[{img:"https://source.unsplash.com/random/?restaurant/300x100",title:"Title 1",description:"Description about place here",address:"Address 5 16A"},{img:"https://source.unsplash.com/random/?bar/300x100",title:"Title 2",description:"Description about place here",address:"Address 5 16A"},{img:"https://source.unsplash.com/random/?restaurant/",title:"Title 3",description:"Description about place here",address:"Address 5 16A"},{img:"https://source.unsplash.com/random/?restaurant/300x100",title:"Title 4",description:"Description about place here",address:"Address 5 16A"},{img:"https://source.unsplash.com/random/?bar/300x100",title:"Title 5",description:"Description about place here",address:"Address 5 16A"},{img:"https://source.unsplash.com/random",title:"Title 6",description:"Description about place here",address:"Address 5 16A"}],this.isVisable=!1}removeFavorite(t){this.favorites=this.favorites.filter(r=>r.title!==t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.\u0275\u0275defineComponent({type:n,selectors:[["app-favorite"]],decls:3,vars:2,consts:[["class","row overflow-auto",4,"ngIf","ngIfElse"],["noFavorites",""],[1,"row","overflow-auto"],["class","col-12 col-md-6 col-xl-4 col-xxl-3",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-xl-4","col-xxl-3"],[1,"card","mb-3"],["alt","Favorite place image",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"stars"],[1,"bi","bi-star-fill"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash3-fill"],["role","alert",1,"alert","alert-primary","d-flex","gap-2","align-items-center"],[1,"bi","bi-exclamation-triangle-fill"],[1,"no-favorites"]],template:function(t,r){if(1&t&&(d.\u0275\u0275template(0,eH,2,1,"section",0),d.\u0275\u0275template(1,tH,4,0,"ng-template",null,1,d.\u0275\u0275templateRefExtractor)),2&t){const i=d.\u0275\u0275reference(2);d.\u0275\u0275property("ngIf",r.favorites.length)("ngIfElse",i)}},dependencies:[Ln,jr],styles:[".row[_ngcontent-%COMP%]{height:600px}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;max-height:150px}.stars[_ngcontent-%COMP%]{margin-bottom:1rem}.bi-star-fill[_ngcontent-%COMP%]{color:#ff904d}"]}),n})();function nH(n,e){1&n&&d.\u0275\u0275element(0,"app-favorite")}const rH=function(){return{background:"white",color:"white",border:"1px solid black"}},iH=function(){return{background:"white",color:"black"}};let sH=(()=>{class n{constructor(t){this.httpClient=t,this.isVisible=!1,this.geocoder=new google.maps.Geocoder,this.options={mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!0,disableDefaultUI:!0,disableDoubleClickZoom:!0,center:{lat:60.18608603539844,lng:24.943128762153208},zoom:15},this.placesResult=[]}ngOnInit(){this.map=new google.maps.Map(document.getElementById("map"),this.options),this.service=new google.maps.places.PlacesService(this.map),this.infoWindow=new google.maps.InfoWindow}reset(){this.map=new google.maps.Map(document.getElementById("map"),this.options)}showPlaces(t){this.reset(),this.service.nearbySearch({type:t,radius:1500,location:this.options.center},(i,a)=>{if(a===google.maps.places.PlacesServiceStatus.OK&&null!==i){console.log(i),this.placesResult=i;for(let u=0;u<i.length;u++){const f=i[u],m=new google.maps.Marker({position:i[u].geometry?.location,map:this.map});google.maps.event.addListener(m,"click",()=>this.showInfo(f,m))}}})}showInfo(t,r){this.service.getDetails({placeId:t.place_id,fields:["name","formatted_address","photos","rating","opening_hours","icon"]},(a,u)=>{if(u!==google.maps.places.PlacesServiceStatus.OK||null===a)return;console.log(a);const f=document.createElement("div");f.style.width="200px";const m=document.createElement("h4");if(m.textContent=a.name,f.appendChild(m),a.photos){const x=document.createElement("img");x.src=a.photos[0].getUrl(),f.appendChild(x),x.style.width="100%",x.style.marginBottom="5px"}const v=document.createElement("p");v.textContent=a.formatted_address,f.appendChild(v);const b=document.createElement("p");if(b.textContent="Rating: "+a.rating.toString(),b.style.fontWeight="bold",f.appendChild(b),a.opening_hours){const x=document.createElement("div");a.opening_hours.weekday_text.forEach(j=>{let W=document.createElement("p");W.textContent+=j,x.appendChild(W)}),f.appendChild(x)}const A=document.createElement("a");A.id="toggle-heart",A.textContent="\u2764",A.style.fontSize="20px",A.style.color="lightgray",A.addEventListener("click",()=>{A.style.color="red"}),f.appendChild(A),this.infoWindow.setContent(f),this.infoWindow.open(this.map,r)})}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(km))},n.\u0275cmp=d.\u0275\u0275defineComponent({type:n,selectors:[["app-map"]],decls:70,vars:6,consts:[[1,"mobile-dropdown"],[1,"dropdown","d-flex","align-items-center","gap-2"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary-outline","dropdown-toggle","ms-1","w-50"],[1,"dropdown-menu"],["type","button",1,"btn","btn-outline-secondary","dropdown-item",3,"click"],[1,"bi","bi-menu-up"],["type","button",1,"btn","btn-outline-secondary","dropdown-item"],[1,"bi","bi-bank2"],[1,"bi","bi-film"],[1,"bi","bi-bank"],[1,"bi","bi-tree"],[1,"bi","bi-shop"],[1,"map-box"],[1,"filters-box"],[1,"d-flex","flex-wrap","filters"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"show-list-btn"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasWithBothOptions","aria-controls","offcanvasWithBothOptions",1,"btn","rounded-start","shadow-lg",3,"ngStyle"],[1,"bi","bi-arrow-bar-right",3,"ngStyle"],["data-bs-scroll","true","tabindex","-1","id","offcanvasWithBothOptions","aria-labelledby","offcanvasWithBothOptionsLabel",1,"offcanvas","offcanvas-start"],[1,"offcanvas-header"],["id","offcanvasWithBothOptionsLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close"],[1,"offcanvas-body"],[3,"placesList"],["id","map"],[4,"ngIf"]],template:function(t,r){1&t&&(d.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"button",2),d.\u0275\u0275text(3," filters for searching "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"ul",3)(5,"li")(6,"button",4),d.\u0275\u0275listener("click",function(){return r.isVisible=!r.isVisible}),d.\u0275\u0275elementStart(7,"i",5),d.\u0275\u0275text(8," \xa0"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(9,"Restaurants "),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(10,"li")(11,"button",6)(12,"i",7),d.\u0275\u0275text(13," \xa0"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(14,"Musems "),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(15,"li")(16,"button",6)(17,"i",8),d.\u0275\u0275text(18,"\xa0"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(19,"Cinema "),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(20,"li")(21,"button",6)(22,"i",9),d.\u0275\u0275text(23,"\xa0"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(24,"Theatres "),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(25,"li")(26,"button",6)(27,"i",10),d.\u0275\u0275text(28,"\xa0"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(29,"Parks "),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(30,"li")(31,"button",6)(32,"i",11),d.\u0275\u0275text(33,"\xa0"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(34,"Shops "),d.\u0275\u0275elementEnd()()()()(),d.\u0275\u0275elementStart(35,"section",12)(36,"div",13)(37,"div",14)(38,"button",15),d.\u0275\u0275listener("click",function(){return r.showPlaces("restaurant")}),d.\u0275\u0275elementStart(39,"i",5),d.\u0275\u0275text(40," \xa0"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(41,"Restaurants "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(42,"button",15),d.\u0275\u0275listener("click",function(){return r.showPlaces("museum")}),d.\u0275\u0275elementStart(43,"i",7),d.\u0275\u0275text(44," \xa0"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(45,"Musems "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(46,"button",15),d.\u0275\u0275listener("click",function(){return r.showPlaces("cinema")}),d.\u0275\u0275elementStart(47,"i",8),d.\u0275\u0275text(48,"\xa0"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(49,"Cinema "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(50,"button",15),d.\u0275\u0275listener("click",function(){return r.showPlaces("theatre")}),d.\u0275\u0275elementStart(51,"i",9),d.\u0275\u0275text(52,"\xa0"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(53,"Theatres "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(54,"button",15),d.\u0275\u0275listener("click",function(){return r.showPlaces("park")}),d.\u0275\u0275elementStart(55,"i",10),d.\u0275\u0275text(56,"\xa0"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(57,"Parks "),d.\u0275\u0275elementEnd()()(),d.\u0275\u0275elementStart(58,"div",16)(59,"button",17),d.\u0275\u0275element(60,"i",18),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(61,"div",19)(62,"div",20)(63,"h5",21),d.\u0275\u0275text(64," Places of interest "),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(65,"button",22),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(66,"div",23),d.\u0275\u0275element(67,"app-list",24),d.\u0275\u0275elementEnd()()(),d.\u0275\u0275element(68,"div",25),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(69,nH,1,0,"app-favorite",26)),2&t&&(d.\u0275\u0275advance(59),d.\u0275\u0275property("ngStyle",d.\u0275\u0275pureFunction0(4,rH)),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngStyle",d.\u0275\u0275pureFunction0(5,iH)),d.\u0275\u0275advance(7),d.\u0275\u0275property("placesList",r.placesResult),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",r.isVisible))},dependencies:[jr,Vn,X$,GF],styles:["main[_ngcontent-%COMP%]{margin-top:-3%}#map[_ngcontent-%COMP%]{width:100%;height:750px}.map-box[_ngcontent-%COMP%]{position:relative}.filters-box[_ngcontent-%COMP%]{position:absolute;top:2%;z-index:1;margin:.5em}.filters[_ngcontent-%COMP%]{gap:1.5rem}.btn[_ngcontent-%COMP%]:hover{background-color:#fff;color:var(--main-text);border:1px solid var(--main-text)}.btn[_ngcontent-%COMP%]{background:#aaa7a4;padding:.7em;border-radius:1rem;border:none;color:#fff;font-weight:500}.mobile-dropdown[_ngcontent-%COMP%]{display:none}.dropdown-menu[_ngcontent-%COMP%]{background:none;border:none}.dropdown-item[_ngcontent-%COMP%]{margin-bottom:.5em}@media only screen and (max-width: 768px){.filters[_ngcontent-%COMP%]{gap:.8em 2.3rem;margin-bottom:.5em}}@media only screen and (max-width: 425px){.filters-box[_ngcontent-%COMP%]{display:none}.mobile-dropdown[_ngcontent-%COMP%]{display:block;position:absolute;top:15%;z-index:1;width:100%}}.show-list-btn[_ngcontent-%COMP%]{position:absolute;top:30%;z-index:20}"]}),n})();function oH(n,e){1&n&&(d.\u0275\u0275elementStart(0,"p")(1,"small",14),d.\u0275\u0275text(2,"login or password is incorrect, please try again."),d.\u0275\u0275elementEnd()())}const aH=[{path:"",component:W$},{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:WF},{path:"register-user",component:(()=>{class n{constructor(t,r){this.router=t,this.authService=r,this.firebaseErrorMessage=!1}ngOnInit(){this.signUpForm=new zt({firstName:new su("",[Qi.required]),lastName:new su("",[Qi.required]),email:new su("",[Qi.required,Qi.email]),password:new su("",Qi.pattern(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/))})}signUp(){this.authService.SignUp(this.signUpForm.value).then(t=>(null==t&&this.router.navigate(["map"]),rh(()=>new Error("Failed login")))).catch(()=>{})}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(Fr),d.\u0275\u0275directiveInject(WE))},n.\u0275cmp=d.\u0275\u0275defineComponent({type:n,selectors:[["app-sign-up"]],decls:27,vars:2,consts:[[1,"form-signUp"],[3,"formGroup","ngSubmit"],[1,"h3","mb-3","fw-normal","text-center"],[1,"form-floating","mb-4"],["type","text","placeholder","enter you first name","required","","formControlName","firstName",1,"form-control"],["for","floatingInput"],["type","text","placeholder","enter you last name","required","","formControlName","lastName",1,"form-control"],["type","email","placeholder","name@example.com","required","","formControlName","email",1,"form-control"],["type","password","placeholder","Password","required","","formControlName","password",1,"form-control"],["for","floatingPassword"],[4,"ngIf"],[1,"checkbox","mb-3"],["type","checkbox",1,"form-check-input"],["type","submit","value","Sign Up",1,"w-100","btn","btn-lg"],[1,"text-danger"]],template:function(t,r){1&t&&(d.\u0275\u0275elementStart(0,"main",0)(1,"form",1),d.\u0275\u0275listener("ngSubmit",function(){return r.signUp()}),d.\u0275\u0275elementStart(2,"h1",2),d.\u0275\u0275text(3,"Please fill in the form below."),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"div",3),d.\u0275\u0275element(5,"input",4),d.\u0275\u0275elementStart(6,"label",5),d.\u0275\u0275text(7,"First name"),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(8,"div",3),d.\u0275\u0275element(9,"input",6),d.\u0275\u0275elementStart(10,"label",5),d.\u0275\u0275text(11,"Last name"),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(12,"div",3),d.\u0275\u0275element(13,"input",7),d.\u0275\u0275elementStart(14,"label",5),d.\u0275\u0275text(15,"Email address"),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(16,"div",3),d.\u0275\u0275element(17,"input",8),d.\u0275\u0275elementStart(18,"label",9),d.\u0275\u0275text(19,"Password"),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(20,oH,3,0,"p",10),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(21,"div",11)(22,"label"),d.\u0275\u0275element(23,"input",12),d.\u0275\u0275text(24," Remember me "),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(25,"button",13),d.\u0275\u0275text(26," Sign up "),d.\u0275\u0275elementEnd()()()),2&t&&(d.\u0275\u0275advance(1),d.\u0275\u0275property("formGroup",r.signUpForm),d.\u0275\u0275advance(19),d.\u0275\u0275property("ngIf",r.firebaseErrorMessage))},dependencies:[jr,Em,ct,Cc,jf,Kf,Gf,bm],styles:[".form-signUp[_ngcontent-%COMP%]{width:30%;margin:4rem auto;height:500px}.btn[_ngcontent-%COMP%]{background-color:var(--signUp-btn);color:#fff}.form-check-input[_ngcontent-%COMP%]:checked{background-color:var(--signUp-btn)}@media only screen and (max-width: 768px){.form-signUp[_ngcontent-%COMP%]{width:60%;height:500px;margin:2rem auto}}@media only screen and (max-width: 425px){.form-signUp[_ngcontent-%COMP%]{width:90%}.banklogin[_ngcontent-%COMP%]{font-size:1rem}}"]}),n})()},{path:"map",component:sH,canActivate:[(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.auth=i}canActivate(t,r){return new Promise((i,a)=>{this.auth.onAuthStateChanged(u=>{u?i(!0):(console.log("Auth Guard: user is not logged in"),this.router.navigate(["sign-in"]),i(!1))})})}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(WE),d.\u0275\u0275inject(Fr),d.\u0275\u0275inject(Ng))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"favorite",component:GF}];let lH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({imports:[vu.forRoot(aH),vu]}),n})();const cH=function(){return{height:"60px",width:"100px"}},dH=function(){return{height:"30px",width:"30px"}};function hH(n,e){if(1&n&&(d.\u0275\u0275elementStart(0,"div",3),d.\u0275\u0275element(1,"img",4),d.\u0275\u0275elementStart(2,"small",5),d.\u0275\u0275text(3),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"div",5)(5,"small"),d.\u0275\u0275text(6),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(7," | "),d.\u0275\u0275elementStart(8,"small"),d.\u0275\u0275text(9),d.\u0275\u0275elementEnd()()()),2&n){const t=e.$implicit,r=d.\u0275\u0275nextContext(2);d.\u0275\u0275property("ngStyle",d.\u0275\u0275pureFunction0(6,cH)),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngStyle",d.\u0275\u0275pureFunction0(7,dH))("src",t.weather[0].icon,d.\u0275\u0275sanitizeUrl),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(r.weatherInfo.city),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate1("",t.main.temp,"\xb0C"),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate(t.dt_txt)}}function fH(n,e){if(1&n&&(d.\u0275\u0275elementStart(0,"div",1),d.\u0275\u0275template(1,hH,10,8,"div",2),d.\u0275\u0275elementEnd()),2&n){const t=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275property("ngForOf",t.weatherInfo.weatherArr)}}let pH=(()=>{class n{constructor(t){this.http=t,this.weatherInfo={},this.WEATHER_API_URL="https://api.openweathermap.org/data/2.5/forecast?lat=60.18608603539844&lon=24.943128762153208&appid=ae0a31a747487f3744e21f7ae5453893&units=metric"}ngOnInit(){this.getWeather()}getWeather(){this.http.get(this.WEATHER_API_URL).subscribe(t=>{const r=t.city.name,i=t.list.slice(0,10);for(let a=0;a<i.length;a++){const u=i[a];u.main.temp=Math.round(u.main.temp),u.weather[0].icon=`https://openweathermap.org/img/w/${u.weather[0].icon}.png`,u.dt_txt=u.dt_txt.slice(10,16)}this.weatherInfo={city:r,weatherArr:i}})}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(km))},n.\u0275cmp=d.\u0275\u0275defineComponent({type:n,selectors:[["app-weather"]],decls:1,vars:1,consts:[["class","row flex-nowrap overflow-auto gap-2 p-1 m-1",4,"ngIf"],[1,"row","flex-nowrap","overflow-auto","gap-2","p-1","m-1"],["class","text-center p-0 bg-light rounded",3,"ngStyle",4,"ngFor","ngForOf"],[1,"text-center","p-0","bg-light","rounded",3,"ngStyle"],["alt","weather icon",3,"ngStyle","src"],[1,"mb-0"]],template:function(t,r){1&t&&d.\u0275\u0275template(0,fH,2,1,"div",0),2&t&&d.\u0275\u0275property("ngIf",r.weatherInfo)},dependencies:[Ln,jr,Vn]}),n})();function gH(n,e){1&n&&(d.\u0275\u0275elementStart(0,"button",11),d.\u0275\u0275text(1," Sign-up "),d.\u0275\u0275elementEnd())}const mH=function(){return["/sign-in"]};function _H(n,e){1&n&&(d.\u0275\u0275elementStart(0,"button",12),d.\u0275\u0275text(1," Sign-in "),d.\u0275\u0275elementEnd()),2&n&&d.\u0275\u0275property("routerLink",d.\u0275\u0275pureFunction0(1,mH))}const yH=function(){return{background:"none",color:"rgb(121, 83, 178)"}};function vH(n,e){1&n&&(d.\u0275\u0275elementStart(0,"div",13)(1,"button",14),d.\u0275\u0275element(2,"i",15),d.\u0275\u0275elementEnd()()),2&n&&(d.\u0275\u0275advance(1),d.\u0275\u0275property("ngStyle",d.\u0275\u0275pureFunction0(1,yH)))}function wH(n,e){1&n&&(d.\u0275\u0275elementStart(0,"div",16),d.\u0275\u0275element(1,"app-weather"),d.\u0275\u0275elementEnd())}const IH=function(){return[""]};function EH(n,e){if(1&n){const t=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"article",17)(1,"a",18),d.\u0275\u0275element(2,"i",19),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(3,"ul",20)(4,"li")(5,"a",21),d.\u0275\u0275text(6),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(7,"li"),d.\u0275\u0275element(8,"hr",22),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(9,"li")(10,"a",23),d.\u0275\u0275listener("click",function(){d.\u0275\u0275restoreView(t);const i=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(i.authService.SignOut())}),d.\u0275\u0275text(11,"Sign out"),d.\u0275\u0275elementEnd()()()()}if(2&n){const t=d.\u0275\u0275nextContext();d.\u0275\u0275advance(6),d.\u0275\u0275textInterpolate1(" Hello, ",null==t.currentUser?null:t.currentUser.firstName,""),d.\u0275\u0275advance(4),d.\u0275\u0275property("routerLink",d.\u0275\u0275pureFunction0(2,IH))}}let CH=(()=>{class n{constructor(t,r,i){this.authService=t,this.auth=r,this.database=i,this.imgUrl="assets/logoNM2.png",this.randomPhoto="https://source.unsplash.com/random/?restaurant/300x100",this.isLogged=!1}ngOnInit(){let t=JSON.parse(localStorage.getItem("user"));this.currentUser=t,this.updateUser()}updateUser(){setInterval(()=>{let t=JSON.parse(localStorage.getItem("user"));this.currentUser=t,console.log(this.currentUser)},3e4)}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275directiveInject(WE),d.\u0275\u0275directiveInject(Ng),d.\u0275\u0275directiveInject(bN))},n.\u0275cmp=d.\u0275\u0275defineComponent({type:n,selectors:[["app-header"]],decls:16,vars:14,consts:[[1,"d-flex","align-items-center","justify-content-between","border-bottom"],["href","/",1,"mb-2","mt-2","text-decoration-none"],["alt","Near me logo",1,"logo",3,"src"],[1,"col-md-3","text-end"],["type","button","class","btn signUp-btn",4,"ngIf"],["type","button","class","btn",3,"routerLink",4,"ngIf"],["class","d-md-none",4,"ngIf"],["class","laptop-weather overflow-auto d-none d-md-block",4,"ngIf"],["class","dropdown text-end",4,"ngIf"],["id","collapseWeather",1,"collapse","d-md-none"],[1,"overflow-auto"],["type","button",1,"btn","signUp-btn"],["type","button",1,"btn",3,"routerLink"],[1,"d-md-none"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseWeather","aria-expanded","false","aria-controls","collapseWeather",1,"btn",3,"ngStyle"],[1,"bi","bi-cloud-fill"],[1,"laptop-weather","overflow-auto","d-none","d-md-block"],[1,"dropdown","text-end"],["data-bs-toggle","dropdown","aria-expanded","false",1,"d-block","link-dark","text-decoration-none","dropdown-toggle"],[1,"bi","bi-person-circle"],["aria-labelledby","dropdownUser1",1,"dropdown-menu","text-small"],[1,"dropdown-item"],[1,"dropdown-divider"],["href","#",1,"dropdown-item",3,"routerLink","click"]],template:function(t,r){1&t&&(d.\u0275\u0275elementStart(0,"header",0)(1,"a",1),d.\u0275\u0275element(2,"img",2),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(3,"div",3),d.\u0275\u0275template(4,gH,2,0,"button",4),d.\u0275\u0275template(5,_H,2,2,"button",5),d.\u0275\u0275pipe(6,"async"),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(7,vH,3,2,"div",6),d.\u0275\u0275pipe(8,"async"),d.\u0275\u0275template(9,wH,2,0,"div",7),d.\u0275\u0275pipe(10,"async"),d.\u0275\u0275template(11,EH,12,3,"article",8),d.\u0275\u0275pipe(12,"async"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(13,"div",9)(14,"div",10),d.\u0275\u0275element(15,"app-weather"),d.\u0275\u0275elementEnd()()),2&t&&(d.\u0275\u0275advance(2),d.\u0275\u0275property("src",r.imgUrl,d.\u0275\u0275sanitizeUrl),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",r.isLogged),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!d.\u0275\u0275pipeBind1(6,6,r.auth.user)),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",d.\u0275\u0275pipeBind1(8,8,r.auth.user)),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",d.\u0275\u0275pipeBind1(10,10,r.auth.user)),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",d.\u0275\u0275pipeBind1(12,12,r.auth.user)))},dependencies:[jr,Vn,yu,pH,$i],styles:["header[_ngcontent-%COMP%]{margin-top:1rem;height:80px}.logo[_ngcontent-%COMP%]{width:25%}a[_ngcontent-%COMP%]{width:50%;margin:1rem}.signUp-btn[_ngcontent-%COMP%]{background-color:var(--signUp-btn);color:#fff}.btn[_ngcontent-%COMP%]{background-color:var(--main-color);color:#fff}.text-end[_ngcontent-%COMP%]{margin:1rem}.bi-person-circle[_ngcontent-%COMP%], .bi-cloud-fill[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--main-color)}.dropdown-toggle[_ngcontent-%COMP%]:after{color:var(--main-color)}@media only screen and (max-width: 768px){.bi-person-circle[_ngcontent-%COMP%], .bi-cloud-fill[_ngcontent-%COMP%]{font-size:2rem}.dropdown-toggle[_ngcontent-%COMP%]:after{font-size:2rem}.logo[_ngcontent-%COMP%]{width:50%}}@media only screen and (max-width: 425px){header[_ngcontent-%COMP%]{margin-top:.8em}.logo[_ngcontent-%COMP%]{width:90%;margin-bottom:1rem}}.laptop-weather[_ngcontent-%COMP%]{max-width:400px}"]}),n})();const bH=function(){return["map"]};let DH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.\u0275\u0275defineComponent({type:n,selectors:[["app-footer"]],decls:15,vars:2,consts:[["id","footer",1,"footer"],[1,"d-flex","align-items-center","justify-content-center"],[1,"nav","col-12","my-2","justify-content-around","my-md-0"],[1,"d-flex","flex-column","gap-4"],[1,"links","nav-link","d-flex","flex-column","align-items-center",3,"routerLink"],[1,"bi","bi-map"],["href","#",1,"links","nav-link","d-flex","flex-column","align-items-center"],[1,"bi","bi-list"],["routerLink","/favorite",1,"links","nav-link","d-flex","flex-column","align-items-center"],[1,"bi","bi-heart"]],template:function(t,r){1&t&&(d.\u0275\u0275elementStart(0,"footer",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4),d.\u0275\u0275element(5,"i",5),d.\u0275\u0275text(6," Map "),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(7,"li",3)(8,"a",6),d.\u0275\u0275element(9,"i",7),d.\u0275\u0275text(10," List "),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(11,"li",3)(12,"a",8),d.\u0275\u0275element(13,"i",9),d.\u0275\u0275text(14," Favorite "),d.\u0275\u0275elementEnd()()()()()),2&t&&(d.\u0275\u0275advance(4),d.\u0275\u0275property("routerLink",d.\u0275\u0275pureFunction0(1,bH)))},dependencies:[yu],styles:[".footer[_ngcontent-%COMP%]{border-top:1px solid rgb(164,164,164)}.links[_ngcontent-%COMP%]{color:gray;font-size:1.2rem;font-weight:700}.links[_ngcontent-%COMP%]:hover{color:var(--main-color)}.bi[_ngcontent-%COMP%]{font-size:1.8rem}"]}),n})(),TH=(()=>{class n{constructor(){this.title="nearMe"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.\u0275\u0275defineComponent({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(d.\u0275\u0275elementStart(0,"section",0),d.\u0275\u0275element(1,"app-header")(2,"router-outlet")(3,"app-footer"),d.\u0275\u0275elementEnd())},dependencies:[ml,CH,DH],styles:[".container[_ngcontent-%COMP%]{margin:0 auto;padding:0}"]}),n})();var qF=V(5032);let HH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({}),n})();const JF="firebasestorage.googleapis.com",eL="storageBucket";class Ar extends U.ZR{constructor(e,t,r=0){super(TN(e),`Firebase Storage: ${t} (${TN(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ar.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return TN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var tr=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(tr||(tr={})),tr))();function TN(n){return"storage/"+n}function SN(){return new Ar(tr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function tL(){return new Ar(tr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nL(){return new Ar(tr.CANCELED,"User canceled the upload/download.")}function rL(){return new Ar(tr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zy(n){return new Ar(tr.INVALID_ARGUMENT,n)}function iL(){return new Ar(tr.APP_DELETED,"The Firebase app was deleted.")}function sL(n){return new Ar(tr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qE(n,e){return new Ar(tr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function KE(n){throw new Ar(tr.INTERNAL_ERROR,"Internal error: "+n)}class gs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=gs.makeFromUrl(e,t)}catch{return new gs(e,"")}if(""===r.path)return r;throw function tW(n){return new Ar(tr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(gt){gt.path_=decodeURIComponent(gt.path)}const A=t.replace(/[.]/g,"\\."),Je=[{regex:f,indices:{bucket:1,path:3},postModify:function a(gt){"/"===gt.path.charAt(gt.path.length-1)&&(gt.path_=gt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===JF?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let gt=0;gt<Je.length;gt++){const Yt=Je[gt],on=Yt.regex.exec(e);if(on){let go=on[Yt.indices.path];go||(go=""),r=new gs(on[Yt.indices.bucket],go),Yt.postModify(r);break}}if(null==r)throw function eW(n){return new Ar(tr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class oW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function BT(n){return"string"==typeof n||n instanceof String}function oL(n){return AN()&&n instanceof Blob}function AN(){return typeof Blob<"u"&&!(0,U.UG)()}function MN(n,e,t,r){if(r<e)throw zy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw zy(`Invalid value for '${n}'. Expected ${t} or less.`)}function pd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function aL(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var uf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(uf||(uf={})),uf))();function lL(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class hW{constructor(e,t,r,i,a,u,f,m,v,b,A,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=b,this.connectionFactory_=A,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,W)=>{this.resolve_=j,this.reject_=W,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,u=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function uW(n){return void 0!==n}(m)?a():a(m)}catch(m){u(m)}else if(null!==f){const m=SN();m.serverResponse=f.getErrorText(),u(this.errorCallback_?this.errorCallback_(f,m):m)}else u(i.canceled?this.appDelete_?iL():nL():tL())};this.canceled_?t(0,new zT(!1,null,!0)):this.backoffId_=function aW(n,e,t){let r=1,i=null,a=null,u=!1,f=0;function m(){return 2===f}let v=!1;function b(..._e){v||(v=!0,e.apply(null,_e))}function A(_e){i=setTimeout(()=>{i=null,n(j,m())},_e)}function x(){a&&clearTimeout(a)}function j(_e,...Ge){if(v)return void x();if(_e)return x(),void b.call(null,_e,...Ge);if(m()||u)return x(),void b.call(null,_e,...Ge);let Je;r<64&&(r*=2),1===f?(f=2,Je=0):Je=1e3*(r+Math.random()),A(Je)}let W=!1;function ce(_e){W||(W=!0,x(),!v&&(null!==i?(_e||(f=2),clearTimeout(i),A(0)):_e||(f=1)))}return A(0),a=setTimeout(()=>{u=!0,ce(!0)},t),ce}((r,i)=>{if(i)return void r(!1,new zT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const f=a.getErrorCode()===uf.NO_ERROR,m=a.getStatus();if(!f||lL(m,this.additionalRetryCodes_)&&this.retry){const b=a.getErrorCode()===uf.ABORT;return void r(!1,new zT(!1,null,b))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new zT(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function lW(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class zT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function vW(...n){const e=function yW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(AN())return new Blob(n);throw new Ar(tr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ho={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class RN{constructor(e,t){this.data=e,this.contentType=t||null}}function xN(n,e){switch(n){case Ho.RAW:return new RN(uL(e));case Ho.BASE64:case Ho.BASE64URL:return new RN(cL(n,e));case Ho.DATA_URL:return new RN(function CW(n){const e=new dL(n);return e.base64?cL(Ho.BASE64,e.rest):function EW(n){let e;try{e=decodeURIComponent(n)}catch{throw qE(Ho.DATA_URL,"Malformed data URL.")}return uL(e)}(e.rest)}(e),function bW(n){return new dL(n).contentType}(e))}throw SN()}function uL(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function cL(n,e){switch(n){case Ho.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw qE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ho.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw qE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function IW(n){if(typeof atob>"u")throw function sW(n){return new Ar(tr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:qE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class dL{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw qE(Ho.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function DW(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ou{constructor(e,t){let r=0,i="";oL(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(oL(this.data_)){const i=function wW(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ou(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ou(r,!0)}}static getBlob(...e){if(AN()){const t=e.map(r=>r instanceof Ou?r.data_:r);return new Ou(vW.apply(null,t))}{const t=e.map(u=>BT(u)?xN(Ho.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let f=0;f<u.length;f++)i[a++]=u[f]}),new Ou(i,!0)}}uploadData(){return this.data_}}function NN(n){let e;try{e=JSON.parse(n)}catch{return null}return function dW(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function hL(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function AW(n,e){return e}class Bs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||AW}}let $T=null;function ZE(){if($T)return $T;const n=[];n.push(new Bs("bucket")),n.push(new Bs("generation")),n.push(new Bs("metageneration")),n.push(new Bs("name","fullPath",!0));const t=new Bs("name");t.xform=function e(a,u){return function MW(n){return!BT(n)||n.length<2?n:hL(n)}(u)},n.push(t);const i=new Bs("size");return i.xform=function r(a,u){return void 0!==u?Number(u):u},n.push(i),n.push(new Bs("timeCreated")),n.push(new Bs("updated")),n.push(new Bs("md5Hash",null,!0)),n.push(new Bs("cacheControl",null,!0)),n.push(new Bs("contentDisposition",null,!0)),n.push(new Bs("contentEncoding",null,!0)),n.push(new Bs("contentLanguage",null,!0)),n.push(new Bs("contentType",null,!0)),n.push(new Bs("metadata","customMetadata",!0)),$T=n,$T}function fL(n,e,t){const r=NN(e);return null===r?null:function xW(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return function RW(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new gs(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function PN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const pL="prefixes",gL="items";class Fu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Lu(n){if(!n)throw SN()}function HT(n,e){return function t(r,i){const a=fL(n,i,e);return Lu(null!==a),a}}function $y(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function XH(){return new Ar(tr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function YH(){return new Ar(tr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function QH(n){return new Ar(tr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function JH(n){return new Ar(tr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function QE(n){const e=$y(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function ZH(n){return new Ar(tr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function mL(n,e,t){const i=pd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new Fu(i,"GET",HT(n,t),u);return f.errorHandler=QE(e),f}function LW(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=pd(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,b=new Fu(f,"GET",function OW(n,e){return function t(r,i){const a=function kW(n,e,t){const r=NN(t);return null===r?null:function PW(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[pL])for(const i of t[pL]){const a=i.replace(/\/$/,""),u=n._makeStorageReference(new gs(e,a));r.prefixes.push(u)}if(t[gL])for(const i of t[gL]){const a=n._makeStorageReference(new gs(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Lu(null!==a),a}}(n,e.bucket),v);return b.urlParams=a,b.errorHandler=$y(e),b}function yL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function BW(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class WT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function kN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Lu(!1)}return Lu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const WW={STATE_CHANGED:"state_changed"},zs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ON(n){switch(n){case"running":case"pausing":case"canceling":return zs.RUNNING;case"paused":return zs.PAUSED;case"success":return zs.SUCCESS;case"canceled":return zs.CANCELED;default:return zs.ERROR}}class GW{constructor(e,t,r){if(function cW(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Hy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let IL=null;class qW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=uf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=uf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=uf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw KE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw KE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw KE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw KE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw KE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class KW extends qW{initXhr(){this.xhr_.responseType="text"}}function bl(){return IL?IL():new KW}class EL{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=ZE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(tr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(lL(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=tL()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(tr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function zW(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u=yL(e,r,i),f={name:u.fullPath},m=pd(a,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},A=PN(u,t),W=new Fu(m,"POST",function j(ce){let _e;kN(ce);try{_e=ce.getResponseHeader("X-Goog-Upload-URL")}catch{Lu(!1)}return Lu(BT(_e)),_e},n.maxUploadRetryTime);return W.urlParams=f,W.headers=b,W.body=A,W.errorHandler=$y(e),W}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,bl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function $W(n,e,t,r){const m=new Fu(t,"POST",function a(v){const b=kN(v,["active","final"]);let A=null;try{A=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Lu(!1)}A||Lu(!1);const x=Number(A);return Lu(!isNaN(x)),new WT(x,r.size(),"final"===b)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=$y(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,bl,t,r);this._request=a,a.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new WT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let u;try{u=function HW(n,e,t,r,i,a,u,f){const m=new WT(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function rW(){return new Ar(tr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let b=v;i>0&&(b=Math.min(b,i));const A=m.current;let j="";j=0===b?"finalize":v===b?"upload, finalize":"upload";const W={"X-Goog-Upload-Command":j,"X-Goog-Upload-Offset":`${m.current}`},ce=r.slice(A,A+b);if(null===ce)throw rL();const Je=new Fu(t,"POST",function _e(gt,Yt){const on=kN(gt,["active","final"]),Ri=m.current+b,go=r.size();let ek;return ek="final"===on?HT(e,a)(gt,Yt):null,new WT(Ri,go,"final"===on,ek)},e.maxUploadRetryTime);return Je.headers=W,Je.body=ce.uploadData(),Je.progressCallback=f||null,Je.errorHandler=$y(n),Je}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(u,bl,i,a,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=mL(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,bl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function vL(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let Je="";for(let gt=0;gt<2;gt++)Je+=Math.random().toString().slice(2);return Je}();u["Content-Type"]="multipart/related; boundary="+m;const v=yL(e,r,i),b=PN(v,t),j=Ou.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===j)throw rL();const W={name:v.fullPath},ce=pd(a,n.host,n._protocol),Ge=n.maxUploadRetryTime,ft=new Fu(ce,"POST",HT(n,t),Ge);return ft.urlParams=W,ft.headers=u,ft.body=j.uploadData(),ft.errorHandler=$y(e),ft}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,bl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=nL(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ON(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new GW(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ON(this._state)){case zs.SUCCESS:Hy(this._resolve.bind(null,this.snapshot))();break;case zs.CANCELED:case zs.ERROR:Hy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ON(this._state)){case zs.RUNNING:case zs.PAUSED:e.next&&Hy(e.next.bind(e,this.snapshot))();break;case zs.SUCCESS:e.complete&&Hy(e.complete.bind(e))();break;default:e.error&&Hy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Pg{constructor(e,t){this._service=e,this._location=t instanceof gs?t:gs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Pg(e,t)}get root(){const e=new gs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hL(this._location.path)}get storage(){return this._service}get parent(){const e=function TW(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new gs(this._location.bucket,e);return new Pg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw sL(e)}}function bL(n,e,t){return FN.apply(this,arguments)}function FN(){return FN=(0,he.Z)(function*(n,e,t){const i=yield DL(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield bL(n,e,i.nextPageToken))}),FN.apply(this,arguments)}function DL(n,e){null!=e&&"number"==typeof e.maxResults&&MN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=LW(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,bl)}function oG(n){n._throwIfRoot("getDownloadURL");const e=function UW(n,e,t){const i=pd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new Fu(i,"GET",function FW(n,e){return function t(r,i){const a=fL(n,i,e);return Lu(null!==a),function NW(n,e,t,r){const i=NN(e);if(null===i||!BT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const u=encodeURIComponent;return a.split(",").map(v=>{const A=n.fullPath;return pd("/b/"+u(n.bucket)+"/o/"+u(A),t,r)+aL({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),u);return f.errorHandler=QE(e),f}(n.storage,n._location,ZE());return n.storage.makeRequestWithTokens(e,bl).then(t=>{if(null===t)throw function iW(){return new Ar(tr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function TL(n,e){const t=function SW(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new gs(n._location.bucket,t);return new Pg(n.storage,r)}function SL(n,e){if(n instanceof LN){const t=n;if(null==t._bucket)throw function nW(){return new Ar(tr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eL+"' property when initializing the app?")}();const r=new Pg(t,t._bucket);return null!=e?SL(r,e):r}return void 0!==e?TL(n,e):n}function cG(n,e){if(e&&function lG(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof LN)return function uG(n,e){return new Pg(n,e)}(n,e);throw zy("To use ref(service, url), the first argument must be a Storage instance.")}return SL(n,e)}function AL(n,e){const t=e?.[eL];return null==t?null:gs.makeFromBucketSpec(t,n)}class LN{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=JF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?gs.makeFromBucketSpec(i,this._host):AL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?gs.makeFromBucketSpec(this._url,e):AL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){MN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){MN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,he.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,he.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new oW(iL());{const u=function _W(n,e,t,r,i,a,u=!0){const f=aL(n.urlParams),m=n.url+f,v=Object.assign({},n.headers);return function gW(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function fW(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function pW(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function mW(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new hW(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,he.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const ML="@firebase/storage",xL="storage";function NL(n,e){return cG(n=(0,U.m9)(n),e)}function wG(n=(0,Lr.getApp)(),e){n=(0,U.m9)(n);const r=(0,Lr._getProvider)(n,xL).getImmediate({identifier:e}),i=(0,U.P0)("storage");return i&&PL(r,...i),r}function PL(n,e,t,r={}){!function dG(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,U.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function IG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new LN(t,r,i,e,Lr.SDK_VERSION)}!function EG(){(0,Lr._registerComponent)(new oo.wA(xL,IG,"PUBLIC").setMultipleInstances(!0)),(0,Lr.registerVersion)(ML,"0.11.2",""),(0,Lr.registerVersion)(ML,"0.11.2","esm2017")}();class GT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class kL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new GT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new GT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?u=>t(new GT(u,this,this._ref)):{next:t.next?u=>t.next(new GT(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class OL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new gd(e,this._service))}get items(){return this._delegate.items.map(e=>new gd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class gd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function vG(n,e){return TL(n,e)}(this._delegate,e);return new gd(t,this.storage)}get root(){return new gd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new gd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new kL(function hG(n,e,t){return function tG(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new EL(n,new Ou(e),t)}(n=(0,U.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ho.RAW,r){this._throwIfRoot("putString");const i=xN(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new kL(new EL(this._delegate,new Ou(i.data,!0),a),this)}listAll(){return function mG(n){return function rG(n){const e={prefixes:[],items:[]};return bL(n,e).then(()=>e)}(n=(0,U.m9)(n))}(this._delegate).then(e=>new OL(e,this.storage))}list(e){return function gG(n,e){return DL(n=(0,U.m9)(n),e)}(this._delegate,e||void 0).then(t=>new OL(t,this.storage))}getMetadata(){return function fG(n){return function iG(n){n._throwIfRoot("getMetadata");const e=mL(n.storage,n._location,ZE());return n.storage.makeRequestWithTokens(e,bl)}(n=(0,U.m9)(n))}(this._delegate)}updateMetadata(e){return function pG(n,e){return function sG(n,e){n._throwIfRoot("updateMetadata");const t=function VW(n,e,t,r){const a=pd(e.fullServerUrl(),n.host,n._protocol),f=PN(t,r),v=n.maxOperationRetryTime,b=new Fu(a,"PATCH",HT(n,r),v);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=f,b.errorHandler=QE(e),b}(n.storage,n._location,e,ZE());return n.storage.makeRequestWithTokens(t,bl)}(n=(0,U.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function _G(n){return oG(n=(0,U.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function yG(n){return function aG(n){n._throwIfRoot("deleteObject");const e=function jW(n,e){const r=pd(e.fullServerUrl(),n.host,n._protocol),f=new Fu(r,"DELETE",function u(m,v){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=QE(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,bl)}(n=(0,U.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw sL(e)}}class FL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(LL(e))throw zy("ref() expected a child path but got a URL, use refFromURL instead.");return new gd(NL(this._delegate,e),this)}refFromURL(e){if(!LL(e))throw zy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{gs.makeFromUrl(e,this._delegate.host)}catch{throw zy("refFromUrl() expected a valid full URL but got an invalid one.")}return new gd(NL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){PL(this._delegate,e,t,r)}}function LL(n){return/^[A-Za-z]+:\/\//.test(n)}function TG(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new FL(t,r)}function UL(n){const e=function AG(n){return new Wr.y(e=>{const t=u=>e.next(u);t(n.snapshot);const a=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){a()}}).pipe(function WH(n,e=Mt.z){return(0,Or.e)((t,r)=>{let i=null,a=null,u=null;const f=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=u+n,b=e.now();if(b<v)return i=this.schedule(void 0,v-b),void r.add(i);f()}t.subscribe((0,_n.x)(r,v=>{a=v,u=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,lt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function qT(n){return{getDownloadURL:()=>vt(void 0).pipe(Tt.fc,fr(()=>n.getDownloadURL()),Tt.iC),getMetadata:()=>vt(void 0).pipe(Tt.fc,fr(()=>n.getMetadata()),Tt.iC),delete:()=>(0,Wt.D)(n.delete()),child:e=>qT(n.child(e)),updateMetadata:e=>(0,Wt.D)(n.updateMetadata(e)),put:(e,t)=>UL(n.put(e,t)),putString:(e,t,r)=>UL(n.putString(e,t,r)),list:e=>(0,Wt.D)(n.list(e)),listAll:()=>(0,Wt.D)(n.listAll())}}!function SG(n){const e={TaskState:zs,TaskEvent:WW,StringFormat:Ho,Storage:FL,Reference:gd};n.INTERNAL.registerComponent(new oo.wA("storage-compat",TG,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Dh.Z);const MG=new d.InjectionToken("angularfire2.storageBucket"),RG=new d.InjectionToken("angularfire2.storage.maxUploadRetryTime"),xG=new d.InjectionToken("angularfire2.storage.maxOperationRetryTime"),NG=new d.InjectionToken("angularfire2.storage.use-emulator");let PG=(()=>{class n{constructor(t,r,i,a,u,f,m,v,b,A){const x=(0,Yr.on)(t,u,r);this.storage=(0,Yr.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const j=u.runOutsideAngular(()=>x.storage(i||void 0)),W=b;return W&&j.useEmulator(...W),m&&j.setMaxUploadRetryTime(m),v&&j.setMaxOperationRetryTime(v),j},[m,v])}ref(t){return qT(this.storage.ref(t))}refFromURL(t){return qT(this.storage.refFromURL(t))}upload(t,r,i){return qT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(Yr.Dh),d.\u0275\u0275inject(Yr.xv,8),d.\u0275\u0275inject(MG,8),d.\u0275\u0275inject(d.PLATFORM_ID),d.\u0275\u0275inject(d.NgZone),d.\u0275\u0275inject(Tt.HU),d.\u0275\u0275inject(RG,8),d.\u0275\u0275inject(xG,8),d.\u0275\u0275inject(NG,8),d.\u0275\u0275inject(fd,8))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({}),n})(),OG=(()=>{class n{constructor(){bh.Z.registerVersion("angularfire",Tt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({providers:[PG],imports:[kG]}),n})();const VL="@firebase/database";let UN="";function BL(n){UN=n}class UG{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,U.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,U.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class VG{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,U.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const zL=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new UG(e)}}catch{}return new VG},kg=zL("localStorage"),VN=zL("sessionStorage"),Wy=new Ns.Yd("@firebase/database"),$L=function(){let n=1;return function(){return n++}}(),HL=function(n){const e=(0,U.dS)(n),t=new U.gQ;t.update(e);const r=t.digest();return U.US.encodeByteArray(r)},YE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=YE.apply(null,r):e+="object"==typeof r?(0,U.Wl)(r):r,e+=" "}return e};let Og=null,WL=!0;const GL=function(n,e){(0,U.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Wy.logLevel=Ns.in.VERBOSE,Og=Wy.log.bind(Wy),e&&VN.set("logging_enabled",!0)):"function"==typeof n?Og=n:(Og=null,VN.remove("logging_enabled"))},ji=function(...n){if(!0===WL&&(WL=!1,null===Og&&!0===VN.get("logging_enabled")&&GL(!0)),Og){const e=YE.apply(null,n);Og(e)}},XE=function(n){return function(...e){ji(n,...e)}},jN=function(...n){const e="FIREBASE INTERNAL ERROR: "+YE(...n);Wy.error(e)},Uu=function(...n){const e=`FIREBASE FATAL ERROR: ${YE(...n)}`;throw Wy.error(e),new Error(e)},ms=function(...n){const e="FIREBASE WARNING: "+YE(...n);Wy.warn(e)},KT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},cf="[MIN_NAME]",md="[MAX_NAME]",Fg=function(n,e){if(n===e)return 0;if(n===cf||e===md)return-1;if(e===cf||n===md)return 1;{const t=ZL(n),r=ZL(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},zG=function(n,e){return n===e?0:n<e?-1:1},JE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,U.Wl)(e))},BN=function(n){if("object"!=typeof n||null===n)return(0,U.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,U.Wl)(e[r]),t+=":",t+=BN(n[e[r]]);return t+="}",t},qL=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const KL=function(n){(0,U.hu)(!KT(n),"Invalid JSON number");const r=1023;let i,a,u,f,m;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,u=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const b=v.join("");let A="";for(m=0;m<64;m+=8){let x=parseInt(b.substr(m,8),2).toString(16);1===x.length&&(x="0"+x),A+=x}return A.toLowerCase()},GG=new RegExp("^-?(0*)\\d{1,10}$"),ZL=function(n){if(GG.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Gy=function(n){try{n()}catch(e){setTimeout(()=>{throw ms("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},ZG=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},e0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class QG{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ms(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class YG{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ji("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ms(e)}}let t0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const eU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rU="websocket",iU="long_polling";class $N{constructor(e,t,r,i,a=!1,u="",f=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=kg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&kg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function sU(n,e,t){let r;if((0,U.hu)("string"==typeof e,"typeof type must == string"),(0,U.hu)("object"==typeof t,"typeof params must == object"),e===rU)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==iU)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function XG(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Bi(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class JG{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,U.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,U.p$)(this.counters_)}}const HN={},WN={};function GN(n){const e=n.toString();return HN[e]||(HN[e]=new JG),HN[e]}class t3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Gy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class df{constructor(e,t,r,i,a,u,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=XE(e),this.stats_=GN(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),sU(t,iU,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new t3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,U.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new qN((...a)=>{const[u,f,m,v,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=f,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&eU.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){df.forceAllow_=!0}static forceDisallow(){df.forceDisallow_=!0}static isAvailable(){return!((0,U.Yr)()||!df.forceAllow_&&(df.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,U.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,U.h$)(t),i=qL(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,U.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,U.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class qN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,U.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=$L(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=qN.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){ji("frame writing exception"),f.stack&&ji(f.stack),ji(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ji("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,U.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ji("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let QT=null;typeof MozWebSocket<"u"?QT=MozWebSocket:typeof WebSocket<"u"&&(QT=WebSocket);let qy=(()=>{class n{constructor(t,r,i,a,u,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=XE(this.connId),this.stats_=GN(r),this.connURL=n.connectionURL_(r,f,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,u){const f={v:"5"};return!(0,U.Yr)()&&typeof location<"u"&&location.hostname&&eU.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),u&&(f.p=u),sU(t,rU,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,kg.set("previous_websocket_failure",!0);try{let i;if((0,U.Yr)()){i={headers:{"User-Agent":`Firebase/5/${UN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,f=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new QT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==QT&&!n.forceDisallow_}static previouslyFailed(){return kg.isInMemoryStorage||!0===kg.get("previous_websocket_failure")}markConnectionHealthy(){kg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,U.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,U.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,U.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=qL(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),hU=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[df,qy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=qy&&qy.isAvailable();let i=r&&!qy.previouslyFailed();if(t.webSocketOnly&&(r||ms("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[qy];else{const a=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&a.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class vU{constructor(e,t,r,i,a,u,f,m,v,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=XE("c:"+this.id+":"),this.transportManager_=new hU(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=e0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=JE("t",e),r=JE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=JE("t",e),r=JE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=JE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?jN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ms("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),e0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):e0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(kg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class wU{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class IU{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,U.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,U.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class YT extends IU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,U.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new YT}getInitialEvent(e){return(0,U.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const EU=32,CU=768;class Pn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Tn(){return new Pn("")}function ln(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function hf(n){return n.pieces_.length-n.pieceNum_}function Wn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Pn(n.pieces_,e)}function ZN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function n0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function bU(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Pn(e,0)}function yr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Pn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Pn(t,0)}function un(n){return n.pieceNum_>=n.pieces_.length}function $s(n,e){const t=ln(n),r=ln(e);if(null===t)return e;if(t===r)return $s(Wn(n),Wn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function C3(n,e){const t=n0(n,0),r=n0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Fg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function QN(n,e){if(hf(n)!==hf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function va(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(hf(n)>hf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class b3{constructor(e,t){this.errorPrefix_=t,this.parts_=n0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,U.ug)(this.parts_[r]);DU(this)}}function DU(n){if(n.byteLength_>CU)throw new Error(n.errorPrefix_+"has a key path longer than "+CU+" bytes ("+n.byteLength_+").");if(n.parts_.length>EU)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+EU+") or object contains a cycle "+Lg(n))}function Lg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class YN extends IU{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new YN}getInitialEvent(e){return(0,U.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const r0=1e3;let JT,Ug=(()=>{class n extends wU{constructor(t,r,i,a,u,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=XE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=r0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,U.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");YN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&YT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,U.Wl)(u)),(0,U.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new U.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const m=f.d;"ok"===f.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,U.hu)(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,m=>{const v=m.d,b=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,U.r3)(t,"w")){const i=(0,U.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();ms(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,U.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,U.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,f=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const f={p:r,d:i};void 0!==u&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,U.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):jN("Unrecognized action received from server: "+(0,U.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,U.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=r0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=r0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=r0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,he.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const b=function(){v?v.close():(m=!0,a())};t.realtime_={close:b,sendRequest:function(j){(0,U.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(j)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[j,W]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);m?ji("getToken() completed but was canceled"):(ji("getToken() completed. Creating connection."),t.authToken_=j&&j.accessToken,t.appCheckToken_=W&&W.token,v=new vU(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ce=>{ms(ce+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(j){t.log_("Failed to get token: "+j),m||(t.repoInfo_.nodeAdmin&&ms(j),b())}}})()}interrupt(t){ji("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ji("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,U.xb)(this.interruptReasons_)&&(this.reconnectDelay_=r0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>BN(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Pn(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){ji("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ji("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,U.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+UN.replace(/\./g,"-")]=1,(0,U.uI)()?t["framework.cordova"]=1:(0,U.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=YT.getInstance().currentlyOnline();return(0,U.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class hn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new hn(e,t)}}class XT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new hn(cf,e),i=new hn(cf,t);return 0!==this.compare(r,i)}minPost(){return hn.MIN}}class AU extends XT{static get __EMPTY_NODE(){return JT}static set __EMPTY_NODE(e){JT=e}compare(e,t){return Fg(e.name,t.name)}isDefinedOn(e){throw(0,U.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return hn.MIN}maxPost(){return new hn(md,JT)}makePost(e,t){return(0,U.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new hn(e,JT)}toString(){return".key"}}const Vu=new AU;class eS{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let JN,Dl=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??fo.EMPTY_NODE,this.right=u??fo.EMPTY_NODE}copy(t,r,i,a,u){return new n(t??this.key,r??this.value,i??this.color,a??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return fo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return fo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class fo{constructor(e,t=fo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new fo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Dl.BLACK,null,null))}remove(e){return new fo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Dl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new eS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new eS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new eS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new eS(this.root_,null,this.comparator_,!0,e)}}function N3(n,e){return Fg(n.name,e.name)}function XN(n,e){return Fg(n,e)}fo.EMPTY_NODE=new class x3{copy(e,t,r,i,a){return this}insert(e,t,r){return new Dl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const MU=function(n){return"number"==typeof n?"number:"+KL(n):"string:"+n},RU=function(n){if(n.isLeafNode()){const e=n.val();(0,U.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,U.r3)(e,".sv"),"Priority must be a string or number.")}else(0,U.hu)(n===JN||n.isEmpty(),"priority of unexpected type.");(0,U.hu)(n===JN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let xU,NU,PU,Ky=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,U.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),RU(this.priorityNode_)}static set __childrenNodeConstructor(t){xU=t}static get __childrenNodeConstructor(){return xU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return un(t)?this:".priority"===ln(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=ln(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,U.hu)(".priority"!==i||1===hf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+MU(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?KL(this.value_):this.value_,this.lazyHash_=HL(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,U.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,U.hu)(a>=0,"Unknown leaf type: "+r),(0,U.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const nr=new class F3 extends XT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Fg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return hn.MIN}maxPost(){return new hn(md,new Ky("[PRIORITY-POST]",PU))}makePost(e,t){const r=NU(e);return new hn(t,new Ky("[PRIORITY-POST]",r))}toString(){return".priority"}},L3=Math.log(2);class U3{constructor(e){this.count=parseInt(Math.log(e+1)/L3,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const tS=function(n,e,t,r){n.sort(e);const i=function(m,v){const b=v-m;let A,x;if(0===b)return null;if(1===b)return A=n[m],x=t?t(A):A,new Dl(x,A.node,Dl.BLACK,null,null);{const j=parseInt(b/2,10)+m,W=i(m,j),ce=i(j+1,v);return A=n[j],x=t?t(A):A,new Dl(x,A.node,Dl.BLACK,W,ce)}},f=function(m){let v=null,b=null,A=n.length;const x=function(W,ce){const _e=A-W,Ge=A;A-=W;const ft=i(_e+1,Ge),Je=n[_e],gt=t?t(Je):Je;j(new Dl(gt,Je.node,ce,null,ft))},j=function(W){v?(v.left=W,v=W):(b=W,v=W)};for(let W=0;W<m.count;++W){const ce=m.nextBitIsOne(),_e=Math.pow(2,m.count-(W+1));ce?x(_e,Dl.BLACK):(x(_e,Dl.BLACK),x(_e,Dl.RED))}return b}(new U3(n.length));return new fo(r||e,f)};let eP;const Zy={};class _d{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,U.hu)(Zy&&nr,"ChildrenNode.ts has not been loaded"),eP=eP||new _d({".priority":Zy},{".priority":nr}),eP}get(e){const t=(0,U.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof fo?t:null}hasIndex(e){return(0,U.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,U.hu)(e!==Vu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(hn.Wrap);let f,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();f=i?tS(r,e.getCompare()):Zy;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const b=Object.assign({},this.indexes_);return b[m]=f,new _d(b,v)}addToIndexes(e,t){const r=(0,U.UI)(this.indexes_,(i,a)=>{const u=(0,U.DV)(this.indexSet_,a);if((0,U.hu)(u,"Missing index implementation for "+a),i===Zy){if(u.isDefinedOn(e.node)){const f=[],m=t.getIterator(hn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),tS(f,u.getCompare())}return Zy}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new hn(e.name,f))),m.insert(e,e.node)}});return new _d(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,U.UI)(this.indexes_,i=>{if(i===Zy)return i;{const a=t.get(e.name);return a?i.remove(new hn(e.name,a)):i}});return new _d(r,this.indexSet_)}}let s0,en=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&RU(this.priorityNode_),this.children_.isEmpty()&&(0,U.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return s0||(s0=new n(new fo(XN),null,_d.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||s0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?s0:r}}getChild(t){const r=ln(t);return null===r?this:this.getImmediateChild(r).getChild(Wn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,U.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new hn(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?s0:this.priorityNode_;return new n(a,f,u)}}updateChild(t,r){const i=ln(t);if(null===i)return r;{(0,U.hu)(".priority"!==ln(t)||1===hf(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Wn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(nr,(f,m)=>{r[f]=m.val(t),i++,u&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):u=!1}),!t&&u&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+MU(this.getPriority().val())+":"),this.forEachChild(nr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":HL(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new hn(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new hn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new hn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,hn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,hn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===o0?-1:0}withIndex(t){if(t===Vu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Vu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(nr),a=r.getIterator(nr);let u=i.getNext(),f=a.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=i.getNext(),f=a.getNext()}return null===u&&null===f}return!1}return!1}}resolveIndex_(t){return t===Vu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const o0=new class V3 extends en{constructor(){super(new fo(XN),en.EMPTY_NODE,_d.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return en.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(hn,{MIN:{value:new hn(cf,en.EMPTY_NODE)},MAX:{value:new hn(md,o0)}}),AU.__EMPTY_NODE=en.EMPTY_NODE,Ky.__childrenNodeConstructor=en,function P3(n){JN=n}(o0),function O3(n){PU=n}(o0);const j3=!0;function Mr(n,e=null){if(null===n)return en.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,U.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ky(n,Mr(e));if(n instanceof Array||!j3){let t=en.EMPTY_NODE;return Bi(n,(r,i)=>{if((0,U.r3)(n,r)&&"."!==r.substring(0,1)){const a=Mr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Mr(e))}{const t=[];let r=!1;if(Bi(n,(u,f)=>{if("."!==u.substring(0,1)){const m=Mr(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new hn(u,m)))}}),0===t.length)return en.EMPTY_NODE;const a=tS(t,N3,u=>u.name,XN);if(r){const u=tS(t,nr.getCompare());return new en(a,Mr(e),new _d({".priority":u},{".priority":nr}))}return new en(a,Mr(e),_d.Default)}}!function k3(n){NU=n}(Mr);class tP extends XT{constructor(e){super(),this.indexPath_=e,(0,U.hu)(!un(e)&&".priority"!==ln(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Fg(e.name,t.name):a}makePost(e,t){const r=Mr(e),i=en.EMPTY_NODE.updateChild(this.indexPath_,r);return new hn(t,i)}maxPost(){const e=en.EMPTY_NODE.updateChild(this.indexPath_,o0);return new hn(md,e)}toString(){return n0(this.indexPath_,0).join("/")}}const nP=new class B3 extends XT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Fg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return hn.MIN}maxPost(){return hn.MAX}makePost(e,t){const r=Mr(e);return new hn(t,r)}toString(){return".value"}};function kU(n){return{type:"value",snapshotNode:n}}function Qy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function a0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function l0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class rP{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){(0,U.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(a0(t,f)):(0,U.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?u.trackChildChange(Qy(t,r)):u.trackChildChange(l0(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(nr,(i,a)=>{t.hasChild(i)||r.trackChildChange(a0(i,a))}),t.isLeafNode()||t.forEachChild(nr,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(l0(i,a,u))}else r.trackChildChange(Qy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?en.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class u0{constructor(e){this.indexedFilter_=new rP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=u0.getStartPost_(e),this.endPost_=u0.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,u){return this.matches(new hn(t,r))||(r=en.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=en.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(en.EMPTY_NODE);const a=this;return t.forEachChild(nr,(u,f)=>{a.matches(new hn(u,f))||(i=i.updateImmediateChild(u,en.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class $3{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new u0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new hn(t,r))||(r=en.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=en.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=en.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),u++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(en.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let u=0;for(;a.hasNext();){const f=a.getNext();u<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?u++:i=i.updateImmediateChild(f.name,en.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const A=this.index_.getCompare();u=(x,j)=>A(j,x)}else u=this.index_.getCompare();const f=e;(0,U.hu)(f.numChildren()===this.limit_,"");const m=new hn(t,r),v=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),b=this.rangedFilter_.matches(m);if(f.hasChild(t)){const A=f.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=x&&(x.name===t||f.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const j=null==x?1:u(x,m);if(b&&!r.isEmpty()&&j>=0)return a?.trackChildChange(l0(t,r,A)),f.updateImmediateChild(t,r);{a?.trackChildChange(a0(t,A));const ce=f.updateImmediateChild(t,en.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(a?.trackChildChange(Qy(x.name,x.node)),ce.updateImmediateChild(x.name,x.node)):ce}}return r.isEmpty()?e:b&&u(v,m)>=0?(null!=a&&(a.trackChildChange(a0(v.name,v.node)),a.trackChildChange(Qy(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(v.name,en.EMPTY_NODE)):e}}class nS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cf}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:md}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,U.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nr}copy(){const e=new nS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function iP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function sP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function rS(n,e){const t=n.copy();return t.index_=e,t}function OU(n){const e={};if(n.isDefault())return e;let t;if(n.index_===nr?t="$priority":n.index_===nP?t="$value":n.index_===Vu?t="$key":((0,U.hu)(n.index_ instanceof tP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,U.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,U.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,U.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,U.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,U.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function FU(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==nr&&(e.i=n.index_.toString()),e}class iS extends wU{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=XE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,U.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=iS.getListenId_(e,r),f={};this.listens_[u]=f;const m=OU(e._queryParams);this.restRequest_(a+".json",m,(v,b)=>{let A=b;if(404===v&&(A=null,v=null),null===v&&this.onDataUpdate_(a,A,!1,r),(0,U.DV)(this.listens_,u)===f){let x;x=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(x,null)}})}unlisten(e,t){const r=iS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=OU(e._queryParams),r=e._path.toString(),i=new U.BH;return this.restRequest_(r+".json",t,(a,u)=>{let f=u;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,U.xO)(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,U.cI)(f.responseText)}catch{ms("Failed to parse JSON response for "+u+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&ms("Got unsuccessful REST response for "+u+" Status: "+f.status),r(f.status);r=null}},f.open("GET",u,!0),f.send()})}}class Z3{constructor(){this.rootNode_=en.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function sS(){return{value:null,children:new Map}}function Yy(n,e,t){if(un(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=ln(e);n.children.has(r)||n.children.set(r,sS()),Yy(n.children.get(r),e=Wn(e),t)}}function oP(n,e){if(un(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(nr,(r,i)=>{Yy(n,new Pn(r),i)}),oP(n,e)}}if(n.children.size>0){const t=ln(e);return e=Wn(e),n.children.has(t)&&oP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function aP(n,e,t){null!==n.value?t(e,n.value):function Q3(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{aP(i,new Pn(e.toString()+"/"+r),t)})}class Y3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Bi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class e4{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Y3(e);const r=1e4+2e4*Math.random();e0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Bi(e,(i,a)=>{a>0&&(0,U.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),e0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var wa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(wa||(wa={})),wa))();function cP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class oS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=wa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(un(this.path)){if(null!=this.affectedTree.value)return(0,U.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Pn(e));return new oS(Tn(),t,this.revert)}}return(0,U.hu)(ln(this.path)===e,"operationForChild called for unrelated child."),new oS(Wn(this.path),this.affectedTree,this.revert)}}class c0{constructor(e,t){this.source=e,this.path=t,this.type=wa.LISTEN_COMPLETE}operationForChild(e){return un(this.path)?new c0(this.source,Tn()):new c0(this.source,Wn(this.path))}}class Vg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=wa.OVERWRITE}operationForChild(e){return un(this.path)?new Vg(this.source,Tn(),this.snap.getImmediateChild(e)):new Vg(this.source,Wn(this.path),this.snap)}}class Xy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=wa.MERGE}operationForChild(e){if(un(this.path)){const t=this.children.subtree(new Pn(e));return t.isEmpty()?null:t.value?new Vg(this.source,Tn(),t.value):new Xy(this.source,Tn(),t)}return(0,U.hu)(ln(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Xy(this.source,Wn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ff{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(un(e))return this.isFullyInitialized()&&!this.filtered_;const t=ln(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class t4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function d0(n,e,t,r,i,a){const u=r.filter(f=>f.type===t);u.sort((f,m)=>function i4(n,e,t){if(null==e.childName||null==t.childName)throw(0,U.g5)("Should only compare child_ events.");const r=new hn(e.childName,e.snapshotNode),i=new hn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),u.forEach(f=>{const m=function r4(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function aS(n,e){return{eventCache:n,serverCache:e}}function h0(n,e,t,r){return aS(new ff(e,t,r),n.serverCache)}function UU(n,e,t,r){return aS(n.eventCache,new ff(e,t,r))}function lS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function jg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let dP;class rr{constructor(e,t=(()=>(dP||(dP=new fo(zG)),dP))()){this.value=e,this.children=t}static fromObject(e){let t=new rr(null);return Bi(e,(r,i)=>{t=t.set(new Pn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Tn(),value:this.value};if(un(e))return null;{const r=ln(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Wn(e),t);return null!=a?{path:yr(new Pn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(un(e))return this;{const t=ln(e),r=this.children.get(t);return null!==r?r.subtree(Wn(e)):new rr(null)}}set(e,t){if(un(e))return new rr(t,this.children);{const r=ln(e),a=(this.children.get(r)||new rr(null)).set(Wn(e),t),u=this.children.insert(r,a);return new rr(this.value,u)}}remove(e){if(un(e))return this.children.isEmpty()?new rr(null):new rr(null,this.children);{const t=ln(e),r=this.children.get(t);if(r){const i=r.remove(Wn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new rr(null):new rr(this.value,a)}return this}}get(e){if(un(e))return this.value;{const t=ln(e),r=this.children.get(t);return r?r.get(Wn(e)):null}}setTree(e,t){if(un(e))return t;{const r=ln(e),a=(this.children.get(r)||new rr(null)).setTree(Wn(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new rr(this.value,u)}}fold(e){return this.fold_(Tn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(yr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Tn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(un(e))return null;{const a=ln(e),u=this.children.get(a);return u?u.findOnPath_(Wn(e),yr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Tn(),t)}foreachOnPath_(e,t,r){if(un(e))return this;{this.value&&r(t,this.value);const i=ln(e),a=this.children.get(i);return a?a.foreachOnPath_(Wn(e),yr(t,i),r):new rr(null)}}foreach(e){this.foreach_(Tn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(yr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Tl{constructor(e){this.writeTree_=e}static empty(){return new Tl(new rr(null))}}function f0(n,e,t){if(un(e))return new Tl(new rr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=$s(i,e);return a=a.updateChild(u,t),new Tl(n.writeTree_.set(i,a))}{const i=new rr(t),a=n.writeTree_.setTree(e,i);return new Tl(a)}}}function hP(n,e,t){let r=n;return Bi(t,(i,a)=>{r=f0(r,yr(e,i),a)}),r}function VU(n,e){if(un(e))return Tl.empty();{const t=n.writeTree_.setTree(e,new rr(null));return new Tl(t)}}function fP(n,e){return null!=Bg(n,e)}function Bg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild($s(t.path,e)):null}function jU(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(nr,(r,i)=>{e.push(new hn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new hn(r,i.value))}),e}function pf(n,e){if(un(e))return n;{const t=Bg(n,e);return new Tl(null!=t?new rr(t):n.writeTree_.subtree(e))}}function pP(n){return n.writeTree_.isEmpty()}function Jy(n,e){return BU(Tn(),n.writeTree_,e)}function BU(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,U.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=BU(yr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(yr(n,".priority"),r)),t}}function uS(n,e){return GU(e,n)}function c4(n,e){if(n.snap)return va(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&va(yr(n.path,t),e))return!0;return!1}function h4(n){return n.visible}function zU(n,e,t){let r=Tl.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let f;if(a.snap)va(t,u)?(f=$s(t,u),r=f0(r,f,a.snap)):va(u,t)&&(f=$s(u,t),r=f0(r,Tn(),a.snap.getChild(f)));else{if(!a.children)throw(0,U.g5)("WriteRecord should have .snap or .children");if(va(t,u))f=$s(t,u),r=hP(r,f,a.children);else if(va(u,t))if(f=$s(u,t),un(f))r=hP(r,Tn(),a.children);else{const m=(0,U.DV)(a.children,ln(f));if(m){const v=m.getChild(Wn(f));r=f0(r,Tn(),v)}}}}}return r}function $U(n,e,t,r,i){if(r||i){const a=pf(n.visibleWrites,e);return!i&&pP(a)?t:i||null!=t||fP(a,Tn())?Jy(zU(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(va(v.path,e)||va(e,v.path))},e),t||en.EMPTY_NODE):null}{const a=Bg(n.visibleWrites,e);if(null!=a)return a;{const u=pf(n.visibleWrites,e);return pP(u)?t:null!=t||fP(u,Tn())?Jy(u,t||en.EMPTY_NODE):null}}}function cS(n,e,t,r){return $U(n.writeTree,n.treePath,e,t,r)}function gP(n,e){return function f4(n,e,t){let r=en.EMPTY_NODE;const i=Bg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(nr,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=pf(n.visibleWrites,e);return t.forEachChild(nr,(u,f)=>{const m=Jy(pf(a,new Pn(u)),f);r=r.updateImmediateChild(u,m)}),jU(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return jU(pf(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function HU(n,e,t,r){return function p4(n,e,t,r,i){(0,U.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=yr(e,t);if(fP(n.visibleWrites,a))return null;{const u=pf(n.visibleWrites,a);return pP(u)?i.getChild(t):Jy(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function dS(n,e){return function m4(n,e){return Bg(n.visibleWrites,e)}(n.writeTree,yr(n.treePath,e))}function mP(n,e,t){return function g4(n,e,t,r){const i=yr(e,t),a=Bg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Jy(pf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function WU(n,e){return GU(yr(n.treePath,e),n.writeTree)}function GU(n,e){return{treePath:n,writeTree:e}}class w4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,U.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,U.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,l0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,a0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Qy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,U.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,l0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const qU=new class I4{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class _P{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ff(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:jg(this.viewCache_),a=function v4(n,e,t,r,i,a){return function _4(n,e,t,r,i,a,u){let f;const m=pf(n.visibleWrites,e),v=Bg(m,Tn());if(null!=v)f=v;else{if(null==t)return[];f=Jy(m,t)}if(f=f.withIndex(u),f.isEmpty()||f.isLeafNode())return[];{const b=[],A=u.getCompare(),x=a?f.getReverseIteratorFrom(r,u):f.getIteratorFrom(r,u);let j=x.getNext();for(;j&&b.length<i;)0!==A(j,r)&&b.push(j),j=x.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function KU(n,e,t,r,i,a){const u=e.eventCache;if(null!=dS(r,t))return e;{let f,m;if(un(t))if((0,U.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=jg(e),A=gP(r,v instanceof en?v:en.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),A,a)}else{const v=cS(r,jg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=ln(t);if(".priority"===v){(0,U.hu)(1===hf(t),"Can't have a priority with additional path components");const b=u.getNode();m=e.serverCache.getNode();const A=HU(r,t,b,m);f=null!=A?n.filter.updatePriority(b,A):u.getNode()}else{const b=Wn(t);let A;if(u.isCompleteForChild(v)){m=e.serverCache.getNode();const x=HU(r,t,u.getNode(),m);A=null!=x?u.getNode().getImmediateChild(v).updateChild(b,x):u.getNode().getImmediateChild(v)}else A=mP(r,v,e.serverCache);f=null!=A?n.filter.updateChild(u.getNode(),v,A,b,i,a):u.getNode()}}return h0(e,f,u.isFullyInitialized()||un(t),n.filter.filtersNodes())}}function hS(n,e,t,r,i,a,u,f){const m=e.serverCache;let v;const b=u?n.filter:n.filter.getIndexedFilter();if(un(t))v=b.updateFullNode(m.getNode(),r,null);else if(b.filtersNodes()&&!m.isFiltered()){const j=m.getNode().updateChild(t,r);v=b.updateFullNode(m.getNode(),j,null)}else{const j=ln(t);if(!m.isCompleteForPath(t)&&hf(t)>1)return e;const W=Wn(t),_e=m.getNode().getImmediateChild(j).updateChild(W,r);v=".priority"===j?b.updatePriority(m.getNode(),_e):b.updateChild(m.getNode(),j,_e,W,qU,null)}const A=UU(e,v,m.isFullyInitialized()||un(t),b.filtersNodes());return KU(n,A,t,i,new _P(i,A,a),f)}function yP(n,e,t,r,i,a,u){const f=e.eventCache;let m,v;const b=new _P(i,e,a);if(un(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,u),m=h0(e,v,!0,n.filter.filtersNodes());else{const A=ln(t);if(".priority"===A)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=h0(e,v,f.isFullyInitialized(),f.isFiltered());else{const x=Wn(t),j=f.getNode().getImmediateChild(A);let W;if(un(x))W=r;else{const ce=b.getCompleteChild(A);W=null!=ce?".priority"===ZN(x)&&ce.getChild(bU(x)).isEmpty()?ce:ce.updateChild(x,r):en.EMPTY_NODE}m=j.equals(W)?e:h0(e,n.filter.updateChild(f.getNode(),A,W,x,b,u),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function ZU(n,e){return n.eventCache.isCompleteForChild(e)}function QU(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function vP(n,e,t,r,i,a,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=un(t)?r:new rr(null).setTree(t,r);const b=e.serverCache.getNode();return v.children.inorderTraversal((A,x)=>{if(b.hasChild(A)){const W=QU(0,e.serverCache.getNode().getImmediateChild(A),x);m=hS(n,m,new Pn(A),W,i,a,u,f)}}),v.children.inorderTraversal((A,x)=>{const j=!e.serverCache.isCompleteForChild(A)&&null===x.value;if(!b.hasChild(A)&&!j){const ce=QU(0,e.serverCache.getNode().getImmediateChild(A),x);m=hS(n,m,new Pn(A),ce,i,a,u,f)}}),m}class R4{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new rP(r.getIndex()),a=function H3(n){return n.loadsAllData()?new rP(n.getIndex()):n.hasLimit()?new $3(n):new u0(n)}(r);this.processor_=function E4(n){return{filter:n}}(a);const u=t.serverCache,f=t.eventCache,m=i.updateFullNode(en.EMPTY_NODE,u.getNode(),null),v=a.updateFullNode(en.EMPTY_NODE,f.getNode(),null),b=new ff(m,u.isFullyInitialized(),i.filtersNodes()),A=new ff(v,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=aS(A,b),this.eventGenerator_=new t4(this.query_)}get query(){return this.query_}}function P4(n,e){const t=jg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!un(e)&&!t.getImmediateChild(ln(e)).isEmpty())?t.getChild(e):null}function YU(n){return 0===n.eventRegistrations_.length}function XU(n,e,t){const r=[];if(t){(0,U.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function JU(n,e,t,r){e.type===wa.MERGE&&null!==e.source.queryId&&((0,U.hu)(jg(n.viewCache_),"We should always have a full cache before handling merges"),(0,U.hu)(lS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function b4(n,e,t,r,i){const a=new w4;let u,f;if(t.type===wa.OVERWRITE){const v=t;v.source.fromUser?u=yP(n,e,v.path,v.snap,r,i,a):((0,U.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!un(v.path),u=hS(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===wa.MERGE){const v=t;v.source.fromUser?u=function T4(n,e,t,r,i,a,u){let f=e;return r.foreach((m,v)=>{const b=yr(t,m);ZU(e,ln(b))&&(f=yP(n,f,b,v,i,a,u))}),r.foreach((m,v)=>{const b=yr(t,m);ZU(e,ln(b))||(f=yP(n,f,b,v,i,a,u))}),f}(n,e,v.path,v.children,r,i,a):((0,U.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),u=vP(n,e,v.path,v.children,r,i,f,a))}else if(t.type===wa.ACK_USER_WRITE){const v=t;u=v.revert?function M4(n,e,t,r,i,a){let u;if(null!=dS(r,t))return e;{const f=new _P(r,e,i),m=e.eventCache.getNode();let v;if(un(t)||".priority"===ln(t)){let b;if(e.serverCache.isFullyInitialized())b=cS(r,jg(e));else{const A=e.serverCache.getNode();(0,U.hu)(A instanceof en,"serverChildren would be complete if leaf node"),b=gP(r,A)}v=n.filter.updateFullNode(m,b,a)}else{const b=ln(t);let A=mP(r,b,e.serverCache);null==A&&e.serverCache.isCompleteForChild(b)&&(A=m.getImmediateChild(b)),v=null!=A?n.filter.updateChild(m,b,A,Wn(t),f,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(m,b,en.EMPTY_NODE,Wn(t),f,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=cS(r,jg(e)),u.isLeafNode()&&(v=n.filter.updateFullNode(v,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=dS(r,Tn()),h0(e,v,u,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function S4(n,e,t,r,i,a,u){if(null!=dS(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(un(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return hS(n,e,t,m.getNode().getChild(t),i,a,f,u);if(un(t)){let v=new rr(null);return m.getNode().forEachChild(Vu,(b,A)=>{v=v.set(new Pn(b),A)}),vP(n,e,t,v,i,a,f,u)}return e}{let v=new rr(null);return r.foreach((b,A)=>{const x=yr(t,b);m.isCompleteForPath(x)&&(v=v.set(b,m.getNode().getChild(x)))}),vP(n,e,t,v,i,a,f,u)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==wa.LISTEN_COMPLETE)throw(0,U.g5)("Unknown operation type: "+t.type);u=function A4(n,e,t,r,i){const a=e.serverCache;return KU(n,UU(e,a.getNode(),a.isFullyInitialized()||un(t),a.isFiltered()),t,r,qU,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function D4(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=lS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(kU(lS(e)))}}(e,u,m),{viewCache:u,changes:m}}(n.processor_,i,e,t,r);return function C4(n,e){(0,U.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,U.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,U.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,eV(n,a.changes,a.viewCache.eventCache.getNode(),null)}function eV(n,e,t,r){return function n4(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function z3(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),d0(n,i,"child_removed",e,r,t),d0(n,i,"child_added",e,r,t),d0(n,i,"child_moved",a,r,t),d0(n,i,"child_changed",e,r,t),d0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let fS,gS;class tV{constructor(){this.views=new Map}}function wP(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,U.hu)(null!=a,"SyncTree gave us an op for an invalid query."),JU(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(JU(u,e,t,r));return a}}function nV(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let f=cS(t,i?r:null),m=!1;f?m=!0:r instanceof en?(f=gP(t,r),m=!1):(f=en.EMPTY_NODE,m=!1);const v=aS(new ff(f,m,!1),new ff(r,i,!1));return new R4(e,v)}return u}function rV(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function gf(n,e){let t=null;for(const r of n.views.values())t=t||P4(r,e);return t}function iV(n,e){return e._queryParams.loadsAllData()?pS(n):n.views.get(e._queryIdentifier)}function sV(n,e){return null!=iV(n,e)}function mf(n){return null!=pS(n)}function pS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let $4=1;class oV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new rr(null),this.pendingWriteTree_=function y4(){return{visibleWrites:Tl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function IP(n,e,t,r,i){return function o4(n,e,t,r,i){(0,U.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=f0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?ev(n,new Vg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function _f(n,e,t=!1){const r=function l4(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function u4(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,U.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=t&&c4(f,r.path)?i=!1:va(r.path,f.path)&&(a=!0)),u--}return!!i&&(a?(function d4(n){n.visibleWrites=zU(n.allWrites,h4,Tn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=VU(n.visibleWrites,r.path):Bi(r.children,m=>{n.visibleWrites=VU(n.visibleWrites,yr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new rr(null);return null!=r.snap?a=a.set(Tn(),!0):Bi(r.children,u=>{a=a.set(new Pn(u),!0)}),ev(n,new oS(r.path,a,t))}return[]}function p0(n,e,t){return ev(n,new Vg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function mS(n,e,t,r,i=!1){const a=e._path,u=n.syncPointTree_.get(a);let f=[];if(u&&("default"===e._queryIdentifier||sV(u,e))){const m=function j4(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const f=mf(n);if("default"===i)for(const[m,v]of n.views.entries())u=u.concat(XU(v,t,r)),YU(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(u=u.concat(XU(m,t,r)),YU(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return f&&!mf(n)&&a.push(new(function L4(){return(0,U.hu)(fS,"Reference.ts has not been loaded"),fS}())(e._repo,e._path)),{removed:a,events:u}}(u,e,t,r);(function U4(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(f=m.events,!i){const b=-1!==v.findIndex(x=>x._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(a,(x,j)=>mf(j));if(b&&!A){const x=n.syncPointTree_.subtree(a);if(!x.isEmpty()){const j=function Q4(n){return n.fold((e,t,r)=>{if(t&&mf(t))return[pS(t)];{let i=[];return t&&(i=rV(t)),Bi(r,(a,u)=>{i=i.concat(u)}),i}})}(x);for(let W=0;W<j.length;++W){const ce=j[W],_e=ce.query,Ge=cV(n,ce);n.listenProvider_.startListening(m0(_e),g0(n,_e),Ge.hashFn,Ge.onComplete)}}}!A&&v.length>0&&!r&&(b?n.listenProvider_.stopListening(m0(e),null):v.forEach(x=>{const j=n.queryToTagMap.get(yS(x));n.listenProvider_.stopListening(m0(x),j)}))}!function Y4(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=yS(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return f}function aV(n,e,t,r){const i=CP(n,r);if(null!=i){const a=bP(i),u=a.path,f=a.queryId,m=$s(u,e);return DP(n,u,new Vg(cP(f),m,t))}return[]}function EP(n,e,t,r=!1){const i=e._path;let a=null,u=!1;n.syncPointTree_.foreachOnPath(i,(x,j)=>{const W=$s(x,i);a=a||gf(j,W),u=u||mf(j)});let m,f=n.syncPointTree_.get(i);f?(u=u||mf(f),a=a||gf(f,Tn())):(f=new tV,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?m=!0:(m=!1,a=en.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((j,W)=>{const ce=gf(W,Tn());ce&&(a=a.updateImmediateChild(j,ce))}));const v=sV(f,e);if(!v&&!e._queryParams.loadsAllData()){const x=yS(e);(0,U.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const j=function X4(){return $4++}();n.queryToTagMap.set(x,j),n.tagToQueryMap.set(j,x)}let A=function V4(n,e,t,r,i,a){const u=nV(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function k4(n,e){n.eventRegistrations_.push(e)}(u,t),function O4(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(nr,(a,u)=>{r.push(Qy(a,u))}),t.isFullyInitialized()&&r.push(kU(t.getNode())),eV(n,r,t.getNode(),e)}(u,t)}(f,e,t,uS(n.pendingWriteTree_,i),a,m);if(!v&&!u&&!r){const x=iV(f,e);A=A.concat(function J4(n,e,t){const r=e._path,i=g0(n,e),a=cV(n,t),u=n.listenProvider_.startListening(m0(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,U.hu)(!mf(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((v,b,A)=>{if(!un(v)&&b&&mf(b))return[pS(b).query];{let x=[];return b&&(x=x.concat(rV(b).map(j=>j.query))),Bi(A,(j,W)=>{x=x.concat(W)}),x}});for(let v=0;v<m.length;++v){const b=m[v];n.listenProvider_.stopListening(m0(b),g0(n,b))}}return u}(n,e,x))}return A}function _S(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,f)=>{const v=gf(f,$s(u,e));if(v)return v});return $U(i,e,a,t,!0)}function ev(n,e){return lV(e,n.syncPointTree_,null,uS(n.pendingWriteTree_,Tn()))}function lV(n,e,t,r){if(un(n.path))return uV(n,e,t,r);{const i=e.get(Tn());null==t&&null!=i&&(t=gf(i,Tn()));let a=[];const u=ln(n.path),f=n.operationForChild(u),m=e.children.get(u);if(m&&f){const v=t?t.getImmediateChild(u):null,b=WU(r,u);a=a.concat(lV(f,m,v,b))}return i&&(a=a.concat(wP(i,n,r,t))),a}}function uV(n,e,t,r){const i=e.get(Tn());null==t&&null!=i&&(t=gf(i,Tn()));let a=[];return e.children.inorderTraversal((u,f)=>{const m=t?t.getImmediateChild(u):null,v=WU(r,u),b=n.operationForChild(u);b&&(a=a.concat(uV(b,f,m,v)))}),i&&(a=a.concat(wP(i,n,r,t))),a}function cV(n,e){const t=e.query,r=g0(n,t);return{hashFn:()=>(function x4(n){return n.viewCache_.serverCache.getNode()}(e)||en.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function q4(n,e,t){const r=CP(n,t);if(r){const i=bP(r),a=i.path,u=i.queryId,f=$s(a,e);return DP(n,a,new c0(cP(u),f))}return[]}(n,t._path,r):function G4(n,e){return ev(n,new c0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function WG(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return mS(n,t,null,a)}}}}function g0(n,e){const t=yS(e);return n.queryToTagMap.get(t)}function yS(n){return n._path.toString()+"$"+n._queryIdentifier}function CP(n,e){return n.tagToQueryMap.get(e)}function bP(n){const e=n.indexOf("$");return(0,U.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Pn(n.substr(0,e))}}function DP(n,e,t){const r=n.syncPointTree_.get(e);return(0,U.hu)(r,"Missing sync point for query tag that we're tracking"),wP(r,t,uS(n.pendingWriteTree_,e),null)}function m0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function z4(){return(0,U.hu)(gS,"Reference.ts has not been loaded"),gS}())(n._repo,n._path):n}class TP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new TP(t)}node(){return this.node_}}class SP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=yr(this.path_,e);return new SP(this.syncTree_,t)}node(){return _S(this.syncTree_,this.path_)}}const eq=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},dV=function(n,e,t){return n&&"object"==typeof n?((0,U.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?tq(n[".sv"],e,t):"object"==typeof n[".sv"]?nq(n[".sv"],e):void(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},tq=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,U.hu)(!1,"Unexpected server value: "+n)},nq=function(n,e,t){n.hasOwnProperty("increment")||(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,U.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,U.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},hV=function(n,e,t,r){return MP(e,new SP(t,n),r)},AP=function(n,e,t){return MP(n,new TP(e),t)};function MP(n,e,t){const r=n.getPriority().val(),i=dV(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,f=dV(u.getValue(),e,t);return f!==u.getValue()||i!==u.getPriority().val()?new Ky(f,Mr(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new Ky(i))),u.forEachChild(nr,(f,m)=>{const v=MP(m,e.getImmediateChild(f),t);v!==m&&(a=a.updateImmediateChild(f,v))}),a}}class RP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function vS(n,e){let t=e instanceof Pn?e:new Pn(e),r=n,i=ln(t);for(;null!==i;){const a=(0,U.DV)(r.node.children,i)||{children:{},childCount:0};r=new RP(i,r,a),t=Wn(t),i=ln(t)}return r}function zg(n){return n.node.value}function xP(n,e){n.node.value=e,NP(n)}function fV(n){return n.node.childCount>0}function wS(n,e){Bi(n.node.children,(t,r)=>{e(new RP(t,n,r))})}function pV(n,e,t,r){t&&!r&&e(n),wS(n,i=>{pV(i,e,!0,r)}),t&&r&&e(n)}function _0(n){return new Pn(null===n.parent?n.name:_0(n.parent)+"/"+n.name)}function NP(n){null!==n.parent&&function sq(n,e,t){const r=function rq(n){return void 0===zg(n)&&!fV(n)}(t),i=(0,U.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,NP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,NP(n))}(n.parent,n.name,n)}const oq=/[\[\].#$\/\u0000-\u001F\u007F]/,aq=/[\[\].#$\u0000-\u001F\u007F]/,PP=10485760,IS=function(n){return"string"==typeof n&&0!==n.length&&!oq.test(n)},gV=function(n){return"string"==typeof n&&0!==n.length&&!aq.test(n)},y0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!KT(n)||n&&"object"==typeof n&&(0,U.r3)(n,".sv")},ju=function(n,e,t,r){r&&void 0===e||v0((0,U.gK)(n,"value"),e,t)},v0=function(n,e,t){const r=t instanceof Pn?new b3(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Lg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Lg(r)+" with contents = "+e.toString());if(KT(e))throw new Error(n+"contains "+e.toString()+" "+Lg(r));if("string"==typeof e&&e.length>PP/3&&(0,U.ug)(e)>PP)throw new Error(n+"contains a string greater than "+PP+" utf8 bytes "+Lg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Bi(e,(u,f)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!IS(u)))throw new Error(n+" contains an invalid key ("+u+") "+Lg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function D3(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,U.ug)(e),DU(n)})(r,u),v0(n,f,r),function T3(n){const e=n.parts_.pop();n.byteLength_-=(0,U.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Lg(r)+" in addition to actual children.")}},mV=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,U.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Bi(e,(u,f)=>{const m=new Pn(u);if(v0(i,f,yr(t,m)),".priority"===ZN(m)&&!y0(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=n0(r);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!IS(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(C3);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&va(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},kP=function(n,e,t){if(!t||void 0!==e){if(KT(e))throw new Error((0,U.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!y0(e))throw new Error((0,U.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},w0=function(n,e,t,r){if(!(r&&void 0===t||IS(t)))throw new Error((0,U.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},I0=function(n,e,t,r){if(!(r&&void 0===t||gV(t)))throw new Error((0,U.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},cq=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),I0(n,e,t,r)},Ia=function(n,e){if(".info"===ln(e))throw new Error(n+" failed = Can't modify data under /.info/")},_V=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!IS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gV(n)}(t))throw new Error((0,U.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class dq{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ES(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!QN(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function yV(n,e,t){ES(n,t),vV(n,r=>QN(r,e))}function Wo(n,e,t){ES(n,t),vV(n,r=>va(r,e)||va(e,r))}function vV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(hq(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function hq(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Og&&ji("event: "+t.toString()),Gy(r)}}}const wV="repo_interrupt",fq=25;class pq{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sS(),this.transactionQueueTree_=new RP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function IV(n){const t=n.infoData_.getNode(new Pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function E0(n){return eq({timestamp:IV(n)})}function EV(n,e,t,r,i){n.dataUpdateCount++;const a=new Pn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const m=(0,U.UI)(t,v=>Mr(v));u=function K4(n,e,t,r){const i=CP(n,r);if(i){const a=bP(i),u=a.path,f=a.queryId,m=$s(u,e),v=rr.fromObject(t);return DP(n,u,new Xy(cP(f),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Mr(t);u=aV(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,U.UI)(t,v=>Mr(v));u=function W4(n,e,t){const r=rr.fromObject(t);return ev(n,new Xy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Mr(t);u=p0(n.serverSyncTree_,a,m)}let f=a;u.length>0&&(f=nv(n,a)),Wo(n.eventQueue_,f,u)}function CV(n,e){OP(n,"connected",e),!1===e&&function vq(n){tv(n,"onDisconnectEvents");const e=E0(n),t=sS();aP(n.onDisconnect_,Tn(),(i,a)=>{const u=hV(i,a,n.serverSyncTree_,e);Yy(t,i,u)});let r=[];aP(t,Tn(),(i,a)=>{r=r.concat(p0(n.serverSyncTree_,i,a));const u=VP(n,i);nv(n,u)}),n.onDisconnect_=sS(),Wo(n.eventQueue_,Tn(),r)}(n)}function OP(n,e,t){const r=new Pn("/.info/"+e),i=Mr(t);n.infoData_.updateSnapshot(r,i);const a=p0(n.infoSyncTree_,r,i);Wo(n.eventQueue_,r,a)}function CS(n){return n.nextWriteId_++}function FP(n,e,t,r,i){tv(n,"set",{path:e.toString(),value:t,priority:r});const a=E0(n),u=Mr(t,r),f=_S(n.serverSyncTree_,e),m=AP(u,f,a),v=CS(n),b=IP(n.serverSyncTree_,e,m,v,!0);ES(n.eventQueue_,b),n.server_.put(e.toString(),u.val(!0),(x,j)=>{const W="ok"===x;W||ms("set at "+e+" failed: "+x);const ce=_f(n.serverSyncTree_,v,!W);Wo(n.eventQueue_,e,ce),yf(0,i,x,j)});const A=VP(n,e);nv(n,A),Wo(n.eventQueue_,A,[])}function wq(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&oP(n.onDisconnect_,e),yf(0,t,r,i)})}function bV(n,e,t,r){const i=Mr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,u)=>{"ok"===a&&Yy(n.onDisconnect_,e,i),yf(0,r,a,u)})}function LP(n,e,t){let r;r=".info"===ln(e._path)?mS(n.infoSyncTree_,e,t):mS(n.serverSyncTree_,e,t),yV(n.eventQueue_,e._path,r)}function DV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(wV)}function tv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ji(t,...e)}function yf(n,e,t,r){e&&Gy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}function UP(n,e,t){return _S(n.serverSyncTree_,e,t)||en.EMPTY_NODE}function bS(n,e=n.transactionQueueTree_){if(e||DS(n,e),zg(e)){const t=SV(n,e);(0,U.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Tq(n,e,t){const r=t.map(v=>v.currentWriteId),i=UP(n,e,r);let a=i;const u=i.hash();for(let v=0;v<t.length;v++){const b=t[v];(0,U.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const A=$s(e,b.path);a=a.updateChild(A,b.currentOutputSnapshotRaw)}const f=a.val(!0),m=e;n.server_.put(m.toString(),f,v=>{tv(n,"transaction put response",{path:m.toString(),status:v});let b=[];if("ok"===v){const A=[];for(let x=0;x<t.length;x++)t[x].status=2,b=b.concat(_f(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&A.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();DS(n,vS(n.transactionQueueTree_,e)),bS(n,n.transactionQueueTree_),Wo(n.eventQueue_,e,b);for(let x=0;x<A.length;x++)Gy(A[x])}else{if("datastale"===v)for(let A=0;A<t.length;A++)t[A].status=3===t[A].status?4:0;else{ms("transaction at "+m.toString()+" failed: "+v);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=v}nv(n,e)}},u)}(n,_0(e),t)}else fV(e)&&wS(e,t=>{bS(n,t)})}function nv(n,e){const t=TV(n,e),r=_0(t);return function Sq(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=$s(t,m.path);let A,b=!1;if((0,U.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)b=!0,A=m.abortReason,i=i.concat(_f(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=fq)b=!0,A="maxretry",i=i.concat(_f(n.serverSyncTree_,m.currentWriteId,!0));else{const x=UP(n,m.path,u);m.currentInputSnapshot=x;const j=e[f].update(x.val());if(void 0!==j){v0("transaction failed: Data returned ",j,m.path);let W=Mr(j);"object"==typeof j&&null!=j&&(0,U.r3)(j,".priority")||(W=W.updatePriority(x.getPriority()));const _e=m.currentWriteId,Ge=E0(n),ft=AP(W,x,Ge);m.currentOutputSnapshotRaw=W,m.currentOutputSnapshotResolved=ft,m.currentWriteId=CS(n),u.splice(u.indexOf(_e),1),i=i.concat(IP(n.serverSyncTree_,m.path,ft,m.currentWriteId,m.applyLocally)),i=i.concat(_f(n.serverSyncTree_,_e,!0))}else b=!0,A="nodata",i=i.concat(_f(n.serverSyncTree_,m.currentWriteId,!0))}Wo(n.eventQueue_,t,i),i=[],b&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===A?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(A),!1,null)))}DS(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)Gy(r[f]);bS(n,n.transactionQueueTree_)}(n,SV(n,t),r),r}function TV(n,e){let t,r=n.transactionQueueTree_;for(t=ln(e);null!==t&&void 0===zg(r);)r=vS(r,t),t=ln(e=Wn(e));return r}function SV(n,e){const t=[];return AV(n,e,t),t.sort((r,i)=>r.order-i.order),t}function AV(n,e,t){const r=zg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);wS(e,i=>{AV(n,i,t)})}function DS(n,e){const t=zg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,xP(e,t.length>0?t:void 0)}wS(e,r=>{DS(n,r)})}function VP(n,e){const t=_0(TV(n,e)),r=vS(n.transactionQueueTree_,e);return function iq(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{jP(n,i)}),jP(n,r),pV(r,i=>{jP(n,i)}),t}function jP(n,e){const t=zg(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,U.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,U.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(_f(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?xP(e,void 0):t.length=a+1,Wo(n.eventQueue_,_0(e),i);for(let u=0;u<r.length;u++)Gy(r[u])}}const BP=function(n,e){const t=Rq(n),r=t.namespace;return"firebase.com"===t.domain&&Uu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Uu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ms("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new $N(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Pn(t.pathString)}},Rq=function(n){let e="",t="",r="",i="",a="",u=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let b=n.indexOf("/");-1===b&&(b=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),e=n.substring(0,Math.min(b,A)),b<A&&(i=function Aq(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,A)));const x=function Mq(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ms(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,A)));v=e.indexOf(":"),v>=0?(u="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const j=e.slice(0,v);if("localhost"===j.toLowerCase())t="localhost";else if(j.split(".").length<=2)t=j;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),t=e.substring(W+1),a=r}"ns"in x&&(a=x.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:u,scheme:f,pathString:i,namespace:a}},MV="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",xq=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=MV.charAt(t%64),t=Math.floor(t/64);(0,U.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=MV.charAt(e[i]);return(0,U.hu)(20===u.length,"nextPushId: Length should be 20."),u}}();class RV{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,U.Wl)(this.snapshot.exportVal())}}class xV{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class zP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,U.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class NV{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new U.BH;return wq(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ia("OnDisconnect.remove",this._path);const e=new U.BH;return bV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ia("OnDisconnect.set",this._path),ju("OnDisconnect.set",e,this._path,!1);const t=new U.BH;return bV(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ia("OnDisconnect.setWithPriority",this._path),ju("OnDisconnect.setWithPriority",e,this._path,!1),kP("OnDisconnect.setWithPriority",t,!1);const r=new U.BH;return function Iq(n,e,t,r,i){const a=Mr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,f)=>{"ok"===u&&Yy(n.onDisconnect_,e,a),yf(0,i,u,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ia("OnDisconnect.update",this._path),mV("OnDisconnect.update",e,this._path,!1);const t=new U.BH;return function Eq(n,e,t,r){if((0,U.xb)(t))return ji("onDisconnect().update() called with empty data.  Don't do anything."),void yf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Bi(t,(u,f)=>{const m=Mr(f);Yy(n.onDisconnect_,yr(e,u),m)}),yf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class po{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return un(this._path)?null:ZN(this._path)}get ref(){return new Ea(this._repo,this._path)}get _queryIdentifier(){const e=FU(this._queryParams),t=BN(e);return"{}"===t?"default":t}get _queryObject(){return FU(this._queryParams)}isEqual(e){if(!((e=(0,U.m9)(e))instanceof po))return!1;const t=this._repo===e._repo,r=QN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function E3(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function TS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function vf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Vu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==cf)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==md)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===nr){if(null!=e&&!y0(e)||null!=t&&!y0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,U.hu)(n.getIndex()instanceof tP||n.getIndex()===nP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function SS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ea extends po{constructor(e,t){super(e,t,new nS,!1)}get parent(){const e=bU(this._path);return null===e?null:new Ea(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class $g{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Pn(e),r=Hg(this.ref,e);return new $g(this._node.getChild(t),r,nr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new $g(i,Hg(this.ref,r),nr)))}hasChild(e){const t=new Pn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function PV(n,e){return(n=(0,U.m9)(n))._checkNotDeleted("ref"),void 0!==e?Hg(n._root,e):n._root}function kV(n,e){(n=(0,U.m9)(n))._checkNotDeleted("refFromURL");const t=BP(e,n._repo.repoInfo_.nodeAdmin);_V("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Uu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),PV(n,t.path.toString())}function Hg(n,e){return null===ln((n=(0,U.m9)(n))._path)?cq("child","path",e,!1):I0("child","path",e,!1),new Ea(n._repo,yr(n._path,e))}function $P(n,e){n=(0,U.m9)(n),Ia("set",n._path),ju("set",e,n._path,!1);const t=new U.BH;return FP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Fq(n,e){mV("update",e,n._path,!1);const t=new U.BH;return function yq(n,e,t,r){tv(n,"update",{path:e.toString(),value:t});let i=!0;const a=E0(n),u={};if(Bi(t,(f,m)=>{i=!1,u[f]=hV(yr(e,f),Mr(m),n.serverSyncTree_,a)}),i)ji("update() called with empty data.  Don't do anything."),yf(0,r,"ok",void 0);else{const f=CS(n),m=function H4(n,e,t,r){!function a4(n,e,t,r){(0,U.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=hP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=rr.fromObject(t);return ev(n,new Xy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,f);ES(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,b)=>{const A="ok"===v;A||ms("update at "+e+" failed: "+v);const x=_f(n.serverSyncTree_,f,!A),j=x.length>0?nv(n,e):e;Wo(n.eventQueue_,j,x),yf(0,r,v,b)}),Bi(t,v=>{const b=VP(n,yr(e,v));nv(n,b)}),Wo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Lq(n){n=(0,U.m9)(n);const e=new zP(()=>{}),t=new C0(e);return function _q(n,e,t){const r=function Z4(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,b)=>{const A=$s(v,t);r=r||gf(b,A)});let i=n.syncPointTree_.get(t);i?r=r||gf(i,Tn()):(i=new tV,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,u=a?new ff(r,!0,!1):null;return function N4(n){return lS(n.viewCache_)}(nV(i,e,uS(n.pendingWriteTree_,e._path),a?u.getNode():en.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Mr(i).withIndex(e._queryParams.getIndex());let u;if(EP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=p0(n.serverSyncTree_,e._path,a);else{const f=g0(n.serverSyncTree_,e);u=aV(n.serverSyncTree_,e._path,a,f)}return Wo(n.eventQueue_,e._path,u),mS(n.serverSyncTree_,e,t,null,!0),a},i=>(tv(n,"get for query "+(0,U.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new $g(r,new Ea(n._repo,n._path),n._queryParams.getIndex()))}class C0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new RV("value",this,new $g(e.snapshotNode,new Ea(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new xV(this,e,t):null}matches(e){return e instanceof C0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class AS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new xV(this,e,t):null}createEvent(e,t){(0,U.hu)(null!=e.childName,"Child events should have a childName.");const r=Hg(new Ea(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new RV(e.type,this,new $g(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof AS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function b0(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(b,A)=>{LP(n._repo,n,f),m(b,A)};v.userCallback=t.userCallback,v.context=t.context,t=v}const u=new zP(t,a||void 0),f="value"===e?new C0(u):new AS(e,u);return function Cq(n,e,t){let r;r=".info"===ln(e._path)?EP(n.infoSyncTree_,e,t):EP(n.serverSyncTree_,e,t),yV(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>LP(n._repo,n,f)}function HP(n,e,t,r){return b0(n,"value",e,t,r)}function OV(n,e,t,r){return b0(n,"child_added",e,t,r)}function FV(n,e,t,r){return b0(n,"child_changed",e,t,r)}function LV(n,e,t,r){return b0(n,"child_moved",e,t,r)}function UV(n,e,t,r){return b0(n,"child_removed",e,t,r)}function VV(n,e,t){let r=null;const i=t?new zP(t):null;"value"===e?r=new C0(i):e&&(r=new AS(e,i)),LP(n._repo,n,r)}class Sl{}class jV extends Sl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ju("endAt",this._value,e._path,!0);const t=sP(e._queryParams,this._value,this._key);if(SS(t),vf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new po(e._repo,e._path,t,e._orderByCalled)}}class Vq extends Sl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ju("endBefore",this._value,e._path,!1);const t=function K3(n,e,t){let r;return r=sP(n,e,n.index_===Vu||t?t:cf),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(SS(t),vf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new po(e._repo,e._path,t,e._orderByCalled)}}class BV extends Sl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ju("startAt",this._value,e._path,!0);const t=iP(e._queryParams,this._value,this._key);if(SS(t),vf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new po(e._repo,e._path,t,e._orderByCalled)}}class zq extends Sl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ju("startAfter",this._value,e._path,!1);const t=function q3(n,e,t){let r;return r=iP(n,e,n.index_===Vu||t?t:md),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(SS(t),vf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new po(e._repo,e._path,t,e._orderByCalled)}}class Hq extends Sl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new po(e._repo,e._path,function W3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Gq extends Sl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new po(e._repo,e._path,function G3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Kq extends Sl{constructor(e){super(),this._path=e}_apply(e){TS(e,"orderByChild");const t=new Pn(this._path);if(un(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new tP(t),i=rS(e._queryParams,r);return vf(i),new po(e._repo,e._path,i,!0)}}class Qq extends Sl{_apply(e){TS(e,"orderByKey");const t=rS(e._queryParams,Vu);return vf(t),new po(e._repo,e._path,t,!0)}}class Xq extends Sl{_apply(e){TS(e,"orderByPriority");const t=rS(e._queryParams,nr);return vf(t),new po(e._repo,e._path,t,!0)}}class e8 extends Sl{_apply(e){TS(e,"orderByValue");const t=rS(e._queryParams,nP);return vf(t),new po(e._repo,e._path,t,!0)}}class n8 extends Sl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ju("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new jV(this._value,this._key)._apply(new BV(this._value,this._key)._apply(e))}}function Al(n,...e){let t=(0,U.m9)(n);for(const r of e)t=r._apply(t);return t}(function F4(n){(0,U.hu)(!fS,"__referenceConstructor has already been defined"),fS=n})(Ea),function B4(n){(0,U.hu)(!gS,"__referenceConstructor has already been defined"),gS=n}(Ea);const i8="FIREBASE_DATABASE_EMULATOR_HOST",WP={};let zV=!1;function $V(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Uu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ji("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,u=BP(a,i),f=u.repoInfo;typeof process<"u"&&process.env&&(v=process.env[i8]),v?(m=!0,a=`http://${v}?ns=${f.namespace}`,u=BP(a,i),f=u.repoInfo):m=!u.repoInfo.secure;const b=i&&m?new t0(t0.OWNER):new YG(n.name,n.options,e);_V("Invalid Firebase Database URL",u),un(u.path)||Uu("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function a8(n,e,t,r){let i=WP[e.name];i||(i={},WP[e.name]=i);let a=i[n.toURLString()];return a&&Uu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new pq(n,zV,t,r),i[n.toURLString()]=a,a}(f,n,b,new QG(n.name,t));return new u8(A,n)}class u8{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function gq(n,e,t){if(n.stats_=GN(n.repoInfo_),n.forceRestClient_||ZG())n.server_=new iS(n.repoInfo_,(r,i,a,u)=>{EV(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>CV(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,U.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ug(n.repoInfo_,e,(r,i,a,u)=>{EV(n,r,i,a,u)},r=>{CV(n,r)},r=>{!function mq(n,e){Bi(e,(t,r)=>{OP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function e3(n,e){const t=n.toString();return WN[t]||(WN[t]=e()),WN[t]}(n.repoInfo_,()=>new e4(n.stats_,n.server_)),n.infoData_=new Z3,n.infoSyncTree_=new oV({startListening:(r,i,a,u)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=p0(n.infoSyncTree_,r._path,m),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),OP(n,"connected",!1),n.serverSyncTree_=new oV({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(f,m)=>{const v=u(f,m);Wo(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ea(this._repo,Tn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function o8(n,e){const t=WP[e];(!t||t[n.key]!==n)&&Uu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),DV(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Uu("Cannot call "+e+" on a deleted database.")}}function HV(){hU.IS_TRANSPORT_INITIALIZED&&ms("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function c8(){HV(),df.forceDisallow()}function d8(){HV(),qy.forceDisallow(),df.forceAllow()}function h8(n=(0,Lr.getApp)(),e){const t=(0,Lr._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,U.P0)("database");r&&WV(t,...r)}return t}function WV(n,e,t,r={}){(n=(0,U.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Uu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Uu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new t0(t0.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,U.Sg)(r.mockUserToken,n.app.options.projectId);a=new t0(u)}!function s8(n,e,t,r){n.repoInfo_=new $N(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}function g8(n,e){GL(n,e)}const _8={".sv":"timestamp"};class w8{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ug.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ug.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function m8(n){BL(Lr.SDK_VERSION),(0,Lr._registerComponent)(new oo.wA("database",(e,{instanceIdentifier:t})=>$V(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Lr.registerVersion)(VL,"0.14.4",n),(0,Lr.registerVersion)(VL,"0.14.4","esm2017")}();const b8=new Ns.Yd("@firebase/database-compat"),GV=function(n){b8.warn("FIREBASE WARNING: "+n)};class S8{constructor(e){this._delegate=e}cancel(e){(0,U.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,U.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,U.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,U.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,U.Dv)("OnDisconnect.set",1,2,arguments.length),(0,U.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,U.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,U.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,GV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,U.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class A8{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,U.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class wf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,U.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,U.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,U.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,U.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,U.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),I0("DataSnapshot.child","path",e,!1),new wf(this._database,this._delegate.child(e))}hasChild(e){return(0,U.Dv)("DataSnapshot.hasChild",1,1,arguments.length),I0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,U.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,U.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,U.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new wf(this._database,t)))}hasChildren(){return(0,U.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,U.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,U.Dv)("DataSnapshot.ref",0,0,arguments.length),new Go(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ts{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,U.Dv)("Query.on",2,4,arguments.length),(0,U.Wj)("Query.on","callback",t,!1);const u=ts.getCancelAndContextArgs_("Query.on",r,i),f=(v,b)=>{t.call(u.context,new wf(this.database,v),b)};f.userCallback=t,f.context=u.context;const m=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return HP(this._delegate,f,m),t;case"child_added":return OV(this._delegate,f,m),t;case"child_removed":return UV(this._delegate,f,m),t;case"child_changed":return FV(this._delegate,f,m),t;case"child_moved":return LV(this._delegate,f,m),t;default:throw new Error((0,U.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,U.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,U.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,U.Wj)("Query.off","callback",t,!0),(0,U.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,VV(this._delegate,e,i)}else VV(this._delegate,e)}get(){return Lq(this._delegate).then(e=>new wf(this.database,e))}once(e,t,r,i){(0,U.Dv)("Query.once",1,4,arguments.length),(0,U.Wj)("Query.once","callback",t,!0);const a=ts.getCancelAndContextArgs_("Query.once",r,i),u=new U.BH,f=(v,b)=>{const A=new wf(this.database,v);t&&t.call(a.context,A,b),u.resolve(A)};f.userCallback=t,f.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),u.reject(v)};switch(e){case"value":HP(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":OV(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":UV(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":FV(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":LV(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,U.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,U.Dv)("Query.limitToFirst",1,1,arguments.length),new ts(this.database,Al(this._delegate,function Wq(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Hq(n)}(e)))}limitToLast(e){return(0,U.Dv)("Query.limitToLast",1,1,arguments.length),new ts(this.database,Al(this._delegate,function qq(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Gq(n)}(e)))}orderByChild(e){return(0,U.Dv)("Query.orderByChild",1,1,arguments.length),new ts(this.database,Al(this._delegate,function Zq(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return I0("orderByChild","path",n,!1),new Kq(n)}(e)))}orderByKey(){return(0,U.Dv)("Query.orderByKey",0,0,arguments.length),new ts(this.database,Al(this._delegate,function Yq(){return new Qq}()))}orderByPriority(){return(0,U.Dv)("Query.orderByPriority",0,0,arguments.length),new ts(this.database,Al(this._delegate,function Jq(){return new Xq}()))}orderByValue(){return(0,U.Dv)("Query.orderByValue",0,0,arguments.length),new ts(this.database,Al(this._delegate,function t8(){return new e8}()))}startAt(e=null,t){return(0,U.Dv)("Query.startAt",0,2,arguments.length),new ts(this.database,Al(this._delegate,function Bq(n=null,e){return w0("startAt","key",e,!0),new BV(n,e)}(e,t)))}startAfter(e=null,t){return(0,U.Dv)("Query.startAfter",0,2,arguments.length),new ts(this.database,Al(this._delegate,function $q(n,e){return w0("startAfter","key",e,!0),new zq(n,e)}(e,t)))}endAt(e=null,t){return(0,U.Dv)("Query.endAt",0,2,arguments.length),new ts(this.database,Al(this._delegate,function Uq(n,e){return w0("endAt","key",e,!0),new jV(n,e)}(e,t)))}endBefore(e=null,t){return(0,U.Dv)("Query.endBefore",0,2,arguments.length),new ts(this.database,Al(this._delegate,function jq(n,e){return w0("endBefore","key",e,!0),new Vq(n,e)}(e,t)))}equalTo(e,t){return(0,U.Dv)("Query.equalTo",1,2,arguments.length),new ts(this.database,Al(this._delegate,function r8(n,e){return w0("equalTo","key",e,!0),new n8(n,e)}(e,t)))}toString(){return(0,U.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,U.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,U.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ts))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,U.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,U.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,U.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Go(this.database,new Ea(this._delegate._repo,this._delegate._path))}}class Go extends ts{constructor(e,t){super(e,new po(t._repo,t._path,new nS,!1)),this.database=e,this._delegate=t}getKey(){return(0,U.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,U.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Go(this.database,Hg(this._delegate,e))}getParent(){(0,U.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Go(this.database,e):null}getRoot(){return(0,U.Dv)("Reference.root",0,0,arguments.length),new Go(this.database,this._delegate.root)}set(e,t){(0,U.Dv)("Reference.set",1,2,arguments.length),(0,U.Wj)("Reference.set","onComplete",t,!0);const r=$P(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,U.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,GV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ia("Reference.update",this._delegate._path),(0,U.Wj)("Reference.update","onComplete",t,!0);const r=Fq(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,U.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Oq(n,e,t){if(Ia("setWithPriority",n._path),ju("setWithPriority",e,n._path,!1),kP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new U.BH;return FP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,U.Dv)("Reference.remove",0,1,arguments.length),(0,U.Wj)("Reference.remove","onComplete",e,!0);const t=function Pq(n){return Ia("remove",n._path),$P(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,U.Dv)("Reference.transaction",1,3,arguments.length),(0,U.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,U.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,U.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function I8(n,e,t){var r;if(n=(0,U.m9)(n),Ia("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new U.BH,f=HP(n,()=>{});return function Dq(n,e,t,r,i,a){tv(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:$L(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=UP(n,e,void 0);u.currentInputSnapshot=f;const m=u.update(f.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{v0("transaction failed: Data returned ",m,u.path),u.status=0;const v=vS(n.transactionQueueTree_,e),b=zg(v)||[];let A;b.push(u),xP(v,b),"object"==typeof m&&null!==m&&(0,U.r3)(m,".priority")?(A=(0,U.DV)(m,".priority"),(0,U.hu)(y0(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(_S(n.serverSyncTree_,e)||en.EMPTY_NODE).getPriority().val();const x=E0(n),j=Mr(m,A),W=AP(j,f,x);u.currentOutputSnapshotRaw=j,u.currentOutputSnapshotResolved=W,u.currentWriteId=CS(n);const ce=IP(n.serverSyncTree_,e,W,u.currentWriteId,u.applyLocally);Wo(n.eventQueue_,e,ce),bS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,b)=>{let A=null;m?a.reject(m):(A=new $g(b,new Ea(n._repo,n._path),nr),a.resolve(new w8(v,A)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new A8(a.committed,new wf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,U.Dv)("Reference.setPriority",1,2,arguments.length),(0,U.Wj)("Reference.setPriority","onComplete",t,!0);const r=function kq(n,e){n=(0,U.m9)(n),Ia("setPriority",n._path),kP("setPriority",e,!1);const t=new U.BH;return FP(n._repo,yr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,U.Dv)("Reference.push",0,2,arguments.length),(0,U.Wj)("Reference.push","onComplete",t,!0);const r=function Nq(n,e){n=(0,U.m9)(n),Ia("push",n._path),ju("push",e,n._path,!0);const t=IV(n._repo),r=xq(t),i=Hg(n,r),a=Hg(n,r);let u;return u=null!=e?$P(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Go(this.database,u));t&&i.then(()=>t(null),u=>t(u));const a=new Go(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ia("Reference.onDisconnect",this._delegate._path),new S8(new NV(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class D0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:c8,forceLongPolling:d8}}useEmulator(e,t,r={}){WV(this._delegate,e,t,r)}ref(e){if((0,U.Dv)("database.ref",0,1,arguments.length),e instanceof Go){const t=kV(this._delegate,e.toString());return new Go(this,t)}{const t=PV(this._delegate,e);return new Go(this,t)}}refFromURL(e){(0,U.Dv)("database.refFromURL",1,1,arguments.length);const r=kV(this._delegate,e);return new Go(this,r)}goOffline(){return(0,U.Dv)("database.goOffline",0,0,arguments.length),function f8(n){(n=(0,U.m9)(n))._checkNotDeleted("goOffline"),DV(n._repo)}(this._delegate)}goOnline(){return(0,U.Dv)("database.goOnline",0,0,arguments.length),function p8(n){(n=(0,U.m9)(n))._checkNotDeleted("goOnline"),function bq(n){n.persistentConnection_&&n.persistentConnection_.resume(wV)}(n._repo)}(this._delegate)}}D0.ServerValue={TIMESTAMP:function y8(){return _8}(),increment:n=>function v8(n){return{".sv":{increment:n}}}(n)};var R8=Object.freeze({__proto__:null,initStandalone:function M8({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){BL(t);const u=new oo.zt("auth-internal",new oo.H0("database-standalone"));return u.setComponent(new oo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new D0($V(n,u,void 0,e,a),n),namespace:i}}});const x8=D0.ServerValue;function qV(n){return null==n}function KV(n){return"function"==typeof n.set}function ZV(n,e){return KV(e)?e:n.ref(e)}function QV(n,e){if(function P8(n){return"string"==typeof n}(n))return e.stringCase();if(KV(n))return e.firebaseCase();if(function k8(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function T0(n,e,t="on",r=Mt.z){return new Wr.y(i=>{let a=null;return a=n[t](e,(u,f)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,lt.U)(i=>{const{snapshot:a,prevKey:u}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:u,key:f}}),(0,hF.B)())}function YV(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function L8(n,e){const{payload:t,prevKey:r,key:i}=e,a=YV(n,i),u=function F8(n,e){if(qV(e))return 0;{const t=YV(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,f),n}return n;default:return n}}function XV(n){return(qV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function JV(n,e,t){return function O8(n,e,t){return T0(n,"value","once",t).pipe(fr(r=>{const i=[vt(r)];return e.forEach(a=>i.push(T0(n,a,"on",t))),(0,Kx.T)(...i).pipe(kc(L8,[]))}),bb())}(n,e=XV(e),t)}function ej(n,e,t){const r=(e=XV(e)).map(i=>T0(n,i,"on",t));return(0,Kx.T)(...r)}function tj(n,e){return function(r,i){return QV(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function B8(n){return function(t){return t?QV(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function nj(n,e){return function(){return T0(n,"value","on",e)}}!function N8(n){n.INTERNAL.registerComponent(new oo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new D0(i,r)},"PUBLIC").setServiceProps({Reference:Go,Query:ts,Database:D0,DataSnapshot:wf,enableLogging:g8,INTERNAL:R8,ServerValue:x8}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Dh.Z);const H8=new d.InjectionToken("angularfire2.realtimeDatabaseURL"),W8=new d.InjectionToken("angularfire2.database.use-emulator");let G8=(()=>{class n{constructor(t,r,i,a,u,f,m,v,b,A,x,j,W,ce,_e){this.schedulers=f;const Ge=m,ft=(0,Yr.on)(t,u,r);v&&IN(ft,u,b,x,j,W,A,ce),this.database=(0,Yr.cc)(`${ft.name}.database.${i}`,"AngularFireDatabase",ft.name,()=>{const Je=u.runOutsideAngular(()=>ft.database(i||void 0));return Ge&&Je.useEmulator(...Ge),Je},[Ge])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>ZV(this.database,t));let a=i;return r&&(a=r(i)),function z8(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:tj(r,"update"),set:tj(r,"set"),push:i=>r.push(i),remove:B8(r),snapshotChanges:i=>JV(n,i,t).pipe(Tt.iC),stateChanges:i=>ej(n,i,t).pipe(Tt.iC),auditTrail:i=>function U8(n,e,t){return function j8(n,e,t){return function V8(n,e){return T0(n,"value","on",e).pipe((0,lt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function FG(...n){const e=(0,Ts.jO)(n);return(0,Or.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),f=!1;for(let m=0;m<i;m++)(0,hi.Xf)(n[m]).subscribe((0,_n.x)(r,v=>{a[m]=v,!f&&!u[m]&&(u[m]=!0,(f=u.every(nh.y))&&(u=null))},qF.Z));t.subscribe((0,_n.x)(r,m=>{if(f){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,lt.U)(([i,a])=>{const u=i.lastKeyToLoad,f=a.map(m=>m.key);return{actions:a,lastKeyToLoad:u,loadedKeys:f}}),function LG(n){return(0,Or.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,_n.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,lt.U)(i=>i.actions))}(n,ej(n,e).pipe(kc((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Tt.iC),valueChanges:(i,a)=>JV(n,i,t).pipe((0,lt.U)(f=>f.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),Tt.iC)}}(a,this)}object(t){return function $8(n,e){return{query:n,snapshotChanges:()=>nj(n,e.schedulers.outsideAngular)().pipe(Tt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>nj(n,e.schedulers.outsideAngular)().pipe(Tt.iC,(0,lt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>ZV(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.\u0275\u0275inject(Yr.Dh),d.\u0275\u0275inject(Yr.xv,8),d.\u0275\u0275inject(H8,8),d.\u0275\u0275inject(d.PLATFORM_ID),d.\u0275\u0275inject(d.NgZone),d.\u0275\u0275inject(Tt.HU),d.\u0275\u0275inject(W8,8),d.\u0275\u0275inject(Ng,8),d.\u0275\u0275inject(gN,8),d.\u0275\u0275inject(mN,8),d.\u0275\u0275inject(_N,8),d.\u0275\u0275inject(yN,8),d.\u0275\u0275inject(vN,8),d.\u0275\u0275inject(wN,8),d.\u0275\u0275inject(fd,8))},n.\u0275prov=d.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),q8=(()=>{class n{constructor(){bh.Z.registerVersion("angularfire",Tt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({providers:[G8]}),n})();const rj_firebase={apiKey:"AIzaSyAcxNNeVwcQ2qzDFjsw7zKuQ6r3iwPo0QU",authDomain:"nearme-b6f9d.firebaseapp.com",databaseURL:"https://nearme-b6f9d-default-rtdb.europe-west1.firebasedatabase.app",projectId:"nearme-b6f9d",storageBucket:"nearme-b6f9d.appspot.com",messagingSenderId:"874027976352",appId:"1:874027976352:web:9c1d9b84bf8e387763ebc5"};var K8=V(3432);class GP{constructor(e){return e}}class MS{constructor(){return(0,Tt.vb)("auth")}}const qP=new d.InjectionToken("angularfire2.auth-instances");function Q8(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new GP(r)}}const Y8={provide:MS,deps:[[new d.Optional,qP]]},X8={provide:GP,useFactory:function Z8(n,e){const t=(0,Tt.JM)("auth",n,e);return t&&new GP(t)},deps:[[new d.Optional,qP],lf]};let J8=(()=>{class n{constructor(){(0,ku.KN)("angularfire",Tt.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({providers:[X8,Y8]}),n})();function e6(n,...e){return{ngModule:J8,providers:[{provide:qP,useFactory:Q8(n),multi:!0,deps:[d.NgZone,d.Injector,Tt.HU,zE,[new d.Optional,fd],...e]}]}}const t6=(0,Tt.u3)(K8.o,!0);class KP{constructor(e){return e}}const sj="database",ZP=new d.InjectionToken("angularfire2.database-instances");function i6(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new KP(r)}}const s6={provide:class n6{constructor(){return(0,Tt.vb)(sj)}},deps:[[new d.Optional,ZP]]},o6={provide:KP,useFactory:function r6(n,e){const t=(0,Tt.JM)(sj,n,e);return t&&new KP(t)},deps:[[new d.Optional,ZP],lf]};let a6=(()=>{class n{constructor(){(0,ku.KN)("angularfire",Tt.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({providers:[o6,s6]}),n})();function l6(n,...e){return{ngModule:a6,providers:[{provide:ZP,useFactory:i6(n),multi:!0,deps:[d.NgZone,d.Injector,Tt.HU,zE,[new d.Optional,MS],[new d.Optional,fd],...e]}]}}const u6=(0,Tt.u3)(h8,!0);class QP{constructor(e){return e}}const oj="firestore",YP=new d.InjectionToken("angularfire2.firestore-instances");function h6(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new QP(r)}}const f6={provide:class c6{constructor(){return(0,Tt.vb)(oj)}},deps:[[new d.Optional,YP]]},p6={provide:QP,useFactory:function d6(n,e){const t=(0,Tt.JM)(oj,n,e);return t&&new QP(t)},deps:[[new d.Optional,YP],lf]};let g6=(()=>{class n{constructor(){(0,ku.KN)("angularfire",Tt.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({providers:[p6,f6]}),n})();function m6(n,...e){return{ngModule:g6,providers:[{provide:YP,useFactory:h6(n),multi:!0,deps:[d.NgZone,d.Injector,Tt.HU,zE,[new d.Optional,MS],[new d.Optional,fd],...e]}]}}const _6=(0,Tt.u3)(A2,!0);class XP{constructor(e){return e}}const aj="storage",JP=new d.InjectionToken("angularfire2.storage-instances");function w6(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new XP(r)}}const I6={provide:class y6{constructor(){return(0,Tt.vb)(aj)}},deps:[[new d.Optional,JP]]},E6={provide:XP,useFactory:function v6(n,e){const t=(0,Tt.JM)(aj,n,e);return t&&new XP(t)},deps:[[new d.Optional,JP],lf]};let C6=(()=>{class n{constructor(){(0,ku.KN)("angularfire",Tt.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=d.\u0275\u0275defineInjector({providers:[E6,I6]}),n})();function b6(n,...e){return{ngModule:C6,providers:[{provide:JP,useFactory:w6(n),multi:!0,deps:[d.NgZone,d.Injector,Tt.HU,zE,[new d.Optional,MS],[new d.Optional,fd],...e]}]}}const D6=(0,Tt.u3)(wG,!0);var T6=V(918);let S6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.\u0275\u0275defineNgModule({type:n,bootstrap:[TH]}),n.\u0275inj=d.\u0275\u0275defineInjector({providers:[WE],imports:[sa,lH,HH,Yr.hO.initializeApp(rj_firebase),zz(()=>$z(rj_firebase)),e6(()=>t6()),l6(()=>u6()),m6(()=>_6()),b6(()=>D6()),k$,z$,OG,q8,Aa,Mv,Rv,dA,ko,T6.GooglePlaceModule]}),n})();pc().bootstrapModule(S6).catch(n=>console.error(n))},918:function(mt,be,V){!function(d,$,k){"use strict";var te=function ue(re){re&&Object.assign(this,re)},ie=function(){function ue(re,pe){this.el=re,this.ngZone=pe,this.onAddressChange=new k.EventEmitter}return ue.prototype.ngAfterViewInit=function(){this.options||(this.options=new te),this.initialize()},ue.prototype.isGoogleLibExists=function(){return!(!google||!google.maps||!google.maps.places)},ue.prototype.initialize=function(){var re=this;if(!this.isGoogleLibExists())throw new Error("Google maps library can not be found");if(this.autocomplete=new google.maps.places.Autocomplete(this.el.nativeElement,this.options),!this.autocomplete)throw new Error("Autocomplete is not initialized");null!=!this.autocomplete.addListener&&(this.eventListener=this.autocomplete.addListener("place_changed",function(){re.handleChangeEvent()})),this.el.nativeElement.addEventListener("keydown",function(pe){pe.key&&"enter"==pe.key.toLowerCase()&&pe.target===re.el.nativeElement&&(pe.preventDefault(),pe.stopPropagation())}),window&&window.navigator&&window.navigator.userAgent&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&setTimeout(function(){var pe=document.getElementsByClassName("pac-container");if(pe){var G=Array.from(pe);if(G)for(var q=0,Q=G;q<Q.length;q++){var Ue=Q[q];Ue&&Ue.addEventListener("touchend",function(Te){Te.stopImmediatePropagation()})}}},500)},ue.prototype.reset=function(){this.autocomplete.setComponentRestrictions(this.options.componentRestrictions),this.autocomplete.setTypes(this.options.types)},ue.prototype.handleChangeEvent=function(){var re=this;this.ngZone.run(function(){re.place=re.autocomplete.getPlace(),re.place&&re.onAddressChange.emit(re.place)})},ue.ctorParameters=function(){return[{type:k.ElementRef},{type:k.NgZone}]},ue.propDecorators={options:[{type:k.Input,args:["options"]}],onAddressChange:[{type:k.Output}]},ue.\u0275fac=function(pe){return new(pe||ue)(d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(d.NgZone))},ue.\u0275dir=d.\u0275\u0275defineDirective({type:ue,selectors:[["","ngx-google-places-autocomplete",""]],inputs:{options:"options"},outputs:{onAddressChange:"onAddressChange"},exportAs:["ngx-places"]}),ue}(),oe=function(){function ue(){}return ue.ctorParameters=function(){return[]},ue.\u0275fac=function(pe){return new(pe||ue)},ue.\u0275mod=d.\u0275\u0275defineNgModule({type:ue}),ue.\u0275inj=d.\u0275\u0275defineInjector({}),ue}();$.GooglePlaceModule=oe,$.GooglePlaceDirective=ie,Object.defineProperty($,"__esModule",{value:!0})}(V(4650),be,V(4650))},9751:(mt,be,V)=>{"use strict";V.d(be,{y:()=>re});var d=V(930),$=V(727),k=V(8822),te=V(9635),ie=V(2416),oe=V(576),ue=V(2806);let re=(()=>{class Q{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const qe=new Q;return qe.source=this,qe.operator=Te,qe}subscribe(Te,qe,ut){const ye=function q(Q){return Q&&Q instanceof d.Lv||function G(Q){return Q&&(0,oe.m)(Q.next)&&(0,oe.m)(Q.error)&&(0,oe.m)(Q.complete)}(Q)&&(0,$.Nn)(Q)}(Te)?Te:new d.Hp(Te,qe,ut);return(0,ue.x)(()=>{const{operator:De,source:Ce}=this;ye.add(De?De.call(ye,Ce):Ce?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Te){try{return this._subscribe(Te)}catch(qe){Te.error(qe)}}forEach(Te,qe){return new(qe=pe(qe))((ut,ye)=>{const De=new d.Hp({next:Ce=>{try{Te(Ce)}catch(Oe){ye(Oe),De.unsubscribe()}},error:ye,complete:ut});this.subscribe(De)})}_subscribe(Te){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(Te)}[k.L](){return this}pipe(...Te){return(0,te.U)(Te)(this)}toPromise(Te){return new(Te=pe(Te))((qe,ut)=>{let ye;this.subscribe(De=>ye=De,De=>ut(De),()=>qe(ye))})}}return Q.create=Ue=>new Q(Ue),Q})();function pe(Q){var Ue;return null!==(Ue=Q??ie.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(mt,be,V)=>{"use strict";V.d(be,{x:()=>ue});var d=V(9751),$=V(727);const te=(0,V(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=V(8737),oe=V(2806);let ue=(()=>{class pe extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const Q=new re(this,this);return Q.operator=q,Q}_throwIfClosed(){if(this.closed)throw new te}next(q){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(q)}})}error(q){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:Q}=this;for(;Q.length;)Q.shift().error(q)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:Q,isStopped:Ue,observers:Te}=this;return Q||Ue?$.Lc:(this.currentObservers=null,Te.push(q),new $.w0(()=>{this.currentObservers=null,(0,ie.P)(Te,q)}))}_checkFinalizedStatuses(q){const{hasError:Q,thrownError:Ue,isStopped:Te}=this;Q?q.error(Ue):Te&&q.complete()}asObservable(){const q=new d.y;return q.source=this,q}}return pe.create=(G,q)=>new re(G,q),pe})();class re extends ue{constructor(G,q){super(),this.destination=G,this.source=q}next(G){var q,Q;null===(Q=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===Q||Q.call(q,G)}error(G){var q,Q;null===(Q=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===Q||Q.call(q,G)}complete(){var G,q;null===(q=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===q||q.call(G)}_subscribe(G){var q,Q;return null!==(Q=null===(q=this.source)||void 0===q?void 0:q.subscribe(G))&&void 0!==Q?Q:$.Lc}}},930:(mt,be,V)=>{"use strict";V.d(be,{Hp:()=>ut,Lv:()=>Q});var d=V(576),$=V(727),k=V(2416),te=V(7849),ie=V(5032);const oe=pe("C",void 0,void 0);function pe(Me,ke,Se){return{kind:Me,value:ke,error:Se}}var G=V(3410),q=V(2806);class Q extends $.w0{constructor(ke){super(),this.isStopped=!1,ke?(this.destination=ke,(0,$.Nn)(ke)&&ke.add(this)):this.destination=Oe}static create(ke,Se,He){return new ut(ke,Se,He)}next(ke){this.isStopped?Ce(function re(Me){return pe("N",Me,void 0)}(ke),this):this._next(ke)}error(ke){this.isStopped?Ce(function ue(Me){return pe("E",void 0,Me)}(ke),this):(this.isStopped=!0,this._error(ke))}complete(){this.isStopped?Ce(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ke){this.destination.next(ke)}_error(ke){try{this.destination.error(ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Te(Me,ke){return Ue.call(Me,ke)}class qe{constructor(ke){this.partialObserver=ke}next(ke){const{partialObserver:Se}=this;if(Se.next)try{Se.next(ke)}catch(He){ye(He)}}error(ke){const{partialObserver:Se}=this;if(Se.error)try{Se.error(ke)}catch(He){ye(He)}else ye(ke)}complete(){const{partialObserver:ke}=this;if(ke.complete)try{ke.complete()}catch(Se){ye(Se)}}}class ut extends Q{constructor(ke,Se,He){let X;if(super(),(0,d.m)(ke)||!ke)X={next:ke??void 0,error:Se??void 0,complete:He??void 0};else{let de;this&&k.v.useDeprecatedNextContext?(de=Object.create(ke),de.unsubscribe=()=>this.unsubscribe(),X={next:ke.next&&Te(ke.next,de),error:ke.error&&Te(ke.error,de),complete:ke.complete&&Te(ke.complete,de)}):X=ke}this.destination=new qe(X)}}function ye(Me){k.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Me):(0,te.h)(Me)}function Ce(Me,ke){const{onStoppedNotification:Se}=k.v;Se&&G.z.setTimeout(()=>Se(Me,ke))}const Oe={closed:!0,next:ie.Z,error:function De(Me){throw Me},complete:ie.Z}},727:(mt,be,V)=>{"use strict";V.d(be,{Lc:()=>oe,w0:()=>ie,Nn:()=>ue});var d=V(576);const k=(0,V(3888).d)(pe=>function(q){pe(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((Q,Ue)=>`${Ue+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var te=V(8737);class ie{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Te of q)Te.remove(this);else q.remove(this);const{initialTeardown:Q}=this;if((0,d.m)(Q))try{Q()}catch(Te){G=Te instanceof k?Te.errors:[Te]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Te of Ue)try{re(Te)}catch(qe){G=G??[],qe instanceof k?G=[...G,...qe.errors]:G.push(qe)}}if(G)throw new k(G)}}add(G){var q;if(G&&G!==this)if(this.closed)re(G);else{if(G instanceof ie){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(G)}}_hasParent(G){const{_parentage:q}=this;return q===G||Array.isArray(q)&&q.includes(G)}_addParent(G){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(G),q):q?[q,G]:G}_removeParent(G){const{_parentage:q}=this;q===G?this._parentage=null:Array.isArray(q)&&(0,te.P)(q,G)}remove(G){const{_finalizers:q}=this;q&&(0,te.P)(q,G),G instanceof ie&&G._removeParent(this)}}ie.EMPTY=(()=>{const pe=new ie;return pe.closed=!0,pe})();const oe=ie.EMPTY;function ue(pe){return pe instanceof ie||pe&&"closed"in pe&&(0,d.m)(pe.remove)&&(0,d.m)(pe.add)&&(0,d.m)(pe.unsubscribe)}function re(pe){(0,d.m)(pe)?pe():pe.unsubscribe()}},2416:(mt,be,V)=>{"use strict";V.d(be,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(mt,be,V)=>{"use strict";V.d(be,{E:()=>$});const $=new(V(9751).y)(ie=>ie.complete())},8996:(mt,be,V)=>{"use strict";V.d(be,{D:()=>ke});var d=V(8421),$=V(5363),k=V(9468),oe=V(9751),re=V(2202),pe=V(576),G=V(9672);function Q(Se,He){if(!Se)throw new Error("Iterable cannot be null");return new oe.y(X=>{(0,G.f)(X,He,()=>{const de=Se[Symbol.asyncIterator]();(0,G.f)(X,He,()=>{de.next().then(ve=>{ve.done?X.complete():X.next(ve.value)})},0,!0)})})}var Ue=V(3670),Te=V(8239),qe=V(1144),ut=V(6495),ye=V(2206),De=V(4532),Ce=V(3260);function ke(Se,He){return He?function Me(Se,He){if(null!=Se){if((0,Ue.c)(Se))return function te(Se,He){return(0,d.Xf)(Se).pipe((0,k.R)(He),(0,$.Q)(He))}(Se,He);if((0,qe.z)(Se))return function ue(Se,He){return new oe.y(X=>{let de=0;return He.schedule(function(){de===Se.length?X.complete():(X.next(Se[de++]),X.closed||this.schedule())})})}(Se,He);if((0,Te.t)(Se))return function ie(Se,He){return(0,d.Xf)(Se).pipe((0,k.R)(He),(0,$.Q)(He))}(Se,He);if((0,ye.D)(Se))return Q(Se,He);if((0,ut.T)(Se))return function q(Se,He){return new oe.y(X=>{let de;return(0,G.f)(X,He,()=>{de=Se[re.h](),(0,G.f)(X,He,()=>{let ve,Ke;try{({value:ve,done:Ke}=de.next())}catch($e){return void X.error($e)}Ke?X.complete():X.next(ve)},0,!0)}),()=>(0,pe.m)(de?.return)&&de.return()})}(Se,He);if((0,Ce.L)(Se))return function Oe(Se,He){return Q((0,Ce.Q)(Se),He)}(Se,He)}throw(0,De.z)(Se)}(Se,He):(0,d.Xf)(Se)}},8421:(mt,be,V)=>{"use strict";V.d(be,{Xf:()=>Ue});var d=V(655),$=V(1144),k=V(8239),te=V(9751),ie=V(3670),oe=V(2206),ue=V(4532),re=V(6495),pe=V(3260),G=V(576),q=V(7849),Q=V(8822);function Ue(Me){if(Me instanceof te.y)return Me;if(null!=Me){if((0,ie.c)(Me))return function Te(Me){return new te.y(ke=>{const Se=Me[Q.L]();if((0,G.m)(Se.subscribe))return Se.subscribe(ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,$.z)(Me))return function qe(Me){return new te.y(ke=>{for(let Se=0;Se<Me.length&&!ke.closed;Se++)ke.next(Me[Se]);ke.complete()})}(Me);if((0,k.t)(Me))return function ut(Me){return new te.y(ke=>{Me.then(Se=>{ke.closed||(ke.next(Se),ke.complete())},Se=>ke.error(Se)).then(null,q.h)})}(Me);if((0,oe.D)(Me))return De(Me);if((0,re.T)(Me))return function ye(Me){return new te.y(ke=>{for(const Se of Me)if(ke.next(Se),ke.closed)return;ke.complete()})}(Me);if((0,pe.L)(Me))return function Ce(Me){return De((0,pe.Q)(Me))}(Me)}throw(0,ue.z)(Me)}function De(Me){return new te.y(ke=>{(function Oe(Me,ke){var Se,He,X,de;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Se=(0,d.KL)(Me);!(He=yield Se.next()).done;)if(ke.next(He.value),ke.closed)return}catch(ve){X={error:ve}}finally{try{He&&!He.done&&(de=Se.return)&&(yield de.call(Se))}finally{if(X)throw X.error}}ke.complete()})})(Me,ke).catch(Se=>ke.error(Se))})}},6451:(mt,be,V)=>{"use strict";V.d(be,{T:()=>oe});var d=V(8189),$=V(8421),k=V(515),te=V(7669),ie=V(8996);function oe(...ue){const re=(0,te.yG)(ue),pe=(0,te._6)(ue,1/0),G=ue;return G.length?1===G.length?(0,$.Xf)(G[0]):(0,d.J)(pe)((0,ie.D)(G,re)):k.E}},5403:(mt,be,V)=>{"use strict";V.d(be,{x:()=>$});var d=V(930);function $(te,ie,oe,ue,re){return new k(te,ie,oe,ue,re)}class k extends d.Lv{constructor(ie,oe,ue,re,pe,G){super(ie),this.onFinalize=pe,this.shouldUnsubscribe=G,this._next=oe?function(q){try{oe(q)}catch(Q){ie.error(Q)}}:super._next,this._error=re?function(q){try{re(q)}catch(Q){ie.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(q){ie.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(mt,be,V)=>{"use strict";V.d(be,{U:()=>k});var d=V(4482),$=V(5403);function k(te,ie){return(0,d.e)((oe,ue)=>{let re=0;oe.subscribe((0,$.x)(ue,pe=>{ue.next(te.call(ie,pe,re++))}))})}},8189:(mt,be,V)=>{"use strict";V.d(be,{J:()=>k});var d=V(5577),$=V(4671);function k(te=1/0){return(0,d.z)($.y,te)}},5577:(mt,be,V)=>{"use strict";V.d(be,{z:()=>re});var d=V(4004),$=V(8421),k=V(4482),te=V(9672),ie=V(5403),ue=V(576);function re(pe,G,q=1/0){return(0,ue.m)(G)?re((Q,Ue)=>(0,d.U)((Te,qe)=>G(Q,Te,Ue,qe))((0,$.Xf)(pe(Q,Ue))),q):("number"==typeof G&&(q=G),(0,k.e)((Q,Ue)=>function oe(pe,G,q,Q,Ue,Te,qe,ut){const ye=[];let De=0,Ce=0,Oe=!1;const Me=()=>{Oe&&!ye.length&&!De&&G.complete()},ke=He=>De<Q?Se(He):ye.push(He),Se=He=>{Te&&G.next(He),De++;let X=!1;(0,$.Xf)(q(He,Ce++)).subscribe((0,ie.x)(G,de=>{Ue?.(de),Te?ke(de):G.next(de)},()=>{X=!0},void 0,()=>{if(X)try{for(De--;ye.length&&De<Q;){const de=ye.shift();qe?(0,te.f)(G,qe,()=>Se(de)):Se(de)}Me()}catch(de){G.error(de)}}))};return pe.subscribe((0,ie.x)(G,ke,()=>{Oe=!0,Me()})),()=>{ut?.()}}(Q,Ue,pe,q)))}},5363:(mt,be,V)=>{"use strict";V.d(be,{Q:()=>te});var d=V(9672),$=V(4482),k=V(5403);function te(ie,oe=0){return(0,$.e)((ue,re)=>{ue.subscribe((0,k.x)(re,pe=>(0,d.f)(re,ie,()=>re.next(pe),oe),()=>(0,d.f)(re,ie,()=>re.complete(),oe),pe=>(0,d.f)(re,ie,()=>re.error(pe),oe)))})}},3099:(mt,be,V)=>{"use strict";V.d(be,{B:()=>ie});var d=V(8421),$=V(7579),k=V(930),te=V(4482);function ie(ue={}){const{connector:re=(()=>new $.x),resetOnError:pe=!0,resetOnComplete:G=!0,resetOnRefCountZero:q=!0}=ue;return Q=>{let Ue,Te,qe,ut=0,ye=!1,De=!1;const Ce=()=>{Te?.unsubscribe(),Te=void 0},Oe=()=>{Ce(),Ue=qe=void 0,ye=De=!1},Me=()=>{const ke=Ue;Oe(),ke?.unsubscribe()};return(0,te.e)((ke,Se)=>{ut++,!De&&!ye&&Ce();const He=qe=qe??re();Se.add(()=>{ut--,0===ut&&!De&&!ye&&(Te=oe(Me,q))}),He.subscribe(Se),!Ue&&ut>0&&(Ue=new k.Hp({next:X=>He.next(X),error:X=>{De=!0,Ce(),Te=oe(Oe,pe,X),He.error(X)},complete:()=>{ye=!0,Ce(),Te=oe(Oe,G),He.complete()}}),(0,d.Xf)(ke).subscribe(Ue))})(Q)}}function oe(ue,re,...pe){if(!0===re)return void ue();if(!1===re)return;const G=new k.Hp({next:()=>{G.unsubscribe(),ue()}});return re(...pe).subscribe(G)}},9468:(mt,be,V)=>{"use strict";V.d(be,{R:()=>$});var d=V(4482);function $(k,te=0){return(0,d.e)((ie,oe)=>{oe.add(k.schedule(()=>ie.subscribe(oe),te))})}},8505:(mt,be,V)=>{"use strict";V.d(be,{b:()=>ie});var d=V(576),$=V(4482),k=V(5403),te=V(4671);function ie(oe,ue,re){const pe=(0,d.m)(oe)||ue||re?{next:oe,error:ue,complete:re}:oe;return pe?(0,$.e)((G,q)=>{var Q;null===(Q=pe.subscribe)||void 0===Q||Q.call(pe);let Ue=!0;G.subscribe((0,k.x)(q,Te=>{var qe;null===(qe=pe.next)||void 0===qe||qe.call(pe,Te),q.next(Te)},()=>{var Te;Ue=!1,null===(Te=pe.complete)||void 0===Te||Te.call(pe),q.complete()},Te=>{var qe;Ue=!1,null===(qe=pe.error)||void 0===qe||qe.call(pe,Te),q.error(Te)},()=>{var Te,qe;Ue&&(null===(Te=pe.unsubscribe)||void 0===Te||Te.call(pe)),null===(qe=pe.finalize)||void 0===qe||qe.call(pe)}))}):te.y}},4408:(mt,be,V)=>{"use strict";V.d(be,{o:()=>ie});var d=V(727);class $ extends d.w0{constructor(ue,re){super()}schedule(ue,re=0){return this}}const k={setInterval(oe,ue,...re){const{delegate:pe}=k;return pe?.setInterval?pe.setInterval(oe,ue,...re):setInterval(oe,ue,...re)},clearInterval(oe){const{delegate:ue}=k;return(ue?.clearInterval||clearInterval)(oe)},delegate:void 0};var te=V(8737);class ie extends ${constructor(ue,re){super(ue,re),this.scheduler=ue,this.work=re,this.pending=!1}schedule(ue,re=0){var pe;if(this.closed)return this;this.state=ue;const G=this.id,q=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(q,G,re)),this.pending=!0,this.delay=re,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(q,this.id,re),this}requestAsyncId(ue,re,pe=0){return k.setInterval(ue.flush.bind(ue,this),pe)}recycleAsyncId(ue,re,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return re;null!=re&&k.clearInterval(re)}execute(ue,re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ue,re);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,re){let G,pe=!1;try{this.work(ue)}catch(q){pe=!0,G=q||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ue,scheduler:re}=this,{actions:pe}=re;this.work=this.state=this.scheduler=null,this.pending=!1,(0,te.P)(pe,this),null!=ue&&(this.id=this.recycleAsyncId(re,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(mt,be,V)=>{"use strict";V.d(be,{v:()=>k});var d=V(6063);class ${constructor(ie,oe=$.now){this.schedulerActionCtor=ie,this.now=oe}schedule(ie,oe=0,ue){return new this.schedulerActionCtor(this,ie).schedule(ue,oe)}}$.now=d.l.now;class k extends ${constructor(ie,oe=$.now){super(ie,oe),this.actions=[],this._active=!1}flush(ie){const{actions:oe}=this;if(this._active)return void oe.push(ie);let ue;this._active=!0;do{if(ue=ie.execute(ie.state,ie.delay))break}while(ie=oe.shift());if(this._active=!1,ue){for(;ie=oe.shift();)ie.unsubscribe();throw ue}}}},4986:(mt,be,V)=>{"use strict";V.d(be,{z:()=>k});var d=V(4408);const k=new(V(7565).v)(d.o)},6063:(mt,be,V)=>{"use strict";V.d(be,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(mt,be,V)=>{"use strict";V.d(be,{z:()=>d});const d={setTimeout($,k,...te){const{delegate:ie}=d;return ie?.setTimeout?ie.setTimeout($,k,...te):setTimeout($,k,...te)},clearTimeout($){const{delegate:k}=d;return(k?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(mt,be,V)=>{"use strict";V.d(be,{h:()=>$});const $=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,be,V)=>{"use strict";V.d(be,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(mt,be,V)=>{"use strict";V.d(be,{_6:()=>oe,jO:()=>te,yG:()=>ie});var d=V(576);function k(ue){return ue[ue.length-1]}function te(ue){return(0,d.m)(k(ue))?ue.pop():void 0}function ie(ue){return function $(ue){return ue&&(0,d.m)(ue.schedule)}(k(ue))?ue.pop():void 0}function oe(ue,re){return"number"==typeof k(ue)?ue.pop():re}},8737:(mt,be,V)=>{"use strict";function d($,k){if($){const te=$.indexOf(k);0<=te&&$.splice(te,1)}}V.d(be,{P:()=>d})},3888:(mt,be,V)=>{"use strict";function d($){const te=$(ie=>{Error.call(ie),ie.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}V.d(be,{d:()=>d})},2806:(mt,be,V)=>{"use strict";V.d(be,{O:()=>te,x:()=>k});var d=V(2416);let $=null;function k(ie){if(d.v.useDeprecatedSynchronousErrorHandling){const oe=!$;if(oe&&($={errorThrown:!1,error:null}),ie(),oe){const{errorThrown:ue,error:re}=$;if($=null,ue)throw re}}else ie()}function te(ie){d.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ie)}},9672:(mt,be,V)=>{"use strict";function d($,k,te,ie=0,oe=!1){const ue=k.schedule(function(){te(),oe?$.add(this.schedule(null,ie)):this.unsubscribe()},ie);if($.add(ue),!oe)return ue}V.d(be,{f:()=>d})},4671:(mt,be,V)=>{"use strict";function d($){return $}V.d(be,{y:()=>d})},1144:(mt,be,V)=>{"use strict";V.d(be,{z:()=>d});const d=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(mt,be,V)=>{"use strict";V.d(be,{D:()=>$});var d=V(576);function $(k){return Symbol.asyncIterator&&(0,d.m)(k?.[Symbol.asyncIterator])}},576:(mt,be,V)=>{"use strict";function d($){return"function"==typeof $}V.d(be,{m:()=>d})},3670:(mt,be,V)=>{"use strict";V.d(be,{c:()=>k});var d=V(8822),$=V(576);function k(te){return(0,$.m)(te[d.L])}},6495:(mt,be,V)=>{"use strict";V.d(be,{T:()=>k});var d=V(2202),$=V(576);function k(te){return(0,$.m)(te?.[d.h])}},8239:(mt,be,V)=>{"use strict";V.d(be,{t:()=>$});var d=V(576);function $(k){return(0,d.m)(k?.then)}},3260:(mt,be,V)=>{"use strict";V.d(be,{L:()=>te,Q:()=>k});var d=V(655),$=V(576);function k(ie){return(0,d.FC)(this,arguments,function*(){const ue=ie.getReader();try{for(;;){const{value:re,done:pe}=yield(0,d.qq)(ue.read());if(pe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(re)}}finally{ue.releaseLock()}})}function te(ie){return(0,$.m)(ie?.getReader)}},4482:(mt,be,V)=>{"use strict";V.d(be,{A:()=>$,e:()=>k});var d=V(576);function $(te){return(0,d.m)(te?.lift)}function k(te){return ie=>{if($(ie))return ie.lift(function(oe){try{return te(oe,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(mt,be,V)=>{"use strict";function d(){}V.d(be,{Z:()=>d})},9635:(mt,be,V)=>{"use strict";V.d(be,{U:()=>k,z:()=>$});var d=V(4671);function $(...te){return k(te)}function k(te){return 0===te.length?d.y:1===te.length?te[0]:function(oe){return te.reduce((ue,re)=>re(ue),oe)}}},7849:(mt,be,V)=>{"use strict";V.d(be,{h:()=>k});var d=V(2416),$=V(3410);function k(te){$.z.setTimeout(()=>{const{onUnhandledError:ie}=d.v;if(!ie)throw te;ie(te)})}},4532:(mt,be,V)=>{"use strict";function d($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(be,{z:()=>d})},655:(mt,be,V)=>{"use strict";function te(le,me){var Ie={};for(var Ne in le)Object.prototype.hasOwnProperty.call(le,Ne)&&me.indexOf(Ne)<0&&(Ie[Ne]=le[Ne]);if(null!=le&&"function"==typeof Object.getOwnPropertySymbols){var Ve=0;for(Ne=Object.getOwnPropertySymbols(le);Ve<Ne.length;Ve++)me.indexOf(Ne[Ve])<0&&Object.prototype.propertyIsEnumerable.call(le,Ne[Ve])&&(Ie[Ne[Ve]]=le[Ne[Ve]])}return Ie}function Q(le,me,Ie,Ne){return new(Ie||(Ie=Promise))(function(je,nt){function Ze(_t){try{bt(Ne.next(_t))}catch(et){nt(et)}}function fn(_t){try{bt(Ne.throw(_t))}catch(et){nt(et)}}function bt(_t){_t.done?je(_t.value):function Ve(je){return je instanceof Ie?je:new Ie(function(nt){nt(je)})}(_t.value).then(Ze,fn)}bt((Ne=Ne.apply(le,me||[])).next())})}function Me(le){return this instanceof Me?(this.v=le,this):new Me(le)}function ke(le,me,Ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,Ne=Ie.apply(le,me||[]),je=[];return Ve={},nt("next"),nt("throw"),nt("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve;function nt(rn){Ne[rn]&&(Ve[rn]=function(Fn){return new Promise(function(gn,pn){je.push([rn,Fn,gn,pn])>1||Ze(rn,Fn)})})}function Ze(rn,Fn){try{!function fn(rn){rn.value instanceof Me?Promise.resolve(rn.value.v).then(bt,_t):et(je[0][2],rn)}(Ne[rn](Fn))}catch(gn){et(je[0][3],gn)}}function bt(rn){Ze("next",rn)}function _t(rn){Ze("throw",rn)}function et(rn,Fn){rn(Fn),je.shift(),je.length&&Ze(je[0][0],je[0][1])}}function He(le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,me=le[Symbol.asyncIterator];return me?me.call(le):(le=function ut(le){var me="function"==typeof Symbol&&Symbol.iterator,Ie=me&&le[me],Ne=0;if(Ie)return Ie.call(le);if(le&&"number"==typeof le.length)return{next:function(){return le&&Ne>=le.length&&(le=void 0),{value:le&&le[Ne++],done:!le}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(le),Ie={},Ne("next"),Ne("throw"),Ne("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie);function Ne(je){Ie[je]=le[je]&&function(nt){return new Promise(function(Ze,fn){!function Ve(je,nt,Ze,fn){Promise.resolve(fn).then(function(bt){je({value:bt,done:Ze})},nt)}(Ze,fn,(nt=le[je](nt)).done,nt.value)})}}}V.d(be,{FC:()=>ke,KL:()=>He,_T:()=>te,mG:()=>Q,qq:()=>Me})},4650:(mt,be,V)=>{"use strict";V.r(be),V.d(be,{ANALYZE_FOR_ENTRY_COMPONENTS:()=>Jl,ANIMATION_MODULE_TYPE:()=>Jr,APP_BOOTSTRAP_LISTENER:()=>ED,APP_ID:()=>cy,APP_INITIALIZER:()=>pr,ApplicationInitStatus:()=>ks,ApplicationModule:()=>od,ApplicationRef:()=>lg,Attribute:()=>Ds,COMPILER_OPTIONS:()=>vD,CUSTOM_ELEMENTS_SCHEMA:()=>vc,ChangeDetectionStrategy:()=>F,ChangeDetectorRef:()=>AD,Compiler:()=>Dk,CompilerFactory:()=>wD,Component:()=>ly,ComponentFactory:()=>Jf,ComponentFactoryResolver:()=>tp,ComponentRef:()=>km,ContentChild:()=>Fd,ContentChildren:()=>tm,DEFAULT_CURRENCY_CODE:()=>DM,DebugElement:()=>Gh,DebugEventListener:()=>UM,DebugNode:()=>nE,DefaultIterableDiffer:()=>OD,Directive:()=>gD,ENVIRONMENT_INITIALIZER:()=>Mv,ElementRef:()=>Pc,EmbeddedViewRef:()=>LM,EnvironmentInjector:()=>lu,ErrorHandler:()=>Jd,EventEmitter:()=>Ps,Host:()=>D,HostBinding:()=>Vh,HostListener:()=>Du,INJECTOR:()=>Rv,Inject:()=>aa,InjectFlags:()=>at,Injectable:()=>no,InjectionToken:()=>Sn,Injector:()=>ul,Input:()=>mD,IterableDiffers:()=>_a,KeyValueDiffers:()=>lo,LOCALE_ID:()=>dy,MissingTranslationStrategy:()=>Bo,ModuleWithComponentFactories:()=>yD,NO_ERRORS_SCHEMA:()=>Of,NgModule:()=>$I,NgModuleFactory:()=>zb,NgModuleRef:()=>Zc,NgProbeToken:()=>sd,NgZone:()=>We,Optional:()=>Ro,Output:()=>yi,PACKAGE_ROOT_URL:()=>xe,PLATFORM_ID:()=>ge,PLATFORM_INITIALIZER:()=>Qe,Pipe:()=>CM,PlatformRef:()=>JI,Query:()=>Js,QueryList:()=>Kp,ReflectiveInjector:()=>oh,ReflectiveKey:()=>Ot,Renderer2:()=>nA,RendererFactory2:()=>tC,RendererStyleFlags2:()=>Ss,ResolvedReflectiveFactory:()=>Fo,Sanitizer:()=>Fv,SecurityContext:()=>dr,Self:()=>Xa,SimpleChange:()=>Ma,SkipSelf:()=>la,TRANSLATIONS:()=>TM,TRANSLATIONS_FORMAT:()=>SM,TemplateRef:()=>Nn,Testability:()=>KI,TestabilityRegistry:()=>ZI,Type:()=>mc,VERSION:()=>Lv,Version:()=>nC,ViewChild:()=>gc,ViewChildren:()=>nm,ViewContainerRef:()=>Yp,ViewEncapsulation:()=>P,ViewRef:()=>RD,asNativeElements:()=>xD,assertPlatform:()=>Hh,createComponent:()=>BD,createEnvironmentInjector:()=>fI,createNgModule:()=>Mh,createNgModuleRef:()=>$b,createPlatform:()=>YI,createPlatformFactory:()=>fs,defineInjectable:()=>rn,destroyPlatform:()=>DD,enableProdMode:()=>PM,forwardRef:()=>q,getDebugNode:()=>wn,getModuleFactory:()=>kM,getNgModuleById:()=>OM,getPlatform:()=>vi,importProvidersFrom:()=>al,inject:()=>rt,isDevMode:()=>NM,isStandalone:()=>Ci,makeEnvironmentProviders:()=>xv,platformCore:()=>oE,reflectComponentType:()=>wi,resolveForwardRef:()=>Q,setTestabilityGetter:()=>QI,\u0275ALLOW_MULTIPLE_PLATFORMS:()=>zh,\u0275APP_ID_RANDOM_PROVIDER:()=>Ct,\u0275ComponentFactory:()=>Jf,\u0275Console:()=>_D,\u0275DEFAULT_LOCALE_ID:()=>Kc,\u0275INJECTOR_SCOPE:()=>Yd,\u0275LContext:()=>Bf,\u0275LifecycleHooksFeature:()=>ha,\u0275LocaleDataIndex:()=>Mt,\u0275NG_COMP_DEF:()=>st,\u0275NG_DIR_DEF:()=>St,\u0275NG_ELEMENT_ID:()=>Dn,\u0275NG_INJ_DEF:()=>Ei,\u0275NG_MOD_DEF:()=>Jt,\u0275NG_PIPE_DEF:()=>xt,\u0275NG_PROV_DEF:()=>ii,\u0275NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR:()=>Om,\u0275NO_CHANGE:()=>Vt,\u0275NgModuleFactory:()=>jp,\u0275NoopNgZone:()=>GI,\u0275ReflectionCapabilities:()=>_n,\u0275Render3ComponentFactory:()=>Uc,\u0275Render3ComponentRef:()=>NC,\u0275Render3NgModuleRef:()=>F_,\u0275RuntimeError:()=>ye,\u0275TESTABILITY:()=>qI,\u0275TESTABILITY_GETTER:()=>hs,\u0275ViewRef:()=>dh,\u0275XSS_SECURITY_URL:()=>ut,\u0275_sanitizeHtml:()=>G0,\u0275_sanitizeUrl:()=>qf,\u0275allowSanitizationBypassAndThrow:()=>au,\u0275bypassSanitizationTrustHtml:()=>bv,\u0275bypassSanitizationTrustResourceUrl:()=>jS,\u0275bypassSanitizationTrustScript:()=>VS,\u0275bypassSanitizationTrustStyle:()=>j0,\u0275bypassSanitizationTrustUrl:()=>bm,\u0275clearResolutionOfComponentResourcesQueue:()=>yn,\u0275coerceToBoolean:()=>aE,\u0275compileComponent:()=>OI,\u0275compileDirective:()=>oy,\u0275compileNgModule:()=>rg,\u0275compileNgModuleDefs:()=>NI,\u0275compileNgModuleFactory:()=>$h,\u0275compilePipe:()=>pD,\u0275convertToBitFlags:()=>Et,\u0275createInjector:()=>ih,\u0275defaultIterableDiffers:()=>FD,\u0275defaultKeyValueDiffers:()=>Kh,\u0275detectChanges:()=>jC,\u0275devModeEqual:()=>ow,\u0275findLocaleData:()=>$w,\u0275flushModuleScopingQueueAsMuchAsPossible:()=>RI,\u0275formatRuntimeError:()=>De,\u0275getDebugNode:()=>wn,\u0275getDebugNodeR2:()=>PD,\u0275getDirectives:()=>Rh,\u0275getHostElement:()=>U_,\u0275getInjectableDef:()=>gn,\u0275getLContext:()=>qr,\u0275getLocaleCurrencyCode:()=>Eb,\u0275getLocalePluralCase:()=>Cb,\u0275getSanitizationBypassType:()=>V0,\u0275getUnknownElementStrictMode:()=>Ic,\u0275getUnknownPropertyStrictMode:()=>om,\u0275global:()=>Lt,\u0275injectChangeDetectorRef:()=>MD,\u0275internalCreateApplication:()=>RM,\u0275isBoundToModule:()=>CD,\u0275isEnvironmentProviders:()=>Te,\u0275isInjectable:()=>pn,\u0275isNgModule:()=>MI,\u0275isObservable:()=>$C,\u0275isPromise:()=>wh,\u0275isSubscribable:()=>Hc,\u0275makeDecorator:()=>Xl,\u0275noSideEffects:()=>O,\u0275patchComponentDefWithScope:()=>Lh,\u0275publishDefaultGlobalUtils:()=>Jn,\u0275publishGlobalUtil:()=>ht,\u0275registerLocaleData:()=>tM,\u0275resetCompiledComponents:()=>kI,\u0275resetJitOptions:()=>wM,\u0275resolveComponentResources:()=>Pe,\u0275setAllowDuplicateNgModuleIdsForTest:()=>Bd,\u0275setClassMetadata:()=>xh,\u0275setCurrentInjector:()=>Vr,\u0275setDocument:()=>k0,\u0275setLocaleId:()=>Ns,\u0275setUnknownElementStrictMode:()=>im,\u0275setUnknownPropertyStrictMode:()=>sm,\u0275store:()=>BC,\u0275stringify:()=>re,\u0275transitiveScopesFor:()=>ed,\u0275unregisterLocaleData:()=>bh,\u0275unwrapSafeValue:()=>sl,\u0275\u0275CopyDefinitionFeature:()=>Xm,\u0275\u0275FactoryTarget:()=>Bn,\u0275\u0275HostDirectivesFeature:()=>sw,\u0275\u0275InheritDefinitionFeature:()=>Qm,\u0275\u0275NgOnChangesFeature:()=>yo,\u0275\u0275ProvidersFeature:()=>O_,\u0275\u0275StandaloneFeature:()=>Qc,\u0275\u0275advance:()=>lC,\u0275\u0275attribute:()=>_p,\u0275\u0275attributeInterpolate1:()=>Ep,\u0275\u0275attributeInterpolate2:()=>us,\u0275\u0275attributeInterpolate3:()=>i_,\u0275\u0275attributeInterpolate4:()=>Bc,\u0275\u0275attributeInterpolate5:()=>aw,\u0275\u0275attributeInterpolate6:()=>lw,\u0275\u0275attributeInterpolate7:()=>s_,\u0275\u0275attributeInterpolate8:()=>_h,\u0275\u0275attributeInterpolateV:()=>uw,\u0275\u0275classMap:()=>rb,\u0275\u0275classMapInterpolate1:()=>fb,\u0275\u0275classMapInterpolate2:()=>__,\u0275\u0275classMapInterpolate3:()=>Ow,\u0275\u0275classMapInterpolate4:()=>cs,\u0275\u0275classMapInterpolate5:()=>pb,\u0275\u0275classMapInterpolate6:()=>Gc,\u0275\u0275classMapInterpolate7:()=>QA,\u0275\u0275classMapInterpolate8:()=>Fw,\u0275\u0275classMapInterpolateV:()=>_l,\u0275\u0275classProp:()=>Tw,\u0275\u0275contentQuery:()=>SI,\u0275\u0275defineComponent:()=>oi,\u0275\u0275defineDirective:()=>zu,\u0275\u0275defineInjectable:()=>et,\u0275\u0275defineInjector:()=>Fn,\u0275\u0275defineNgModule:()=>xl,\u0275\u0275definePipe:()=>$u,\u0275\u0275directiveInject:()=>Oc,\u0275\u0275disableBindings:()=>On,\u0275\u0275element:()=>cw,\u0275\u0275elementContainer:()=>hw,\u0275\u0275elementContainerEnd:()=>dw,\u0275\u0275elementContainerStart:()=>l_,\u0275\u0275elementEnd:()=>a_,\u0275\u0275elementStart:()=>o_,\u0275\u0275enableBindings:()=>Ul,\u0275\u0275getCurrentView:()=>u_,\u0275\u0275getInheritedFactory:()=>Ka,\u0275\u0275hostProperty:()=>Bw,\u0275\u0275i18n:()=>P_,\u0275\u0275i18nApply:()=>dI,\u0275\u0275i18nAttributes:()=>Ub,\u0275\u0275i18nEnd:()=>Sh,\u0275\u0275i18nExp:()=>cI,\u0275\u0275i18nPostprocess:()=>Vb,\u0275\u0275i18nStart:()=>Xr,\u0275\u0275inject:()=>Be,\u0275\u0275injectAttribute:()=>ia,\u0275\u0275invalidFactory:()=>Gv,\u0275\u0275invalidFactoryDep:()=>Ee,\u0275\u0275listener:()=>fw,\u0275\u0275loadQuery:()=>X_,\u0275\u0275namespaceHTML:()=>Sf,\u0275\u0275namespaceMathML:()=>cr,\u0275\u0275namespaceSVG:()=>La,\u0275\u0275nextContext:()=>qC,\u0275\u0275ngDeclareClassMetadata:()=>LD,\u0275\u0275ngDeclareComponent:()=>UD,\u0275\u0275ngDeclareDirective:()=>hg,\u0275\u0275ngDeclareFactory:()=>_y,\u0275\u0275ngDeclareInjectable:()=>VD,\u0275\u0275ngDeclareInjector:()=>BM,\u0275\u0275ngDeclareNgModule:()=>zM,\u0275\u0275ngDeclarePipe:()=>jD,\u0275\u0275pipe:()=>Wp,\u0275\u0275pipeBind1:()=>W_,\u0275\u0275pipeBind2:()=>Yb,\u0275\u0275pipeBind3:()=>Xb,\u0275\u0275pipeBind4:()=>II,\u0275\u0275pipeBindV:()=>EI,\u0275\u0275projection:()=>KC,\u0275\u0275projectionDef:()=>gw,\u0275\u0275property:()=>zc,\u0275\u0275propertyInterpolate:()=>Cp,\u0275\u0275propertyInterpolate1:()=>bp,\u0275\u0275propertyInterpolate2:()=>Dp,\u0275\u0275propertyInterpolate3:()=>Ih,\u0275\u0275propertyInterpolate4:()=>mw,\u0275\u0275propertyInterpolate5:()=>_w,\u0275\u0275propertyInterpolate6:()=>yw,\u0275\u0275propertyInterpolate7:()=>vw,\u0275\u0275propertyInterpolate8:()=>Eh,\u0275\u0275propertyInterpolateV:()=>c_,\u0275\u0275pureFunction0:()=>j_,\u0275\u0275pureFunction1:()=>B_,\u0275\u0275pureFunction2:()=>z_,\u0275\u0275pureFunction3:()=>$p,\u0275\u0275pureFunction4:()=>Nh,\u0275\u0275pureFunction5:()=>_I,\u0275\u0275pureFunction6:()=>Zb,\u0275\u0275pureFunction7:()=>$_,\u0275\u0275pureFunction8:()=>Hp,\u0275\u0275pureFunctionV:()=>H_,\u0275\u0275queryRefresh:()=>Y_,\u0275\u0275reference:()=>zC,\u0275\u0275registerNgModuleType:()=>jd,\u0275\u0275resetView:()=>Cf,\u0275\u0275resolveBody:()=>sC,\u0275\u0275resolveDocument:()=>Bv,\u0275\u0275resolveWindow:()=>jv,\u0275\u0275restoreView:()=>Dd,\u0275\u0275sanitizeHtml:()=>KS,\u0275\u0275sanitizeResourceUrl:()=>Mm,\u0275\u0275sanitizeScript:()=>K0,\u0275\u0275sanitizeStyle:()=>ZS,\u0275\u0275sanitizeUrl:()=>q0,\u0275\u0275sanitizeUrlOrResourceUrl:()=>XS,\u0275\u0275setComponentScope:()=>Ml,\u0275\u0275setNgModuleScope:()=>Ir,\u0275\u0275styleMap:()=>so,\u0275\u0275styleMapInterpolate1:()=>y_,\u0275\u0275styleMapInterpolate2:()=>gb,\u0275\u0275styleMapInterpolate3:()=>YA,\u0275\u0275styleMapInterpolate4:()=>XA,\u0275\u0275styleMapInterpolate5:()=>Lw,\u0275\u0275styleMapInterpolate6:()=>Uw,\u0275\u0275styleMapInterpolate7:()=>v_,\u0275\u0275styleMapInterpolate8:()=>mb,\u0275\u0275styleMapInterpolateV:()=>_b,\u0275\u0275styleProp:()=>Dw,\u0275\u0275stylePropInterpolate1:()=>Vw,\u0275\u0275stylePropInterpolate2:()=>w_,\u0275\u0275stylePropInterpolate3:()=>jw,\u0275\u0275stylePropInterpolate4:()=>yb,\u0275\u0275stylePropInterpolate5:()=>vb,\u0275\u0275stylePropInterpolate6:()=>wb,\u0275\u0275stylePropInterpolate7:()=>qc,\u0275\u0275stylePropInterpolate8:()=>Ib,\u0275\u0275stylePropInterpolateV:()=>I_,\u0275\u0275syntheticHostListener:()=>pw,\u0275\u0275syntheticHostProperty:()=>zw,\u0275\u0275template:()=>vh,\u0275\u0275templateRefExtractor:()=>Jp,\u0275\u0275text:()=>cb,\u0275\u0275textInterpolate:()=>xw,\u0275\u0275textInterpolate1:()=>g_,\u0275\u0275textInterpolate2:()=>Fr,\u0275\u0275textInterpolate3:()=>Nw,\u0275\u0275textInterpolate4:()=>yu,\u0275\u0275textInterpolate5:()=>Pw,\u0275\u0275textInterpolate6:()=>kw,\u0275\u0275textInterpolate7:()=>m_,\u0275\u0275textInterpolate8:()=>db,\u0275\u0275textInterpolateV:()=>hb,\u0275\u0275trustConstantHtml:()=>QS,\u0275\u0275trustConstantResourceUrl:()=>YS,\u0275\u0275validateIframeAttribute:()=>Em,\u0275\u0275viewQuery:()=>TI});var d=V(7579),$=V(727),k=V(9751),te=V(6451),ie=V(3099);function oe(s){for(let o in s)if(s[o]===oe)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function re(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(re).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=oe({__forward_ref__:oe});function q(s){return s.__forward_ref__=q,s.toString=function(){return re(this())},s}function Q(s){return Ue(s)?s():s}function Ue(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===q}function Te(s){return s&&!!s.\u0275providers}const ut="https://g.co/ng/security#xss";class ye extends Error{constructor(o,l){super(De(o,l)),this.code=o}}function De(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function Ce(s){return"string"==typeof s?s:null==s?"":String(s)}function Oe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ce(s)}function He(s,o){throw new ye(-201,!1)}function Ze(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}function et(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}const rn=et;function Fn(s){return{providers:s.providers||[],imports:s.imports||[]}}function gn(s){return lr(s,ii)||lr(s,bn)}function pn(s){return null!==gn(s)}function lr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Gn(s){return s&&(s.hasOwnProperty(Ei)||s.hasOwnProperty(vr))?s[Ei]:null}const ii=oe({\u0275prov:oe}),Ei=oe({\u0275inj:oe}),bn=oe({ngInjectableDef:oe}),vr=oe({ngInjectorDef:oe});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let Rr;function ir(s){const o=Rr;return Rr=s,o}function qn(s,o,l){const c=gn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&at.Optional?null:void 0!==o?o:void He(re(s))}const Lt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Rn={},Kn="__NG_DI_FLAG__",wr="ngTempTokenPath",ur="ngTokenPath",xi=/\n/gm,$t="\u0275",Ni="__source";let Xt;function Vr(s){const o=Xt;return Xt=s,o}function Zn(s,o=at.Default){if(void 0===Xt)throw new ye(-203,!1);return null===Xt?qn(s,void 0,o):Xt.get(s,o&at.Optional?null:void 0,o)}function Be(s,o=at.Default){return(function xr(){return Rr}()||Zn)(Q(s),o)}function Ee(s){throw new ye(202,!1)}function rt(s,o=at.Default){return Be(s,Et(o))}function Et(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Nt(s){const o=[];for(let l=0;l<s.length;l++){const c=Q(s[l]);if(Array.isArray(c)){if(0===c.length)throw new ye(900,!1);let h,p=at.Default;for(let y=0;y<c.length;y++){const I=c[y],C=Qn(I);"number"==typeof C?-1===C?h=I.token:p|=C:h=I}o.push(Be(h,p))}else o.push(Be(c))}return o}function tn(s,o){return s[Kn]=o,s.prototype[Kn]=o,s}function Qn(s){return s[Kn]}function O(s){return{toString:s}.toString()}var F=(()=>((F=F||{})[F.OnPush=0]="OnPush",F[F.Default=1]="Default",F))(),P=(()=>{return(s=P||(P={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",P;var s})();const J={},fe=[],st=oe({\u0275cmp:oe}),St=oe({\u0275dir:oe}),xt=oe({\u0275pipe:oe}),Jt=oe({\u0275mod:oe}),At=oe({\u0275fac:oe}),Dn=oe({__NG_ELEMENT_ID__:oe});let Gt=0;function oi(s){return O(()=>{const o=Pr(s),l={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||P.Emulated,id:"c"+Gt++,styles:s.styles||fe,_:null,schemas:s.schemas||null,tView:null};Nl(l);const c=s.dependencies;return l.directiveDefs=Hs(c,!1),l.pipeDefs=Hs(c,!0),l})}function Ml(s,o,l){const c=s.\u0275cmp;c.directiveDefs=Hs(o,!1),c.pipeDefs=Hs(l,!0)}function Rl(s){return cn(s)||Yn(s)}function Bu(s){return null!==s}function xl(s){return O(()=>({type:s.type,bootstrap:s.bootstrap||fe,declarations:s.declarations||fe,imports:s.imports||fe,exports:s.exports||fe,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Ir(s,o){return O(()=>{const l=ai(s,!0);l.declarations=o.declarations||fe,l.imports=o.imports||fe,l.exports=o.exports||fe})}function Ca(s,o){if(null==s)return J;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),l[h]=c,o&&(o[h]=p)}return l}function zu(s){return O(()=>{const o=Pr(s);return Nl(o),o})}function $u(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function cn(s){return s[st]||null}function Yn(s){return s[St]||null}function Nr(s){return s[xt]||null}function Ci(s){const o=cn(s)||Yn(s)||Nr(s);return null!==o&&o.standalone}function ai(s,o){const l=s[Jt]||null;if(!l&&!0===o)throw new Error(`Type ${re(s)} does not have '\u0275mod' property.`);return l}function Pr(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||fe,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ca(s.inputs,o),outputs:Ca(s.outputs)}}function Nl(s){s.features?.forEach(o=>o(s))}function Hs(s,o){if(!s)return null;const l=o?Nr:Rl;return()=>("function"==typeof s?s():s).map(c=>l(c)).filter(Bu)}const ns=0,it=1,qt=2,Cn=3,li=4,_s=5,Ln=6,ys=7,Un=8,jr=9,Hu=10,Ht=11,Pl=12,Ws=13,ba=14,mo=15,Br=16,Gs=17,rs=18,Vn=19,qo=20,If=21,jt=22,Da=1,yd=2,vs=7,$i=8,qs=9,zr=10;function $r(s){return Array.isArray(s)&&"object"==typeof s[Da]}function Er(s){return Array.isArray(s)&&!0===s[Da]}function Wu(s){return 0!=(4&s.flags)}function kl(s){return s.componentOffset>-1}function is(s){return 1==(1&s.flags)}function ss(s){return!!s.template}function Ta(s){return 0!=(256&s[qt])}function ki(s,o){return s.hasOwnProperty(At)?s[At]:null}class Ma{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function yo(){return Ra}function Ra(s){return s.type.prototype.ngOnChanges&&(s.setInput=xa),vo}function vo(){const s=Na(this),o=s?.current;if(o){const l=s.previous;if(l===J)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function xa(s,o,l,c){const h=this.declaredInputs[l],p=Na(s)||function qu(s,o){return s[Ol]=o}(s,{previous:J,current:null}),y=p.current||(p.current={}),I=p.previous,C=I[h];y[h]=new Ma(C&&C.currentValue,o,I===J),s[c]=o}yo.ngInherit=!0;const Ol="__ngSimpleChanges__";function Na(s){return s[Ol]||null}let ws=null;const Ku=s=>{ws=s},mn=function(s,o,l){ws?.(s,o,l)},Zu="svg",Yo="math";function jn(s){for(;Array.isArray(s);)s=s[ns];return s}function Zs(s,o){return jn(o[s])}function Cr(s,o){return jn(o[s.index])}function ka(s,o){return s.data[o]}function Oi(s,o){return s[o]}function kr(s,o){const l=o[s];return $r(l)?l:l[ns]}function wo(s){return 64==(64&s[qt])}function Hi(s,o){return null==o?null:s[o]}function Fl(s){s[rs]=0}function Oa(s,o){s[_s]+=o;let l=s,c=s[Cn];for(;null!==c&&(1===o&&1===l[_s]||-1===o&&0===l[_s]);)c[_s]+=o,l=c,c=c[Cn]}const Ut={lFrame:Jg(null),bindingsEnabled:!0};function bd(){return Ut.bindingsEnabled}function Ul(){Ut.bindingsEnabled=!0}function On(){Ut.bindingsEnabled=!1}function Re(){return Ut.lFrame.lView}function sn(){return Ut.lFrame.tView}function Dd(s){return Ut.lFrame.contextLView=s,s[Un]}function Cf(s){return Ut.lFrame.contextLView=null,s}function Xn(){let s=bf();for(;null!==s&&64===s.type;)s=s.parent;return s}function bf(){return Ut.lFrame.currentTNode}function Qs(){const s=Ut.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function Wi(s,o){const l=Ut.lFrame;l.currentTNode=s,l.isParent=o}function Vl(){return Ut.lFrame.isParent}function jl(){Ut.lFrame.isParent=!1}function sr(){const s=Ut.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Hr(){return Ut.lFrame.bindingIndex}function nc(s){return Ut.lFrame.bindingIndex=s}function Io(){return Ut.lFrame.bindingIndex++}function as(s){const o=Ut.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function rc(s){Ut.lFrame.inI18n=s}function ic(s,o){const l=Ut.lFrame;l.bindingIndex=l.bindingRootIndex=s,Is(o)}function Is(s){Ut.lFrame.currentDirectiveIndex=s}function sc(s){const o=Ut.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function Sd(){return Ut.lFrame.currentQueryIndex}function $l(s){Ut.lFrame.currentQueryIndex=s}function Xg(s){const o=s[it];return 2===o.type?o.declTNode:1===o.type?s[Ln]:null}function oc(s,o,l){if(l&at.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||l&at.Host||(h=Xg(p),null===h||(p=p[mo],10&h.type))););if(null===h)return!1;o=h,s=p}const c=Ut.lFrame=rv();return c.currentTNode=o,c.lView=s,!0}function Ad(s){const o=rv(),l=s[it];Ut.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function rv(){const s=Ut.lFrame,o=null===s?null:s.child;return null===o?Jg(s):o}function Jg(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function ac(){const s=Ut.lFrame;return Ut.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const iv=ac;function Tf(){const s=ac();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ui(){return Ut.lFrame.selectedIndex}function Ys(s){Ut.lFrame.selectedIndex=s}function In(){const s=Ut.lFrame;return ka(s.tView,s.selectedIndex)}function La(){Ut.lFrame.currentNamespace=Zu}function cr(){Ut.lFrame.currentNamespace=Yo}function Sf(){!function bi(){Ut.lFrame.currentNamespace=null}()}function lc(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:N}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-l,y),I&&((s.contentHooks||(s.contentHooks=[])).push(l,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,I)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),S&&((s.viewHooks||(s.viewHooks=[])).push(l,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,S)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(l,N)}}function Ua(s,o,l){Gi(s,o,3,l)}function Xo(s,o,l,c){(3&s[qt])===l&&Gi(s,o,l,c)}function Va(s,o){let l=s[qt];(3&l)===o&&(l&=2047,l+=1,s[qt]=l)}function Gi(s,o,l,c){const p=c??-1,y=o.length-1;let I=0;for(let C=void 0!==c?65535&s[rs]:0;C<y;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(s[rs]+=65536),(I<p||-1==p)&&(Rd(s,l,o,C),s[rs]=(4294901760&s[rs])+C+2),C++}function Rd(s,o,l,c){const h=l[c]<0,p=l[c+1],I=s[h?-l[c]:l[c]];if(h){if(s[qt]>>11<s[rs]>>16&&(3&s[qt])===o){s[qt]+=2048,mn(4,I,p);try{p.call(I)}finally{mn(5,I,p)}}}else{mn(4,I,p);try{p.call(I)}finally{mn(5,I,p)}}}const qi=-1;class ja{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function Jo(s,o,l){let c=0;for(;c<l.length;){const h=l[c];if("number"==typeof h){if(0!==h)break;c++;const p=l[c++],y=l[c++],I=l[c++];s.setAttribute(o,y,I,p)}else{const p=h,y=l[++c];ea(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),c++}}return c}function xn(s){return 3===s||4===s||6===s}function ea(s){return 64===s.charCodeAt(0)}function ls(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?l=h:0===l||$a(s,l,h,null,-1===l||2===l?o[++c]:null)}}return s}function $a(s,o,l,c,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const I=s[p++];if("number"==typeof I){if(I===o){y=-1;break}if(I>o){y=p-1;break}}}for(;p<s.length;){const I=s[p];if("number"==typeof I)break;if(I===l){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,l),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function Ha(s){return s!==qi}function Wl(s){return 32767&s}function Eo(s,o){let l=function Mf(s){return s>>16}(s),c=o;for(;l>0;)c=c[mo],l--;return c}let Gl=!0;function Es(s){const o=Gl;return Gl=s,o}const Cs=255,ta=5;let Wa=0;const ci={};function Co(s,o){const l=ra(s,o);if(-1!==l)return l;const c=o[it];c.firstCreatePass&&(s.injectorIndex=o.length,na(c.data,s),na(o,null),na(c.blueprint,null));const h=bo(s,o),p=s.injectorIndex;if(Ha(h)){const y=Wl(h),I=Eo(h,o),C=I[it].data;for(let S=0;S<8;S++)o[p+S]=I[y+S]|C[y+S]}return o[p+8]=h,p}function na(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ra(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function bo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=o;for(;null!==h;){if(c=kd(h),null===c)return qi;if(l++,h=h[mo],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return qi}function Ga(s,o,l){!function ql(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(Dn)&&(c=l[Dn]),null==c&&(c=l[Dn]=Wa++);const h=c&Cs;o.data[s+(h>>ta)]|=1<<h}(s,o,l)}function Kl(s,o,l){if(l&at.Optional||void 0!==s)return s;He()}function dc(s,o,l,c){if(l&at.Optional&&void 0===c&&(c=null),!(l&(at.Self|at.Host))){const h=s[jr],p=ir(void 0);try{return h?h.get(o,c,l&at.Optional):qn(o,c,l&at.Optional)}finally{ir(p)}}return Kl(c,0,l)}function Zl(s,o,l,c=at.Default,h){if(null!==s){if(1024&o[qt]){const y=function Pd(s,o,l,c,h){let p=s,y=o;for(;null!==p&&null!==y&&1024&y[qt]&&!(256&y[qt]);){const I=Nd(p,y,l,c|at.Self,ci);if(I!==ci)return I;let C=p.parent;if(!C){const S=y[If];if(S){const N=S.get(l,ci,c);if(N!==ci)return N}C=kd(y),y=y[mo]}p=C}return h}(s,o,l,c,ci);if(y!==ci)return y}const p=Nd(s,o,l,c,ci);if(p!==ci)return p}return dc(o,l,c,h)}function Nd(s,o,l,c,h){const p=function qa(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Dn)?s[Dn]:void 0;return"number"==typeof o?o>=0?o&Cs:fc:o}(l);if("function"==typeof p){if(!oc(o,s,c))return c&at.Host?Kl(h,0,c):dc(o,l,c,h);try{const y=p(c);if(null!=y||c&at.Optional)return y;He()}finally{iv()}}else if("number"==typeof p){let y=null,I=ra(s,o),C=qi,S=c&at.Host?o[Br][Ln]:null;for((-1===I||c&at.SkipSelf)&&(C=-1===I?bo(s,o):o[I+8],C!==qi&&Yl(c,!1)?(y=o[it],I=Wl(C),o=Eo(C,o)):I=-1);-1!==I;){const N=o[it];if(hc(p,I,N.data)){const B=Ki(I,o,l,y,c,S);if(B!==ci)return B}C=o[I+8],C!==qi&&Yl(c,o[it].data[I+8]===S)&&hc(p,I,o)?(y=N,I=Wl(C),o=Eo(C,o)):I=-1}}return h}function Ki(s,o,l,c,h,p){const y=o[it],I=y.data[s+8],N=Ql(I,y,l,null==c?kl(I)&&Gl:c!=y&&0!=(3&I.type),h&at.Host&&p===I);return null!==N?bs(o,y,N,I):ci}function Ql(s,o,l,c,h){const p=s.providerIndexes,y=o.data,I=1048575&p,C=s.directiveStart,N=p>>20,Z=h?I+N:s.directiveEnd;for(let ne=c?I:I+N;ne<Z;ne++){const we=y[ne];if(ne<C&&l===we||ne>=C&&we.type===l)return ne}if(h){const ne=y[C];if(ne&&ss(ne)&&ne.type===l)return C}return null}function bs(s,o,l,c){let h=s[l];const p=o.data;if(function xd(s){return s instanceof ja}(h)){const y=h;y.resolving&&function Me(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ye(-200,`Circular dependency in DI detected for ${s}${l}`)}(Oe(p[l]));const I=Es(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?ir(y.injectImpl):null;oc(s,c,at.Default);try{h=s[l]=y.factory(void 0,p,s,c),o.firstCreatePass&&l>=c.directiveStart&&function Af(s,o,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const y=Ra(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,y),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,y)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),p&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,p),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,p))}(l,p[l],o)}finally{null!==C&&ir(C),Es(I),y.resolving=!1,iv()}}return h}function hc(s,o,l){return!!(l[o+(s>>ta)]&1<<s)}function Yl(s,o){return!(s&at.Self||s&at.Host&&o)}class di{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return Zl(this._tNode,this._lView,o,Et(c),l)}}function fc(){return new di(Xn(),Re())}function Ka(s){return O(()=>{const o=s.prototype.constructor,l=o[At]||pc(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[At]||pc(h);if(p&&p!==l)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function pc(s){return Ue(s)?()=>{const o=pc(Q(s));return o&&o()}:ki(s)}function kd(s){const o=s[it],l=o.type;return 2===l?o.declTNode:1===l?s[Ln]:null}function ia(s){return function xf(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const p=l[h];if(xn(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(p===o)return l[h+1];h+=2}}}return null}(Xn(),s)}const sa="__annotations__",Do="__parameters__",Za="__prop__metadata__";function Xl(s,o,l,c,h){return O(()=>{const p=Od(o);function y(...I){if(this instanceof y)return p.call(this,...I),this;const C=new y(...I);return function(N){return h&&h(N,...I),(N.hasOwnProperty(sa)?N[sa]:Object.defineProperty(N,sa,{value:[]})[sa]).push(C),c&&c(N),N}}return l&&(y.prototype=Object.create(l.prototype)),y.prototype.ngMetadataName=s,y.annotationCls=y,y})}function Od(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}function To(s,o,l){return O(()=>{const c=Od(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const y=new h(...p);return I.annotation=y,I;function I(C,S,N){const B=C.hasOwnProperty(Do)?C[Do]:Object.defineProperty(C,Do,{value:[]})[Do];for(;B.length<=N;)B.push(null);return(B[N]=B[N]||[]).push(y),C}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}function Xs(s,o,l,c){return O(()=>{const h=Od(o);function p(...y){if(this instanceof p)return h.apply(this,y),this;const I=new p(...y);return function C(S,N){const B=S.constructor,Z=B.hasOwnProperty(Za)?B[Za]:Object.defineProperty(B,Za,{value:{}})[Za];Z[N]=Z.hasOwnProperty(N)&&Z[N]||[],Z[N].unshift(I),c&&c(S,N,...y)}}return l&&(p.prototype=Object.create(l.prototype)),p.prototype.ngMetadataName=s,p.annotationCls=p,p})}const Ds=To("Attribute",s=>({attributeName:s,__NG_ELEMENT_ID__:()=>ia(s)}));class Sn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=et({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Jl=new Sn("AnalyzeForEntryComponents");class Js{}const tm=Xs("ContentChildren",(s,o={})=>({selector:s,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0,...o}),Js),Fd=Xs("ContentChild",(s,o={})=>({selector:s,first:!0,isViewQuery:!1,descendants:!0,...o}),Js),nm=Xs("ViewChildren",(s,o={})=>({selector:s,first:!1,isViewQuery:!0,descendants:!0,emitDistinctChangesOnly:!0,...o}),Js),gc=Xs("ViewChild",(s,o)=>({selector:s,first:!0,isViewQuery:!0,descendants:!0,...o}),Js);var Bn=(()=>((Bn=Bn||{})[Bn.Directive=0]="Directive",Bn[Bn.Component=1]="Component",Bn[Bn.Injectable=2]="Injectable",Bn[Bn.Pipe=3]="Pipe",Bn[Bn.NgModule=4]="NgModule",Bn))();function zn(s){const o=Lt.ng;if(o&&o.\u0275compilerFacade)return o.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}const mc=Function;function Di(s){return"function"==typeof s}function Zi(s){return s.flat(Number.POSITIVE_INFINITY)}function eo(s,o){s.forEach(l=>Array.isArray(l)?eo(l,o):o(l))}function yc(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function So(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ao(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}function Wt(s,o,l){let c=to(s,o);return c>=0?s[1|c]=l:(c=~c,function Ya(s,o,l,c){let h=s.length;if(h==o)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function Wr(s,o){const l=to(s,o);if(l>=0)return s[1|l]}function to(s,o){return function Mo(s,o,l){let c=0,h=s.length>>l;for(;h!==c;){const p=c+(h-c>>1),y=s[p<<l];if(o===y)return p<<l;y>o?h=p:c=p+1}return~(h<<l)}(s,o,1)}const oa=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,Vd=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,Pf=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,hi=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;class _n{constructor(o){this._reflect=o||Lt.Reflect}factory(o){return(...l)=>new o(...l)}_zipTypesAndAnnotations(o,l){let c;c=Ao(typeof o>"u"?l.length:o.length);for(let h=0;h<c.length;h++)c[h]=typeof o>"u"?[]:o[h]&&o[h]!=Object?[o[h]]:[],l&&null!=l[h]&&(c[h]=c[h].concat(l[h]));return c}_ownParameters(o,l){if(function Ts(s){return oa.test(s)||hi.test(s)||Vd.test(s)&&!Pf.test(s)}(o.toString()))return null;if(o.parameters&&o.parameters!==l.parameters)return o.parameters;const h=o.ctorParameters;if(h&&h!==l.ctorParameters){const I="function"==typeof h?h():h,C=I.map(N=>N&&N.type),S=I.map(N=>N&&lt(N.decorators));return this._zipTypesAndAnnotations(C,S)}const p=o.hasOwnProperty(Do)&&o[Do],y=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",o);return y||p?this._zipTypesAndAnnotations(y,p):Ao(o.length)}parameters(o){if(!Di(o))return[];const l=eu(o);let c=this._ownParameters(o,l);return!c&&l!==Object&&(c=this.parameters(l)),c||[]}_ownAnnotations(o,l){if(o.annotations&&o.annotations!==l.annotations){let c=o.annotations;return"function"==typeof c&&c.annotations&&(c=c.annotations),c}return o.decorators&&o.decorators!==l.decorators?lt(o.decorators):o.hasOwnProperty(sa)?o[sa]:null}annotations(o){if(!Di(o))return[];const l=eu(o),c=this._ownAnnotations(o,l)||[];return(l!==Object?this.annotations(l):[]).concat(c)}_ownPropMetadata(o,l){if(o.propMetadata&&o.propMetadata!==l.propMetadata){let c=o.propMetadata;return"function"==typeof c&&c.propMetadata&&(c=c.propMetadata),c}if(o.propDecorators&&o.propDecorators!==l.propDecorators){const c=o.propDecorators,h={};return Object.keys(c).forEach(p=>{h[p]=lt(c[p])}),h}return o.hasOwnProperty(Za)?o[Za]:null}propMetadata(o){if(!Di(o))return{};const l=eu(o),c={};if(l!==Object){const p=this.propMetadata(l);Object.keys(p).forEach(y=>{c[y]=p[y]})}const h=this._ownPropMetadata(o,l);return h&&Object.keys(h).forEach(p=>{const y=[];c.hasOwnProperty(p)&&y.push(...c[p]),y.push(...h[p]),c[p]=y}),c}ownPropMetadata(o){return Di(o)&&this._ownPropMetadata(o,eu(o))||{}}hasLifecycleHook(o,l){return o instanceof mc&&l in o.prototype}}function lt(s){return s?s.map(o=>new(0,o.type.annotationCls)(...o.args?o.args:[])):[]}function eu(s){const o=s.prototype?Object.getPrototypeOf(s.prototype):null;return(o?o.constructor:null)||Object}const aa=tn(To("Inject",s=>({token:s})),-1),Ro=tn(To("Optional"),8),Xa=tn(To("Self"),2),la=tn(To("SkipSelf"),4),D=tn(To("Host"),1);let T=null;function R(){return T=T||new _n}function z(s){return Y(R().parameters(s))}function Y(s){return s.map(o=>function ae(s){const o={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(s)&&s.length>0)for(let l=0;l<s.length;l++){const c=s[l];if(void 0===c)continue;const h=Object.getPrototypeOf(c);if(c instanceof Ro||"Optional"===h.ngMetadataName)o.optional=!0;else if(c instanceof la||"SkipSelf"===h.ngMetadataName)o.skipSelf=!0;else if(c instanceof Xa||"Self"===h.ngMetadataName)o.self=!0;else if(c instanceof D||"Host"===h.ngMetadataName)o.host=!0;else if(c instanceof aa)o.token=c.token;else if(c instanceof Ds){if(void 0===c.attributeName)throw new ye(204,!1);o.attribute=c.attributeName}else o.token=c}else o.token=void 0===s||Array.isArray(s)&&0===s.length?null:s;return o}(o))}function Pe(s){const o=[],l=new Map;function c(h){let p=l.get(h);if(!p){const y=s(h);l.set(h,p=y.then(Qi))}return p}return ot.forEach((h,p)=>{const y=[];h.templateUrl&&y.push(c(h.templateUrl).then(B=>{h.template=B}));const I=h.styleUrls,C=h.styles||(h.styles=[]),S=h.styles.length;I&&I.forEach((B,Z)=>{C.push(""),y.push(c(B).then(ne=>{C[S+Z]=ne,I.splice(I.indexOf(B),1),0==I.length&&(h.styleUrls=void 0)}))});const N=Promise.all(y).then(()=>function xo(s){ct.delete(s)}(p));o.push(N)}),yn(),Promise.all(o).then(()=>{})}let ot=new Map;const ct=new Set;function Pt(s){return!!(s.templateUrl&&!s.hasOwnProperty("template")||s.styleUrls&&s.styleUrls.length)}function yn(){const s=ot;return ot=new Map,s}function Qi(s){return"string"==typeof s?s:s.text()}const Gr=new Map;let Yi=!0;function jd(s,o){(function el(s,o,l){if(o&&o!==l&&Yi)throw new Error(`Duplicate module registered for ${s} - ${re(o)} vs ${re(o.name)}`)})(o,Gr.get(o)||null,s),Gr.set(o,s)}function kf(s){return Gr.get(s)}function Bd(s){Yi=!s}const vc={name:"custom-elements"},Of={name:"no-errors-schema"};let wc=!1;function im(s){wc=s}function Ic(){return wc}let Ff=!1;function sm(s){Ff=s}function om(){return Ff}var Ss=(()=>((Ss=Ss||{})[Ss.Important=1]="Important",Ss[Ss.DashCase=2]="DashCase",Ss))();const cm=/^>|^->|<!--|-->|--!>|<!-$/g,fi=/(<|>)/,ua="\u200b$1\u200b";const dm=new Map;let A0=0;function nu(s){return dm.get(s)||null}class Bf{get lView(){return nu(this.lViewId)}constructor(o,l,c){this.lViewId=o,this.nodeIndex=l,this.native=c}}function qr(s){let o=Dc(s);if(o){if($r(o)){const l=o;let c,h,p;if(hm(s)){if(c=gm(l,s),-1==c)throw new Error("The provided component was not found in the application");h=s}else if(function fv(s){return s&&s.constructor&&s.constructor.\u0275dir}(s)){if(c=function pv(s,o){let l=s[it].firstChild;for(;l;){const h=l.directiveEnd;for(let p=l.directiveStart;p<h;p++)if(s[p]===o)return l.index;l=pm(l)}return-1}(l,s),-1==c)throw new Error("The provided directive was not found in the application");p=mm(c,l)}else if(c=fm(l,s),-1==c)return null;const y=jn(l[c]),I=Dc(y),C=I&&!Array.isArray(I)?I:bc(l,c,y);if(h&&void 0===C.component&&(C.component=h,Kr(C.component,C)),p&&void 0===C.directives){C.directives=p;for(let S=0;S<p.length;S++)Kr(p[S],C)}Kr(C.native,C),o=C}}else{const l=s;let c=l;for(;c=c.parentNode;){const h=Dc(c);if(h){const p=Array.isArray(h)?h:h.lView;if(!p)return null;const y=fm(p,l);if(y>=0){const I=jn(p[y]),C=bc(p,y,I);Kr(I,C),o=C;break}}}}return o||null}function bc(s,o,l){return new Bf(s[qo],o,l)}function dv(s){let l,o=Dc(s);if($r(o)){const c=o,h=gm(c,s);l=kr(h,c);const p=bc(c,h,l[ns]);p.component=s,Kr(s,p),Kr(p.native,p)}else l=kr(o.nodeIndex,o.lView);return l}const hv="__ngContext__";function Kr(s,o){$r(o)?(s[hv]=o[qo],function jf(s){dm.set(s[qo],s)}(o)):s[hv]=o}function Dc(s){const o=s[hv];return"number"==typeof o?nu(o):o||null}function Hd(s){const o=Dc(s);return o?$r(o)?o:o.lView:null}function hm(s){return s&&s.constructor&&s.constructor.\u0275cmp}function fm(s,o){const l=s[it];for(let c=jt;c<l.bindingStartIndex;c++)if(jn(s[c])===o)return c;return-1}function pm(s){if(s.child)return s.child;if(s.next)return s.next;for(;s.parent&&!s.parent.next;)s=s.parent;return s.parent&&s.parent.next}function gm(s,o){const l=s[it].components;if(l)for(let c=0;c<l.length;c++){const h=l[c];if(kr(h,s)[Un]===o)return h}else if(kr(jt,s)[Un]===o)return jt;return-1}function mm(s,o){const l=o[it].data[s];if(0===l.directiveStart)return fe;const c=[];for(let h=l.directiveStart;h<l.directiveEnd;h++){const p=o[h];hm(p)||c.push(p)}return c}let ru;function w(s,o){return ru(s,o)}function _(s){const o=s[Cn];return Er(o)?o[Cn]:o}function M(s){return function E(s){let o=$r(s)?s:Hd(s);for(;o&&!(256&o[qt]);)o=_(o);return o}(s)[Un]}function L(s){return Ae(s[Ws])}function ee(s){return Ae(s[li])}function Ae(s){for(;null!==s&&!Er(s);)s=s[li];return s}function Xe(s,o,l,c,h){if(null!=c){let p,y=!1;Er(c)?p=c:$r(c)&&(y=!0,c=c[ns]);const I=jn(c);0===s&&null!==l?null==h?mv(o,l,I):Mc(o,l,I,h||null,!0):1===s&&null!==l?Mc(o,l,I,h||null,!0):2===s?Wf(o,I,y):3===s&&o.destroyNode(I),null!=p&&function NS(s,o,l,c,h){const p=l[vs];p!==jn(l)&&Xe(o,s,c,p,h);for(let I=zr;I<l.length;I++){const C=l[I];Kd(C[it],C,s,o,c,p)}}(o,s,p,l,h)}}function wt(s,o){return s.createText(o)}function zt(s,o,l){s.setValue(o,l)}function $n(s,o){return s.createComment(function Vf(s){return s.replace(cm,o=>o.replace(fi,ua))}(o))}function As(s,o,l){return s.createElement(o,l)}function nl(s,o){const l=s[qs],c=l.indexOf(o),h=o[Cn];512&o[qt]&&(o[qt]&=-513,Oa(h,-1)),l.splice(c,1)}function rl(s,o){if(s.length<=zr)return;const l=zr+o,c=s[l];if(c){const h=c[Gs];null!==h&&h!==s&&nl(h,c),o>0&&(s[l-1][li]=c[li]);const p=So(s,zr+o);!function ca(s,o){Kd(s,o,o[Ht],2,null,null),o[ns]=null,o[Ln]=null}(c[it],c);const y=p[Vn];null!==y&&y.detachView(p[it]),c[Cn]=null,c[li]=null,c[qt]&=-65}return c}function $f(s,o){if(!(128&o[qt])){const l=o[Ht];l.destroyNode&&Kd(s,o,l,3,null,null),function tl(s){let o=s[Ws];if(!o)return il(s[it],s);for(;o;){let l=null;if($r(o))l=o[Ws];else{const c=o[zr];c&&(l=c)}if(!l){for(;o&&!o[li]&&o!==s;)$r(o)&&il(o[it],o),o=o[Cn];null===o&&(o=s),$r(o)&&il(o[it],o),l=o&&o[li]}o=l}}(o)}}function il(s,o){if(!(128&o[qt])){o[qt]&=-65,o[qt]|=128,function gv(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=o[l[c]];if(!(h instanceof ja)){const p=l[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const I=h[p[y]],C=p[y+1];mn(4,I,C);try{C.call(I)}finally{mn(5,I,C)}}else{mn(4,h,p);try{p.call(h)}finally{mn(5,h,p)}}}}}(s,o),function Ac(s,o){const l=s.cleanup,c=o[ys];let h=-1;if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const y=l[p+3];y>=0?c[h=y]():c[h=-y].unsubscribe(),p+=2}else{const y=c[h=l[p+1]];l[p].call(y)}if(null!==c){for(let p=h+1;p<c.length;p++)(0,c[p])();o[ys]=null}}(s,o),1===o[it].type&&o[Ht].destroy();const l=o[Gs];if(null!==l&&Er(o[Cn])){l!==o[Cn]&&nl(l,o);const c=o[Vn];null!==c&&c.detachView(s)}!function $d(s){dm.delete(s[qo])}(o)}}function Gd(s,o,l){return Hf(s,o.parent,l)}function Hf(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[ns];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:p}=s.data[c.directiveStart+h];if(p===P.None||p===P.Emulated)return null}return Cr(c,l)}}function Mc(s,o,l,c,h){s.insertBefore(o,l,c,h)}function mv(s,o,l){s.appendChild(o,l)}function M0(s,o,l,c,h){null!==c?Mc(s,o,l,c,h):mv(s,o,l)}function qd(s,o){return s.parentNode(o)}function RS(s,o,l){return R0(s,o,l)}function _m(s,o,l){return 40&s.type?Cr(s,l):null}let ym,yv,wv,Iv,R0=_m;function vm(s,o){R0=s,ym=o}function wm(s,o,l,c){const h=Gd(s,c,o),p=o[Ht],I=RS(c.parent||o[Ln],c,o);if(null!=h)if(Array.isArray(l))for(let C=0;C<l.length;C++)M0(p,h,l[C],I,!1);else M0(p,h,l,I,!1);void 0!==ym&&ym(p,c,o,l,h)}function _v(s,o){if(null!==o){const l=o.type;if(3&l)return Cr(o,s);if(4&l)return Rc(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return _v(s,c);{const h=s[o.index];return Er(h)?Rc(-1,h):jn(h)}}if(32&l)return w(o,s)()||jn(s[o.index]);{const c=x0(s,o);return null!==c?Array.isArray(c)?c[0]:_v(_(s[Br]),c):_v(s,o.next)}}return null}function x0(s,o){return null!==o?s[Br][Ln].projection[o.projection]:null}function Rc(s,o){const l=zr+s+1;if(l<o.length){const c=o[l],h=c[it].firstChild;if(null!==h)return _v(c,h)}return o[vs]}function Wf(s,o,l){const c=qd(s,o);c&&function tk(s,o,l,c){s.removeChild(o,l,c)}(s,c,o,l)}function Im(s,o,l,c,h,p,y){for(;null!=l;){const I=c[l.index],C=l.type;if(y&&0===o&&(I&&Kr(jn(I),c),l.flags|=2),32!=(32&l.flags))if(8&C)Im(s,o,l.child,c,h,p,!1),Xe(o,s,h,I,p);else if(32&C){const S=w(l,c);let N;for(;N=S();)Xe(o,s,h,N,p);Xe(o,s,h,I,p)}else 16&C?xS(s,o,c,l,h,p):Xe(o,s,h,I,p);l=y?l.projectionNext:l.next}}function Kd(s,o,l,c,h,p){Im(l,c,s.firstChild,o,h,p,!1)}function xS(s,o,l,c,h,p){const y=l[Br],C=y[Ln].projection[c.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)Xe(o,s,h,C[S],p);else Im(s,o,C,y[Cn],h,p,!0)}function PS(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function kS(s,o,l){const{mergedAttrs:c,classes:h,styles:p}=l;null!==c&&Jo(s,o,c),null!==h&&PS(s,o,h),null!==p&&function ik(s,o,l){s.setAttribute(o,"style",l)}(s,o,p)}function vv(){if(void 0===yv&&(yv=null,Lt.trustedTypes))try{yv=Lt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return yv}function xc(s){return vv()?.createHTML(s)||s}function Em(s,o,l){const c=Re(),h=In(),p=Cr(h,c);if(2===h.type&&"iframe"===o.toLowerCase()){const y=p;throw y.src="",y.srcdoc=xc(""),Wf(c[Ht],y),new ye(-910,!1)}return s}function k0(s){wv=s}function O0(){return void 0!==wv?wv:typeof document<"u"?document:void 0}function Cm(){if(void 0===Iv&&(Iv=null,Lt.trustedTypes))try{Iv=Lt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Iv}function F0(s){return Cm()?.createHTML(s)||s}function Ev(s){return Cm()?.createScript(s)||s}function L0(s){return Cm()?.createScriptURL(s)||s}class ou{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}class Cv extends ou{getTypeName(){return"HTML"}}class LS extends ou{getTypeName(){return"Style"}}class U0 extends ou{getTypeName(){return"Script"}}class US extends ou{getTypeName(){return"URL"}}class Gf extends ou{getTypeName(){return"ResourceURL"}}function sl(s){return s instanceof ou?s.changingThisBreaksApplicationSecurity:s}function au(s,o){const l=V0(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see ${ut})`)}return l===o}function V0(s){return s instanceof ou&&s.getTypeName()||null}function bv(s){return new Cv(s)}function j0(s){return new LS(s)}function VS(s){return new U0(s)}function bm(s){return new US(s)}function jS(s){return new Gf(s)}function Dv(s){const o=new Tv(s);return function zS(){try{return!!(new window.DOMParser).parseFromString(xc(""),"text/html")}catch{return!1}}()?new BS(o):o}class BS{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(xc(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch{return null}}}class Tv{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const l=this.inertDocument.createElement("template");return l.innerHTML=xc(o),l}}const $S=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function qf(s){return(s=String(s)).match($S)?s:"unsafe:"+s}function ol(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function Dm(...s){const o={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(o[c]=!0);return o}const Tm=ol("area,br,col,hr,img,wbr"),B0=ol("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Sv=ol("rp,rt"),Sm=Dm(Tm,Dm(B0,ol("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Dm(Sv,ol("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Dm(Sv,B0)),Av=ol("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),z0=Dm(Av,ol("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ol("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Kf=ol("script,style,template");class $0{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!Sm.hasOwnProperty(l))return this.sanitizedSomething=!0,!Kf.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=o.attributes;for(let h=0;h<c.length;h++){const p=c.item(h),y=p.name,I=y.toLowerCase();if(!z0.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let C=p.value;Av[I]&&(C=qf(C)),this.buf.push(" ",y,'="',W0(C),'"')}return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();Sm.hasOwnProperty(l)&&!Tm.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(W0(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const GS=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,H0=/([^\#-~ |!])/g;function W0(s){return s.replace(/&/g,"&amp;").replace(GS,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(H0,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Zf;function G0(s,o){let l=null;try{Zf=Zf||Dv(s);let c=o?String(o):"";l=Zf.getInertBodyElement(c);let h=5,p=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=p,p=l.innerHTML,l=Zf.getInertBodyElement(c)}while(c!==p);return xc((new $0).sanitizeChildren(Am(l)||l))}finally{if(l){const c=Am(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function Am(s){return"content"in s&&function qS(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var dr=(()=>((dr=dr||{})[dr.NONE=0]="NONE",dr[dr.HTML=1]="HTML",dr[dr.STYLE=2]="STYLE",dr[dr.SCRIPT=3]="SCRIPT",dr[dr.URL=4]="URL",dr[dr.RESOURCE_URL=5]="RESOURCE_URL",dr))();function KS(s){const o=Rm();return o?F0(o.sanitize(dr.HTML,s)||""):au(s,"HTML")?F0(sl(s)):G0(O0(),Ce(s))}function ZS(s){const o=Rm();return o?o.sanitize(dr.STYLE,s)||"":au(s,"Style")?sl(s):Ce(s)}function q0(s){const o=Rm();return o?o.sanitize(dr.URL,s)||"":au(s,"URL")?sl(s):qf(Ce(s))}function Mm(s){const o=Rm();if(o)return L0(o.sanitize(dr.RESOURCE_URL,s)||"");if(au(s,"ResourceURL"))return L0(sl(s));throw new ye(904,!1)}function K0(s){const o=Rm();if(o)return Ev(o.sanitize(dr.SCRIPT,s)||"");if(au(s,"Script"))return Ev(sl(s));throw new ye(905,!1)}function QS(s){return xc(s[0])}function YS(s){return function P0(s){return vv()?.createScriptURL(s)||s}(s[0])}function XS(s,o,l){return function ak(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?Mm:q0}(o,l)(s)}function Rm(){const s=Re();return s&&s[Pl]}const Mv=new Sn("ENVIRONMENT_INITIALIZER"),Rv=new Sn("INJECTOR",-1),vt=new Sn("INJECTOR_DEF_TYPES");class Fi{get(o,l=Rn){if(l===Rn){const c=new Error(`NullInjectorError: No provider for ${re(o)}!`);throw c.name="NullInjectorError",c}return l}}function xv(s){return{\u0275providers:s}}function al(...s){return{\u0275providers:Or(0,s),\u0275fromNgModule:!0}}function Or(s,...o){const l=[],c=new Set;let h;return eo(o,p=>{const y=p;Qd(y,l,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&Ms(h,l),l}function Ms(s,o){for(let l=0;l<s.length;l++){const{providers:h}=s[l];No(h,p=>{o.push(p)})}}function Qd(s,o,l,c){if(!(s=Q(s)))return!1;let h=null,p=Gn(s);const y=!p&&cn(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const C=s.ngModule;if(p=Gn(C),!p)return!1;h=C}const I=c.has(h);if(y){if(I)return!1;if(c.add(h),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of C)Qd(S,o,l,c)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let S;c.add(h);try{eo(p.imports,N=>{Qd(N,o,l,c)&&(S||(S=[]),S.push(N))})}finally{}void 0!==S&&Ms(S,o)}if(!I){const S=ki(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:fe},{provide:vt,useValue:h,multi:!0},{provide:Mv,useValue:()=>Be(h),multi:!0})}const C=p.providers;null==C||I||No(C,N=>{o.push(N)})}}return h!==s&&void 0!==s.providers}function No(s,o){for(let l of s)Te(l)&&(l=l.\u0275providers),Array.isArray(l)?No(l,o):o(l)}const lk=oe({provide:String,useValue:oe});function Nv(s){return null!==s&&"object"==typeof s&&lk in s}function Nc(s){return"function"==typeof s}const Yd=new Sn("Set Injector scope."),Po={},uk={};let Pv;function xm(){return void 0===Pv&&(Pv=new Fi),Pv}class lu{}class kv extends lu{get destroyed(){return this._destroyed}constructor(o,l,c,h){super(),this.parent=l,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xf(o,y=>this.processProvider(y)),this.records.set(Rv,uu(void 0,this)),h.has("environment")&&this.records.set(lu,uu(void 0,this));const p=this.records.get(Yd);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(vt.multi,fe,at.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=Vr(this),c=ir(void 0);try{return o()}finally{Vr(l),ir(c)}}get(o,l=Rn,c=at.Default){this.assertNotDestroyed(),c=Et(c);const h=Vr(this),p=ir(void 0);try{if(!(c&at.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function Pm(s){return"function"==typeof s||"object"==typeof s&&s instanceof Sn}(o)&&gn(o);I=C&&this.injectableDefInScope(C)?uu(Nm(o),Po):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&at.Self?xm():this.parent).get(o,l=c&at.Optional&&l===Rn?null:l)}catch(y){if("NullInjectorError"===y.name){if((y[wr]=y[wr]||[]).unshift(re(o)),h)throw y;return function K(s,o,l,c){const h=s[wr];throw o[Ni]&&h.unshift(o[Ni]),s.message=function H(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==$t?s.slice(2):s;let h=re(o);if(Array.isArray(o))h=o.map(re).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let I=o[y];p.push(y+":"+("string"==typeof I?JSON.stringify(I):re(I)))}h=`{${p.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(xi,"\n  ")}`}("\n"+s.message,h,l,c),s[ur]=h,s[wr]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{ir(p),Vr(h)}}resolveInjectorInitializers(){const o=Vr(this),l=ir(void 0);try{const c=this.get(Mv.multi,fe,at.Self);for(const h of c)h()}finally{Vr(o),ir(l)}}toString(){const o=[],l=this.records;for(const c of l.keys())o.push(re(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ye(205,!1)}processProvider(o){let l=Nc(o=Q(o))?o:Q(o&&o.provide);const c=function Qf(s){return Nv(s)?uu(void 0,s.useValue):uu(hr(s),Po)}(o);if(Nc(o)||!0!==o.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=uu(void 0,Po,!0),h.factory=()=>Nt(h.multi),this.records.set(l,h)),l=o,h.multi.push(o)}this.records.set(l,c)}hydrate(o,l){return l.value===Po&&(l.value=uk,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Yf(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=Q(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Nm(s){const o=gn(s),l=null!==o?o.factory:ki(s);if(null!==l)return l;if(s instanceof Sn)throw new ye(204,!1);if(s instanceof Function)return function JS(s){const o=s.length;if(o>0)throw Ao(o,"?"),new ye(204,!1);const l=function Ur(s){const o=s&&(s[ii]||s[bn]);return o?(function zi(s){if(s.hasOwnProperty("name"))return s.name;(""+s).match(/^function\s*([^\s(]+)/)}(s),o):null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new ye(204,!1)}function hr(s,o,l){let c;if(Nc(s)){const h=Q(s);return ki(h)||Nm(h)}if(Nv(s))c=()=>Q(s.useValue);else if(function Y0(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Nt(s.deps||[]));else if(function Q0(s){return!(!s||!s.useExisting)}(s))c=()=>Be(Q(s.useExisting));else{const h=Q(s&&(s.useClass||s.provide));if(!function Ov(s){return!!s.deps}(s))return ki(h)||Nm(h);c=()=>new h(...Nt(s.deps))}return c}function uu(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function Xf(s,o){for(const l of s)Array.isArray(l)?Xf(l,o):l&&Te(l)?Xf(l.\u0275providers,o):o(l)}class km{}class Jf{}class ep{resolveComponentFactory(o){throw function eA(s){const o=Error(`No component factory found for ${re(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let tp=(()=>{class s{}return s.NULL=new ep,s})();function eC(){return Xd(Xn(),Re())}function Xd(s,o){return new Pc(Cr(s,o))}let Pc=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=eC,s})();function tA(s){return s instanceof Pc?s.nativeElement:s}class tC{}let nA=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function rA(){const s=Re(),l=kr(Xn().index,s);return($r(l)?l:s)[Ht]}(),s})(),Fv=(()=>{class s{}return s.\u0275prov=et({token:s,providedIn:"root",factory:()=>null}),s})();class nC{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Lv=new nC("15.2.3"),Om={},rC="ngOriginalError";function Uv(s){return s[rC]}class Jd{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Uv(o);for(;l&&Uv(l);)l=Uv(l);return l||null}}function jv(s){return s.ownerDocument.defaultView}function Bv(s){return s.ownerDocument}function sC(s){return s.ownerDocument.body}function cu(s){return s instanceof Function?s():s}function aA(s,o,l){let c=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}l=h+1}}const lA="ng-template";function uA(s,o,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==aA(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function cA(s){return 4===s.type&&s.value!==lA}function fk(s,o,l){return o===(4!==s.type||l?s.value:lA)}function dA(s,o,l){let c=4;const h=s.attrs||[],p=function hA(s){for(let o=0;o<s.length;o++)if(xn(s[o]))return o;return s.length}(h);let y=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!fk(s,C,l)||""===C&&1===o.length){if(ko(c))return!1;y=!0}}else{const S=8&c?C:o[++I];if(8&c&&null!==s.attrs){if(!uA(s.attrs,S,l)){if(ko(c))return!1;y=!0}continue}const B=pk(8&c?"class":C,h,cA(s),l);if(-1===B){if(ko(c))return!1;y=!0;continue}if(""!==S){let Z;Z=B>p?"":h[B+1].toLowerCase();const ne=8&c?Z:null;if(ne&&-1!==aA(ne,S,0)||2&c&&S!==Z){if(ko(c))return!1;y=!0}}}}else{if(!y&&!ko(c)&&!ko(C))return!1;if(y&&ko(C))continue;y=!1,c=C|1&c}}return ko(c)||y}function ko(s){return 0==(1&s)}function pk(s,o,l,c){if(null===o)return-1;let h=0;if(c||!l){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let I=o[++h];for(;"string"==typeof I;)I=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function Fm(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function pi(s,o,l=!1){for(let c=0;c<o.length;c++)if(dA(s,o[c],l))return!0;return!1}function nh(s,o){e:for(let l=0;l<o.length;l++){const c=o[l];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function oC(s,o){return s?":not("+o.trim()+")":o}function du(s){let o=s[0],l=1,c=2,h="",p=!1;for(;l<s.length;){let y=s[l];if("string"==typeof y)if(2&c){const I=s[++l];h+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!ko(y)&&(o+=oC(p,h),h=""),c=y,p=p||!ko(c);l++}return""!==h&&(o+=oC(p,h)),o}const Vt={};function lC(s){Lm(sn(),Re(),ui()+s,!1)}function Lm(s,o,l,c){if(!c)if(3==(3&o[qt])){const p=s.preOrderCheckHooks;null!==p&&Ua(o,p,l)}else{const p=s.preOrderHooks;null!==p&&Xo(o,p,0,l)}Ys(l)}const $v={\u0275\u0275defineInjectable:et,\u0275\u0275defineInjector:Fn,\u0275\u0275inject:Be,\u0275\u0275invalidFactoryDep:Ee,resolveForwardRef:Q};const rh=oe({provide:String,useValue:oe});function ll(s){return void 0!==s.useClass}function Um(s){return void 0!==s.useFactory}const no=Xl("Injectable",void 0,void 0,void 0,(s,o)=>function pA(s,o){let l=null,c=null;s.hasOwnProperty(ii)||Object.defineProperty(s,ii,{get:()=>(null===l&&(l=zn().compileInjectable($v,`ng:///${s.name}/\u0275prov.js`,function fr(s,o){const l=o||{providedIn:null},c={name:s.name,type:s,typeArgumentCount:0,providedIn:l.providedIn};return(ll(l)||Um(l))&&void 0!==l.deps&&(c.deps=Y(l.deps)),ll(l)?c.useClass=l.useClass:function uC(s){return rh in s}(l)?c.useValue=l.useValue:Um(l)?c.useFactory=l.useFactory:function cC(s){return void 0!==s.useExisting}(l)&&(c.useExisting=l.useExisting),c}(s,o))),l)}),s.hasOwnProperty(At)||Object.defineProperty(s,At,{get:()=>{if(null===c){const h=zn();c=h.compileFactory($v,`ng:///${s.name}/\u0275fac.js`,{name:s.name,type:s,typeArgumentCount:0,deps:z(s),target:h.FactoryTarget.Injectable})}return c},configurable:!0})}(s,o));function ih(s,o=null,l=null,c){const h=np(s,o,l,c);return h.resolveInjectorInitializers(),h}function np(s,o=null,l=null,c,h=new Set){const p=[l||fe,al(s)];return c=c||("object"==typeof s?void 0:re(s)),new kv(p,o||xm(),c||null,h)}let ul=(()=>{class s{static create(l,c){if(Array.isArray(l))return ih({name:""},c,l,"");{const h=l.name??"";return ih({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=Rn,s.NULL=new Fi,s.\u0275prov=et({token:s,providedIn:"any",factory:()=>Be(Rv)}),s.__NG_ELEMENT_ID__=-1,s})();function Oo(s){return s.length>1?" ("+function gA(s){const o=[];for(let l=0;l<s.length;++l){if(o.indexOf(s[l])>-1)return o.push(s[l]),o;o.push(s[l])}return o}(s.slice().reverse()).map(c=>re(c.token)).join(" -> ")+")":""}function gi(s,o,l,c){const h=[o],p=l(h),y=c?function iA(s,o){const l=`${s} caused by: ${o instanceof Error?o.message:o}`,c=Error(l);return c[rC]=o,c}(p,c):Error(p);return y.addKey=hu,y.keys=h,y.injectors=[s],y.constructResolvingMessage=l,y[rC]=c,y}function hu(s,o){this.injectors.push(s),this.keys.push(o),this.message=this.constructResolvingMessage(this.keys)}function hC(s,o){const l=[];for(let c=0,h=o.length;c<h;c++){const p=o[c];l.push(p&&0!=p.length?p.map(re).join(" "):"?")}return Error("Cannot resolve all parameters for '"+re(s)+"'("+l.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+re(s)+"' is decorated with Injectable.")}function Wv(s,o){return Error(`Cannot mix multi providers and regular providers, got: ${s} ${o}`)}class Ot{constructor(o,l){if(this.token=o,this.id=l,!o)throw new ye(208,!1);this.displayName=re(this.token)}static get(o){return fC.get(Q(o))}static get numberOfKeys(){return fC.numberOfKeys}}class rp{constructor(){this._allKeys=new Map}get(o){if(o instanceof Ot)return o;if(this._allKeys.has(o))return this._allKeys.get(o);const l=new Ot(o,Ot.numberOfKeys);return this._allKeys.set(o,l),l}get numberOfKeys(){return this._allKeys.size}}const fC=new rp;class cl{constructor(o,l,c){this.key=o,this.optional=l,this.visibility=c}static fromKey(o){return new cl(o,!1,null)}}const yA=[];class pC{constructor(o,l,c){this.key=o,this.resolvedFactories=l,this.multiProvider=c,this.resolvedFactory=this.resolvedFactories[0]}}class Fo{constructor(o,l){this.factory=o,this.dependencies=l}}function gC(s){let o,l;if(s.useClass){const c=Q(s.useClass);o=R().factory(c),l=ip(c)}else s.useExisting?(o=c=>c,l=[cl.fromKey(Ot.get(s.useExisting))]):s.useFactory?(o=s.useFactory,l=function fu(s,o){if(o){const l=o.map(c=>[c]);return o.map(c=>yC(s,c,l))}return ip(s)}(s.useFactory,s.deps)):(o=()=>s.useValue,l=yA);return new Fo(o,l)}function mC(s){return new pC(Ot.get(s.provide),[gC(s)],s.multi||!1)}function _C(s){const c=function gk(s,o){for(let l=0;l<s.length;l++){const c=s[l],h=o.get(c.key.id);if(h){if(c.multiProvider!==h.multiProvider)throw Wv(h,c);if(c.multiProvider)for(let p=0;p<c.resolvedFactories.length;p++)h.resolvedFactories.push(c.resolvedFactories[p]);else o.set(c.key.id,c)}else{let p;p=c.multiProvider?new pC(c.key,c.resolvedFactories.slice(),c.multiProvider):c,o.set(c.key.id,p)}}return o}(mi(s,[]).map(mC),new Map);return Array.from(c.values())}function mi(s,o){return s.forEach(l=>{if(l instanceof mc)o.push({provide:l,useClass:l});else if(l&&"object"==typeof l&&void 0!==l.provide)o.push(l);else{if(!Array.isArray(l))throw function dC(s){return Error(`Invalid provider - only instances of Provider and Type are allowed, got: ${s}`)}(l);mi(l,o)}}),o}function ip(s){const o=R().parameters(s);if(!o)return[];if(o.some(l=>null==l))throw hC(s,o);return o.map(l=>yC(s,l,o))}function yC(s,o,l){let c=null,h=!1;if(!Array.isArray(o))return Vm(o instanceof aa?o.token:o,h,null);let p=null;for(let y=0;y<o.length;++y){const I=o[y];I instanceof mc?c=I:I instanceof aa?c=I.token:I instanceof Ro?h=!0:I instanceof Xa||I instanceof la?p=I:I instanceof Sn&&(c=I)}if(c=Q(c),null!=c)return Vm(c,h,p);throw hC(s,l)}function Vm(s,o,l){return new cl(Ot.get(s),o,l)}const sh={};class oh{static resolve(o){return _C(o)}static resolveAndCreate(o,l){const c=oh.resolve(o);return oh.fromResolvedProviders(c,l)}static fromResolvedProviders(o,l){return new vC(o,l)}}let vC=(()=>{class s{constructor(l,c){this._constructionCounter=0,this._providers=l,this.parent=c||null;const h=l.length;this.keyIds=[],this.objs=[];for(let p=0;p<h;p++)this.keyIds[p]=l[p].key.id,this.objs[p]=sh}get(l,c=Rn){return this._getByKey(Ot.get(l),null,c)}resolveAndCreateChild(l){const c=oh.resolve(l);return this.createChildFromResolved(c)}createChildFromResolved(l){const c=new s(l);return c.parent=this,c}resolveAndInstantiate(l){return this.instantiateResolved(oh.resolve([l])[0])}instantiateResolved(l){return this._instantiateProvider(l)}getProviderAtIndex(l){if(l<0||l>=this._providers.length)throw function _A(s){return Error(`Index ${s} is out-of-bounds.`)}(l);return this._providers[l]}_new(l){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw function kc(s,o){return gi(s,o,function(l){return`Cannot instantiate cyclic dependency!${Oo(l)}`})}(this,l.key);return this._instantiateProvider(l)}_getMaxNumberOfObjects(){return this.objs.length}_instantiateProvider(l){if(l.multiProvider){const c=[];for(let h=0;h<l.resolvedFactories.length;++h)c[h]=this._instantiate(l,l.resolvedFactories[h]);return c}return this._instantiate(l,l.resolvedFactories[0])}_instantiate(l,c){const h=c.factory;let p,y;try{p=c.dependencies.map(I=>this._getByReflectiveDependency(I))}catch(I){throw I.addKey&&I.addKey(this,l.key),I}try{y=h(...p)}catch(I){throw function Hv(s,o,l,c){return gi(s,c,function(h){const p=re(h[0].token);return`${o.message}: Error during instantiation of ${p}!${Oo(h)}.`},o)}(this,I,0,l.key)}return y}_getByReflectiveDependency(l){return this._getByKey(l.key,l.visibility,l.optional?null:Rn)}_getByKey(l,c,h){return l===s.INJECTOR_KEY?this:c instanceof Xa?this._getByKeySelf(l,h):this._getByKeyDefault(l,h,c)}_getObjByKeyId(l){for(let c=0;c<this.keyIds.length;c++)if(this.keyIds[c]===l)return this.objs[c]===sh&&(this.objs[c]=this._new(this._providers[c])),this.objs[c];return sh}_throwOrNull(l,c){if(c!==Rn)return c;throw function mA(s,o){return gi(s,o,function(l){return`No provider for ${re(l[0].token)}!${Oo(l)}`})}(this,l)}_getByKeySelf(l,c){const h=this._getObjByKeyId(l.id);return h!==sh?h:this._throwOrNull(l,c)}_getByKeyDefault(l,c,h){let p;for(p=h instanceof la?this.parent:this;p instanceof s;){const y=p,I=y._getObjByKeyId(l.id);if(I!==sh)return I;p=y.parent}return null!==p?p.get(l.token,c):this._throwOrNull(l,c)}get displayName(){return`ReflectiveInjector(providers: [${function vA(s,o){const l=[];for(let c=0;c<s._providers.length;++c)l[c]=o(s.getProviderAtIndex(c));return l}(this,c=>' "'+c.key.displayName+'" ').join(", ")}])`}toString(){return this.displayName}}return s.INJECTOR_KEY=Ot.get(ul),s})();function Oc(s,o=at.Default){const l=Re();return null===l?Be(s,o):Zl(Xn(),l,Q(s),o)}function Gv(){throw new Error("invalid")}function dl(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const p=l[c+1];if(-1!==p){const y=s.data[p];$l(l[c]),y.contentQueries(2,o[p],p)}}}function Bm(s,o,l,c,h,p,y,I,C,S,N){const B=o.blueprint.slice();return B[ns]=h,B[qt]=76|c,(null!==N||s&&1024&s[qt])&&(B[qt]|=1024),Fl(B),B[Cn]=B[mo]=s,B[Un]=l,B[Hu]=y||s&&s[Hu],B[Ht]=I||s&&s[Ht],B[Pl]=C||s&&s[Pl]||null,B[jr]=S||s&&s[jr]||null,B[Ln]=p,B[qo]=function Cc(){return A0++}(),B[If]=N,B[Br]=2==o.type?s[Br]:B,B}function ro(s,o,l,c,h){let p=s.data[o];if(null===p)p=qv(s,o,l,c,h),function zl(){return Ut.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=l,p.value=c,p.attrs=h;const y=Qs();p.injectorIndex=null===y?-1:y.injectorIndex}return Wi(p,!0),p}function qv(s,o,l,c,h){const p=bf(),y=Vl(),C=s.data[o]=function wA(s,o,l,c,h,p){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,l,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(y?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C,C.prev=p)),C}function hl(s,o,l,c){if(0===l)return-1;const h=o.length;for(let p=0;p<l;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function op(s,o,l){Ad(o);try{const c=s.viewQuery;null!==c&&pp(1,c,l);const h=s.template;null!==h&&ap(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&dl(s,o),s.staticViewQueries&&pp(2,s.viewQuery,l);const p=s.components;null!==p&&function sp(s,o){for(let l=0;l<o.length;l++)ew(s,o[l])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[qt]&=-5,Tf()}}function zm(s,o,l,c){const h=o[qt];if(128!=(128&h)){Ad(o);try{Fl(o),nc(s.bindingStartIndex),null!==l&&ap(s,o,l,2,c);const y=3==(3&h);if(y){const S=s.preOrderCheckHooks;null!==S&&Ua(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Xo(o,S,0,null),Va(o,0)}if(function Xv(s){for(let o=L(s);null!==o;o=ee(o)){if(!o[yd])continue;const l=o[qs];for(let c=0;c<l.length;c++){const h=l[c];512&h[qt]||Oa(h[Cn],1),h[qt]|=512}}}(o),function SA(s){for(let o=L(s);null!==o;o=ee(o))for(let l=zr;l<o.length;l++){const c=o[l],h=c[it];wo(c)&&zm(h,c,h.template,c[Un])}}(o),null!==s.contentQueries&&dl(s,o),y){const S=s.contentCheckHooks;null!==S&&Ua(o,S)}else{const S=s.contentHooks;null!==S&&Xo(o,S,1),Va(o,1)}!function jm(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)Ys(~h);else{const p=h,y=l[++c],I=l[++c];ic(y,p),I(2,o[p])}}}finally{Ys(-1)}}(s,o);const I=s.components;null!==I&&function an(s,o){for(let l=0;l<o.length;l++)uh(s,o[l])}(o,I);const C=s.viewQuery;if(null!==C&&pp(2,C,c),y){const S=s.viewCheckHooks;null!==S&&Ua(o,S)}else{const S=s.viewHooks;null!==S&&Xo(o,S,2),Va(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[qt]&=-41,512&o[qt]&&(o[qt]&=-513,Oa(o[Cn],-1))}finally{Tf()}}}function ap(s,o,l,c,h){const p=ui(),y=2&c;try{Ys(-1),y&&o.length>jt&&Lm(s,o,jt,!1),mn(y?2:0,h),l(c,h)}finally{Ys(p),mn(y?3:1,h)}}function Fc(s,o,l){if(Wu(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,l[p],p)}}}function $m(s,o,l){bd()&&(function Zv(s,o,l,c){const h=l.directiveStart,p=l.directiveEnd;kl(l)&&function AC(s,o,l){const c=Cr(o,s),h=wC(l),p=s[Hu],y=fp(s,Bm(s,h,null,l.onPush?32:16,c,o,p,p.createRenderer(c,l),null,null,null));s[o.index]=y}(o,l,s.data[h+l.componentOffset]),s.firstCreatePass||Co(l,o),Kr(c,o);const y=l.initialInputs;for(let I=h;I<p;I++){const C=s.data[I],S=bs(o,s,I,l);Kr(S,o),null!==y&&DA(0,I-h,S,C,0,y),ss(C)&&(kr(l.index,o)[Un]=bs(o,s,I,l))}}(s,o,l,Cr(l,o)),64==(64&l.flags)&&bA(s,o,l))}function ah(s,o,l=Cr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],I=-1===y?l(o,s):s[y];s[h++]=I}}}function wC(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=lp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function lp(s,o,l,c,h,p,y,I,C,S){const N=jt+c,B=N+h,Z=function Hm(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:Vt);return l}(N,B),ne="function"==typeof S?S():S;return Z[it]={type:s,blueprint:Z,template:l,queries:null,viewQuery:I,declTNode:o,data:Z.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:ne,incompleteFirstPass:!1}}function Kv(s,o,l,c){const h=gp(o);null===l?h.push(c):(h.push(l),s.firstCreatePass&&mp(s).push(c,h.length-1))}function EC(s,o,l,c){for(let h in s)if(s.hasOwnProperty(h)){l=null===l?{}:l;const p=s[h];null===c?CC(l,o,h,p):c.hasOwnProperty(h)&&CC(l,o,c[h],p)}return l}function CC(s,o,l,c){s.hasOwnProperty(l)?s[l].push(o,c):s[l]=[o,c]}function Rs(s,o,l,c,h,p,y,I){const C=Cr(o,l);let N,S=o.inputs;!I&&null!=S&&(N=S[c])?(tw(s,l,N,c,h),kl(o)&&bC(l,o.index)):3&o.type&&(c=function IA(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,p.setProperty(C,c,h))}function bC(s,o){const l=kr(o,s);16&l[qt]||(l[qt]|=32)}function up(s,o,l,c){if(bd()){const h=null===c?null:{"":-1},p=function TC(s,o){const l=s.directiveRegistry;let c=null,h=null;if(l)for(let p=0;p<l.length;p++){const y=l[p];if(pi(o,y.selectors,!1))if(c||(c=[]),ss(y))if(null!==y.findHostDirectiveDefs){const I=[];h=h||new Map,y.findHostDirectiveDefs(y,I,h),c.unshift(...I,y),Qv(s,o,I.length)}else c.unshift(y),Qv(s,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,c,h),c.push(y)}return null===c?null:[c,h]}(s,l);let y,I;null===p?y=I=null:[y,I]=p,null!==y&&cp(s,o,l,y,h,I),h&&function dp(s,o,l){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=l[o[h+1]];if(null==p)throw new ye(-301,!1);c.push(o[h],p)}}}(l,c,h)}l.mergedAttrs=ls(l.mergedAttrs,l.attrs)}function cp(s,o,l,c,h,p){for(let S=0;S<c.length;S++)Ga(Co(l,o),s,c[S].type);!function lh(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}(l,s.data.length,c.length);for(let S=0;S<c.length;S++){const N=c[S];N.providersResolver&&N.providersResolver(N)}let y=!1,I=!1,C=hl(s,o,c.length,null);for(let S=0;S<c.length;S++){const N=c[S];l.mergedAttrs=ls(l.mergedAttrs,N.hostAttrs),SC(s,l,o,C,N),hp(C,N,h),null!==N.contentQueries&&(l.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(l.flags|=64);const B=N.type.prototype;!y&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),y=!0),!I&&(B.ngOnChanges||B.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),I=!0),C++}!function Wm(s,o,l){const h=o.directiveEnd,p=s.data,y=o.attrs,I=[];let C=null,S=null;for(let N=o.directiveStart;N<h;N++){const B=p[N],Z=l?l.get(B):null,we=Z?Z.outputs:null;C=EC(B.inputs,N,C,Z?Z.inputs:null),S=EC(B.outputs,N,S,we);const ze=null===C||null===y||cA(o)?null:TA(C,N,y);I.push(ze)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=C,o.outputs=S}(s,l,p)}function bA(s,o,l){const c=l.directiveStart,h=l.directiveEnd,p=l.index,y=function Df(){return Ut.lFrame.currentDirectiveIndex}();try{Ys(p);for(let I=c;I<h;I++){const C=s.data[I],S=o[I];Is(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&DC(C,S)}}finally{Ys(-1),Is(y)}}function DC(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Qv(s,o,l){o.componentOffset=l,(s.components||(s.components=[])).push(o.index)}function hp(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;ss(o)&&(l[""]=s)}}function SC(s,o,l,c,h){s.data[c]=h;const p=h.factory||(h.factory=ki(h.type)),y=new ja(p,ss(h),Oc);s.blueprint[c]=y,l[c]=y,function CA(s,o,l,c,h){const p=h.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const I=~o.index;(function Lc(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(y)!=I&&y.push(I),y.push(l,c,p)}}(s,o,c,hl(s,l,h.hostVars,Vt),h)}function Lo(s,o,l,c,h,p){const y=Cr(s,o);pu(o[Ht],y,p,s.value,l,c,h)}function pu(s,o,l,c,h,p,y){if(null==p)s.removeAttribute(o,h,l);else{const I=null==y?Ce(p):y(p,c||"",h);s.setAttribute(o,h,I,l)}}function DA(s,o,l,c,h,p){const y=p[o];if(null!==y){const I=c.setInput;for(let C=0;C<y.length;){const S=y[C++],N=y[C++],B=y[C++];null!==I?c.setInput(l,B,S,N):l[N]=B}}}function TA(s,o,l){let c=null,h=0;for(;h<l.length;){const p=l[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===c&&(c=[]);const y=s[p];for(let I=0;I<y.length;I+=2)if(y[I]===o){c.push(p,y[I+1],l[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function Yv(s,o,l,c){return[s,!0,!1,o,null,0,c,l,null,null]}function uh(s,o){const l=kr(o,s);if(wo(l)){const c=l[it];48&l[qt]?zm(c,l,c.template,l[Un]):l[_s]>0&&Jv(l)}}function Jv(s){for(let c=L(s);null!==c;c=ee(c))for(let h=zr;h<c.length;h++){const p=c[h];if(wo(p))if(512&p[qt]){const y=p[it];zm(y,p,y.template,p[Un])}else p[_s]>0&&Jv(p)}const l=s[it].components;if(null!==l)for(let c=0;c<l.length;c++){const h=kr(l[c],s);wo(h)&&h[_s]>0&&Jv(h)}}function ew(s,o){const l=kr(o,s),c=l[it];(function AA(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),op(c,l,l[Un])}function fp(s,o){return s[Ws]?s[ba][li]=o:s[Ws]=o,s[ba]=o,o}function Gm(s){for(;s;){s[qt]|=32;const o=_(s);if(Ta(s)&&!o)return s;s=o}return null}function gu(s,o,l,c=!0){const h=o[Hu];h.begin&&h.begin();try{zm(s,o,s.template,l)}catch(y){throw c&&MC(o,y),y}finally{h.end&&h.end()}}function pp(s,o,l){$l(0),o(s,l)}function gp(s){return s[ys]||(s[ys]=[])}function mp(s){return s.cleanup||(s.cleanup=[])}function qm(s,o,l){return(null===s||ss(s))&&(l=function Pa(s){for(;Array.isArray(s);){if("object"==typeof s[Da])return s;s=s[ns]}return null}(l[o.index])),l[Ht]}function MC(s,o){const l=s[jr],c=l?l.get(Jd,null):null;c&&c.handleError(o)}function tw(s,o,l,c,h){for(let p=0;p<l.length;){const y=l[p++],I=l[p++],C=o[y],S=s.data[y];null!==S.setInput?S.setInput(C,h,c,I):C[I]=h}}function pl(s,o,l){const c=Zs(o,s);zt(s[Ht],c,l)}function Km(s,o,l){let c=l?s.styles:null,h=l?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const I=o[y];"number"==typeof I?p=I:1==p?h=pe(h,I):2==p&&(c=pe(c,I+": "+o[++y]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}function Zm(s,o,l,c,h=!1){for(;null!==l;){const p=o[l.index];if(null!==p&&c.push(jn(p)),Er(p))for(let I=zr;I<p.length;I++){const C=p[I],S=C[it].firstChild;null!==S&&Zm(C[it],C,S,c)}const y=l.type;if(8&y)Zm(s,o,l.child,c);else if(32&y){const I=w(l,o);let C;for(;C=I();)c.push(C)}else if(16&y){const I=x0(o,l);if(Array.isArray(I))c.push(...I);else{const C=_(o[Br]);Zm(C[it],C,I,c,!0)}}l=h?l.projectionNext:l.next}return c}class dh{get rootNodes(){const o=this._lView,l=o[it];return Zm(l,o,l.firstChild,[])}constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Un]}set context(o){this._lView[Un]=o}get destroyed(){return 128==(128&this._lView[qt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Cn];if(Er(o)){const l=o[$i],c=l?l.indexOf(this):-1;c>-1&&(rl(o,c),So(l,c))}this._attachedToViewContainer=!1}$f(this._lView[it],this._lView)}onDestroy(o){Kv(this._lView[it],this._lView,null,o)}markForCheck(){Gm(this._cdRefInjectingView||this._lView)}detach(){this._lView[qt]&=-65}reattach(){this._lView[qt]|=64}detectChanges(){gu(this._lView[it],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function da(s,o){Kd(s,o,o[Ht],2,null,null)}(this._lView[it],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=o}}class MA extends dh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;gu(o[it],o,o[Un],!1)}checkNoChanges(){}get context(){return null}}class RC extends tp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=cn(o);return new Uc(l,this.ngModule)}}function xC(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class xA{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,c){c=Et(c);const h=this.injector.get(o,Om,c);return h!==Om||l===Om?h:this.parentInjector.get(o,l,c)}}class Uc extends Jf{get inputs(){return xC(this.componentDef.inputs)}get outputs(){return xC(this.componentDef.outputs)}constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function fA(s){return s.map(du).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}create(o,l,c,h){let p=(h=h||this.ngModule)instanceof lu?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new xA(o,p):o,I=y.get(tC,null);if(null===I)throw new ye(407,!1);const C=y.get(Fv,null),S=I.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",B=c?function IC(s,o,l){return s.selectRootElement(o,l===P.ShadowDom)}(S,c,this.componentDef.encapsulation):As(S,N,function RA(s){const o=s.toLowerCase();return"svg"===o?Zu:"math"===o?Yo:null}(N)),Z=this.componentDef.onPush?288:272,ne=lp(0,null,null,1,0,null,null,null,null,null),we=Bm(null,ne,null,Z,null,null,I,S,C,y,null);let ze,Ye;Ad(we);try{const pt=this.componentDef;let Ft,Fe=null;pt.findHostDirectiveDefs?(Ft=[],Fe=new Map,pt.findHostDirectiveDefs(pt,Ft,Fe),Ft.push(pt)):Ft=[pt];const Qt=function NA(s,o){const l=s[it],c=jt;return s[c]=o,ro(l,c,2,"#host",null)}(we,B),Hn=function PA(s,o,l,c,h,p,y,I){const C=h[it];!function kA(s,o,l,c){for(const h of s)o.mergedAttrs=ls(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(Km(o,o.mergedAttrs,!0),null!==l&&kS(c,l,o))}(c,s,o,y);const S=p.createRenderer(o,l),N=Bm(h,wC(l),null,l.onPush?32:16,h[s.index],s,p,S,I||null,null,null);return C.firstCreatePass&&Qv(C,s,c.length-1),fp(h,N),h[s.index]=N}(Qt,B,pt,Ft,we,I,S);Ye=ka(ne,jt),B&&function nw(s,o,l,c){if(c)Jo(s,l,["ng-version",Lv.full]);else{const{attrs:h,classes:p}=function aC(s){const o=[],l=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&l.push(p);else{if(!ko(h))break;h=p}c++}return{attrs:o,classes:l}}(o.selectors[0]);h&&Jo(s,l,h),p&&p.length>0&&PS(s,l,p.join(" "))}}(S,pt,B,c),void 0!==l&&function rw(s,o,l){const c=s.projection=[];for(let h=0;h<o.length;h++){const p=l[h];c.push(null!=p?Array.from(p):null)}}(Ye,this.ngContentSelectors,l),ze=function PC(s,o,l,c,h,p){const y=Xn(),I=h[it],C=Cr(y,h);cp(I,h,y,l,null,c);for(let N=0;N<l.length;N++)Kr(bs(h,I,y.directiveStart+N,y),h);bA(I,h,y),C&&Kr(C,h);const S=bs(h,I,y.directiveStart+y.componentOffset,y);if(s[Un]=h[Un]=S,null!==p)for(const N of p)N(S,o);return Fc(I,y,s),S}(Hn,pt,Ft,Fe,we,[ha]),op(ne,we,null)}finally{Tf()}return new NC(this.componentType,ze,Xd(Ye,we),we,Ye)}}class NC extends km{constructor(o,l,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=l,this.hostView=this.changeDetectorRef=new MA(h),this.componentType=o}setInput(o,l){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const p=this._rootLView;tw(p[it],p,h,o,l),bC(p,this._tNode.index)}}get injector(){return new di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function ha(){const s=Xn();lc(Re()[it],s)}function Vc(s){return Object.getPrototypeOf(s.prototype).constructor}function Qm(s){let o=Vc(s.type),l=!0;const c=[s];for(;o;){let h;if(ss(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ye(903,!1);h=o.\u0275dir}if(h){if(l){c.push(h);const y=s;y.inputs=iw(s.inputs),y.declaredInputs=iw(s.declaredInputs),y.outputs=iw(s.outputs);const I=h.hostBindings;I&&OA(s,I);const C=h.viewQuery,S=h.contentQueries;if(C&&hh(s,C),S&&OC(s,S),ue(s.inputs,h.inputs),ue(s.declaredInputs,h.declaredInputs),ue(s.outputs,h.outputs),ss(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const I=p[y];I&&I.ngInherit&&I(s),I===Qm&&(l=!1)}}o=Object.getPrototypeOf(o)}!function kC(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=ls(h.hostAttrs,l=ls(l,h.hostAttrs))}}(c)}function iw(s){return s===J?{}:s===fe?[]:s}function hh(s,o){const l=s.viewQuery;s.viewQuery=l?(c,h)=>{o(c,h),l(c,h)}:o}function OC(s,o){const l=s.contentQueries;s.contentQueries=l?(c,h,p)=>{o(c,h,p),l(c,h,p)}:o}function OA(s,o){const l=s.hostBindings;s.hostBindings=l?(c,h)=>{o(c,h),l(c,h)}:o}const Ym=["providersResolver"],FC=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function Xm(s){let l,o=Vc(s.type);l=ss(s)?o.\u0275cmp:o.\u0275dir;const c=s;for(const h of Ym)c[h]=l[h];if(ss(l))for(const h of FC)c[h]=l[h]}function sw(s){return o=>{o.findHostDirectiveDefs=Jm,o.hostDirectives=(Array.isArray(s)?s:s()).map(l=>"function"==typeof l?{directive:Q(l),inputs:J,outputs:J}:{directive:Q(l.directive),inputs:e_(l.inputs),outputs:e_(l.outputs)})}}function Jm(s,o,l){if(null!==s.hostDirectives)for(const c of s.hostDirectives){const h=Yn(c.directive);FA(h.declaredInputs,c.inputs),Jm(h,o,l),l.set(h,c),o.push(h)}}function e_(s){if(void 0===s||0===s.length)return J;const o={};for(let l=0;l<s.length;l+=2)o[s[l]]=s[l+1];return o}function FA(s,o){for(const l in o)o.hasOwnProperty(l)&&(s[o[l]]=s[l])}function fh(s){return!!n_(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function n_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ow(s,o){const l=fh(s),c=fh(o);return l&&c?function UC(s,o,l){const c=s[Symbol.iterator](),h=o[Symbol.iterator]();for(;;){const p=c.next(),y=h.next();if(p.done&&y.done)return!0;if(p.done||y.done||!l(p.value,y.value))return!1}}(s,o,ow):!(l||!s||"object"!=typeof s&&"function"!=typeof s||c||!o||"object"!=typeof o&&"function"!=typeof o)||Object.is(s,o)}function fa(s,o,l){return s[o]=l}function gl(s,o){return s[o]}function Zr(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function ml(s,o,l,c){const h=Zr(s,o,l);return Zr(s,o+1,c)||h}function r_(s,o,l,c,h){const p=ml(s,o,l,c);return Zr(s,o+2,h)||p}function io(s,o,l,c,h,p){const y=ml(s,o,l,c);return ml(s,o+2,h,p)||y}function _p(s,o,l,c){const h=Re();return Zr(h,Io(),o)&&(sn(),Lo(In(),h,s,o,l,c)),_p}function jc(s,o){let l=!1,c=Hr();for(let p=1;p<o.length;p+=2)l=Zr(s,c++,o[p])||l;if(nc(c),!l)return Vt;let h=o[0];for(let p=1;p<o.length;p+=2)h+=Ce(o[p])+o[p+1];return h}function yp(s,o,l,c){return Zr(s,Io(),l)?o+Ce(l)+c:Vt}function vp(s,o,l,c,h,p){const I=ml(s,Hr(),l,h);return as(2),I?o+Ce(l)+c+Ce(h)+p:Vt}function wp(s,o,l,c,h,p,y,I){const S=r_(s,Hr(),l,h,y);return as(3),S?o+Ce(l)+c+Ce(h)+p+Ce(y)+I:Vt}function Ip(s,o,l,c,h,p,y,I,C,S){const B=io(s,Hr(),l,h,y,C);return as(4),B?o+Ce(l)+c+Ce(h)+p+Ce(y)+I+Ce(C)+S:Vt}function mu(s,o,l,c,h,p,y,I,C,S,N,B){const Z=Hr();let ne=io(s,Z,l,h,y,C);return ne=Zr(s,Z+4,N)||ne,as(5),ne?o+Ce(l)+c+Ce(h)+p+Ce(y)+I+Ce(C)+S+Ce(N)+B:Vt}function ph(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne){const we=Hr();let ze=io(s,we,l,h,y,C);return ze=ml(s,we+4,N,Z)||ze,as(6),ze?o+Ce(l)+c+Ce(h)+p+Ce(y)+I+Ce(C)+S+Ce(N)+B+Ce(Z)+ne:Vt}function gh(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze){const Ye=Hr();let pt=io(s,Ye,l,h,y,C);return pt=r_(s,Ye+4,N,Z,we)||pt,as(7),pt?o+Ce(l)+c+Ce(h)+p+Ce(y)+I+Ce(C)+S+Ce(N)+B+Ce(Z)+ne+Ce(we)+ze:Vt}function mh(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye,pt){const Ft=Hr();let Fe=io(s,Ft,l,h,y,C);return Fe=io(s,Ft+4,N,Z,we,Ye)||Fe,as(8),Fe?o+Ce(l)+c+Ce(h)+p+Ce(y)+I+Ce(C)+S+Ce(N)+B+Ce(Z)+ne+Ce(we)+ze+Ce(Ye)+pt:Vt}function Ep(s,o,l,c,h,p){const y=Re(),I=yp(y,o,l,c);return I!==Vt&&Lo(In(),y,s,I,h,p),Ep}function us(s,o,l,c,h,p,y,I){const C=Re(),S=vp(C,o,l,c,h,p);return S!==Vt&&Lo(In(),C,s,S,y,I),us}function i_(s,o,l,c,h,p,y,I,C,S){const N=Re(),B=wp(N,o,l,c,h,p,y,I);return B!==Vt&&Lo(In(),N,s,B,C,S),i_}function Bc(s,o,l,c,h,p,y,I,C,S,N,B){const Z=Re(),ne=Ip(Z,o,l,c,h,p,y,I,C,S);return ne!==Vt&&Lo(In(),Z,s,ne,N,B),Bc}function aw(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne){const we=Re(),ze=mu(we,o,l,c,h,p,y,I,C,S,N,B);return ze!==Vt&&Lo(In(),we,s,ze,Z,ne),aw}function lw(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze){const Ye=Re(),pt=ph(Ye,o,l,c,h,p,y,I,C,S,N,B,Z,ne);return pt!==Vt&&Lo(In(),Ye,s,pt,we,ze),lw}function s_(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye,pt){const Ft=Re(),Fe=gh(Ft,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze);return Fe!==Vt&&Lo(In(),Ft,s,Fe,Ye,pt),s_}function _h(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye,pt,Ft,Fe){const Qt=Re(),Hn=mh(Qt,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye,pt);return Hn!==Vt&&Lo(In(),Qt,s,Hn,Ft,Fe),_h}function uw(s,o,l,c){const h=Re(),p=jc(h,o);return p!==Vt&&Lo(In(),h,s,p,l,c),uw}function jC(s){const o=dv(s);gu(o[it],o,s)}function vh(s,o,l,c,h,p,y,I){const C=Re(),S=sn(),N=s+jt,B=S.firstCreatePass?function yh(s,o,l,c,h,p,y,I,C){const S=o.consts,N=ro(o,s,4,y||null,Hi(S,I));up(o,l,N,Hi(S,C)),lc(o,N);const B=N.tView=lp(2,N,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,N),B.queries=o.queries.embeddedTView(N)),N}(N,S,C,o,l,c,h,p,y):S.data[N];Wi(B,!1);const Z=C[Ht].createComment("");wm(S,C,Z,B),Kr(Z,C),fp(C,C[N]=Yv(Z,C,Z,B)),is(B)&&$m(S,C,B),null!=y&&ah(C,B,I)}function BC(s,o,l,c){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=c}function zC(s){return Oi(function Bl(){return Ut.lFrame.contextLView}(),jt+s)}function zc(s,o,l){const c=Re();return Zr(c,Io(),o)&&Rs(sn(),In(),c,s,o,c[Ht],l,!1),zc}function $c(s,o,l,c,h){const y=h?"class":"style";tw(s,l,o.inputs[y],y,c)}function o_(s,o,l,c){const h=Re(),p=sn(),y=jt+s,I=h[Ht],C=p.firstCreatePass?function LA(s,o,l,c,h,p){const y=o.consts,C=ro(o,s,2,c,Hi(y,h));return up(o,l,C,Hi(y,p)),null!==C.attrs&&Km(C,C.attrs,!1),null!==C.mergedAttrs&&Km(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(y,p,h,o,l,c):p.data[y],S=h[y]=As(I,o,function sv(){return Ut.lFrame.currentNamespace}()),N=is(C);return Wi(C,!0),kS(I,S,C),32!=(32&C.flags)&&wm(p,h,S,C),0===function Ju(){return Ut.lFrame.elementDepthCount}()&&Kr(S,h),function ec(){Ut.lFrame.elementDepthCount++}(),N&&($m(p,h,C),Fc(p,C,h)),null!==c&&ah(h,C),o_}function a_(){let s=Xn();Vl()?jl():(s=s.parent,Wi(s,!1));const o=s;!function tc(){Ut.lFrame.elementDepthCount--}();const l=sn();return l.firstCreatePass&&(lc(l,s),Wu(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function uc(s){return 0!=(8&s.flags)}(o)&&$c(l,o,Re(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ba(s){return 0!=(16&s.flags)}(o)&&$c(l,o,Re(),o.stylesWithoutHost,!1),a_}function cw(s,o,l,c){return o_(s,o,l,c),a_(),cw}function l_(s,o,l){const c=Re(),h=sn(),p=s+jt,y=h.firstCreatePass?function UA(s,o,l,c,h){const p=o.consts,y=Hi(p,c),I=ro(o,s,8,"ng-container",y);return null!==y&&Km(I,y,!0),up(o,l,I,Hi(p,h)),null!==o.queries&&o.queries.elementStart(o,I),I}(p,h,c,o,l):h.data[p];Wi(y,!0);const I=c[p]=c[Ht].createComment("");return wm(h,c,I,y),Kr(I,c),is(y)&&($m(h,c,y),Fc(h,y,c)),null!=l&&ah(c,y),l_}function dw(){let s=Xn();const o=sn();return Vl()?jl():(s=s.parent,Wi(s,!1)),o.firstCreatePass&&(lc(o,s),Wu(s)&&o.queries.elementEnd(s)),dw}function hw(s,o,l){return l_(s,o,l),dw(),hw}function u_(){return Re()}function wh(s){return!!s&&"function"==typeof s.then}function Hc(s){return!!s&&"function"==typeof s.subscribe}const $C=Hc;function fw(s,o,l,c){const h=Re(),p=sn(),y=Xn();return HC(p,h,h[Ht],y,s,o,c),fw}function pw(s,o){const l=Xn(),c=Re(),h=sn();return HC(h,c,qm(sc(h.data),l,c),l,s,o),pw}function HC(s,o,l,c,h,p,y){const I=is(c),S=s.firstCreatePass&&mp(s),N=o[Un],B=gp(o);let Z=!0;if(3&c.type||y){const ze=Cr(c,o),Ye=y?y(ze):ze,pt=B.length,Ft=y?Qt=>y(jn(Qt[c.index])):c.index;let Fe=null;if(!y&&I&&(Fe=function VA(s,o,l,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===l&&h[p+1]===c){const I=o[ys],C=h[p+2];return I.length>C?I[C]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,c.index)),null!==Fe)(Fe.__ngLastListenerFn__||Fe).__ngNextListenerFn__=p,Fe.__ngLastListenerFn__=p,Z=!1;else{p=GC(c,o,N,p,!1);const Qt=l.listen(Ye,h,p);B.push(p,Qt),S&&S.push(h,Ft,pt,pt+1)}}else p=GC(c,o,N,p,!1);const ne=c.outputs;let we;if(Z&&null!==ne&&(we=ne[h])){const ze=we.length;if(ze)for(let Ye=0;Ye<ze;Ye+=2){const Hn=o[we[Ye]][we[Ye+1]].subscribe(p),Sr=B.length;B.push(p,Hn),S&&S.push(h,c.index,Sr,-(Sr+1))}}}function WC(s,o,l,c){try{return mn(6,o,l),!1!==l(c)}catch(h){return MC(s,h),!1}finally{mn(7,o,l)}}function GC(s,o,l,c,h){return function p(y){if(y===Function)return c;Gm(s.componentOffset>-1?kr(s.index,o):o);let C=WC(o,l,c,y),S=p.__ngNextListenerFn__;for(;S;)C=WC(o,l,S,y)&&C,S=S.__ngNextListenerFn__;return h&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function qC(s=1){return function Md(s){return(Ut.lFrame.contextLView=function em(s,o){for(;s>0;)o=o[mo],s--;return o}(s,Ut.lFrame.contextLView))[Un]}(s)}function jA(s,o){let l=null;const c=function An(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(!(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===c?pi(s,p,!0):nh(c,p))return h}else l=h}return l}function gw(s){const o=Re()[Br][Ln];if(!o.projection){const c=o.projection=Ao(s?s.length:1,null),h=c.slice();let p=o.child;for(;null!==p;){const y=s?jA(p,s):0;null!==y&&(h[y]?h[y].projectionNext=p:c[y]=p,h[y]=p),p=p.next}}}function KC(s,o=0,l){const c=Re(),h=sn(),p=ro(h,jt+s,16,null,l||null);null===p.projection&&(p.projection=o),jl(),32!=(32&p.flags)&&function su(s,o,l){xS(o[Ht],0,o,l,Gd(s,l,o),RS(l.parent||o[Ln],l,o))}(h,c,p)}function Cp(s,o,l){return bp(s,"",o,"",l),Cp}function bp(s,o,l,c,h){const p=Re(),y=yp(p,o,l,c);return y!==Vt&&Rs(sn(),In(),p,s,y,p[Ht],h,!1),bp}function Dp(s,o,l,c,h,p,y){const I=Re(),C=vp(I,o,l,c,h,p);return C!==Vt&&Rs(sn(),In(),I,s,C,I[Ht],y,!1),Dp}function Ih(s,o,l,c,h,p,y,I,C){const S=Re(),N=wp(S,o,l,c,h,p,y,I);return N!==Vt&&Rs(sn(),In(),S,s,N,S[Ht],C,!1),Ih}function mw(s,o,l,c,h,p,y,I,C,S,N){const B=Re(),Z=Ip(B,o,l,c,h,p,y,I,C,S);return Z!==Vt&&Rs(sn(),In(),B,s,Z,B[Ht],N,!1),mw}function _w(s,o,l,c,h,p,y,I,C,S,N,B,Z){const ne=Re(),we=mu(ne,o,l,c,h,p,y,I,C,S,N,B);return we!==Vt&&Rs(sn(),In(),ne,s,we,ne[Ht],Z,!1),_w}function yw(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we){const ze=Re(),Ye=ph(ze,o,l,c,h,p,y,I,C,S,N,B,Z,ne);return Ye!==Vt&&Rs(sn(),In(),ze,s,Ye,ze[Ht],we,!1),yw}function vw(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye){const pt=Re(),Ft=gh(pt,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze);return Ft!==Vt&&Rs(sn(),In(),pt,s,Ft,pt[Ht],Ye,!1),vw}function Eh(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye,pt,Ft){const Fe=Re(),Qt=mh(Fe,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye,pt);return Qt!==Vt&&Rs(sn(),In(),Fe,s,Qt,Fe[Ht],Ft,!1),Eh}function c_(s,o,l){const c=Re(),h=jc(c,o);return h!==Vt&&Rs(sn(),In(),c,s,h,c[Ht],l,!1),c_}function Tp(s,o){return s<<17|o<<2}function Uo(s){return s>>17&32767}function Wc(s){return 2|s}function _u(s){return(131068&s)>>2}function ww(s,o){return-131069&s|o<<2}function Iw(s){return 1|s}function YC(s,o,l,c,h){const p=s[l+1],y=null===o;let I=c?Uo(p):_u(p),C=!1;for(;0!==I&&(!1===C||y);){const N=s[I+1];$A(s[I],o)&&(C=!0,s[I+1]=c?Iw(N):Wc(N)),I=c?Uo(N):_u(N)}C&&(s[l+1]=c?Wc(p):Iw(p))}function $A(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&to(s,o)>=0}const Qr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function XC(s){return s.substring(Qr.key,Qr.keyEnd)}function HA(s){return s.substring(Qr.value,Qr.valueEnd)}function Ew(s,o){const l=Qr.textEnd;return l===o?-1:(o=Qr.keyEnd=function JC(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,Qr.key=o,l),Sp(s,o,l))}function Cw(s,o){const l=Qr.textEnd;let c=Qr.key=Sp(s,o,l);return l===c?-1:(c=Qr.keyEnd=function eb(s,o,l){let c;for(;o<l&&(45===(c=s.charCodeAt(o))||95===c||(-33&c)>=65&&(-33&c)<=90||c>=48&&c<=57);)o++;return o}(s,c,l),c=tb(s,c,l),c=Qr.value=Sp(s,c,l),c=Qr.valueEnd=function qA(s,o,l){let c=-1,h=-1,p=-1,y=o,I=y;for(;y<l;){const C=s.charCodeAt(y++);if(59===C)return I;34===C||39===C?I=y=nb(s,C,y,l):o===y-4&&85===p&&82===h&&76===c&&40===C?I=y=nb(s,41,y,l):C>32&&(I=y),p=h,h=c,c=-33&C}return I}(s,c,l),tb(s,c,l))}function bw(s){Qr.key=0,Qr.keyEnd=0,Qr.value=0,Qr.valueEnd=0,Qr.textEnd=s.length}function Sp(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function tb(s,o,l,c){return(o=Sp(s,o,l))<l&&o++,o}function nb(s,o,l,c){let h=-1,p=l;for(;p<c;){const y=s.charCodeAt(p++);if(y==o&&92!==h)return p;h=92==y&&92===h?0:y}throw new Error}function Dw(s,o,l){return Li(s,o,l,!1),Dw}function Tw(s,o){return Li(s,o,null,!0),Tw}function so(s){xs(ab,Sw,s,!1)}function Sw(s,o){for(let l=function GA(s){return bw(s),Cw(s,Sp(s,0,Qr.textEnd))}(o);l>=0;l=Cw(o,l))ab(s,XC(o),HA(o))}function rb(s){xs(Wt,Vo,s,!0)}function Vo(s,o){for(let l=function WA(s){return bw(s),Ew(s,Sp(s,0,Qr.textEnd))}(o);l>=0;l=Ew(o,l))Wt(s,XC(o),!0)}function Li(s,o,l,c){const h=Re(),p=sn(),y=as(2);p.firstUpdatePass&&Aw(p,s,y,c),o!==Vt&&Zr(h,y,o)&&Mp(p,p.data[ui()],h,h[Ht],s,h[y+1]=function Rw(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=re(sl(s)))),s}(o,l),c,y)}function xs(s,o,l,c){const h=sn(),p=as(2);h.firstUpdatePass&&Aw(h,null,p,c);const y=Re();if(l!==Vt&&Zr(y,p,l)){const I=h.data[ui()];if(ub(I,c)&&!ib(h,p)){let C=c?I.classesWithoutHost:I.stylesWithoutHost;null!==C&&(l=pe(C,l||"")),$c(h,I,y,l,c)}else!function ZA(s,o,l,c,h,p,y,I){h===Vt&&(h=fe);let C=0,S=0,N=0<h.length?h[0]:null,B=0<p.length?p[0]:null;for(;null!==N||null!==B;){const Z=C<h.length?h[C+1]:void 0,ne=S<p.length?p[S+1]:void 0;let ze,we=null;N===B?(C+=2,S+=2,Z!==ne&&(we=B,ze=ne)):null===B||null!==N&&N<B?(C+=2,we=N):(S+=2,we=B,ze=ne),null!==we&&Mp(s,o,l,c,we,ze,y,I),N=C<h.length?h[C]:null,B=S<p.length?p[S]:null}}(h,I,y,y[Ht],y[p+1],y[p+1]=function KA(s,o,l){if(null==l||""===l)return fe;const c=[],h=sl(l);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(c,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(c,p,h[p]);else"string"==typeof h&&o(c,h);return c}(s,o,l),c,p)}}function ib(s,o){return o>=s.expandoStartIndex}function Aw(s,o,l,c){const h=s.data;if(null===h[l+1]){const p=h[ui()],y=ib(s,l);ub(p,c)&&null===o&&!y&&(o=!1),o=function h_(s,o,l,c){const h=sc(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(l=Ap(l=Mw(null,s,o,l,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(l=Mw(h,s,o,l,c),null===p){let C=function f_(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==_u(c))return s[Uo(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=Mw(null,s,o,C[1],c),C=Ap(C,o.attrs,c),function sb(s,o,l,c){s[Uo(l?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else p=function ob(s,o,l){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=Ap(c,s[p].hostAttrs,l);return Ap(c,o.attrs,l)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),l}(h,p,o,c),function QC(s,o,l,c,h,p){let y=p?o.classBindings:o.styleBindings,I=Uo(y),C=_u(y);s[c]=l;let N,S=!1;if(Array.isArray(l)?(N=l[1],(null===N||to(l,N)>0)&&(S=!0)):N=l,h)if(0!==C){const Z=Uo(s[I+1]);s[c+1]=Tp(Z,I),0!==Z&&(s[Z+1]=ww(s[Z+1],c)),s[I+1]=function ZC(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=Tp(I,0),0!==I&&(s[I+1]=ww(s[I+1],c)),I=c;else s[c+1]=Tp(C,0),0===I?I=c:s[C+1]=ww(s[C+1],c),C=c;S&&(s[c+1]=Wc(s[c+1])),YC(s,N,c,!0),YC(s,N,c,!1),function zA(s,o,l,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&to(p,o)>=0&&(l[c+1]=Iw(l[c+1]))}(o,N,s,c,p),y=Tp(I,C),p?o.classBindings=y:o.styleBindings=y}(h,p,o,l,y,c)}}function Mw(s,o,l,c,h){let p=null;const y=l.directiveEnd;let I=l.directiveStylingLast;for(-1===I?I=l.directiveStart:I++;I<y&&(p=o[I],c=Ap(c,p.hostAttrs,h),p!==s);)I++;return null!==s&&(l.directiveStylingLast=I),c}function Ap(s,o,l){const c=l?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Wt(s,y,!!l||o[++p]))}return void 0===s?null:s}function ab(s,o,l){Wt(s,o,sl(l))}function Mp(s,o,l,c,h,p,y,I){if(!(3&o.type))return;const C=s.data,S=C[I+1],N=function BA(s){return 1==(1&s)}(S)?lb(C,o,l,h,_u(S),y):void 0;p_(N)||(p_(p)||function d_(s){return 2==(2&s)}(S)&&(p=lb(C,null,l,h,I,y)),function N0(s,o,l,c,h){if(o)h?s.addClass(l,c):s.removeClass(l,c);else{let p=-1===c.indexOf("-")?void 0:Ss.DashCase;null==h?s.removeStyle(l,c,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=Ss.Important),s.setStyle(l,c,h,p))}}(c,y,Zs(ui(),l),h,p))}function lb(s,o,l,c,h,p){const y=null===o;let I;for(;h>0;){const C=s[h],S=Array.isArray(C),N=S?C[1]:C,B=null===N;let Z=l[h+1];Z===Vt&&(Z=B?fe:void 0);let ne=B?Wr(Z,c):N===c?Z:void 0;if(S&&!p_(ne)&&(ne=Wr(C,c)),p_(ne)&&(I=ne,y))return I;const we=s[h+1];h=y?Uo(we):_u(we)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(I=Wr(C,c))}return I}function p_(s){return void 0!==s}function ub(s,o){return 0!=(s.flags&(o?8:16))}function cb(s,o=""){const l=Re(),c=sn(),h=s+jt,p=c.firstCreatePass?ro(c,h,1,o,null):c.data[h],y=l[h]=wt(l[Ht],o);wm(c,l,y,p),Wi(p,!1)}function xw(s){return g_("",s,""),xw}function g_(s,o,l){const c=Re(),h=yp(c,s,o,l);return h!==Vt&&pl(c,ui(),h),g_}function Fr(s,o,l,c,h){const p=Re(),y=vp(p,s,o,l,c,h);return y!==Vt&&pl(p,ui(),y),Fr}function Nw(s,o,l,c,h,p,y){const I=Re(),C=wp(I,s,o,l,c,h,p,y);return C!==Vt&&pl(I,ui(),C),Nw}function yu(s,o,l,c,h,p,y,I,C){const S=Re(),N=Ip(S,s,o,l,c,h,p,y,I,C);return N!==Vt&&pl(S,ui(),N),yu}function Pw(s,o,l,c,h,p,y,I,C,S,N){const B=Re(),Z=mu(B,s,o,l,c,h,p,y,I,C,S,N);return Z!==Vt&&pl(B,ui(),Z),Pw}function kw(s,o,l,c,h,p,y,I,C,S,N,B,Z){const ne=Re(),we=ph(ne,s,o,l,c,h,p,y,I,C,S,N,B,Z);return we!==Vt&&pl(ne,ui(),we),kw}function m_(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we){const ze=Re(),Ye=gh(ze,s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we);return Ye!==Vt&&pl(ze,ui(),Ye),m_}function db(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye){const pt=Re(),Ft=mh(pt,s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye);return Ft!==Vt&&pl(pt,ui(),Ft),db}function hb(s){const o=Re(),l=jc(o,s);return l!==Vt&&pl(o,ui(),l),hb}function fb(s,o,l){xs(Wt,Vo,yp(Re(),s,o,l),!0)}function __(s,o,l,c,h){xs(Wt,Vo,vp(Re(),s,o,l,c,h),!0)}function Ow(s,o,l,c,h,p,y){xs(Wt,Vo,wp(Re(),s,o,l,c,h,p,y),!0)}function cs(s,o,l,c,h,p,y,I,C){xs(Wt,Vo,Ip(Re(),s,o,l,c,h,p,y,I,C),!0)}function pb(s,o,l,c,h,p,y,I,C,S,N){xs(Wt,Vo,mu(Re(),s,o,l,c,h,p,y,I,C,S,N),!0)}function Gc(s,o,l,c,h,p,y,I,C,S,N,B,Z){xs(Wt,Vo,ph(Re(),s,o,l,c,h,p,y,I,C,S,N,B,Z),!0)}function QA(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we){xs(Wt,Vo,gh(Re(),s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we),!0)}function Fw(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye){xs(Wt,Vo,mh(Re(),s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye),!0)}function _l(s){xs(Wt,Vo,jc(Re(),s),!0)}function y_(s,o,l){so(yp(Re(),s,o,l))}function gb(s,o,l,c,h){so(vp(Re(),s,o,l,c,h))}function YA(s,o,l,c,h,p,y){so(wp(Re(),s,o,l,c,h,p,y))}function XA(s,o,l,c,h,p,y,I,C){so(Ip(Re(),s,o,l,c,h,p,y,I,C))}function Lw(s,o,l,c,h,p,y,I,C,S,N){so(mu(Re(),s,o,l,c,h,p,y,I,C,S,N))}function Uw(s,o,l,c,h,p,y,I,C,S,N,B,Z){so(ph(Re(),s,o,l,c,h,p,y,I,C,S,N,B,Z))}function v_(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we){so(gh(Re(),s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we))}function mb(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye){so(mh(Re(),s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye))}function _b(s){so(jc(Re(),s))}function Vw(s,o,l,c,h){return Li(s,yp(Re(),o,l,c),h,!1),Vw}function w_(s,o,l,c,h,p,y){return Li(s,vp(Re(),o,l,c,h,p),y,!1),w_}function jw(s,o,l,c,h,p,y,I,C){return Li(s,wp(Re(),o,l,c,h,p,y,I),C,!1),jw}function yb(s,o,l,c,h,p,y,I,C,S,N){return Li(s,Ip(Re(),o,l,c,h,p,y,I,C,S),N,!1),yb}function vb(s,o,l,c,h,p,y,I,C,S,N,B,Z){return Li(s,mu(Re(),o,l,c,h,p,y,I,C,S,N,B),Z,!1),vb}function wb(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we){return Li(s,ph(Re(),o,l,c,h,p,y,I,C,S,N,B,Z,ne),we,!1),wb}function qc(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye){return Li(s,gh(Re(),o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze),Ye,!1),qc}function Ib(s,o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye,pt,Ft){return Li(s,mh(Re(),o,l,c,h,p,y,I,C,S,N,B,Z,ne,we,ze,Ye,pt),Ft,!1),Ib}function I_(s,o,l){return Li(s,jc(Re(),o),l,!1),I_}function Bw(s,o,l){const c=Re();return Zr(c,Io(),o)&&Rs(sn(),In(),c,s,o,c[Ht],l,!0),Bw}function zw(s,o,l){const c=Re();if(Zr(c,Io(),o)){const p=sn(),y=In();Rs(p,y,c,s,o,qm(sc(p.data),y,c),l,!0)}return zw}const vu=void 0;var eM=["en",[["a","p"],["AM","PM"],vu],[["AM","PM"],vu,vu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vu,"{1} 'at' {0}",vu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function JA(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Ch={};function tM(s,o,l){"string"!=typeof o&&(l=o,o=s[Mt.LocaleId]),o=o.toLowerCase().replace(/_/g,"-"),Ch[o]=s,l&&(Ch[o][Mt.ExtraData]=l)}function $w(s){const o=function Tt(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=nM(o);if(l)return l;const c=o.split("-")[0];if(l=nM(c),l)return l;if("en"===c)return eM;throw new ye(701,!1)}function Eb(s){return $w(s)[Mt.CurrencyCode]||null}function Cb(s){return $w(s)[Mt.PluralCase]}function nM(s){return s in Ch||(Ch[s]=Lt.ng&&Lt.ng.common&&Lt.ng.common.locales&&Lt.ng.common.locales[s]),Ch[s]}function bh(){Ch={}}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const Hw=["zero","one","two","few","many"],Kc="en-US",Ww={marker:"element"},Dh={marker:"ICU"};var he=(()=>((he=he||{})[he.SHIFT=2]="SHIFT",he[he.APPEND_EAGERLY=1]="APPEND_EAGERLY",he[he.COMMENT=2]="COMMENT",he))();let oo=Kc;function Ns(s){(function nt(s,o){null==s&&Ze(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(oo=s.toLowerCase().replace(/_/g,"-"))}function Db(s,o,l){const c=o.insertBeforeIndex,h=Array.isArray(c)?c[0]:c;return null===h?_m(s,0,l):jn(l[h])}function pa(s,o,l,c,h){const p=o.insertBeforeIndex;if(Array.isArray(p)){let y=c,I=null;if(3&o.type||(I=y,y=h),null!==y&&-1===o.componentOffset)for(let C=1;C<p.length;C++)Mc(s,y,l[p[C]],I,!1)}}function It(s,o){if(s.push(o),s.length>1)for(let l=s.length-2;l>=0;l--){const c=s[l];E_(c)||Kt(c,o)&&null===C_(c)&&b_(c,o.index)}}function E_(s){return!(64&s.type)}function Kt(s,o){return E_(o)||s.index>o.index}function C_(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function b_(s,o){const l=s.insertBeforeIndex;Array.isArray(l)?l[0]=o:(vm(Db,pa),s.insertBeforeIndex=o)}function yl(s,o){const l=s.data[o];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function iM(s,o,l){const c=qv(s,l,64,null,null);return It(o,c),c}function D_(s,o){const l=o[s.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function Tb(s){return s>>>17}function Ti(s){return(131070&s)>>>1}let ao=0,xp=0;function Ai(s,o,l,c){const h=l[Ht];let y,p=null;for(let I=0;I<o.length;I++){const C=o[I];if("string"==typeof C){const S=o[++I];null===l[S]&&(l[S]=wt(h,C))}else if("number"==typeof C)switch(1&C){case 0:const S=Tb(C);let N,B;if(null===p&&(p=S,y=qd(h,c)),S===p?(N=c,B=y):(N=null,B=jn(l[S])),null!==B){const ze=Ti(C);Mc(h,B,l[ze],N,!1);const pt=yl(s,ze);if(null!==pt&&"object"==typeof pt){const Ft=D_(pt,l);null!==Ft&&Ai(s,pt.create[Ft],l,l[pt.anchorIdx])}}break;case 1:const ne=o[++I],we=o[++I];pu(h,Zs(C>>>1,l),null,null,ne,we,null)}else switch(C){case Dh:const S=o[++I],N=o[++I];null===l[N]&&Kr(l[N]=$n(h,S),l);break;case Ww:const B=o[++I],Z=o[++I];null===l[Z]&&Kr(l[Z]=As(h,B,null),l)}}}function Mb(s,o,l,c,h){for(let p=0;p<l.length;p++){const y=l[p],I=l[++p];if(y&h){let C="";for(let S=p+1;S<=p+I;S++){const N=l[S];if("string"==typeof N)C+=N;else if("number"==typeof N)if(N<0)C+=Ce(o[c-N]);else{const B=N>>>2;switch(3&N){case 1:const Z=l[++S],ne=l[++S],we=s.data[B];"string"==typeof we?pu(o[Ht],o[B],null,we,Z,C,ne):Rs(s,we,o,Z,C,o[Ht],ne,!1);break;case 0:const ze=o[B];null!==ze&&zt(o[Ht],ze,C);break;case 2:Rb(s,yl(s,B),o,C);break;case 3:Np(s,yl(s,B),c,o)}}}}else{const C=l[p+1];if(C>0&&3==(3&C)){const N=yl(s,C>>>2);o[N.currentCaseLViewIndex]<0&&Np(s,N,c,o)}}p+=I}}function Np(s,o,l,c){let h=c[o.currentCaseLViewIndex];if(null!==h){let p=ao;h<0&&(h=c[o.currentCaseLViewIndex]=~h,p=-1),Mb(s,c,o.update[h],l,p)}}function Rb(s,o,l,c){const h=function S_(s,o){let l=s.cases.indexOf(o);if(-1===l)switch(s.type){case 1:{const c=function bb(s,o){const l=Cb(o)(parseInt(s,10)),c=Hw[l];return void 0!==c?c:"other"}(o,function U(){return oo}());l=s.cases.indexOf(c),-1===l&&"other"!==c&&(l=s.cases.indexOf("other"));break}case 0:l=s.cases.indexOf("other")}return-1===l?null:l}(o,c);if(D_(o,l)!==h&&(T_(s,o,l),l[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const y=l[o.anchorIdx];y&&Ai(s,o.create[h],l,y)}}function T_(s,o,l){let c=D_(o,l);if(null!==c){const h=o.remove[c];for(let p=0;p<h.length;p++){const y=h[p];if(y>0){const I=Zs(y,l);null!==I&&Wf(l[Ht],I)}else T_(s,yl(s,~y),l)}}}function ga(){const s=[];let l,c,o=-1;function p(I,C){o=0;const S=D_(I,C);c=null!==S?I.remove[S]:fe}function y(){if(o<c.length){const I=c[o++];return I>0?l[I]:(s.push(o,c),p(l[it].data[~I],l),y())}return 0===s.length?null:(c=s.pop(),o=s.pop(),y())}return function h(I,C){for(l=C;s.length;)s.pop();return p(I.value,C),y}}const Th=/\ufffd(\d+):?\d*\ufffd/gi,Nb=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,sM=/\ufffd(\d+)\ufffd/,Zw=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,wu="\ufffd",Qw=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Yw=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Xw=/\uE500/g;function eI(s,o,l,c,h,p,y){const I=hl(s,c,1,null);let C=I<<he.SHIFT,S=Qs();o===S&&(S=null),null===S&&(C|=he.APPEND_EAGERLY),y&&(C|=he.COMMENT,function g(s){void 0===ru&&(ru=s())}(ga)),h.push(C,null===p?"":p);const N=qv(s,I,y?32:1,null===p?"":p,null);It(l,N);const B=N.index;return Wi(N,!1),null!==S&&o!==S&&function Gw(s,o){let l=s.insertBeforeIndex;null===l?(vm(Db,pa),l=s.insertBeforeIndex=[null,o]):(function $e(s,o,l){s!=o&&Ze(l,s,o,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(o))}(S,B),N}function aM(s,o,l,c,h,p,y){const I=y.match(Th),C=eI(s,o,l,p,c,I?null:y,!1);I&&Op(h,y,C.index,null,0,null)}function Op(s,o,l,c,h,p){const y=s.length,I=y+1;s.push(null,null);const C=y+2,S=o.split(Th);let N=0;for(let B=0;B<S.length;B++){const Z=S[B];if(1&B){const ne=h+parseInt(Z,10);s.push(-1-ne),N|=Pb(ne)}else""!==Z&&s.push(Z)}return s.push(l<<2|(c?1:0)),c&&s.push(c,p),s[y]=N,s[I]=s.length-C,N}function Fp(s){let o=0;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c&&c<0&&o++}return o}function Pb(s){return 1<<Math.min(s,31)}function Lp(s){let o,p,l="",c=0,h=!1;for(;null!==(o=Qw.exec(s));)h?o[0]===`${wu}/*${p}${wu}`&&(c=o.index,h=!1):(l+=s.substring(c,o.index+o[0].length),p=o[1],h=!0);return l+=s.slice(c),l}function nI(s,o,l,c,h,p){let y=0;const I={type:h.type,currentCaseLViewIndex:hl(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function iI(s,o,l){s.push(Pb(o.mainBinding),2,-1-o.mainBinding,l<<2|2)})(l,h,p),function rM(s,o,l){const c=s.data[o];null===c?s.data[o]=l:c.value=l}(s,p,I);const C=h.values;for(let S=0;S<C.length;S++){const N=C[S],B=[];for(let Z=0;Z<N.length;Z++){const ne=N[Z];if("string"!=typeof ne){const we=B.push(ne)-1;N[Z]=`\x3c!--\ufffd${we}\ufffd--\x3e`}}y=M_(s,I,o,l,c,h.cases[S],N.join(""),B)|y}y&&function Ob(s,o,l){s.push(o,1,l<<2|3)}(l,y,p)}function kb(s){const o=[],l=[];let c=1,h=0;const p=A_(s=s.replace(Zw,function(y,I,C){return c="select"===C?0:1,h=parseInt(I.slice(1),10),""}));for(let y=0;y<p.length;){let I=p[y++].trim();1===c&&(I=I.replace(/\s*(?:=)?(\w+)\s*/,"$1")),I.length&&o.push(I);const C=A_(p[y++]);o.length>l.length&&l.push(C)}return{type:c,mainBinding:h,cases:o,values:l}}function A_(s){if(!s)return[];let o=0;const l=[],c=[],h=/[{}]/g;let p;for(h.lastIndex=0;p=h.exec(s);){const I=p.index;if("}"==p[0]){if(l.pop(),0==l.length){const C=s.substring(o,I);Zw.test(C)?c.push(kb(C)):c.push(C),o=I+1}}else{if(0==l.length){const C=s.substring(o,I);c.push(C),o=I+1}l.push("{")}}const y=s.substring(o);return c.push(y),c}function M_(s,o,l,c,h,p,y,I){const C=[],S=[],N=[];o.cases.push(p),o.create.push(C),o.remove.push(S),o.update.push(N);const Z=Dv(O0()).getInertBodyElement(y),ne=Am(Z)||Z;return ne?R_(s,o,l,c,C,S,N,ne,h,I,0):0}function R_(s,o,l,c,h,p,y,I,C,S,N){let B=0,Z=I.firstChild;for(;Z;){const ne=hl(s,l,1,null);switch(Z.nodeType){case Node.ELEMENT_NODE:const we=Z,ze=we.tagName.toLowerCase();if(Sm.hasOwnProperty(ze)){N_(h,Ww,ze,C,ne),s.data[ne]=ze;const Fe=we.attributes;for(let Qt=0;Qt<Fe.length;Qt++){const Hn=Fe.item(Qt),Sr=Hn.name.toLowerCase();Hn.value.match(Th)?z0.hasOwnProperty(Sr)&&Op(y,Hn.value,ne,Hn.name,0,Av[Sr]?qf:null):uM(h,ne,Hn)}B=R_(s,o,l,c,h,p,y,Z,ne,S,N+1)|B,x_(p,ne,N)}break;case Node.TEXT_NODE:const Ye=Z.textContent||"",pt=Ye.match(Th);N_(h,null,pt?"":Ye,C,ne),x_(p,ne,N),pt&&(B=Op(y,Ye,ne,null,0,null)|B);break;case Node.COMMENT_NODE:const Ft=sM.exec(Z.textContent||"");if(Ft){const Qt=S[parseInt(Ft[1],10)];N_(h,Dh,"",C,ne),nI(s,l,c,C,Qt,ne),rI(p,ne,N)}}Z=Z.nextSibling}return B}function x_(s,o,l){0===l&&s.push(o)}function rI(s,o,l){0===l&&(s.push(~o),s.push(o))}function N_(s,o,l,c,h){null!==o&&s.push(o),s.push(l,h,function Si(s,o,l){return s|o<<17|l<<1}(0,c,h))}function uM(s,o,l){s.push(o<<1|1,l.name,l.value)}const sI=0,Fb=/\[(\ufffd.+?\ufffd?)\]/,oI=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,Lb=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,cM=/{([A-Z0-9_]+)}/g,aI=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,lI=/\/\*/,uI=/\d+\:(\d+)/;function Xr(s,o,l=-1){const c=sn(),h=Re(),p=jt+s,y=Hi(c.consts,o),I=Qs();c.firstCreatePass&&function Jw(s,o,l,c,h,p){const y=Qs(),I=[],C=[],S=[[]];h=function tI(s,o){if(function lM(s){return-1===s}(o))return Lp(s);{const l=s.indexOf(`:${o}${wu}`)+2+o.toString().length,c=s.search(new RegExp(`${wu}\\/\\*\\d+:${o}${wu}`));return Lp(s.substring(l,c))}}(h,p);const N=function oM(s){return s.replace(Xw," ")}(h).split(Yw);for(let B=0;B<N.length;B++){let Z=N[B];if(1&B){const ne=47===Z.charCodeAt(0),ze=(Z.charCodeAt(ne?1:0),jt+Number.parseInt(Z.substring(ne?2:1)));if(ne)S.shift(),Wi(Qs(),!1);else{const Ye=iM(s,S[0],ze);S.unshift([]),Wi(Ye,!0)}}else{const ne=A_(Z);for(let we=0;we<ne.length;we++){let ze=ne[we];if(1&we){const Ye=ze;if("object"!=typeof Ye)throw new Error(`Unable to parse ICU expression in "${h}" message.`);nI(s,l,C,o,Ye,eI(s,y,S[0],l,I,"",!0).index)}else""!==ze&&aM(s,y,S[0],I,C,l,ze)}}}s.data[c]={create:I,update:C}}(c,null===I?0:I.index,h,p,y,l);const C=c.data[p],N=Hf(c,I===h[Ln]?null:I,h);(function Ab(s,o,l,c){const h=s[Ht];for(let p=0;p<o.length;p++){const y=o[p++],I=o[p],S=(y&he.APPEND_EAGERLY)===he.APPEND_EAGERLY,N=y>>>he.SHIFT;let B=s[N];null===B&&(B=s[N]=(y&he.COMMENT)===he.COMMENT?h.createComment(I):wt(h,I)),S&&null!==l&&Mc(h,l,B,c,!1)}})(h,C.create,N,I&&8&I.type?h[I.index]:null),rc(!0)}function Sh(){rc(!1)}function P_(s,o,l){Xr(s,o,l),Sh()}function Ub(s,o){const l=sn(),c=Hi(l.consts,o);!function kp(s,o,l){const h=Xn().index,p=[];if(s.firstCreatePass&&null===s.data[o]){for(let y=0;y<l.length;y+=2){const I=l[y],C=l[y+1];if(""!==C){if(Nb.test(C))throw new Error(`ICU expressions are not supported in attributes. Message: "${C}".`);Op(p,C,h,I,Fp(p),null)}}s.data[o]=p}}(l,s+jt,c)}function cI(s){return function Sb(s){s&&(ao|=1<<Math.min(xp,31)),xp++}(Zr(Re(),Io(),s)),cI}function dI(s){!function qw(s,o,l){if(xp>0){const c=s.data[l];Mb(s,o,Array.isArray(c)?c:c.update,Hr()-xp-1,ao)}ao=0,xp=0}(sn(),Re(),s+jt)}function Vb(s,o={}){return function _i(s,o={}){let l=s;if(Fb.test(s)){const c={},h=[sI];l=l.replace(oI,(p,y,I)=>{const C=y||I,S=c[C]||[];if(S.length||(C.split("|").forEach(ze=>{const Ye=ze.match(uI),pt=Ye?parseInt(Ye[1],10):sI,Ft=lI.test(ze);S.push([pt,Ft,ze])}),c[C]=S),!S.length)throw new Error(`i18n postprocess: unmatched placeholder - ${C}`);const N=h[h.length-1];let B=0;for(let ze=0;ze<S.length;ze++)if(S[ze][0]===N){B=ze;break}const[Z,ne,we]=S[B];return ne?h.pop():N!==Z&&h.push(Z),S.splice(B,1),we})}return Object.keys(o).length&&(l=l.replace(Lb,(c,h,p,y,I,C)=>o.hasOwnProperty(p)?`${h}${o[p]}${C}`:c),l=l.replace(cM,(c,h)=>o.hasOwnProperty(h)?o[h]:c),l=l.replace(aI,(c,h)=>{if(o.hasOwnProperty(h)){const p=o[h];if(!p.length)throw new Error(`i18n postprocess: unmatched ICU - ${c} with key: ${h}`);return p.shift()}return c})),l}(s,o)}function k_(s,o,l,c,h){if(s=Q(s),Array.isArray(s))for(let p=0;p<s.length;p++)k_(s[p],o,l,c,h);else{const p=sn(),y=Re();let I=Nc(s)?s:Q(s.provide),C=hr(s);const S=Xn(),N=1048575&S.providerIndexes,B=S.directiveStart,Z=S.providerIndexes>>20;if(Nc(s)||!s.multi){const ne=new ja(C,h,Oc),we=Vp(I,o,h?N:N+Z,B);-1===we?(Ga(Co(S,y),p,I),Up(p,s,o.length),o.push(I),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),l.push(ne),y.push(ne)):(l[we]=ne,y[we]=ne)}else{const ne=Vp(I,o,N+Z,B),we=Vp(I,o,N,N+Z),Ye=we>=0&&l[we];if(h&&!Ye||!h&&!(ne>=0&&l[ne])){Ga(Co(S,y),p,I);const pt=function hI(s,o,l,c,h){const p=new ja(s,l,Oc);return p.multi=[],p.index=o,p.componentProviders=0,jb(p,h,c&&!l),p}(h?hM:Bb,l.length,h,c,C);!h&&Ye&&(l[we].providerFactory=pt),Up(p,s,o.length,0),o.push(I),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),l.push(pt),y.push(pt)}else Up(p,s,ne>-1?ne:we,jb(l[h?we:ne],C,!h&&c));!h&&c&&Ye&&l[we].componentProviders++}}}function Up(s,o,l,c){const h=Nc(o),p=function X0(s){return!!s.useClass}(o);if(h||p){const C=(p?Q(o.useClass):o).prototype.ngOnDestroy;if(C){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const N=S.indexOf(l);-1===N?S.push(l,[c,C]):S[N+1].push(c,C)}else S.push(l,C)}}}function jb(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Vp(s,o,l,c){for(let h=l;h<c;h++)if(o[h]===s)return h;return-1}function Bb(s,o,l,c){return Ah(this.multi,[])}function hM(s,o,l,c){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,I=bs(l,l[it],this.providerFactory.index,c);p=I.slice(0,y),Ah(h,p);for(let C=y;C<I.length;C++)p.push(I[C])}else p=[],Ah(h,p);return p}function Ah(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function O_(s,o=[]){return l=>{l.providersResolver=(c,h)=>function dM(s,o,l){const c=sn();if(c.firstCreatePass){const h=ss(s);k_(l,c.data,c.blueprint,h,!0),k_(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class Zc{}class zb{}function Mh(s,o){return new F_(s,o??null)}const $b=Mh;class F_ extends Zc{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new RC(this);const c=ai(o);this._bootstrapComponents=cu(c.bootstrap),this._r3Injector=np(o,l,[{provide:Zc,useValue:this},{provide:tp,useValue:this.componentFactoryResolver}],re(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class jp extends zb{constructor(o){super(),this.moduleType=o}create(o){return new F_(this.moduleType,o)}}class L_ extends Zc{constructor(o,l,c){super(),this.componentFactoryResolver=new RC(this),this.instance=null;const h=new kv([...o,{provide:Zc,useValue:this},{provide:tp,useValue:this.componentFactoryResolver}],l||xm(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function fI(s,o,l=null){return new L_(s,o,l).injector}let fM=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const c=Or(0,l.type),h=c.length>0?fI([c],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,h)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=et({token:s,providedIn:"environment",factory:()=>new s(Be(lu))}),s})();function Qc(s){s.getStandaloneInjector=o=>o.get(fM).getOrCreateStandaloneInjector(s)}function pI(s){const o=qr(s);if(null===o)return null;if(void 0===o.component){const l=o.lView;if(null===l)return null;o.component=function Wd(s,o){const l=o[it].data[s],{directiveStart:c,componentOffset:h}=l;return h>-1?o[c+h]:null}(o.nodeIndex,l)}return o.component}function Hb(s){!function Kb(s){if(typeof Element<"u"&&!(s instanceof Element))throw new Error("Expecting instance of DOM Element")}(s);const o=qr(s),l=o?o.lView:null;return null===l?null:l[Un]}function Iu(s){const o=qr(s);let c,l=o?o.lView:null;if(null===l)return null;for(;2===l[it].type&&(c=_(l));)l=c;return 256&l[qt]?null:l[Un]}function gI(s){const o=Hd(s);return null!==o?[M(o)]:[]}function Bp(s){const o=qr(s),l=o?o.lView:null;return null===l?ul.NULL:new di(l[it].data[o.nodeIndex],l)}function Rh(s){if(s instanceof Text)return[];const o=qr(s),l=o?o.lView:null;if(null===l)return[];const h=o.nodeIndex;return l[it]?.data[h]?(void 0===o.directives&&(o.directives=mm(h,l)),null===o.directives?[]:[...o.directives]):[]}function Gb(s){const{constructor:o}=s;if(!o)throw new Error("Unable to find the instance constructor");const l=cn(o);if(l)return{inputs:l.inputs,outputs:l.outputs,encapsulation:l.encapsulation,changeDetection:l.onPush?F.OnPush:F.Default};const c=Yn(o);return c?{inputs:c.inputs,outputs:c.outputs}:null}function U_(s){return qr(s).native}function zp(s){const o=qr(s),l=null===o?null:o.lView;if(null===l)return[];const h=l[ys],p=l[it].cleanup,y=[];if(p&&h)for(let I=0;I<p.length;){const C=p[I++],S=p[I++];if("string"==typeof C){const N=C,B=jn(l[S]),Z=h[p[I++]],ne=p[I++];s==B&&y.push({element:s,name:N,callback:Z,useCapture:"boolean"==typeof ne&&ne,type:"boolean"==typeof ne||ne>=0?"dom":"output"})}}return y.sort(qb),y}function qb(s,o){return s.name==o.name?0:s.name<o.name?-1:1}function mI(s){return void 0!==s.type&&void 0!==s.declaredInputs&&void 0!==s.findHostDirectiveDefs}function xh(s,o,l,c){return O(()=>{const h=s;null!==o&&(h.hasOwnProperty("decorators")&&void 0!==h.decorators?h.decorators.push(...o):h.decorators=o),null!==l&&(h.ctorParameters=l),null!==c&&(h.propDecorators=h.hasOwnProperty("propDecorators")&&void 0!==h.propDecorators?{...h.propDecorators,...c}:c)})}function j_(s,o,l){const c=sr()+s,h=Re();return h[c]===Vt?fa(h,c,l?o.call(l):o()):gl(h,c)}function B_(s,o,l,c){return yI(Re(),sr(),s,o,l,c)}function z_(s,o,l,c,h){return vI(Re(),sr(),s,o,l,c,h)}function $p(s,o,l,c,h,p){return Qb(Re(),sr(),s,o,l,c,h,p)}function Nh(s,o,l,c,h,p,y){return kh(Re(),sr(),s,o,l,c,h,p,y)}function _I(s,o,l,c,h,p,y,I){const C=sr()+s,S=Re(),N=io(S,C,l,c,h,p);return Zr(S,C+4,y)||N?fa(S,C+5,I?o.call(I,l,c,h,p,y):o(l,c,h,p,y)):gl(S,C+5)}function Zb(s,o,l,c,h,p,y,I,C){const S=sr()+s,N=Re(),B=io(N,S,l,c,h,p);return ml(N,S+4,y,I)||B?fa(N,S+6,C?o.call(C,l,c,h,p,y,I):o(l,c,h,p,y,I)):gl(N,S+6)}function $_(s,o,l,c,h,p,y,I,C,S){const N=sr()+s,B=Re();let Z=io(B,N,l,c,h,p);return r_(B,N+4,y,I,C)||Z?fa(B,N+7,S?o.call(S,l,c,h,p,y,I,C):o(l,c,h,p,y,I,C)):gl(B,N+7)}function Hp(s,o,l,c,h,p,y,I,C,S,N){const B=sr()+s,Z=Re(),ne=io(Z,B,l,c,h,p);return io(Z,B+4,y,I,C,S)||ne?fa(Z,B+8,N?o.call(N,l,c,h,p,y,I,C,S):o(l,c,h,p,y,I,C,S)):gl(Z,B+8)}function H_(s,o,l,c){return wI(Re(),sr(),s,o,l,c)}function Ph(s,o){const l=s[o];return l===Vt?void 0:l}function yI(s,o,l,c,h,p){const y=o+l;return Zr(s,y,h)?fa(s,y+1,p?c.call(p,h):c(h)):Ph(s,y+1)}function vI(s,o,l,c,h,p,y){const I=o+l;return ml(s,I,h,p)?fa(s,I+2,y?c.call(y,h,p):c(h,p)):Ph(s,I+2)}function Qb(s,o,l,c,h,p,y,I){const C=o+l;return r_(s,C,h,p,y)?fa(s,C+3,I?c.call(I,h,p,y):c(h,p,y)):Ph(s,C+3)}function kh(s,o,l,c,h,p,y,I,C){const S=o+l;return io(s,S,h,p,y,I)?fa(s,S+4,C?c.call(C,h,p,y,I):c(h,p,y,I)):Ph(s,S+4)}function wI(s,o,l,c,h,p){let y=o+l,I=!1;for(let C=0;C<h.length;C++)Zr(s,y++,h[C])&&(I=!0);return I?fa(s,y,c.apply(p,h)):Ph(s,y)}function Wp(s,o){const l=sn();let c;const h=s+jt;l.firstCreatePass?(c=function Gp(s,o){if(o)for(let l=o.length-1;l>=0;l--){const c=o[l];if(s===c.name)return c}}(o,l.pipeRegistry),l.data[h]=c,c.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,c.onDestroy)):c=l.data[h];const p=c.factory||(c.factory=ki(c.type)),y=ir(Oc);try{const I=Es(!1),C=p();return Es(I),BC(l,Re(),h,C),C}finally{ir(y)}}function W_(s,o,l){const c=s+jt,h=Re(),p=Oi(h,c);return qp(h,c)?yI(h,sr(),o,p.transform,l,p):p.transform(l)}function Yb(s,o,l,c){const h=s+jt,p=Re(),y=Oi(p,h);return qp(p,h)?vI(p,sr(),o,y.transform,l,c,y):y.transform(l,c)}function Xb(s,o,l,c,h){const p=s+jt,y=Re(),I=Oi(y,p);return qp(y,p)?Qb(y,sr(),o,I.transform,l,c,h,I):I.transform(l,c,h)}function II(s,o,l,c,h,p){const y=s+jt,I=Re(),C=Oi(I,y);return qp(I,y)?kh(I,sr(),o,C.transform,l,c,h,p,C):C.transform(l,c,h,p)}function EI(s,o,l){const c=s+jt,h=Re(),p=Oi(h,c);return qp(h,c)?wI(h,sr(),o,p.transform,l,p):p.transform.apply(p,l)}function qp(s,o){return s[it].data[o].pure}function jo(s){return o=>{setTimeout(s,void 0,o)}}const Ps=class Yc extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){let h=o,p=l||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),p=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(p=jo(p),h&&(h=jo(h)),y&&(y=jo(y)));const I=super.subscribe({next:h,error:p,complete:y});return o instanceof $.w0&&o.add(I),I}};function G_(){return this._results[Symbol.iterator]()}class Kp{get changes(){return this._changes||(this._changes=new Ps)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Kp.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=G_)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const h=Zi(o);(this._changesDetected=!function _c(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(l&&(h=l(h),p=l(p)),p!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Nn=(()=>{class s{}return s.__NG_ELEMENT_ID__=Qp,s})();const q_=Nn,Zp=class extends q_{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o,l){const c=this._declarationTContainer.tView,h=Bm(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,l||null);h[Gs]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[Vn];return null!==y&&(h[Vn]=y.createEmbeddedView(c)),op(c,h,o),new dh(h)}};function Qp(){return K_(Xn(),Re())}function K_(s,o){return 4&s.type?new Zp(o,s,Xd(s,o)):null}let Yp=(()=>{class s{}return s.__NG_ELEMENT_ID__=gM,s})();function gM(){return vl(Xn(),Re())}const mM=Yp,Jb=class extends mM{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return Xd(this._hostTNode,this._hostLView)}get injector(){return new di(this._hostTNode,this._hostLView)}get parentInjector(){const o=bo(this._hostTNode,this._hostLView);if(Ha(o)){const l=Eo(o,this._hostLView),c=Wl(o);return new di(l[it].data[c+8],l)}return new di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=eD(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-zr}createEmbeddedView(o,l,c){let h,p;"number"==typeof c?h=c:null!=c&&(h=c.index,p=c.injector);const y=o.createEmbeddedView(l||{},p);return this.insert(y,h),y}createComponent(o,l,c,h,p){const y=o&&!Di(o);let I;if(y)I=l;else{const B=l||{};I=B.index,c=B.injector,h=B.projectableNodes,p=B.environmentInjector||B.ngModuleRef}const C=y?o:new Uc(cn(o)),S=c||this.parentInjector;if(!p&&null==C.ngModule){const Z=(y?S:this.parentInjector).get(lu,null);Z&&(p=Z)}const N=C.create(S,h,void 0,p);return this.insert(N.hostView,I),N}insert(o,l){const c=o._lView,h=c[it];if(function Cd(s){return Er(s[Cn])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const B=c[Cn],Z=new Jb(B,B[Ln],B[Cn]);Z.detach(Z.indexOf(o))}}const p=this._adjustIndex(l),y=this._lContainer;!function Sc(s,o,l,c){const h=zr+c,p=l.length;c>0&&(l[h-1][li]=o),c<p-zr?(o[li]=l[h],yc(l,zr+c,o)):(l.push(o),o[li]=null),o[Cn]=l;const y=o[Gs];null!==y&&l!==y&&function iu(s,o){const l=s[qs];o[Br]!==o[Cn][Cn][Br]&&(s[yd]=!0),null===l?s[qs]=[o]:l.push(o)}(y,o);const I=o[Vn];null!==I&&I.insertView(s),o[qt]|=64}(h,c,y,p);const I=Rc(p,y),C=c[Ht],S=qd(C,y[vs]);return null!==S&&function zf(s,o,l,c,h,p){c[ns]=h,c[Ln]=o,Kd(s,c,l,1,h,p)}(h,y[Ln],C,c,S,I),o.attachToViewContainerRef(),yc(Xc(y),p,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=eD(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=rl(this._lContainer,l);c&&(So(Xc(this._lContainer),l),$f(c[it],c))}detach(o){const l=this._adjustIndex(o,-1),c=rl(this._lContainer,l);return c&&null!=So(Xc(this._lContainer),l)?new dh(c):null}_adjustIndex(o,l=0){return o??this.length+l}};function eD(s){return s[$i]}function Xc(s){return s[$i]||(s[$i]=[])}function vl(s,o){let l;const c=o[s.index];if(Er(c))l=c;else{let h;if(8&s.type)h=jn(c);else{const p=o[Ht];h=p.createComment("");const y=Cr(s,o);Mc(p,qd(p,y),h,function rk(s,o){return s.nextSibling(o)}(p,y),!1)}o[s.index]=l=Yv(c,o,h,s),fp(o,l)}return new Jb(l,s,o)}class Z_{constructor(o){this.queryList=o,this.matches=null}clone(){return new Z_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Q_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let p=0;p<c;p++){const y=l.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new Q_(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==Fh(o,l).matches&&this.queries[l].setDirty()}}class CI{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class Eu{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==l?l.push(p):l=[p])}return null!==l?new Eu(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class bI{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new bI(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,l,_M(l,p)),this.matchTNodeWithReadOption(o,l,Ql(l,o,p,!1,!1))}else c===Nn?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Ql(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Pc||h===Yp||h===Nn&&4&l.type)this.addMatch(l.index,-2);else{const p=Ql(l,o,h,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function _M(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function yM(s,o,l,c){return-1===l?function tD(s,o){return 11&s.type?Xd(s,o):4&s.type?K_(s,o):null}(o,s):-2===l?function nD(s,o,l){return l===Pc?Xd(o,s):l===Nn?K_(o,s):l===Yp?vl(o,s):void 0}(s,o,c):bs(s,s[it],l,o)}function DI(s,o,l,c){const h=o[Vn].queries[c];if(null===h.matches){const p=s.data,y=l.matches,I=[];for(let C=0;C<y.length;C+=2){const S=y[C];I.push(S<0?null:yM(o,p[S],y[C+1],l.metadata.read))}h.matches=I}return h.matches}function Xp(s,o,l,c){const h=s.queries.getByIndex(l),p=h.matches;if(null!==p){const y=DI(s,o,h,l);for(let I=0;I<p.length;I+=2){const C=p[I];if(C>0)c.push(y[I/2]);else{const S=p[I+1],N=o[-C];for(let B=zr;B<N.length;B++){const Z=N[B];Z[Gs]===Z[Cn]&&Xp(Z[it],Z,S,c)}if(null!==N[qs]){const B=N[qs];for(let Z=0;Z<B.length;Z++){const ne=B[Z];Xp(ne[it],ne,S,c)}}}}}return c}function Y_(s){const o=Re(),l=sn(),c=Sd();$l(c+1);const h=Fh(l,c);if(s.dirty&&function Yu(s){return 4==(4&s[qt])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Xp(l,o,c,[]):DI(l,o,h,c);s.reset(p,tA),s.notifyOnChanges()}return!0}return!1}function TI(s,o,l){const c=sn();c.firstCreatePass&&(iD(c,new CI(s,o,l),-1),2==(2&o)&&(c.staticViewQueries=!0)),rD(c,Re(),o)}function SI(s,o,l,c){const h=sn();if(h.firstCreatePass){const p=Xn();iD(h,new CI(o,l,c),p.index),function J_(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}rD(h,Re(),l)}function X_(){return function vM(s,o){return s[Vn].queries[o].queryList}(Re(),Sd())}function rD(s,o,l){const c=new Kp(4==(4&l));Kv(s,o,c,c.destroy),null===o[Vn]&&(o[Vn]=new Q_),o[Vn].queries.push(new Z_(c))}function iD(s,o,l){null===s.queries&&(s.queries=new Eu),s.queries.track(new bI(o,l))}function Fh(s,o){return s.queries.getByIndex(o)}function Jp(s,o){return K_(s,o)}const Mi=(()=>({\u0275\u0275attribute:_p,\u0275\u0275attributeInterpolate1:Ep,\u0275\u0275attributeInterpolate2:us,\u0275\u0275attributeInterpolate3:i_,\u0275\u0275attributeInterpolate4:Bc,\u0275\u0275attributeInterpolate5:aw,\u0275\u0275attributeInterpolate6:lw,\u0275\u0275attributeInterpolate7:s_,\u0275\u0275attributeInterpolate8:_h,\u0275\u0275attributeInterpolateV:uw,\u0275\u0275defineComponent:oi,\u0275\u0275defineDirective:zu,\u0275\u0275defineInjectable:et,\u0275\u0275defineInjector:Fn,\u0275\u0275defineNgModule:xl,\u0275\u0275definePipe:$u,\u0275\u0275directiveInject:Oc,\u0275\u0275getInheritedFactory:Ka,\u0275\u0275inject:Be,\u0275\u0275injectAttribute:ia,\u0275\u0275invalidFactory:Gv,\u0275\u0275invalidFactoryDep:Ee,\u0275\u0275templateRefExtractor:Jp,\u0275\u0275resetView:Cf,\u0275\u0275HostDirectivesFeature:sw,\u0275\u0275NgOnChangesFeature:yo,\u0275\u0275ProvidersFeature:O_,\u0275\u0275CopyDefinitionFeature:Xm,\u0275\u0275InheritDefinitionFeature:Qm,\u0275\u0275StandaloneFeature:Qc,\u0275\u0275nextContext:qC,\u0275\u0275namespaceHTML:Sf,\u0275\u0275namespaceMathML:cr,\u0275\u0275namespaceSVG:La,\u0275\u0275enableBindings:Ul,\u0275\u0275disableBindings:On,\u0275\u0275elementStart:o_,\u0275\u0275elementEnd:a_,\u0275\u0275element:cw,\u0275\u0275elementContainerStart:l_,\u0275\u0275elementContainerEnd:dw,\u0275\u0275elementContainer:hw,\u0275\u0275pureFunction0:j_,\u0275\u0275pureFunction1:B_,\u0275\u0275pureFunction2:z_,\u0275\u0275pureFunction3:$p,\u0275\u0275pureFunction4:Nh,\u0275\u0275pureFunction5:_I,\u0275\u0275pureFunction6:Zb,\u0275\u0275pureFunction7:$_,\u0275\u0275pureFunction8:Hp,\u0275\u0275pureFunctionV:H_,\u0275\u0275getCurrentView:u_,\u0275\u0275restoreView:Dd,\u0275\u0275listener:fw,\u0275\u0275projection:KC,\u0275\u0275syntheticHostProperty:zw,\u0275\u0275syntheticHostListener:pw,\u0275\u0275pipeBind1:W_,\u0275\u0275pipeBind2:Yb,\u0275\u0275pipeBind3:Xb,\u0275\u0275pipeBind4:II,\u0275\u0275pipeBindV:EI,\u0275\u0275projectionDef:gw,\u0275\u0275hostProperty:Bw,\u0275\u0275property:zc,\u0275\u0275propertyInterpolate:Cp,\u0275\u0275propertyInterpolate1:bp,\u0275\u0275propertyInterpolate2:Dp,\u0275\u0275propertyInterpolate3:Ih,\u0275\u0275propertyInterpolate4:mw,\u0275\u0275propertyInterpolate5:_w,\u0275\u0275propertyInterpolate6:yw,\u0275\u0275propertyInterpolate7:vw,\u0275\u0275propertyInterpolate8:Eh,\u0275\u0275propertyInterpolateV:c_,\u0275\u0275pipe:Wp,\u0275\u0275queryRefresh:Y_,\u0275\u0275viewQuery:TI,\u0275\u0275loadQuery:X_,\u0275\u0275contentQuery:SI,\u0275\u0275reference:zC,\u0275\u0275classMap:rb,\u0275\u0275classMapInterpolate1:fb,\u0275\u0275classMapInterpolate2:__,\u0275\u0275classMapInterpolate3:Ow,\u0275\u0275classMapInterpolate4:cs,\u0275\u0275classMapInterpolate5:pb,\u0275\u0275classMapInterpolate6:Gc,\u0275\u0275classMapInterpolate7:QA,\u0275\u0275classMapInterpolate8:Fw,\u0275\u0275classMapInterpolateV:_l,\u0275\u0275styleMap:so,\u0275\u0275styleMapInterpolate1:y_,\u0275\u0275styleMapInterpolate2:gb,\u0275\u0275styleMapInterpolate3:YA,\u0275\u0275styleMapInterpolate4:XA,\u0275\u0275styleMapInterpolate5:Lw,\u0275\u0275styleMapInterpolate6:Uw,\u0275\u0275styleMapInterpolate7:v_,\u0275\u0275styleMapInterpolate8:mb,\u0275\u0275styleMapInterpolateV:_b,\u0275\u0275styleProp:Dw,\u0275\u0275stylePropInterpolate1:Vw,\u0275\u0275stylePropInterpolate2:w_,\u0275\u0275stylePropInterpolate3:jw,\u0275\u0275stylePropInterpolate4:yb,\u0275\u0275stylePropInterpolate5:vb,\u0275\u0275stylePropInterpolate6:wb,\u0275\u0275stylePropInterpolate7:qc,\u0275\u0275stylePropInterpolate8:Ib,\u0275\u0275stylePropInterpolateV:I_,\u0275\u0275classProp:Tw,\u0275\u0275advance:lC,\u0275\u0275template:vh,\u0275\u0275text:cb,\u0275\u0275textInterpolate:xw,\u0275\u0275textInterpolate1:g_,\u0275\u0275textInterpolate2:Fr,\u0275\u0275textInterpolate3:Nw,\u0275\u0275textInterpolate4:yu,\u0275\u0275textInterpolate5:Pw,\u0275\u0275textInterpolate6:kw,\u0275\u0275textInterpolate7:m_,\u0275\u0275textInterpolate8:db,\u0275\u0275textInterpolateV:hb,\u0275\u0275i18n:P_,\u0275\u0275i18nAttributes:Ub,\u0275\u0275i18nExp:cI,\u0275\u0275i18nStart:Xr,\u0275\u0275i18nEnd:Sh,\u0275\u0275i18nApply:dI,\u0275\u0275i18nPostprocess:Vb,\u0275\u0275resolveWindow:jv,\u0275\u0275resolveDocument:Bv,\u0275\u0275resolveBody:sC,\u0275\u0275setComponentScope:Ml,\u0275\u0275setNgModuleScope:Ir,\u0275\u0275registerNgModuleType:jd,\u0275\u0275sanitizeHtml:KS,\u0275\u0275sanitizeStyle:ZS,\u0275\u0275sanitizeResourceUrl:Mm,\u0275\u0275sanitizeScript:K0,\u0275\u0275sanitizeUrl:q0,\u0275\u0275sanitizeUrlOrResourceUrl:XS,\u0275\u0275trustConstantHtml:QS,\u0275\u0275trustConstantResourceUrl:YS,\u0275\u0275validateIframeAttribute:Em,forwardRef:q,resolveForwardRef:Q}))();let Jc=null;function wM(){Jc=null}function MI(s){return!!ai(s)}const ng=[];let ey=!1;function RI(){if(!ey){ey=!0;try{for(let s=ng.length-1;s>=0;s--){const{moduleType:o,ngModule:l}=ng[s];l.declarations&&l.declarations.every(xI)&&(ng.splice(s,1),sD(o,l))}}finally{ey=!1}}}function xI(s){return Array.isArray(s)?s.every(xI):!!Q(s)}function rg(s,o={}){NI(s,o),void 0!==o.id&&jd(s,o.id),function IM(s,o){ng.push({moduleType:s,ngModule:o})}(s,o)}function NI(s,o,l=!1){const c=Zi(o.declarations||fe);let h=null;Object.defineProperty(s,Jt,{configurable:!0,get:()=>(null===h&&(h=zn().compileNgModule(Mi,`ng:///${s.name}/\u0275mod.js`,{type:s,bootstrap:Zi(o.bootstrap||fe).map(Q),declarations:c.map(Q),imports:Zi(o.imports||fe).map(Q).map(Uh),exports:Zi(o.exports||fe).map(Q).map(Uh),schemas:o.schemas?Zi(o.schemas):null,id:o.id||null}),h.schemas||(h.schemas=[])),h)});let p=null;Object.defineProperty(s,At,{get:()=>{if(null===p){const I=zn();p=I.compileFactory(Mi,`ng:///${s.name}/\u0275fac.js`,{name:s.name,type:s,deps:z(s),target:I.FactoryTarget.NgModule,typeArgumentCount:0})}return p},configurable:!1});let y=null;Object.defineProperty(s,Ei,{get:()=>{if(null===y){const I={name:s.name,type:s,providers:o.providers||fe,imports:[(o.imports||fe).map(Q),(o.exports||fe).map(Q)]};y=zn().compileInjector(Mi,`ng:///${s.name}/\u0275inj.js`,I)}return y},configurable:!1})}let Cu=new WeakMap,ry=new WeakMap;function kI(){Cu=new WeakMap,ry=new WeakMap,ng.length=0}function sD(s,o){const l=Zi(o.declarations||fe),c=ed(s);l.forEach(h=>{(h=Q(h)).hasOwnProperty(st)?Lh(cn(h),c):!h.hasOwnProperty(St)&&!h.hasOwnProperty(xt)&&(h.ngSelectorScope=s)})}function Lh(s,o){s.directiveDefs=()=>Array.from(o.compilation.directives).map(l=>l.hasOwnProperty(st)?cn(l):Yn(l)).filter(l=>!!l),s.pipeDefs=()=>Array.from(o.compilation.pipes).map(l=>Nr(l)),s.schemas=o.schemas,s.tView=null}function ed(s){if(MI(s))return function oD(s){const o=ai(s,!0);if(null!==o.transitiveCompileScopes)return o.transitiveCompileScopes;const l={schemas:o.schemas||null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return cu(o.imports).forEach(c=>{const h=ed(c);h.exported.directives.forEach(p=>l.compilation.directives.add(p)),h.exported.pipes.forEach(p=>l.compilation.pipes.add(p))}),cu(o.declarations).forEach(c=>{Nr(c)?l.compilation.pipes.add(c):l.compilation.directives.add(c)}),cu(o.exports).forEach(c=>{const h=c;if(MI(h)){const p=ed(h);p.exported.directives.forEach(y=>{l.compilation.directives.add(y),l.exported.directives.add(y)}),p.exported.pipes.forEach(y=>{l.compilation.pipes.add(y),l.exported.pipes.add(y)})}else Nr(h)?l.exported.pipes.add(h):l.exported.directives.add(h)}),o.transitiveCompileScopes=l,l}(s);if(Ci(s)){if(null!==(cn(s)||Yn(s)))return{schemas:null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set([s]),pipes:new Set}};if(null!==Nr(s))return{schemas:null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set([s])}}}throw new Error(`${s.name} does not have a module def (\u0275mod property)`)}function Uh(s){return function AI(s){return void 0!==s.ngModule}(s)?s.ngModule:s}let iy=0;function OI(s,o){let l=null;(function Dt(s,o){Pt(o)&&(ot.set(s,o),ct.add(s))})(s,o),bu(s,o),Object.defineProperty(s,st,{get:()=>{if(null===l){const c=zn();if(Pt(o)){const S=[`Component '${s.name}' is not resolved:`];throw o.templateUrl&&S.push(` - templateUrl: ${o.templateUrl}`),o.styleUrls&&o.styleUrls.length&&S.push(` - styleUrls: ${JSON.stringify(o.styleUrls)}`),S.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(S.join("\n"))}const h=function tg(){return Jc}();let p=o.preserveWhitespaces;void 0===p&&(p=null!==h&&void 0!==h.preserveWhitespaces&&h.preserveWhitespaces);let y=o.encapsulation;void 0===y&&(y=null!==h&&void 0!==h.defaultEncapsulation?h.defaultEncapsulation:P.Emulated);const I=o.templateUrl||`ng:///${s.name}/template.html`,C={...UI(s,o),typeSourceSpan:c.createParseSourceSpan("Component",s.name,I),template:o.template||"",preserveWhitespaces:p,styles:o.styles||fe,animations:o.animations,declarations:[],changeDetection:o.changeDetection,encapsulation:y,interpolation:o.interpolation,viewProviders:o.viewProviders||null};iy++;try{if(C.usesInheritance&&VI(s),l=c.compileComponent(Mi,I,C),o.standalone){const S=Zi(o.imports||fe),{directiveDefs:N,pipeDefs:B}=function lD(s,o){let l=null,c=null;return{directiveDefs:()=>{if(null===l){l=[cn(s)];const y=new Set;for(const I of o){const C=Q(I);if(!y.has(C))if(y.add(C),ai(C)){const S=ed(C);for(const N of S.exported.directives){const B=cn(N)||Yn(N);B&&!y.has(N)&&(y.add(N),l.push(B))}}else{const S=cn(C)||Yn(C);S&&l.push(S)}}}return l},pipeDefs:()=>{if(null===c){c=[];const y=new Set;for(const I of o){const C=Q(I);if(!y.has(C))if(y.add(C),ai(C)){const S=ed(C);for(const N of S.exported.pipes){const B=Nr(N);B&&!y.has(N)&&(y.add(N),c.push(B))}}else{const S=Nr(C);S&&c.push(S)}}}return c}}}(s,S);l.directiveDefs=N,l.pipeDefs=B,l.dependencies=()=>S.map(Q)}}finally{iy--}if(0===iy&&RI(),function sy(s){return void 0!==s.ngSelectorScope}(s)){const S=ed(s.ngSelectorScope);Lh(l,S)}if(o.schemas){if(!o.standalone)throw new Error(`The 'schemas' was specified for the ${Oe(s)} but is only valid on a component that is standalone.`);l.schemas=o.schemas}else o.standalone&&(l.schemas=[])}return l},configurable:!1})}function oy(s,o){let l=null;bu(s,o||{}),Object.defineProperty(s,St,{get:()=>{if(null===l){const c=LI(s,o||{});l=zn().compileDirective(Mi,c.sourceMapUrl,c.metadata)}return l},configurable:!1})}function LI(s,o){const l=s&&s.name,c=`ng:///${l}/\u0275dir.js`,h=zn(),p=UI(s,o);return p.typeSourceSpan=h.createParseSourceSpan("Directive",l,c),p.usesInheritance&&VI(s),{metadata:p,sourceMapUrl:c}}function bu(s,o){let l=null;Object.defineProperty(s,At,{get:()=>{if(null===l){const c=LI(s,o),h=zn();l=h.compileFactory(Mi,`ng:///${s.name}/\u0275fac.js`,{name:c.metadata.name,type:c.metadata.type,typeArgumentCount:0,deps:z(s),target:h.FactoryTarget.Directive})}return l},configurable:!1})}function uD(s){return Object.getPrototypeOf(s.prototype)===Object.prototype}function UI(s,o){const l=R(),c=l.ownPropMetadata(s);return{name:s.name,type:s,selector:void 0!==o.selector?o.selector:null,host:o.host||J,propMetadata:c,inputs:o.inputs||fe,outputs:o.outputs||fe,queries:ds(s,c,jI),lifecycle:{usesOnChanges:l.hasLifecycleHook(s,"ngOnChanges")},typeSourceSpan:null,usesInheritance:!uD(s),exportAs:dD(o.exportAs),providers:o.providers||null,viewQueries:ds(s,c,td),isStandalone:!!o.standalone,hostDirectives:o.hostDirectives?.map(h=>"function"==typeof h?{directive:h}:h)||null}}function VI(s){const o=Object.prototype;let l=Object.getPrototypeOf(s.prototype).constructor;for(;l&&l!==o;)!Yn(l)&&!cn(l)&&EM(l)&&oy(l,null),l=Object.getPrototypeOf(l)}function cD(s){return"string"==typeof s?fD(s):Q(s)}function ay(s,o){return{propertyName:s,predicate:cD(o.selector),descendants:o.descendants,first:o.first,read:o.read?o.read:null,static:!!o.static,emitDistinctChangesOnly:!!o.emitDistinctChangesOnly}}function ds(s,o,l){const c=[];for(const h in o)if(o.hasOwnProperty(h)){const p=o[h];p.forEach(y=>{if(l(y)){if(!y.selector)throw new Error(`Can't construct a query for the property "${h}" of "${Oe(s)}" since the query selector wasn't defined.`);if(p.some(hD))throw new Error("Cannot combine @Input decorators with query decorators");c.push(ay(h,y))}})}return c}function dD(s){return void 0===s?null:fD(s)}function jI(s){const o=s.ngMetadataName;return"ContentChild"===o||"ContentChildren"===o}function td(s){const o=s.ngMetadataName;return"ViewChild"===o||"ViewChildren"===o}function hD(s){return"Input"===s.ngMetadataName}function fD(s){return s.split(",").map(o=>o.trim())}const BI=["ngOnChanges","ngOnInit","ngOnDestroy","ngDoCheck","ngAfterViewInit","ngAfterViewChecked","ngAfterContentInit","ngAfterContentChecked"];function EM(s){const o=R();if(BI.some(c=>o.hasLifecycleHook(s,c)))return!0;const l=o.propMetadata(s);for(const c in l){const h=l[c];for(let p=0;p<h.length;p++){const y=h[p],I=y.ngMetadataName;if(hD(y)||jI(y)||td(y)||"Output"===I||"HostBinding"===I||"HostListener"===I)return!0}}return!1}function pD(s,o){let l=null,c=null;Object.defineProperty(s,At,{get:()=>{if(null===c){const h=zI(s,o),p=zn();c=p.compileFactory(Mi,`ng:///${h.name}/\u0275fac.js`,{name:h.name,type:h.type,typeArgumentCount:0,deps:z(s),target:p.FactoryTarget.Pipe})}return c},configurable:!1}),Object.defineProperty(s,xt,{get:()=>{if(null===l){const h=zI(s,o);l=zn().compilePipe(Mi,`ng:///${h.name}/\u0275pipe.js`,h)}return l},configurable:!1})}function zI(s,o){return{type:s,name:s.name,pipeName:o.name,pure:void 0===o.pure||o.pure,isStandalone:!!o.standalone}}const gD=Xl("Directive",(s={})=>s,void 0,void 0,(s,o)=>oy(s,o)),ly=Xl("Component",(s={})=>({changeDetection:F.Default,...s}),gD,void 0,(s,o)=>OI(s,o)),CM=Xl("Pipe",s=>({pure:!0,...s}),void 0,void 0,(s,o)=>pD(s,o)),mD=Xs("Input",s=>({bindingPropertyName:s})),yi=Xs("Output",s=>({bindingPropertyName:s})),Vh=Xs("HostBinding",s=>({hostPropertyName:s})),Du=Xs("HostListener",(s,o)=>({eventName:s,args:o})),$I=Xl("NgModule",s=>s,void 0,void 0,(s,o)=>rg(s,o));function uy(...s){}const pr=new Sn("Application Initializer");let ks=(()=>{class s{constructor(l){this.appInits=l,this.resolve=uy,this.reject=uy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(wh(p))l.push(p);else if($C(p)){const y=new Promise((I,C)=>{p.subscribe({complete:I,error:C})});l.push(y)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Be(pr,8))},s.\u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const cy=new Sn("AppId",{providedIn:"root",factory:dt});function dt(){return`${HI()}${HI()}${HI()}`}const Ct={provide:cy,useFactory:dt,deps:[]};function HI(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Qe=new Sn("Platform Initializer"),ge=new Sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),xe=new Sn("Application Packages Root URL"),Jr=new Sn("AnimationModuleType");let _D=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const dy=new Sn("LocaleId",{providedIn:"root",factory:()=>rt(dy,at.Optional|at.SkipSelf)||function bM(){return typeof $localize<"u"&&$localize.locale||Kc}()}),DM=new Sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),TM=new Sn("Translations"),SM=new Sn("TranslationsFormat");var Bo=(()=>((Bo=Bo||{})[Bo.Error=0]="Error",Bo[Bo.Warning=1]="Warning",Bo[Bo.Ignore=2]="Ignore",Bo))();class yD{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let Dk=(()=>{class s{compileModuleSync(l){return new jp(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),p=cu(ai(l).declarations).reduce((y,I)=>{const C=cn(I);return C&&y.push(new Uc(C)),y},[]);return new yD(c,p)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const vD=new Sn("compilerOptions");class wD{}function Zt(s){Gm(dv(s)),gI(s).forEach(o=>jC(o))}const nd="ng";let WI=!1;function Jn(){WI||(WI=!0,ht("\u0275setProfiler",Ku),ht("getDirectiveMetadata",Gb),ht("getComponent",pI),ht("getContext",Hb),ht("getListeners",zp),ht("getOwningComponent",Iu),ht("getHostElement",U_),ht("getInjector",Bp),ht("getRootComponents",gI),ht("getDirectives",Rh),ht("applyChanges",Zt))}function ht(s,o){if((typeof COMPILED>"u"||!COMPILED)&&Lt){let c=Lt[nd];c||(c=Lt[nd]={}),c[s]=o}}const sg=(()=>Promise.resolve(0))();function dn(s){typeof Zone>"u"?sg.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class We{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ps(!1),this.onMicrotaskEmpty=new Ps(!1),this.onStable=new Ps(!1),this.onError=new Ps(!1),typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function AM(){let s=Lt.requestAnimationFrame,o=Lt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function MM(s){const o=()=>{!function rd(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Lt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,jh(s),s.isCheckStableRunning=!0,og(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),jh(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,p,y,I)=>{try{return ID(s),l.invokeTask(h,p,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Bh(s)}},onInvoke:(l,c,h,p,y,I,C)=>{try{return ID(s),l.invoke(h,p,y,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Bh(s)}},onHasTask:(l,c,h,p)=>{l.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,jh(s),og(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,c,h,p)=>(l.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!We.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(We.isInAngularZone())throw new ye(909,!1)}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,hy,uy,uy);try{return p.runTask(y,l,c)}finally{p.cancelTask(y)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const hy={};function og(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function jh(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function ID(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Bh(s){s._nesting--,og(s)}class GI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ps,this.onMicrotaskEmpty=new Ps,this.onStable=new Ps,this.onError=new Ps}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,h){return o.apply(l,c)}}const qI=new Sn(""),hs=new Sn("");let ma,KI=(()=>{class s{constructor(l,c,h){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ma||(QI(h),h.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{We.assertNotInAngularZone(),dn(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dn(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(Be(We),Be(ZI),Be(hs))},s.\u0275prov=et({token:s,factory:s.\u0275fac}),s})(),ZI=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return ma?.findTestabilityInTree(this,l,c)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function QI(s){ma=s}const zo=!1;let se=null;const zh=new Sn("AllowMultipleToken"),Os=new Sn("PlatformDestroyListeners"),ED=new Sn("appBootstrapListener");function $h(s,o,l){const c=new jp(l);return Promise.resolve(c)}function CD(s){return s.isBoundToModule}class sd{constructor(o,l){this.name=o,this.token=l}}function YI(s){if(se&&!se.get(zh,!1))throw new ye(400,!1);se=s;const o=s.get(JI);return bD(s),o}function bD(s){const o=s.get(Qe,null);o&&o.forEach(l=>l())}function RM(s){const{rootComponent:o,appProviders:l,platformProviders:c}=s;zo&&void 0!==o&&function br(s){if(function th(s){if(!cn(s))throw new ye(906,`The ${Oe(s)} is not an Angular component, make sure it has the \`@Component\` decorator.`)}(s),!cn(s).standalone)throw new ye(907,`The ${Oe(s)} component is not marked as standalone, but Angular expects to have a standalone component here. Please make sure the ${Oe(s)} component has the \`standalone: true\` flag in the decorator.`)}(o);const h=function XI(s=[]){if(se)return se;const o=Wh(s);return se=o,bD(o),o}(c),p=$o("zone.js",eE());return p.run(()=>{const I=fI([{provide:We,useValue:p},...l||[]],h,"Environment Injector"),C=I.get(Jd,null);if(zo&&!C)throw new ye(402,"No `ErrorHandler` found in the Dependency Injection tree.");let S;p.runOutsideAngular(()=>{S=p.onError.subscribe({next:Z=>{C.handleError(Z)}})});const N=()=>I.destroy(),B=h.get(Os);return B.add(N),I.onDestroy(()=>{S.unsubscribe(),B.delete(N)}),tE(C,p,()=>{const Z=I.get(ks);return Z.runInitializers(),Z.donePromise.then(()=>{Ns(I.get(dy,Kc)||Kc);const we=I.get(lg);return void 0!==o&&we.bootstrap(o),we})})})}function fs(s,o,l=[]){const c=`Platform: ${o}`,h=new Sn(c);return(p=[])=>{let y=vi();if(!y||y.injector.get(zh,!1)){const I=[...l,...p,{provide:h,useValue:!0}];s?s(I):YI(Wh(I,c))}return Hh()}}function Hh(s){const o=vi();if(!o)throw new ye(401,!1);return o}function Wh(s=[],o){return ul.create({name:o,providers:[{provide:Yd,useValue:"platform"},{provide:Os,useValue:new Set([()=>se=null])},...s]})}function DD(){vi()?.destroy()}function vi(){return se?.get(JI)??null}let JI=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const h=$o(c?.ngZone,eE(c)),p=[{provide:We,useValue:h}];return h.run(()=>{const y=ul.create({providers:p,parent:this.injector,name:l.moduleType.name}),I=l.create(y),C=I.injector.get(Jd,null);if(!C)throw new ye(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:N=>{C.handleError(N)}});I.onDestroy(()=>{fy(this._modules,I),S.unsubscribe()})}),tE(C,h,()=>{const S=I.injector.get(ks);return S.runInitializers(),S.donePromise.then(()=>(Ns(I.injector.get(dy,Kc)||Kc),this._moduleDoBootstrap(I),I))})})}bootstrapModule(l,c=[]){const h=ag({},c);return $h(0,0,l).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(l){const c=l.injector.get(lg);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new ye(-403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ye(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(Os,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Be(ul))},s.\u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function eE(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}function $o(s,o){let l;return l="noop"===s?new GI:("zone.js"===s?void 0:s)||new We(o),l}function tE(s,o,l){try{const c=l();return wh(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}function ag(s,o){return Array.isArray(o)?o.reduce(ag,s):{...s,...o}}let lg=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(l,c,h){this._zone=l,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new k.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{We.assertNotInAngularZone(),dn(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{We.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=(0,te.T)(p,y.pipe((0,ie.B)()))}bootstrap(l,c){zo&&this.warnIfDestroyed();const h=l instanceof Jf;if(!this._injector.get(ks).done){const ne="Cannot bootstrap as there are still asynchronous initializers running."+(!h&&Ci(l)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new ye(405,zo&&ne)}let y;y=h?l:this._injector.get(tp).resolveComponentFactory(l),this.componentTypes.push(y.componentType);const I=CD(y)?void 0:this._injector.get(Zc),S=y.create(ul.NULL,[],c||y.selector,I),N=S.location.nativeElement,B=S.injector.get(qI,null);return B?.registerApplication(N),S.onDestroy(()=>{this.detachView(S.hostView),fy(this.components,S),B?.unregisterApplication(N)}),this._loadComponent(S),S}tick(){if(zo&&this.warnIfDestroyed(),this._runningTick)throw new ye(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){zo&&this.warnIfDestroyed();const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){zo&&this.warnIfDestroyed();const c=l;fy(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const c=this._injector.get(ED,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return zo&&this.warnIfDestroyed(),this._destroyListeners.push(l),()=>fy(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new ye(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){zo&&this._destroyed&&console.warn(De(406,"This instance of the `ApplicationRef` has already been destroyed."))}}return s.\u0275fac=function(l){return new(l||s)(Be(We),Be(lu),Be(Jd))},s.\u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function fy(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}function NM(){return!1}function PM(){}function kM(s){const o=kf(s);if(!o)throw SD(s);return new jp(o)}function OM(s){const o=kf(s);if(!o)throw SD(s);return o}function SD(s){return new Error(`No module with ID ${s} loaded`)}let AD=(()=>{class s{}return s.__NG_ELEMENT_ID__=MD,s})();function MD(s){return function FM(s,o,l){if(kl(s)&&!l){const c=kr(s.index,o);return new dh(c,c)}return 47&s.type?new dh(o[Br],o):null}(Xn(),Re(),16==(16&s))}class RD extends AD{}class LM extends RD{}class UM{constructor(o,l){this.name=o,this.callback=l}}function xD(s){return s.map(o=>o.nativeElement)}class nE{constructor(o){this.nativeNode=o}get parent(){const o=this.nativeNode.parentNode;return o?new Gh(o):null}get injector(){return Bp(this.nativeNode)}get componentInstance(){const o=this.nativeNode;return o&&(pI(o)||Iu(o))}get context(){return pI(this.nativeNode)||Hb(this.nativeNode)}get listeners(){return zp(this.nativeNode).filter(o=>"dom"===o.type)}get references(){return function Xi(s){const o=qr(s);if(null===o)return{};if(void 0===o.localRefs){const l=o.lView;if(null===l)return{};o.localRefs=function Tc(s,o){const l=s[it].data[o];if(l&&l.localNames){const c={};let h=l.index+1;for(let p=0;p<l.localNames.length;p+=2)c[l.localNames[p]]=s[h],h++;return c}return null}(l,o.nodeIndex)}return o.localRefs||{}}(this.nativeNode)}get providerTokens(){return function Wb(s){const o=qr(s),l=o?o.lView:null;if(null===l)return[];const c=l[it],h=c.data[o.nodeIndex],p=[],I=h.directiveEnd;for(let C=1048575&h.providerIndexes;C<I;C++){let S=c.data[C];mI(S)&&(S=S.type),p.push(S)}return p}(this.nativeNode)}}class Gh extends nE{constructor(o){super(o)}get nativeElement(){return this.nativeNode.nodeType==Node.ELEMENT_NODE?this.nativeNode:null}get name(){const o=qr(this.nativeNode),l=o?o.lView:null;return null!==l?l[it].data[o.nodeIndex].value:this.nativeNode.nodeName}get properties(){const o=qr(this.nativeNode),l=o?o.lView:null;if(null===l)return{};const c=l[it].data,h=c[o.nodeIndex],p={};return function ND(s,o){if(s){let l=Object.getPrototypeOf(s);const c=Node.prototype;for(;null!==l&&l!==c;){const h=Object.getOwnPropertyDescriptors(l);for(let p in h)if(!p.startsWith("__")&&!p.startsWith("on")){const y=s[p];VM(y)&&(o[p]=y)}l=Object.getPrototypeOf(l)}}}(this.nativeElement,p),function gr(s,o,l,c){let h=o.propertyBindings;if(null!==h)for(let p=0;p<h.length;p++){const y=h[p],C=c[y].split("\ufffd"),S=C[0];if(C.length>1){let N=C[1];for(let B=1;B<C.length-1;B++)N+=Ce(l[y+B-1])+C[B+1];s[S]=N}else s[S]=l[y]}}(p,h,l,c),p}get attributes(){const o={},l=this.nativeElement;if(!l)return o;const c=qr(l),h=c?c.lView:null;if(null===h)return{};const p=h[it].data[c.nodeIndex].attrs,y=[];if(p){let C=0;for(;C<p.length;){const S=p[C];if("string"!=typeof S)break;o[S]=p[C+1],y.push(S.toLowerCase()),C+=2}}const I=l.attributes;for(let C=0;C<I.length;C++){const S=I[C],N=S.name.toLowerCase();-1===y.indexOf(N)&&(o[N]=S.value)}return o}get styles(){return this.nativeElement&&this.nativeElement.style?this.nativeElement.style:{}}get classes(){const o={},c=this.nativeElement.className;return("string"!=typeof c?c.baseVal.split(" "):c.split(" ")).forEach(p=>o[p]=!0),o}get childNodes(){const o=this.nativeNode.childNodes,l=[];for(let c=0;c<o.length;c++)l.push(wn(o[c]));return l}get children(){const o=this.nativeElement;if(!o)return[];const l=o.children,c=[];for(let h=0;h<l.length;h++)c.push(wn(l[h]));return c}query(o){return this.queryAll(o)[0]||null}queryAll(o){const l=[];return py(this,o,l,!0),l}queryAllNodes(o){const l=[];return py(this,o,l,!1),l}triggerEventHandler(o,l){const c=this.nativeNode,h=[];this.listeners.forEach(p=>{if(p.name===o){const y=p.callback;y.call(c,l),h.push(y)}}),"function"==typeof c.eventListeners&&c.eventListeners(o).forEach(p=>{if(-1!==p.toString().indexOf("__ngUnwrap__")){const y=p("__ngUnwrap__");return-1===h.indexOf(y)&&y.call(c,l)}})}}function VM(s){return"string"==typeof s||"boolean"==typeof s||"number"==typeof s||null===s}function py(s,o,l,c){const h=qr(s.nativeNode),p=h?h.lView:null;null!==p?er(p[it].data[h.nodeIndex],p,o,l,c,s.nativeNode):gy(s.nativeNode,o,l,c)}function er(s,o,l,c,h,p){const y=function Qu(s,o){const l=null===s?-1:s.index;return-1!==l?jn(o[l]):null}(s,o);if(11&s.type){if(Il(y,l,c,h,p),kl(s)){const C=kr(s.index,o);C&&C[it].firstChild&&er(C[it].firstChild,C,l,c,h,p)}else s.child&&er(s.child,o,l,c,h,p),y&&gy(y,l,c,h);const I=o[s.index];Er(I)&&rE(I,l,c,h,p)}else if(4&s.type){const I=o[s.index];Il(I[vs],l,c,h,p),rE(I,l,c,h,p)}else if(16&s.type){const I=o[Br],S=I[Ln].projection[s.projection];if(Array.isArray(S))for(let N of S)Il(N,l,c,h,p);else if(S){const N=I[Cn];er(N[it].data[S.index],N,l,c,h,p)}}else s.child&&er(s.child,o,l,c,h,p);if(p!==y){const I=2&s.flags?s.projectionNext:s.next;I&&er(I,o,l,c,h,p)}}function rE(s,o,l,c,h){for(let p=zr;p<s.length;p++){const y=s[p],I=y[it].firstChild;I&&er(I,y,o,l,c,h)}}function Il(s,o,l,c,h){if(h!==s){const p=wn(s);if(!p)return;(c&&p instanceof Gh&&o(p)&&-1===l.indexOf(p)||!c&&o(p)&&-1===l.indexOf(p))&&l.push(p)}}function gy(s,o,l,c){const h=s.childNodes,p=h.length;for(let y=0;y<p;y++){const I=h[y],C=wn(I);C&&((c&&C instanceof Gh&&o(C)&&-1===l.indexOf(C)||!c&&o(C)&&-1===l.indexOf(C))&&l.push(C),gy(I,o,l,c))}}const ei="__ng_debug__";function wn(s){return s instanceof Node?(s.hasOwnProperty(ei)||(s[ei]=s.nodeType==Node.ELEMENT_NODE?new Gh(s):new nE(s)),s[ei]):null}function PD(s){return null}class kD{constructor(){}supports(o){return fh(o)}create(o){return new OD(o)}}const ti=(s,o)=>o;class OD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ti}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,h=0,p=null;for(;l||c;){const y=!c||l&&l.currentIndex<my(c,h,p)?l:c,I=my(y,h,p),C=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(l=l._next,null==y.previousIndex)h++;else{p||(p=[]);const S=I-h,N=C-h;if(S!=N){for(let Z=0;Z<S;Z++){const ne=Z<p.length?p[Z]:p[Z]=0,we=ne+Z;N<=we&&we<S&&(p[Z]=ne+1)}p[y.previousIndex]=N-S}}I!==C&&o(y,I,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!fh(o))throw new ye(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],y=this._trackByFn(I,p),null!==l&&Object.is(l.trackById,y)?(c&&(l=this._verifyReinsertion(l,p,y,I)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,y,I),c=!0),l=l._next}else h=0,function VC(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Symbol.iterator]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,I=>{y=this._trackByFn(h,I),null!==l&&Object.is(l.trackById,y)?(c&&(l=this._verifyReinsertion(l,I,y,h)),Object.is(l.item,I)||this._addIdentityChange(l,I)):(l=this._mismatch(l,I,y,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,p,h)):o=this._addAfter(new Tu(l,c),p,h),o}_verifyReinsertion(o,l,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new Su),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Su),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Tu{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mr{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class Su{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new mr,this.map.set(l,c)),c.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function my(s,o,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+o+h}class iE{constructor(){}supports(o){return o instanceof Map||n_(o)}create(){return new cg}}class cg{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||n_(o)))throw new ye(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const c=new jM(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class jM{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function El(){return new _a([new kD])}let _a=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||El()),deps:[[s,new la,new Ro]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new ye(901,!1)}}return s.\u0275prov=et({token:s,providedIn:"root",factory:El}),s})();function Au(){return new lo([new iE])}let lo=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Au()),deps:[[s,new la,new Ro]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(c)return c;throw new ye(901,!1)}}return s.\u0275prov=et({token:s,providedIn:"root",factory:Au}),s})();const dg=[new iE],FD=new _a([new kD]),Kh=new lo(dg),oE=fs(null,"core",[]);let od=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Be(lg))},s.\u0275mod=xl({type:s}),s.\u0275inj=Fn({}),s})();function aE(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function hg(s){return zn().compileDirectiveDeclaration(Mi,`ng:///${s.type.name}/\u0275fac.js`,s)}function LD(s){xh(s.type,s.decorators,s.ctorParameters??null,s.propDecorators??null)}function UD(s){return zn().compileComponentDeclaration(Mi,`ng:///${s.type.name}/\u0275cmp.js`,s)}function _y(s){return zn(function fg(s){switch(s){case Bn.Directive:return"directive";case Bn.Component:return"component";case Bn.Injectable:return"injectable";case Bn.Pipe:return"pipe";case Bn.NgModule:return"NgModule"}}(s.target)).compileFactoryDeclaration(Mi,`ng:///${s.type.name}/\u0275fac.js`,s)}function VD(s){return zn().compileInjectableDeclaration(Mi,`ng:///${s.type.name}/\u0275prov.js`,s)}function BM(s){return zn().compileInjectorDeclaration(Mi,`ng:///${s.type.name}/\u0275inj.js`,s)}function zM(s){return zn().compileNgModuleDeclaration(Mi,`ng:///${s.type.name}/\u0275mod.js`,s)}function jD(s){return zn().compilePipeDeclaration(Mi,`ng:///${s.type.name}/\u0275pipe.js`,s)}function BD(s,o){const l=cn(s),c=o.elementInjector||xm();return new Uc(l).create(c,o.projectableNodes,o.hostElement,o.environmentInjector)}function wi(s){const o=cn(s);if(!o)return null;const l=new Uc(o);return{get selector(){return l.selector},get type(){return l.componentType},get inputs(){return l.inputs},get outputs(){return l.outputs},get ngContentSelectors(){return l.ngContentSelectors},get isStandalone(){return o.standalone}}}},3942:(mt,be,V)=>{"use strict";V.d(be,{Z:()=>qe});var d=V(2090),$=V(4859),k=V(9681),te=V(1877);class ie{constructor(ye,De){this._delegate=ye,this.firebase=De,(0,k._addComponent)(ye,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ye,De=k._DEFAULT_ENTRY_NAME){var Ce;this._delegate.checkDestroyed();const Oe=this._delegate.container.getProvider(ye);return!Oe.isInitialized()&&"EXPLICIT"===(null===(Ce=Oe.getComponent())||void 0===Ce?void 0:Ce.instantiationMode)&&Oe.initialize(),Oe.getImmediate({identifier:De})}_removeServiceInstance(ye,De=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(De)}_addComponent(ye){(0,k._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,k._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function pe(){const ut=function re(ut){const ye={},De={__esModule:!0,initializeApp:function Me(X,de={}){const ve=k.initializeApp(X,de);if((0,d.r3)(ye,ve.name))return ye[ve.name];const Ke=new ut(ve,De);return ye[ve.name]=Ke,Ke},app:Oe,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Se(X){const de=X.name,ve=de.replace("-compat","");if(k._registerComponent(X)&&"PUBLIC"===X.type){const Ke=($e=Oe())=>{if("function"!=typeof $e[ve])throw ue.create("invalid-app-argument",{appName:de});return $e[ve]()};void 0!==X.serviceProps&&(0,d.ZB)(Ke,X.serviceProps),De[ve]=Ke,ut.prototype[ve]=function(...$e){return this._getService.bind(this,de).apply(this,X.multipleInstances?$e:[])}}return"PUBLIC"===X.type?De[ve]:null},removeApp:function Ce(X){delete ye[X]},useAsService:function He(X,de){return"serverAuth"===de?null:de},modularAPIs:k}};function Oe(X){if(!(0,d.r3)(ye,X=X||k._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:X});return ye[X]}return De.default=De,Object.defineProperty(De,"apps",{get:function ke(){return Object.keys(ye).map(X=>ye[X])}}),Oe.App=ut,De}(ie);return ut.INTERNAL=Object.assign(Object.assign({},ut.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ye(De){(0,d.ZB)(ut,De)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ut}(),q=new te.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=G;!function Te(ut){(0,k.registerVersion)("@firebase/app-compat","0.2.7",ut)}()},9681:(mt,be,V)=>{"use strict";V.r(be),V.d(be,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>Ur,_DEFAULT_ENTRY_NAME:()=>Ve,_addComponent:()=>fn,_addOrOverwriteComponent:()=>bt,_apps:()=>nt,_clearComponents:()=>Fn,_components:()=>Ze,_getProvider:()=>et,_registerComponent:()=>_t,_removeServiceInstance:()=>rn,deleteApp:()=>Ei,getApp:()=>Gn,getApps:()=>ii,initializeApp:()=>zi,onLog:()=>at,registerVersion:()=>vr,setLogLevel:()=>Rr});var d=V(5861),$=V(4859),k=V(1877),te=V(2090),ie=V(8766);class oe{constructor(Ee){this.container=Ee}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function ue(Be){return"VERSION"===Be.getComponent()?.type}(rt)){const Et=rt.getImmediate();return`${Et.library}/${Et.version}`}return null}).filter(rt=>rt).join(" ")}}const re="@firebase/app",G=new k.Yd("@firebase/app"),Ve="[DEFAULT]",je={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nt=new Map,Ze=new Map;function fn(Be,Ee){try{Be.container.addComponent(Ee)}catch(rt){G.debug(`Component ${Ee.name} failed to register with FirebaseApp ${Be.name}`,rt)}}function bt(Be,Ee){Be.container.addOrOverwriteComponent(Ee)}function _t(Be){const Ee=Be.name;if(Ze.has(Ee))return G.debug(`There were multiple attempts to register component ${Ee}.`),!1;Ze.set(Ee,Be);for(const rt of nt.values())fn(rt,Be);return!0}function et(Be,Ee){const rt=Be.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),Be.container.getProvider(Ee)}function rn(Be,Ee,rt=Ve){et(Be,Ee).clearInstance(rt)}function Fn(){Ze.clear()}const pn=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class lr{constructor(Ee,rt,Et){this._isDeleted=!1,this._options=Object.assign({},Ee),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=Et,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ee){this._isDeleted=Ee}checkDestroyed(){if(this.isDeleted)throw pn.create("app-deleted",{appName:this._name})}}const Ur="9.19.1";function zi(Be,Ee={}){let rt=Be;"object"!=typeof Ee&&(Ee={name:Ee});const Et=Object.assign({name:Ve,automaticDataCollectionEnabled:!1},Ee),Nt=Et.name;if("string"!=typeof Nt||!Nt)throw pn.create("bad-app-name",{appName:String(Nt)});if(rt||(rt=(0,te.aH)()),!rt)throw pn.create("no-options");const tn=nt.get(Nt);if(tn){if((0,te.vZ)(rt,tn.options)&&(0,te.vZ)(Et,tn.config))return tn;throw pn.create("duplicate-app",{appName:Nt})}const Qn=new $.H0(Nt);for(const H of Ze.values())Qn.addComponent(H);const K=new lr(rt,Et,Qn);return nt.set(Nt,K),K}function Gn(Be=Ve){const Ee=nt.get(Be);if(!Ee&&Be===Ve)return zi();if(!Ee)throw pn.create("no-app",{appName:Be});return Ee}function ii(){return Array.from(nt.values())}function Ei(Be){return bn.apply(this,arguments)}function bn(){return(bn=(0,d.Z)(function*(Be){const Ee=Be.name;nt.has(Ee)&&(nt.delete(Ee),yield Promise.all(Be.container.getProviders().map(rt=>rt.delete())),Be.isDeleted=!0)})).apply(this,arguments)}function vr(Be,Ee,rt){var Et;let Nt=null!==(Et=je[Be])&&void 0!==Et?Et:Be;rt&&(Nt+=`-${rt}`);const tn=Nt.match(/\s|\//),Qn=Ee.match(/\s|\//);if(tn||Qn){const K=[`Unable to register library "${Nt}" with version "${Ee}":`];return tn&&K.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),tn&&Qn&&K.push("and"),Qn&&K.push(`version name "${Ee}" contains illegal characters (whitespace or "/")`),void G.warn(K.join(" "))}_t(new $.wA(`${Nt}-version`,()=>({library:Nt,version:Ee}),"VERSION"))}function at(Be,Ee){if(null!==Be&&"function"!=typeof Be)throw pn.create("invalid-log-argument");(0,k.Am)(Be,Ee)}function Rr(Be){(0,k.Ub)(Be)}const xr="firebase-heartbeat-database",ir=1,qn="firebase-heartbeat-store";let si=null;function Lt(){return si||(si=(0,ie.X3)(xr,ir,{upgrade:(Be,Ee)=>{0===Ee&&Be.createObjectStore(qn)}}).catch(Be=>{throw pn.create("idb-open",{originalErrorMessage:Be.message})})),si}function kt(){return(kt=(0,d.Z)(function*(Be){try{return(yield Lt()).transaction(qn).objectStore(qn).get(Kn(Be))}catch(Ee){if(Ee instanceof te.ZR)G.warn(Ee.message);else{const rt=pn.create("idb-get",{originalErrorMessage:Ee?.message});G.warn(rt.message)}}})).apply(this,arguments)}function Mn(Be,Ee){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,d.Z)(function*(Be,Ee){try{const Et=(yield Lt()).transaction(qn,"readwrite");return yield Et.objectStore(qn).put(Ee,Kn(Be)),Et.done}catch(rt){if(rt instanceof te.ZR)G.warn(rt.message);else{const Et=pn.create("idb-set",{originalErrorMessage:rt?.message});G.warn(Et.message)}}})).apply(this,arguments)}function Kn(Be){return`${Be.name}!${Be.options.appId}`}class xi{constructor(Ee){this.container=Ee,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new Xt(rt),this._heartbeatsCachePromise=this._storage.read().then(Et=>(this._heartbeatsCache=Et,Et))}triggerHeartbeat(){var Ee=this;return(0,d.Z)(function*(){const Et=Ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nt=$t();if(null===Ee._heartbeatsCache&&(Ee._heartbeatsCache=yield Ee._heartbeatsCachePromise),Ee._heartbeatsCache.lastSentHeartbeatDate!==Nt&&!Ee._heartbeatsCache.heartbeats.some(tn=>tn.date===Nt))return Ee._heartbeatsCache.heartbeats.push({date:Nt,agent:Et}),Ee._heartbeatsCache.heartbeats=Ee._heartbeatsCache.heartbeats.filter(tn=>{const Qn=new Date(tn.date).valueOf();return Date.now()-Qn<=2592e6}),Ee._storage.overwrite(Ee._heartbeatsCache)})()}getHeartbeatsHeader(){var Ee=this;return(0,d.Z)(function*(){if(null===Ee._heartbeatsCache&&(yield Ee._heartbeatsCachePromise),null===Ee._heartbeatsCache||0===Ee._heartbeatsCache.heartbeats.length)return"";const rt=$t(),{heartbeatsToSend:Et,unsentEntries:Nt}=function Ni(Be,Ee=1024){const rt=[];let Et=Be.slice();for(const Nt of Be){const tn=rt.find(Qn=>Qn.agent===Nt.agent);if(tn){if(tn.dates.push(Nt.date),Vr(rt)>Ee){tn.dates.pop();break}}else if(rt.push({agent:Nt.agent,dates:[Nt.date]}),Vr(rt)>Ee){rt.pop();break}Et=Et.slice(1)}return{heartbeatsToSend:rt,unsentEntries:Et}}(Ee._heartbeatsCache.heartbeats),tn=(0,te.L)(JSON.stringify({version:2,heartbeats:Et}));return Ee._heartbeatsCache.lastSentHeartbeatDate=rt,Nt.length>0?(Ee._heartbeatsCache.heartbeats=Nt,yield Ee._storage.overwrite(Ee._heartbeatsCache)):(Ee._heartbeatsCache.heartbeats=[],Ee._storage.overwrite(Ee._heartbeatsCache)),tn})()}}function $t(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(Ee){this.app=Ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ee=this;return(0,d.Z)(function*(){return(yield Ee._canUseIndexedDBPromise)&&(yield function yt(Be){return kt.apply(this,arguments)}(Ee.app))||{heartbeats:[]}})()}overwrite(Ee){var rt=this;return(0,d.Z)(function*(){var Et;if(yield rt._canUseIndexedDBPromise){const tn=yield rt.read();return Mn(rt.app,{lastSentHeartbeatDate:null!==(Et=Ee.lastSentHeartbeatDate)&&void 0!==Et?Et:tn.lastSentHeartbeatDate,heartbeats:Ee.heartbeats})}})()}add(Ee){var rt=this;return(0,d.Z)(function*(){var Et;if(yield rt._canUseIndexedDBPromise){const tn=yield rt.read();return Mn(rt.app,{lastSentHeartbeatDate:null!==(Et=Ee.lastSentHeartbeatDate)&&void 0!==Et?Et:tn.lastSentHeartbeatDate,heartbeats:[...tn.heartbeats,...Ee.heartbeats]})}})()}}function Vr(Be){return(0,te.L)(JSON.stringify({version:2,heartbeats:Be})).length}!function Zn(Be){_t(new $.wA("platform-logger",Ee=>new oe(Ee),"PRIVATE")),_t(new $.wA("heartbeat",Ee=>new xi(Ee),"PRIVATE")),vr(re,"0.9.7",Be),vr(re,"0.9.7","esm2017"),vr("fire-js","")}("")},4859:(mt,be,V)=>{"use strict";V.d(be,{H0:()=>re,wA:()=>k,zt:()=>ie});var d=V(5861),$=V(2090);class k{constructor(G,q,Q){this.name=G,this.instanceFactory=q,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const te="[DEFAULT]";class ie{constructor(G,q){this.name=G,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const q=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(q)){const Q=new $.BH;if(this.instancesDeferred.set(q,Q),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:q});Ue&&Q.resolve(Ue)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(G){var q;const Q=this.normalizeInstanceIdentifier(G?.identifier),Ue=null!==(q=G?.optional)&&void 0!==q&&q;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Te){if(Ue)return null;throw Te}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ue(pe){return"EAGER"===pe.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:te})}catch{}for(const[q,Q]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(q);try{const Te=this.getOrInitializeService({instanceIdentifier:Ue});Q.resolve(Te)}catch{}}}}clearInstance(G=te){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,d.Z)(function*(){const q=Array.from(G.instances.values());yield Promise.all([...q.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...q.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=te){return this.instances.has(G)}getOptions(G=te){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:q={}}=G,Q=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:Q,options:q});for(const[Te,qe]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Te)&&qe.resolve(Ue);return Ue}onInit(G,q){var Q;const Ue=this.normalizeInstanceIdentifier(q),Te=null!==(Q=this.onInitCallbacks.get(Ue))&&void 0!==Q?Q:new Set;Te.add(G),this.onInitCallbacks.set(Ue,Te);const qe=this.instances.get(Ue);return qe&&G(qe,Ue),()=>{Te.delete(G)}}invokeOnInitCallbacks(G,q){const Q=this.onInitCallbacks.get(q);if(Q)for(const Ue of Q)try{Ue(G,q)}catch{}}getOrInitializeService({instanceIdentifier:G,options:q={}}){let Q=this.instances.get(G);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=G,pe===te?void 0:pe),options:q}),this.instances.set(G,Q),this.instancesOptions.set(G,q),this.invokeOnInitCallbacks(Q,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,Q)}catch{}var pe;return Q||null}normalizeInstanceIdentifier(G=te){return this.component?this.component.multipleInstances?G:te:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class re{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const q=this.getProvider(G.name);if(q.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);q.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const q=new ie(G,this);return this.providers.set(G,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,be,V)=>{"use strict";V.d(be,{Am:()=>pe,Ub:()=>re,Yd:()=>ue,in:()=>$});const d=[];var $=(()=>{return(G=$||($={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",$;var G})();const k={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},te=$.INFO,ie={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},oe=(G,q,...Q)=>{if(q<G.logLevel)return;const Ue=(new Date).toISOString(),Te=ie[q];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Te](`[${Ue}]  ${G.name}:`,...Q)};class ue{constructor(q){this.name=q,this._logLevel=te,this._logHandler=oe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in $))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?k[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...q),this._logHandler(this,$.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...q),this._logHandler(this,$.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,$.INFO,...q),this._logHandler(this,$.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,$.WARN,...q),this._logHandler(this,$.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...q),this._logHandler(this,$.ERROR,...q)}}function re(G){d.forEach(q=>{q.setLogLevel(G)})}function pe(G,q){for(const Q of d){let Ue=null;q&&q.level&&(Ue=k[q.level]),Q.userLogHandler=null===G?null:(Te,qe,...ut)=>{const ye=ut.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");qe>=(Ue??Te.logLevel)&&G({level:$[qe].toLowerCase(),message:ye,args:ut,type:Te.name})}}}},259:(mt,be,V)=>{"use strict";V.d(be,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=V(9681);(0,d.registerVersion)("firebase","9.19.1","app")},9260:(mt,be,V)=>{"use strict";V.d(be,{Z:()=>d.Z});var d=V(3942);d.Z.registerVersion("firebase","9.19.1","app-compat")},9568:(mt,be,V)=>{"use strict";V.r(be);var d=V(5861),$=V(3942),k=V(3432),te=V(2090),ue=(V(9681),V(1877),V(4859));function re(){return window}const pe=2e3;function q(){return q=(0,d.Z)(function*(O,F,P){var J;const{BuildInfo:fe}=re();(0,k.ar)(F.sessionId,"AuthEvent did not contain a session ID");const st=yield function De(O){return Ce.apply(this,arguments)}(F.sessionId),St={};return(0,k.as)()?St.ibi=fe.packageName:(0,k.at)()?St.apn=fe.packageName:(0,k.au)(O,"operation-not-supported-in-this-environment"),fe.displayName&&(St.appDisplayName=fe.displayName),St.sessionId=st,(0,k.av)(O,P,F.type,void 0,null!==(J=F.eventId)&&void 0!==J?J:void 0,St)}),q.apply(this,arguments)}function Ue(){return(Ue=(0,d.Z)(function*(O){const{BuildInfo:F}=re(),P={};(0,k.as)()?P.iosBundleId=F.packageName:(0,k.at)()?P.androidPackageName=F.packageName:(0,k.au)(O,"operation-not-supported-in-this-environment"),yield(0,k.aw)(O,P)})).apply(this,arguments)}function ut(){return(ut=(0,d.Z)(function*(O,F,P){const{cordova:J}=re();let fe=()=>{};try{yield new Promise((st,St)=>{let xt=null;function Jt(){var Gt;st();const oi=null===(Gt=J.plugins.browsertab)||void 0===Gt?void 0:Gt.close;"function"==typeof oi&&oi(),"function"==typeof P?.close&&P.close()}function At(){xt||(xt=window.setTimeout(()=>{St((0,k.ay)(O,"redirect-cancelled-by-user"))},pe))}function Dn(){"visible"===document?.visibilityState&&At()}F.addPassiveListener(Jt),document.addEventListener("resume",At,!1),(0,k.at)()&&document.addEventListener("visibilitychange",Dn,!1),fe=()=>{F.removePassiveListener(Jt),document.removeEventListener("resume",At,!1),document.removeEventListener("visibilitychange",Dn,!1),xt&&window.clearTimeout(xt)}})}finally{fe()}})).apply(this,arguments)}function Ce(){return(Ce=(0,d.Z)(function*(O){const F=function Oe(O){if((0,k.ar)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const F=new ArrayBuffer(O.length),P=new Uint8Array(F);for(let J=0;J<O.length;J++)P[J]=O.charCodeAt(J);return P}(O),P=yield crypto.subtle.digest("SHA-256",F);return Array.from(new Uint8Array(P)).map(fe=>fe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Me=20;class ke extends k.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(F=>{this.resolveInialized=F})}addPassiveListener(F){this.passiveListeners.add(F)}removePassiveListener(F){this.passiveListeners.delete(F)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(F){return this.resolveInialized(),this.passiveListeners.forEach(P=>P(F)),super.onEvent(F)}initialized(){var F=this;return(0,d.Z)(function*(){yield F.initPromise})()}}function X(O){return de.apply(this,arguments)}function de(){return(de=(0,d.Z)(function*(O){const F=yield $e()._get(Rt(O));return F&&(yield $e()._remove(Rt(O))),F})).apply(this,arguments)}function Ke(){const O=[],F="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let P=0;P<Me;P++){const J=Math.floor(Math.random()*F.length);O.push(F.charAt(J))}return O.join("")}function $e(){return(0,k.aB)(k.b)}function Rt(O){return(0,k.aC)("authEvent",O.config.apiKey,O.name)}function me(O){if(!O?.includes("?"))return{};const[F,...P]=O.split("?");return(0,te.zd)(P.join("?"))}const Ve=class Ne{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aD,this._overrideRedirectResult=k.aE}_initialize(F){var P=this;return(0,d.Z)(function*(){const J=F._key();let fe=P.eventManagers.get(J);return fe||(fe=new ke(F),P.eventManagers.set(J,fe),P.attachCallbackListeners(F,fe)),fe})()}_openPopup(F){(0,k.au)(F,"operation-not-supported-in-this-environment")}_openRedirect(F,P,J,fe){var st=this;return(0,d.Z)(function*(){!function ye(O){var F,P,J,fe,st,St,xt,Jt,At,Dn;const Gt=re();(0,k.az)("function"==typeof(null===(F=Gt?.universalLinks)||void 0===F?void 0:F.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.az)(typeof(null===(P=Gt?.BuildInfo)||void 0===P?void 0:P.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.az)("function"==typeof(null===(st=null===(fe=null===(J=Gt?.cordova)||void 0===J?void 0:J.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===st?void 0:st.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.az)("function"==typeof(null===(Jt=null===(xt=null===(St=Gt?.cordova)||void 0===St?void 0:St.plugins)||void 0===xt?void 0:xt.browsertab)||void 0===Jt?void 0:Jt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.az)("function"==typeof(null===(Dn=null===(At=Gt?.cordova)||void 0===At?void 0:At.InAppBrowser)||void 0===Dn?void 0:Dn.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(F);const St=yield st._initialize(F);yield St.initialized(),St.resetRedirect(),(0,k.aF)(),yield st._originValidation(F);const xt=function Se(O,F,P=null){return{type:F,eventId:P,urlResponse:null,sessionId:Ke(),postBody:null,tenantId:O.tenantId,error:(0,k.ay)(O,"no-auth-event")}}(F,J,fe);yield function He(O,F){return $e()._set(Rt(O),F)}(F,xt);const Jt=yield function G(O,F,P){return q.apply(this,arguments)}(F,xt,P),At=yield function Te(O){const{cordova:F}=re();return new Promise(P=>{F.plugins.browsertab.isAvailable(J=>{let fe=null;J?F.plugins.browsertab.openUrl(O):fe=F.InAppBrowser.open(O,(0,k.ax)()?"_blank":"_system","location=yes"),P(fe)})})}(Jt);return function qe(O,F,P){return ut.apply(this,arguments)}(F,St,At)})()}_isIframeWebStorageSupported(F,P){throw new Error("Method not implemented.")}_originValidation(F){const P=F._key();return this.originValidationPromises[P]||(this.originValidationPromises[P]=function Q(O){return Ue.apply(this,arguments)}(F)),this.originValidationPromises[P]}attachCallbackListeners(F,P){const{universalLinks:J,handleOpenURL:fe,BuildInfo:st}=re(),St=setTimeout((0,d.Z)(function*(){yield X(F),P.onEvent(je())}),500),xt=function(){var Dn=(0,d.Z)(function*(Gt){clearTimeout(St);const oi=yield X(F);let Ml=null;oi&&Gt?.url&&(Ml=function ve(O,F){var P,J;const fe=function le(O){const F=me(O),P=F.link?decodeURIComponent(F.link):void 0,J=me(P).link,fe=F.deep_link_id?decodeURIComponent(F.deep_link_id):void 0;return me(fe).link||fe||J||P||O}(F);if(fe.includes("/__/auth/callback")){const st=me(fe),St=st.firebaseError?function tt(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(st.firebaseError)):null,xt=null===(J=null===(P=St?.code)||void 0===P?void 0:P.split("auth/"))||void 0===J?void 0:J[1],Jt=xt?(0,k.ay)(xt):null;return Jt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Jt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:fe,postBody:null}}return null}(oi,Gt.url)),P.onEvent(Ml||je())});return function(oi){return Dn.apply(this,arguments)}}();typeof J<"u"&&"function"==typeof J.subscribe&&J.subscribe(null,xt);const Jt=fe,At=`${st.packageName.toLowerCase()}://`;re().handleOpenURL=function(){var Dn=(0,d.Z)(function*(Gt){if(Gt.toLowerCase().startsWith(At)&&xt({url:Gt}),"function"==typeof Jt)try{Jt(Gt)}catch(oi){console.error(oi)}});return function(Gt){return Dn.apply(this,arguments)}}()}};function je(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.ay)("no-auth-event")}}const bt=1e3;function _t(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function rn(O=(0,te.z$)()){return!("file:"!==_t()&&"ionic:"!==_t()&&"capacitor:"!==_t()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ur(){try{const O=self.localStorage,F=k.aK();if(O)return O.setItem(F,"1"),O.removeItem(F),!function lr(O=(0,te.z$)()){return function gn(){return(0,te.w1)()&&11===document?.documentMode}()||function pn(O=(0,te.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,te.hl)()}catch{return zi()&&(0,te.hl)()}return!1}function zi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gn(){return(function et(){return"http:"===_t()||"https:"===_t()}()||(0,te.ru)()||rn())&&!function Fn(){return(0,te.b$)()||(0,te.UG)()}()&&Ur()&&!zi()}function ii(){return rn()&&typeof document<"u"}function bn(){return(bn=(0,d.Z)(function*(){return!!ii()&&new Promise(O=>{const F=setTimeout(()=>{O(!1)},bt);document.addEventListener("deviceready",()=>{clearTimeout(F),O(!0)})})})).apply(this,arguments)}const at={LOCAL:"local",NONE:"none",SESSION:"session"},Rr=k.az,xr="persistence";function qn(O){return si.apply(this,arguments)}function si(){return(si=(0,d.Z)(function*(O){yield O._initializationPromise;const F=yt(),P=k.aC(xr,O.config.apiKey,O.name);F&&F.setItem(P,O._getPersistence())})).apply(this,arguments)}function yt(){var O;try{return(null===(O=function vr(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const kt=k.az;class Mn{constructor(){this.browserResolver=k.aB(k.k),this.cordovaResolver=k.aB(Ve),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aD,this._overrideRedirectResult=k.aE}_initialize(F){var P=this;return(0,d.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._initialize(F)})()}_openPopup(F,P,J,fe){var st=this;return(0,d.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openPopup(F,P,J,fe)})()}_openRedirect(F,P,J,fe){var st=this;return(0,d.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openRedirect(F,P,J,fe)})()}_isIframeWebStorageSupported(F,P){this.assertedUnderlyingResolver._isIframeWebStorageSupported(F,P)}_originValidation(F){return this.assertedUnderlyingResolver._originValidation(F)}get _shouldInitProactively(){return ii()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return kt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var F=this;return(0,d.Z)(function*(){if(F.underlyingResolver)return;const P=yield function Ei(){return bn.apply(this,arguments)}();F.underlyingResolver=P?F.cordovaResolver:F.browserResolver})()}}function Rn(O){return O.unwrap()}function wr(O){return xi(O)}function xi(O){const{_tokenResponse:F}=O instanceof te.ZR?O.customData:O;if(!F)return null;if(!(O instanceof te.ZR)&&"temporaryProof"in F&&"phoneNumber"in F)return k.P.credentialFromResult(O);const P=F.providerId;if(!P||P===k.p.PASSWORD)return null;let J;switch(P){case k.p.GOOGLE:J=k.U;break;case k.p.FACEBOOK:J=k.Q;break;case k.p.GITHUB:J=k.V;break;case k.p.TWITTER:J=k.Y;break;default:const{oauthIdToken:fe,oauthAccessToken:st,oauthTokenSecret:St,pendingToken:xt,nonce:Jt}=F;return st||St||fe||xt?xt?P.startsWith("saml.")?k.aN._create(P,xt):k.K._fromParams({providerId:P,signInMethod:P,pendingToken:xt,idToken:fe,accessToken:st}):new k.W(P).credential({idToken:fe,accessToken:st,rawNonce:Jt}):null}return O instanceof te.ZR?J.credentialFromError(O):J.credentialFromResult(O)}function $t(O,F){return F.catch(P=>{throw P instanceof te.ZR&&function ur(O,F){var P;const J=null===(P=F.customData)||void 0===P?void 0:P._tokenResponse;if("auth/multi-factor-auth-required"===F?.code)F.resolver=new Vr(O,k.ap(O,F));else if(J){const fe=xi(F),st=F;fe&&(st.credential=fe,st.tenantId=J.tenantId||void 0,st.email=J.email||void 0,st.phoneNumber=J.phoneNumber||void 0)}}(O,P),P}).then(P=>{const fe=P.user;return{operationType:P.operationType,credential:wr(P),additionalUserInfo:k.an(P),user:Zn.getOrCreate(fe)}})}function Ni(O,F){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,d.Z)(function*(O,F){const P=yield F;return{verificationId:P.verificationId,confirm:J=>$t(O,P.confirm(J))}})).apply(this,arguments)}class Vr{constructor(F,P){this.resolver=P,this.auth=function Kn(O){return O.wrapped()}(F)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(F){return $t(Rn(this.auth),this.resolver.resolveSignIn(F))}}class Zn{constructor(F){this._delegate=F,this.multiFactor=k.aq(F)}static getOrCreate(F){return Zn.USER_MAP.has(F)||Zn.USER_MAP.set(F,new Zn(F)),Zn.USER_MAP.get(F)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(F){return this._delegate.getIdTokenResult(F)}getIdToken(F){return this._delegate.getIdToken(F)}linkAndRetrieveDataWithCredential(F){return this.linkWithCredential(F)}linkWithCredential(F){var P=this;return(0,d.Z)(function*(){return $t(P.auth,k.$(P._delegate,F))})()}linkWithPhoneNumber(F,P){var J=this;return(0,d.Z)(function*(){return Ni(J.auth,k.l(J._delegate,F,P))})()}linkWithPopup(F){var P=this;return(0,d.Z)(function*(){return $t(P.auth,k.d(P._delegate,F,Mn))})()}linkWithRedirect(F){var P=this;return(0,d.Z)(function*(){return yield qn(k.aG(P.auth)),k.g(P._delegate,F,Mn)})()}reauthenticateAndRetrieveDataWithCredential(F){return this.reauthenticateWithCredential(F)}reauthenticateWithCredential(F){var P=this;return(0,d.Z)(function*(){return $t(P.auth,k.a0(P._delegate,F))})()}reauthenticateWithPhoneNumber(F,P){return Ni(this.auth,k.r(this._delegate,F,P))}reauthenticateWithPopup(F){return $t(this.auth,k.e(this._delegate,F,Mn))}reauthenticateWithRedirect(F){var P=this;return(0,d.Z)(function*(){return yield qn(k.aG(P.auth)),k.h(P._delegate,F,Mn)})()}sendEmailVerification(F){return k.ad(this._delegate,F)}unlink(F){var P=this;return(0,d.Z)(function*(){return yield k.am(P._delegate,F),P})()}updateEmail(F){return k.ai(this._delegate,F)}updatePassword(F){return k.aj(this._delegate,F)}updatePhoneNumber(F){return k.u(this._delegate,F)}updateProfile(F){return k.ah(this._delegate,F)}verifyBeforeUpdateEmail(F,P){return k.ae(this._delegate,F,P)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Zn.USER_MAP=new WeakMap;const Be=k.az;let Ee=(()=>{class O{constructor(P,J){if(this.app=P,J.isInitialized())return this._delegate=J.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:fe}=P.options;Be(fe,"invalid-api-key",{appName:P.name}),Be(fe,"invalid-api-key",{appName:P.name});const st=typeof window<"u"?Mn:void 0;this._delegate=J.initialize({options:{persistence:Et(fe,P.name),popupRedirectResolver:st}}),this._delegate._updateErrorMap(k.C),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Zn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(P){this._delegate.languageCode=P}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(P){this._delegate.tenantId=P}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(P,J){k.H(this._delegate,P,J)}applyActionCode(P){return k.a4(this._delegate,P)}checkActionCode(P){return k.a5(this._delegate,P)}confirmPasswordReset(P,J){return k.a3(this._delegate,P,J)}createUserWithEmailAndPassword(P,J){var fe=this;return(0,d.Z)(function*(){return $t(fe._delegate,k.a7(fe._delegate,P,J))})()}fetchProvidersForEmail(P){return this.fetchSignInMethodsForEmail(P)}fetchSignInMethodsForEmail(P){return k.ac(this._delegate,P)}isSignInWithEmailLink(P){return k.aa(this._delegate,P)}getRedirectResult(){var P=this;return(0,d.Z)(function*(){Be(Gn(),P._delegate,"operation-not-supported-in-this-environment");const J=yield k.j(P._delegate,Mn);return J?$t(P._delegate,Promise.resolve(J)):{credential:null,user:null}})()}addFrameworkForLogging(P){!function nt(O,F){(0,k.aG)(O)._logFramework(F)}(this._delegate,P)}onAuthStateChanged(P,J,fe){const{next:st,error:St,complete:xt}=rt(P,J,fe);return this._delegate.onAuthStateChanged(st,St,xt)}onIdTokenChanged(P,J,fe){const{next:st,error:St,complete:xt}=rt(P,J,fe);return this._delegate.onIdTokenChanged(st,St,xt)}sendSignInLinkToEmail(P,J){return k.a9(this._delegate,P,J)}sendPasswordResetEmail(P,J){return k.a2(this._delegate,P,J||void 0)}setPersistence(P){var J=this;return(0,d.Z)(function*(){let fe;switch(function ir(O,F){Rr(Object.values(at).includes(F),O,"invalid-persistence-type"),(0,te.b$)()?Rr(F!==at.SESSION,O,"unsupported-persistence-type"):(0,te.UG)()?Rr(F===at.NONE,O,"unsupported-persistence-type"):zi()?Rr(F===at.NONE||F===at.LOCAL&&(0,te.hl)(),O,"unsupported-persistence-type"):Rr(F===at.NONE||Ur(),O,"unsupported-persistence-type")}(J._delegate,P),P){case at.SESSION:fe=k.a;break;case at.LOCAL:fe=(yield k.aB(k.i)._isAvailable())?k.i:k.b;break;case at.NONE:fe=k.M;break;default:return k.au("argument-error",{appName:J._delegate.name})}return J._delegate.setPersistence(fe)})()}signInAndRetrieveDataWithCredential(P){return this.signInWithCredential(P)}signInAnonymously(){return $t(this._delegate,k.Z(this._delegate))}signInWithCredential(P){return $t(this._delegate,k._(this._delegate,P))}signInWithCustomToken(P){return $t(this._delegate,k.a1(this._delegate,P))}signInWithEmailAndPassword(P,J){return $t(this._delegate,k.a8(this._delegate,P,J))}signInWithEmailLink(P,J){return $t(this._delegate,k.ab(this._delegate,P,J))}signInWithPhoneNumber(P,J){return Ni(this._delegate,k.s(this._delegate,P,J))}signInWithPopup(P){var J=this;return(0,d.Z)(function*(){return Be(Gn(),J._delegate,"operation-not-supported-in-this-environment"),$t(J._delegate,k.c(J._delegate,P,Mn))})()}signInWithRedirect(P){var J=this;return(0,d.Z)(function*(){return Be(Gn(),J._delegate,"operation-not-supported-in-this-environment"),yield qn(J._delegate),k.f(J._delegate,P,Mn)})()}updateCurrentUser(P){return this._delegate.updateCurrentUser(P)}verifyPasswordResetCode(P){return k.a6(this._delegate,P)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=at,O})();function rt(O,F,P){let J=O;"function"!=typeof O&&({next:J,error:F,complete:P}=O);const fe=J;return{next:St=>fe(St&&Zn.getOrCreate(St)),error:F,complete:P}}function Et(O,F){const P=function Lt(O,F){const P=yt();if(!P)return[];const J=k.aC(xr,O,F);switch(P.getItem(J)){case at.NONE:return[k.M];case at.LOCAL:return[k.i,k.a];case at.SESSION:return[k.a];default:return[]}}(O,F);if(typeof self<"u"&&!P.includes(k.i)&&P.push(k.i),typeof window<"u")for(const J of[k.b,k.a])P.includes(J)||P.push(J);return P.includes(k.M)||P.push(k.M),P}class Nt{constructor(){this.providerId="phone",this._delegate=new k.P(Rn($.Z.auth()))}static credential(F,P){return k.P.credential(F,P)}verifyPhoneNumber(F,P){return this._delegate.verifyPhoneNumber(F,P)}unwrap(){return this._delegate}}Nt.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Nt.PROVIDER_ID=k.P.PROVIDER_ID;const tn=k.az;class Qn{constructor(F,P,J=$.Z.app()){var fe;tn(null===(fe=J.options)||void 0===fe?void 0:fe.apiKey,"invalid-api-key",{appName:J.name}),this._delegate=new k.R(F,P,J.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function H(O){O.INTERNAL.registerComponent(new ue.wA("auth-compat",F=>{const P=F.getProvider("app-compat").getImmediate(),J=F.getProvider("auth");return new Ee(P,J)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.N,FacebookAuthProvider:k.Q,GithubAuthProvider:k.V,GoogleAuthProvider:k.U,OAuthProvider:k.W,SAMLAuthProvider:k.X,PhoneAuthProvider:Nt,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:Qn,TwitterAuthProvider:k.Y,Auth:Ee,AuthCredential:k.I,Error:te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.3.7")}($.Z)},8766:(mt,be,V)=>{"use strict";V.d(be,{Lj:()=>Me,X3:()=>Oe});var d=V(5861);const $=(de,ve)=>ve.some(Ke=>de instanceof Ke);let k,te;const ue=new WeakMap,re=new WeakMap,pe=new WeakMap,G=new WeakMap,q=new WeakMap;let Te={get(de,ve,Ke){if(de instanceof IDBTransaction){if("done"===ve)return re.get(de);if("objectStoreNames"===ve)return de.objectStoreNames||pe.get(de);if("store"===ve)return Ke.objectStoreNames[1]?void 0:Ke.objectStore(Ke.objectStoreNames[0])}return De(de[ve])},set:(de,ve,Ke)=>(de[ve]=Ke,!0),has:(de,ve)=>de instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in de};function ye(de){return"function"==typeof de?function ut(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function oe(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...ve){return de.apply(Ce(this),ve),De(ue.get(this))}:function(...ve){return De(de.apply(Ce(this),ve))}:function(ve,...Ke){const $e=de.call(Ce(this),ve,...Ke);return pe.set($e,ve.sort?ve.sort():[ve]),De($e)}}(de):(de instanceof IDBTransaction&&function Ue(de){if(re.has(de))return;const ve=new Promise((Ke,$e)=>{const Rt=()=>{de.removeEventListener("complete",tt),de.removeEventListener("error",le),de.removeEventListener("abort",le)},tt=()=>{Ke(),Rt()},le=()=>{$e(de.error||new DOMException("AbortError","AbortError")),Rt()};de.addEventListener("complete",tt),de.addEventListener("error",le),de.addEventListener("abort",le)});re.set(de,ve)}(de),$(de,function ie(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,Te):de)}function De(de){if(de instanceof IDBRequest)return function Q(de){const ve=new Promise((Ke,$e)=>{const Rt=()=>{de.removeEventListener("success",tt),de.removeEventListener("error",le)},tt=()=>{Ke(De(de.result)),Rt()},le=()=>{$e(de.error),Rt()};de.addEventListener("success",tt),de.addEventListener("error",le)});return ve.then(Ke=>{Ke instanceof IDBCursor&&ue.set(Ke,de)}).catch(()=>{}),q.set(ve,de),ve}(de);if(G.has(de))return G.get(de);const ve=ye(de);return ve!==de&&(G.set(de,ve),q.set(ve,de)),ve}const Ce=de=>q.get(de);function Oe(de,ve,{blocked:Ke,upgrade:$e,blocking:Rt,terminated:tt}={}){const le=indexedDB.open(de,ve),me=De(le);return $e&&le.addEventListener("upgradeneeded",Ie=>{$e(De(le.result),Ie.oldVersion,Ie.newVersion,De(le.transaction))}),Ke&&le.addEventListener("blocked",()=>Ke()),me.then(Ie=>{tt&&Ie.addEventListener("close",()=>tt()),Rt&&Ie.addEventListener("versionchange",()=>Rt())}).catch(()=>{}),me}function Me(de,{blocked:ve}={}){const Ke=indexedDB.deleteDatabase(de);return ve&&Ke.addEventListener("blocked",()=>ve()),De(Ke).then(()=>{})}const ke=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],He=new Map;function X(de,ve){if(!(de instanceof IDBDatabase)||ve in de||"string"!=typeof ve)return;if(He.get(ve))return He.get(ve);const Ke=ve.replace(/FromIndex$/,""),$e=ve!==Ke,Rt=Se.includes(Ke);if(!(Ke in($e?IDBIndex:IDBObjectStore).prototype)||!Rt&&!ke.includes(Ke))return;const tt=function(){var le=(0,d.Z)(function*(me,...Ie){const Ne=this.transaction(me,Rt?"readwrite":"readonly");let Ve=Ne.store;return $e&&(Ve=Ve.index(Ie.shift())),(yield Promise.all([Ve[Ke](...Ie),Rt&&Ne.done]))[0]});return function(Ie){return le.apply(this,arguments)}}();return He.set(ve,tt),tt}!function qe(de){Te=de(Te)}(de=>({...de,get:(ve,Ke,$e)=>X(ve,Ke)||de.get(ve,Ke,$e),has:(ve,Ke)=>!!X(ve,Ke)||de.has(ve,Ke)}))},5861:(mt,be,V)=>{"use strict";function d(k,te,ie,oe,ue,re,pe){try{var G=k[re](pe),q=G.value}catch(Q){return void ie(Q)}G.done?te(q):Promise.resolve(q).then(oe,ue)}function $(k){return function(){var te=this,ie=arguments;return new Promise(function(oe,ue){var re=k.apply(te,ie);function pe(q){d(re,oe,ue,pe,G,"next",q)}function G(q){d(re,oe,ue,pe,G,"throw",q)}pe(void 0)})}}V.d(be,{Z:()=>$})}},mt=>{mt(mt.s=6186)}]);